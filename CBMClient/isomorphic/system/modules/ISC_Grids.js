/*
 * Isomorphic SmartClient
 * Version v10.1p_2015-12-31 (2015-12-31)
 * Copyright(c) 1998 and beyond Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

if(window.isc&&window.isc.module_Core&&!window.isc.module_Grids){isc.module_Grids=1;isc._moduleStart=isc._Grids_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Grids load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v10.1p_2015-12-31/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v10.1p_2015-12-31/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.ClassFactory.defineInterface("List");isc.List.addInterfaceMethods({init:function(){if(!this.data)this.data=[]},first:function(){return this.get(0)},last:function(){return this.get(this.getLength()-1)},indexOf:function(_1,_2,_3){if(_2==null)_2=0;if(_3==null)_3=this.getLength()-1;for(var i=_2;i<=_3;i++){if(this.get(i)==_1)return i}
return-1},lastIndexOf:function(_1,_2,_3){if(_2==null)_2=this.getLength()-1;if(_3==null)_3=0;for(var i=_2;i>=_3;i--)
if(this.get(i)==_1)return i;return-1},findNextIndex:function(_1,_2,_3,_4,_5){var _6=this.getLength();if(_1==null)_1=0;else if(_1>=_6)return-1;if(_4==null)_4=_6-1;if(_2==null)return-1;if(isc.isA.String(_2)){for(var i=_1;i<=_4;i++){var _8=this.get(i,_5);if(_8&&_8[_2]==_3)return i}
return-1}else if(isc.isA.Function(_2)){var _9=_2,_10=_3;for(var i=_1;i<=_4;i++){_3=this.get(i,_5);if(_9.call(_10,_3,i,this))return i}
return-1}else{return this.findNextMatch(_2,_1,_4)}},findAll:function(_1,_2){if(_1==null)return null;if(isc.isA.String(_1)){var _3=null,l=this.getLength();for(var i=0;i<l;i++){var _6=this.get(i);if(_6&&_6[_1]==_2){if(_3==null)_3=[];_3.add(_6)}}
return _3}else{return this.findAllMatches(_1)}},getRange:function(_1,_2){if(_2==null)_2=this.getLength()-1;var _3=[];for(var i=_1;i<_2;i++){_3[_3.length]=this.get(i)}
return _3},getCachedRow:function(_1){return this.get(_1)},duplicate:function(){return this.getClass().create().addList(this)},add:function(_1,_2){var _3;if(_2!==_3){return this.addAt(_1,_2)}
this.addAt(_1,this.getLength());return _1},setLength:function(_1){this.$gz();if(_1>this.getLength()){var _2;while(_1>this.getLength())this.add(_2)}else{while(_1<this.getLength())this.removeAt(this.getLength()-1)}
this.$g0()},addListAt:function(_1,_2){this.$gz();var _3=_1.getLength();for(var i=0;i<_3;i++){this.addAt(_1.get(i),_2+i)}
this.$g0();return _1},remove:function(_1){var _2=this.indexOf(_1);if(_2==-1)return false;this.$gz();var _3=this.getLength();for(var i=_2;i<_3;i++)this.set(i,this.get(i+1));this.setLength(_3-1);this.$g0();return true},removeList:function(_1){if(_1==null)return null;this.$gz();var _2=false;for(var i=0;i<this.getLength();i++){var _4=this.get(i);if(_1.contains(_4)){_2=true;this.removeAt(i);i--}}
this.$g0();return _1},sort:function(_1){var _2=this.getRange(0,this.getLength());_2.sort(_1);for(var i=0;i<_2.length;i++)this.set(i,_2[i]);return this},getProperty:function(_1){var _2=[];for(var i=0;i<this.getLength();i++){var _4=this.get(i);_2[i]=_4!=null?_4[_1]:null}
return _2},sortByProperty:function(_1,_2,_3,_4){var _5=this.getRange(0,this.getLength());_5.sortByProperty(_1,_2,_3,_4);for(var i=0;i<_5.length;i++)this.set(i,_5[i]);return this},dataChanged:function(){if(this.onDataChanged)this.onDataChanged()}});isc.$86b=function(){var _1=["containsSubstring","containsAllSubstring","intersectDates","intersectSubstring","isEmpty","contains","containsAll","intersect","equals","getItems","addList","getValueMap","removeEvery","$gz","$g0","$g2","getItem","setItem","removeItem","clearAll","find","findIndex","findAllIndices","findNextMatch","findAllMatches","findByKeys","size","subList","addAll","removeAll","clear"];var _2={};for(var i=0;i<_1.length;i++){var _4=_1[i];_2[_4]=Array.prototype[_4]}
isc.List.addInterfaceMethods(_2)}
isc.$86b();isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$86c="List";isc.B.push(isc.A.List=function isc_isA_List(_1){if(_1==null)return false;if(isc.isA.Array(_1))return true;return _1.isA&&_1.isA(this.$86c)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Tree",null,"List");isc.A=isc.Tree.getPrototype();isc.A.getProperty=isc.List.getInstanceProperty("getProperty");isc.A=isc.Tree;isc.A.FOLDERS_AND_LEAVES=null;isc.A.FOLDERS_ONLY="folders";isc.A.LEAVES_ONLY="leaves";isc.A.UNLOADED="unloaded";isc.A.LOADING="loading";isc.A.FOLDERS_LOADED="foldersLoaded";isc.A.LOADED="loaded";isc.A.LOADED_PARTIAL_CHILDREN="loadedPartialChildren";isc.A.PARENT="parent";isc.A.CHILDREN="children";isc.A.STRICT="strict";isc.A.KEEP_PARENTS="keepParents";isc.A.autoID=0;isc.A=isc.Tree.getPrototype();isc.A.modelType="children";isc.A.isFolderProperty="isFolder";isc.A.reportCollisions=true;isc.A.autoSetupParentLinks=true;isc.A.pathDelim="/";isc.A.treeProperty="$153";isc.A.nameProperty="name";isc.A.titleProperty="title";isc.A.childrenProperty="children";isc.A.cacheOpenList=true;isc.A.discardParentlessNodes=false;isc.A.indexByLevel=false;isc.A.showOpenIcon=false;isc.A.showDropIcon=false;isc.A.sortDirection="ascending";isc.A.showRoot=false;isc.A.autoOpenRoot=true;isc.A.separateFolders=false;isc.A.sortFoldersBeforeLeaves=true;isc.A.defaultNodeTitle="Untitled";isc.A.defaultLoadState=isc.Tree.UNLOADED;isc.A=isc.Tree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$86d=["autoOpenRoot","childrenProperty","defaultIsFolder","defaultNodeTitle","discardParentlessNodes","idField","isFolderProperty","modelType","nameProperty","parentIdField","pathDelim","reportCollisions","rootValue","showRoot","titleProperty","isMultiDSTree","dataSource","operation"];isc.A.$86e="openProperty";isc.A.$86f="treeLinking";isc.A.$86g=0;isc.A.$86h=1;isc.A.loadBatchSize=50;isc.B.push(isc.A.init=function isc_Tree_init(){this.setupProperties();this.setRoot(this.root||this.makeRoot());if(this.loadOnInit&&this.loadBatchSize>=0)this.loadSubtree(null,null,true)},isc.A.setupProperties=function isc_Tree_setupProperties(){if(this.ID==null||window[this.ID]!=this)isc.ClassFactory.addGlobalID(this);if(!this.parentProperty)this.parentProperty="_parent_"+this.ID;if(!this.isFolderProperty)this.isFolderProperty="_isFolder_"+this.ID;if(this.idField==null)this.idField="id";if(this.parentIdField==null)this.parentIdField="parentId";if(!this.openProperty)this.openProperty="_isOpen_"+this.ID;if(this.indexByLevel)this.$86i=[];this.$86j="_cachedLength_"+this.ID;this.$86k="_recursionCount_"+this.ID},isc.A.$86l=function isc_Tree__copyKnownProperties(_1){var _2;for(var i=0;i<this.$86d.length;i++){var _4=this.$86d[i],_5=this[_4];if(_5!==_2){_1[_4]=_5}}
var _5=this[this.$86e];if(_5!==_2&&!_5.startsWith("_isOpen_")){_1[this.$86e]=_5}},isc.A.duplicate=function isc_Tree_duplicate(_1,_2){var _3=isc.Tree.create();this.$86l(_3);_3.setRoot(this.getCleanNodeData(this.getRoot(),false,false,_2));if(_1){var _4=this.getOpenList(null,isc.Tree.FOLDERS_AND_LEAVES,null,null,null,null,true);_4=this.getCleanNodeData(_4,false,false,_2);_3.$86m(_4)}
return _3},isc.A.destroy=function isc_Tree_destroy(){this.destroyed=true;if(this.$86n!=null)this.$86n.call(window);isc.ClassFactory.dereferenceGlobalID(this);this.Super("destroy",arguments)},isc.A.makeRoot=function isc_Tree_makeRoot(){var _1={};var _2;if(this.idField!==_2)_1[this.idField]=this.rootValue;_1[this.treeProperty]=this.ID;return _1},isc.A.convertToFolder=function isc_Tree_convertToFolder(_1){var _2=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),_3=_2&&this.getLoadState(_1),_4=this.isFolder(_1),_5=!_4&&_1!=this.root,_6,_7;if(_5){_7=this.getParent(_1);_5=(_7!=null);if(_5){_6=this.$86o(_1,_7)}}
_1[this.isFolderProperty]=true;if(_2){var _8=this.getLoadState(_1),_9=(_3===isc.Tree.LOADED||_3===isc.Tree.LOADED_PARTIAL_CHILDREN),_10=(_8===isc.Tree.LOADED||_8===isc.Tree.LOADED_PARTIAL_CHILDREN);if(_9!=_10){var _7=this.getParent(_1);if(isc.isA.Boolean(_1[this.$86p])){this.$86q(_1,null,_7,false)}}}
var _11=_1[this.$86j];if(_11==null)_11=0;_1[this.$86j]=_11+this.$86r(_1,_4,true);if(_5){return this.$86o(_1,_7)-_6}else{return 0}},isc.A.makeNode=function isc_Tree_makeNode(_1,_2){var _3=this.find(_1);if(_3){if(_2){var _4=this.convertToFolder(_3);if(_4!=0&&_3!=this.root){this.$86s(this.getParent(_3),_4)}}
return _3}
var _5=_1.split(this.pathDelim);var _6=this.getRoot()[this.nameProperty];if(_6.endsWith(this.pathDelim)){_6=_6.substring(0,_6.length-this.pathDelim.length)}
if(_5[0]!=_6)_5.addAt(_6,0);var _7=_5[_5.length-1],_8=(_7!=isc.emptyString);if(!_8){_5.length=_5.length-1;_7=_5[_5.length-1]}
var _9=_5.slice(0,(_5.length-1)).join(this.pathDelim)+this.pathDelim;var _10=this.find(_9);if(_10==null){_10=this.find(_9.substring(0,_9.length-this.pathDelim.length))}
if(!_10){_10=this.makeNode(_9,_2)}else if(!this.isFolder(_10)){var _4=this.convertToFolder(_10);if(_4!=0&&_10!=this.root){this.$86s(this.getParent(_10),_4)}}
var _3={};_3[this.nameProperty]=_7;if(!_8){var _4=this.convertToFolder(_3);if(_4!=0&&_3!=this.root){this.$86s(this.getParent(_3),_4)}}
return this.$86t(_3,_10)},isc.A.isRoot=function isc_Tree_isRoot(_1){return this.root==_1},isc.A.setupParentLinks=function isc_Tree_setupParentLinks(_1){if(!_1)_1=this.root;return this.$86u(_1,true,false,false,false)},isc.A.$86u=function isc_Tree__traverse(_1,_2,_3,_4,_5){if(_2&&_1[this.idField]!=null){this.nodeIndex[_1[this.idField]]=_1}
var _6=_1[this.childrenProperty];if(_6){if(_2){this.setLoadState(_1,isc.Tree.LOADED)}
if(!(isc.isAn.Array(_6)||isc.isA.ResultSet(_6))){_6=_1[this.childrenProperty]=[_6]}}
if(_6){var _7=isc.isAn.Array(_6),_8=!_7&&isc.isA.ResultSet(_6);var _9=(_8?_6.$86v():_6.getLength());for(var i=0;i<_9;++i){var _11=(_7?_6[i]:_6.getCachedRow(i));if(!_11)continue;if(_2){if(_11[this.parentIdField]==null&&_1[this.idField]!=null)
_11[this.parentIdField]=_1[this.idField];_11[this.parentProperty]=_1;this.$86w(_11,_1)}
if(this.isFolder(_11)){this.$86u(_11,_2,_3,_4,true)}else if(_2&&_11[this.idField]!=null){this.nodeIndex[_11[this.idField]]=_11}
if(_3){_11[this.$86j]=this.$86x(_11)}}}
if(_4&&_6){_6=_1[this.childrenProperty]=this.$86y(_1,_6,true);if(isc.isA.ResultSet(_6)){if(!(_6.lengthIsKnown()&&_6.allMatchingRowsCached())){this.$86q(_1,false,null,false)}}}
if(_3&&!_5){_1[this.$86j]=this.$86x(_1)}},isc.A.connectByParentID=function isc_Tree_connectByParentID(_1,_2,_3,_4,_5){this.$86m(_1,_2,_3,_4,_5)},isc.A.connectByParentId=function isc_Tree_connectByParentId(_1,_2,_3,_4,_5){this.$86m(_1,_2,_3,_4,_5)},isc.A.linkNodes=function isc_Tree_linkNodes(_1,_2,_3,_4,_5,_6,_7){return this.$86m(_1,_2,_3,_4,_5,_6,_7)},isc.A.$86m=function isc_Tree__linkNodes(_1,_2,_3,_4,_5,_6,_7){if(this.modelType=="fields"){this.connectByFields(_1);return}
_1=_1||this.data;_2=(_2!=null)?_2:this.idField;_3=(_3!=null)?_3:this.parentIdField;_4=(_4!=null)?_4:this.rootValue;var _8=[];_8.addList(_1);var _9={};for(var i=0;i<_8.length;i++){var _11=_8[i][_2];if(_11!=null)_9[_11]=_8[i]}
for(var i=0;i<_8.length;i++){var _12=_8[i];if(this.nodeIndex[_12[_2]]==_12)continue;if(_12==null)continue;var _13=_12[_3],_14=_13!=null?_9[_13]:null,_15=[];while(_14!=null){if(_14)_15.add(_14);_13=_14[_3];_14=_13!=null&&_13!=_12[_3]?_9[_13]:null}
for(var _16=_15.length;_16--;){if(this.logIsDebugEnabled(this.$86f)){this.logDebug("linkNodes running - adding interlinked parents to the tree in  reverse hierarchical order -- currently adding node with id:"+_15[_16][_2],this.$86f)}
this.$86z(_15[_16],_2,_3,_6,_4);delete _9[_15[_16][_2]]}
this.$86z(_12,_2,_3,_6,_4);delete _9[_12[_2]]}
this.$860(true);if(!_7)this.dataChanged()},isc.A.connectByParentID=function isc_Tree_connectByParentID(_1,_2,_3,_4,_5){this.$86m(_1,_2,_3,_4,_5)},isc.A.connectByParentId=function isc_Tree_connectByParentId(_1,_2,_3,_4,_5){this.$86m(_1,_2,_3,_4,_5)},isc.A.$86z=function isc_Tree__linkNode(_1,_2,_3,_4,_5){var _6=this.logIsDebugEnabled(this.$86f);var _7=_1[_2],_8=_1[_3],_9,_10=(_5==null),_11=(_8==null||_8==-1||_8===isc.emptyString),_12=this.nodeIndex[_8];if(_12){if(_6){this.logDebug("found parent "+_12[_2]+" for child "+_1[_2],this.$86f)}
this.$861(_1,_12)}else if(!_10&&_8==_5){if(_6){this.logDebug("root node: "+_1[_2],this.$86f)}
this.$861(_1,this.root)}else{if(!_11&&this.discardParentlessNodes){this.logWarn("Couldn't find parent: "+_8+" for node with id:"+_7,this.$86f)}else{var _13=_4||this.root;if(_6){this.logDebug("child:"+_1[_2]+(_11?" has no explicit parent ":(" unable to find specified parent:"+_8))+"- linking to default node "+_13[_2],this.$86f)}
this.$861(_1,_13)}}},isc.A.connectByFields=function isc_Tree_connectByFields(_1){if(!_1)_1=this.data;for(var i=0;i<_1.length;i++){this.addNodeByFields(_1[i])}},isc.A.addNodeByFields=function isc_Tree_addNodeByFields(_1){var _2=this.root;for(var i=0;i<this.fieldOrder.length;i++){var _4=this.fieldOrder[i],_5=_1[_4];var _6=isc.isA.String(_5)?_5:_5+isc.emptyString,_7=this.findChildNum(_2,_6),_8;if(_7!=-1){_8=this.getChildren(_2).get(_7)}else{_8={};_8[this.nameProperty]=_6;this.$86t(_8,_2);var _9=this.convertToFolder(_8);if(_9!=0){this.$86s(_2,_9)}}
_2=_8}
this.$86t(_1,_2)},isc.A.getRoot=function isc_Tree_getRoot(){return this.root},isc.A.setRoot=function isc_Tree_setRoot(_1,_2){this.root=_1;var _3=(_1&&isc.endsWith(this.parentProperty,this.ID));if(_3)_1[this.parentProperty]=null;var _4=!(_3&&this.root[this.$86j]!=null);this.root[this.treeProperty]=this.ID;if(this.rootValue==null)this.rootValue=this.root[this.idField];var _5=this.root[this.nameProperty];if(_5==null||_5==isc.emptyString){var _6=!_4&&this.isFolder(this.root);this.root[this.nameProperty]=this.pathDelim;if(!_4){this.root[this.$86j]+=this.$86r(this.root,_6,this.isFolder(this.root))}}
if(_4){var _7=this.isFolder(this.root);this.root[this.$86j]=((_7&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)||(!_7&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)?1:0)}
var _8=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_8){if(this.root[this.$86p]==null){this.root[this.$86p]=true;this.$86q(this.root,null,null,true)}}
if(!this.isFolder(this.root)){this.convertToFolder(this.root)}
this.nodeIndex={};if("parent"==this.modelType){if(this.data){this.$862=true;this.$86m(null,null,null,null,null,null,true);delete this.$862}}else if("fields"==this.modelType){if(this.data)this.connectByFields()}else if("children"==this.modelType){this.$86u(this.root,this.autoSetupParentLinks,true,false,false);if(this.data){var _9=this.data;this.data=null;this.$863(_9,this.root)}}else{this.logWarn("Unsupported modelType: "+this.modelType)}
this.setupParentLinks();if(_2!==false&&(this.autoOpenRoot||_2)){this.openFolder(_1)}
this.$86u(this.root,true,false,_8,false);this.$860();this.dataChanged()},isc.A.getCleanNodeData=function isc_Tree_getCleanNodeData(_1,_2,_3,_4){return isc.Tree.getCleanNodeData(_1,_2,true,_4,this)},isc.A.getName=function isc_Tree_getName(_1){var _2=isc.$ba;if(!_1)return _2;var _3=_1[this.nameProperty];if(_3==null)_3=_1[this.idField];if(_3==null){if(!this.isDescendantOf(_1,this.root)&&_1!=this.root)return null;if(!this.$864)this.$864=isc.Tree.autoID+++"_";_3=this.$864+this.$86g++;_1._autoAssignedName=true}
if(!isc.isA.String(_3))_3=_2+_3;_1[this.nameProperty]=_3;return _3},isc.A.getTitle=function isc_Tree_getTitle(_1){if(!_1)return null;if(_1[this.titleProperty]!=null)return _1[this.titleProperty];var _2=_1[this.nameProperty];if(_2==null)_2=this.defaultNodeTitle;return(isc.endsWith(_2,this.pathDelim)?_2.substring(0,_2.length-this.pathDelim.length):_2)},isc.A.getPath=function isc_Tree_getPath(_1){var _2=this.getParent(_1);if(_2==null)return this.getName(_1);var _3=this.getName(_2);return this.getPath(_2)+(_3==this.pathDelim?isc.emptyString:this.pathDelim)+this.getName(_1)},isc.A.getParentPath=function isc_Tree_getParentPath(_1){var _2=this.getName(_1),_3=this.getPath(_1);return _3.substring(0,_3.length-_2.length-this.pathDelim.length)},isc.A.getParent=function isc_Tree_getParent(_1){if(_1==null)return null;return _1[this.parentProperty]},isc.A.getParents=function isc_Tree_getParents(_1){var _2=[],_3=this.getParent(_1);while(_3){_2.add(_3);if(_3==this.root)break;_3=this.getParent(_3)}
return _2},isc.A.getLevel=function isc_Tree_getLevel(_1){return this.getParents(_1).length},isc.A.$865=function isc_Tree__getFollowingSiblingLevels(_1){var _2=[],_3=this.getParents(_1),_4=_3.length;for(var i=0;i<_4;i++){var _6=this.getChildren(_3[i]),_7=(isc.isA.ResultSet(_6)?_6.$86v():_6.getLength());if(_6.indexOf(_1)!=_7-1){_2.add(_4-i)}
_1=_3[i]}
return _2},isc.A.isFolder=function isc_Tree_isFolder(_1){if(_1==null)return false;var _2=_1[this.isFolderProperty];if(_2!=null)return _2;if(_1[this.childrenProperty])return true;var _3=this.getName(_1);if(_3==null)return false;return isc.endsWith(_3,this.pathDelim)},isc.A.isLeaf=function isc_Tree_isLeaf(_1){return!this.isFolder(_1)},isc.A.isFirst=function isc_Tree_isFirst(_1){var _2=this.getParent(_1);if(!_2)return true;var _3=this.getChildren(_2,this.opendisplayNodeType,this.$86n,this.sortDirection,null,this.$866);if(isc.isA.ResultSet(_3)){return(_3.$86v()>0&&_3.getCachedRow(0)==_1)}else{return(_3.first()==_1)}},isc.A.isLast=function isc_Tree_isLast(_1){var _2=this.getParent(_1);if(!_2)return true;var _3=this.getChildren(_2,this.opendisplayNodeType,this.$86n,this.sortDirection,null,this.$866);if(isc.isA.ResultSet(_3)){var _4=_3.$86v();return(_4>0&&_3.getCachedRow(_4-1)==_1)}else{return(_3.last()==_1)}},isc.A.findById=function isc_Tree_findById(_1){return this.find(this.idField,_1)},isc.A.find=function isc_Tree_find(_1,_2){var _3;if(_2===_3&&isc.isA.String(_1))return this.$867(_1);if(_2!==_3){if(_1==this.idField)return this.nodeIndex[_2];if(this.root[_1]==_2)return this.root;return this.getDescendants(_3,_3,_3,true).find(_1,_2)}else{var _4=this.getDescendants(_3,_3,_3,true);_4.add(this.root);return _4.find(_1)}},isc.A.findAll=function isc_Tree_findAll(_1,_2){var _3;return this.getDescendants(_3,_3,_3,true).findAll(_1,_2)},isc.A.$867=function isc_Tree__findByPath(_1){if(_1==this.pathDelim)return this.root;var _2=this.getPath(this.root);if(_1==_2)return this.root;var _3=this.root,_4=0,_5=this.pathDelim.length;if(isc.startsWith(_1,_2)){_4=_2.length}else if(isc.startsWith(_1,this.pathDelim)){_4+=_5}
while(true){var _6=_1.indexOf(this.pathDelim,_4);if(_6==_4){_4+=_5;continue}
var _7=(_6!=-1),_8=_1.substring(_4,_7?_6:_1.length),_9=this.findChildNum(_3,_8);if(_9==-1)return null;_3=_3[this.childrenProperty].getCachedRow(_9);if(!_7)return _3;_4=_6+_5;if(_4==_1.length)return _3}},isc.A.findChildNum=function isc_Tree_findChildNum(_1,_2){var _3=this.getChildren(_1);if(_3==null){return-1}
if(_2==null)return-1;var _4=(isc.isA.ResultSet(_3)?_3.$86v():_3.getLength()),_5=isc.endsWith(_2,this.pathDelim),_6=this.pathDelim.length;for(var i=0;i<_4;i++){var _8=_3.getCachedRow(i);if(_8!=null){var _9=this.getName(_8),_10=_9.length-_2.length;if(_10==0&&_9==_2)return i;if(_10==_6){if(isc.startsWith(_9,_2)&&isc.endsWith(_9,this.pathDelim)&&!_5)
{return i}}else if(_5&&_10==-_6){if(isc.startsWith(_2,_9))return i}}}
return-1},isc.A.getChildren=function isc_Tree_getChildren(_1,_2,_3,_4,_5,_6,_7,_8,_9){if(!_9&&_3==null&&this.$86n==null&&this.separateFolders)
{if(this.$166!=null)this.setSort(this.$166);else this.sortByProperty();if(!this.$86n)this.$868();_3=this.$86n}
if(_1==null)_1=this.root;if(this.isLeaf(_1))return null;if(_1[this.childrenProperty]==null){if(_7)return null;var _10=[];_1[this.childrenProperty]=_10;return _10}
var _11=isc.ResultTree&&isc.isA.ResultTree(this)&&this.isPaged(),_12=_1[this.childrenProperty],_13;if(_5){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$86v():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){if(this.fireCallback(_5,"node,parent,tree",[_16,_1,this]))
{_13[_13.length]=_16}}}
_12=_13}
if(_2==isc.Tree.FOLDERS_ONLY){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$86v():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){var _17=this.isFolder(_16);if(_17&&_8){var c=_16[this.childrenProperty];_17=!(c!=null&&c.isEmpty())}
if(_17){_13[_13.length]=_16}}}}else if(_2==isc.Tree.LEAVES_ONLY){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$86v():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){var _19=this.isLeaf(_16);if(!_19&&_8){var c=_16[this.childrenProperty];_19=(c!=null&&c.isEmpty())}
if(_19){_13[_13.length]=_16}}}}else{_13=_12}
if(this.isSubsetSortDirty(_13)&&(_3||(!_11||!isc.isA.ResultSet(_13))&&_9==false))
{var _20=this.$166?this.$166.getProperty("property"):[];var _21=_3===this.$86n;if(this.$166&&_3&&(!_21||!_11)){var _22=null,_23=null;if(isc.Browser.isFirefox&&_21){_22=this.$869;_23=this.$87a}
for(var _24=this.$166.length;_24--;){var _25=this.$166[_24];if(!_25.normalizer){_25.normalizer=_3;_25.$m5=(Array.shouldSortAscending(_25.direction)?_22:_23)}}}
var _26=!this.$87b?null:(isc.isAn.Array(this.$87b)?this.$87b:[this.$87b]);if(!_26||this.alwaysSortGroupHeaders||(!_26.contains(_20[0])&&_1!=this.getRoot())||(_26.contains(_20[0]))){if(this.$166){if(_11&&isc.isA.ResultSet(_13)){_13=_13.getAllVisibleRows()||[]}
if(_1.groupMembers){var _27=(this.$166.find("property",_1.groupName)!=null);var _28=_1==this.getRoot();_27=_27||_28;if(_27){_13.map(function(_34){if(_34.$17b){if(_1.groupValue&&!_34[_1.groupName]&&_28){_34[_1.groupName]=_1.groupValue}
if(!_34[_34.groupName]){_34[_34.groupName]=_34.groupValue}}})}}
var _29=_13.findAll(this.$87c,true)||[];if(_29.length>0)_13.removeList(_29);_13.setSort(this.$166);this.markSubsetAsSorted(_13);if(_29.length>0){var _30=[];for(var i=0;i<_29.length;){if(_29[i]==null)break;var _31=[],_32=_29[i],_33=_32[this.$87d];if(_33==null){_30.add(_32);i++;continue}else{do{_31.add(_32);_32=_29[i+1];i++}while(_32&&_32[this.$87d]==_33);_13.addListAt(_31,_13.indexOf(_33)+1)}}
if(_30.length>0){_13.addListAt(_30,_13.length)}}}}}
return _13},isc.A.getChildrenResultSet=function isc_Tree_getChildrenResultSet(_1){var _2=this.getChildren(_1);return(isc.isA.ResultSet(_2)?_2:null)},isc.A.getFolders=function isc_Tree_getFolders(_1,_2,_3,_4,_5){var _6=this.getChildren(_1,isc.Tree.FOLDERS_ONLY,_2,_3,_4,_5);return _6},isc.A.getLeaves=function isc_Tree_getLeaves(_1,_2,_3,_4,_5){var _6=this.getChildren(_1,isc.Tree.LEAVES_ONLY,_2,_3,_4,_5);return _6},isc.A.getLevelNodes=function isc_Tree_getLevelNodes(_1,_2){if(this.indexByLevel&&(_2==null||_2==this.getRoot())){return this.$86i[_1]||[]}else{if(!_2)_2=this.getRoot();var _3=this.getChildren(_2);if(_1==0){if(isc.isA.ResultSet(_3)){return _3.getAllLoadedRows()}else{return _3}}
var _4=[];if(_3){var _5=(isc.isA.ResultSet(_3)?_3.$86v():_3.getLength());for(var i=0;i<_5;++i){var _7=_3.getCachedRow(i),_8=(_7!=null&&this.getLevelNodes(_1-1,_7));if(_8)_4.addList(_8)}}
return _4}},isc.A.getDepth=function isc_Tree_getDepth(){if(this.$86i)return this.$86i.length;return null},isc.A.hasChildren=function isc_Tree_hasChildren(_1,_2){var _3=this.getChildren(_1,_2);return(_3!=null&&!_3.isEmpty())},isc.A.hasFolders=function isc_Tree_hasFolders(_1){return this.hasChildren(_1,isc.Tree.FOLDERS_ONLY)},isc.A.hasLeaves=function isc_Tree_hasLeaves(_1){return this.hasChildren(_1,isc.Tree.LEAVES_ONLY)},isc.A.isDescendantOf=function isc_Tree_isDescendantOf(_1,_2){if(_1==_2)return false;var _3=_1;while(_3!=null){if(_3==_2)return true;_3=_3[this.parentProperty]}
return false},isc.A.getDescendants=function isc_Tree_getDescendants(_1,_2,_3,_4){if(!_1)_1=this.root;var _5=[];if(!_3)_3=isc.Class.RET_TRUE;if(this.isLeaf(_1))return _5;if(!_4&&this.getLoadState(_1)!=isc.Tree.LOADED){return _5}
var _6=this.getChildren(_1);if(!_6){return _5}
var _7=(isc.isA.ResultSet(_6)?_6.$86v():_6.getLength());for(var i=0;i<_7;++i){var _9=_6.getCachedRow(i);if(_9==null){}else if(this.isFolder(_9)){if(_2!=isc.Tree.LEAVES_ONLY&&_3(_9)){_5[_5.length]=_9}
_5=_5.concat(this.getDescendants(_9,_2,_3,_4))}else{if(_2!=isc.Tree.FOLDERS_ONLY&&_3(_9)){_5[_5.length]=_9}}}
return _5},isc.A.getDescendantFolders=function isc_Tree_getDescendantFolders(_1,_2){return this.getDescendants(_1,isc.Tree.FOLDERS_ONLY,_2)},isc.A.getDescendantLeaves=function isc_Tree_getDescendantLeaves(_1,_2){return this.getDescendants(_1,isc.Tree.LEAVES_ONLY,_2)},isc.A.dataChanged=function isc_Tree_dataChanged(){},isc.A.add=function isc_Tree_add(_1,_2,_3){return this.$86t(_1,_2,_3)},isc.A.$86t=function isc_Tree__add(_1,_2,_3){if(_2==null&&this.modelType==isc.Tree.PARENT){var _4=_1[this.parentIdField];if(_4!=null)_2=this.findById(_4)}
if(isc.isA.String(_2)){_2=this.find(_2)}else if(!this.getParent(_2)&&_2!==this.getRoot()){isc.logWarn('Tree.add(): specified parent node:'+this.echo(_2)+' is not in the tree, returning');return null}
if(!_2){var _5=this.getParentPath(_1);if(_5)_2=this.find(_5);if(!_2)return null}
var _6=_2[this.childrenProperty];if(_6)this.markSubsetSortDirty(_6);this.$861(_1,_2,_3);this.$860(true);this.dataChanged();return _1},isc.A.$87e=function isc_Tree__reportCollision(_1){if(this.reportCollisions){this.logWarn("Adding node to tree with id property set to:"+_1+". A node with this ID is already present in this Tree - that node will be replaced. Note that this warning may be disabled by setting the reportCollisions attribute to false.")}},isc.A.$861=function isc_Tree___add(_1,_2,_3){var _4=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());var _5={};_2[this.$86k]=1+(_2[this.$86k]||0);this.$87f(_1,_2,true,_5);var _6=_5.deltaParentLength,_7=_5.grandParent,_8=_5.origParentLength,_9=_5.children;if(_3==null||_3>_9.length){_9.add(_1)}else{_9.addAt(_1,_3)}
this.$87g(_1,_2,_3,_5);var _10=(_4?this.$86y(_1,_5.grandChildren,false):_5.grandChildren);if(_4){var _11=(_2[this.canReturnOpenSubfoldersProperty]!=null),_12=(_11?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders);if(!_12&&this.isOpen(_1)&&_10!=null&&!_10.isEmpty())
{this.logWarn("Adding the open folder node '"+this.getPath(_1)+"' as a child of the parent node '"+this.getPath(_2)+"' is contradictory to the setting of the "+(_11?"'"+this.canReturnOpenSubfoldersProperty+"' property of the parent node.":"'canReturnOpenFolders' property of the tree."))}}
var _13=0;if(_4&&isc.isA.ResultSet(_10)){if(!(_10.lengthIsKnown()&&_10.allMatchingRowsCached())){this.$86q(_1,false,_2,false)}}else if(_10!=null){if(!isc.isAn.Array(_10)){this.$861(_10,_1)}else if(_10.length>0){this.$87h(_10,_1)}
this.setLoadState(_1,isc.Tree.LOADED)}
if((--_2[this.$86k])==0){delete _2[this.$86k];if(_7){_6+=(this.$86o(_2,_7)-_8);this.$86s(_7,_6)}}},isc.A.$87i=function isc_Tree__removeCollision(_1){var _2=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_2){var _3=this.getParent(_1),_4=(_3!=null?this.getChildren(_3):null);if(isc.isA.ResultSet(_4)){var j=_4.indexOf(_1);if(j!=-1){_4.fillCacheData([null],j)}
return}}
this.$87j(_1)},isc.A.$87k=function isc_Tree__findCollision(_1){var _2=_1[this.idField];if(_2!=null&&this.modelType==isc.Tree.PARENT){var _3=this.findById(_2);if(_3){return _3}}
return null},isc.A.$87f=function isc_Tree__preAdd(_1,_2,_3,_4){this.getName(_1);var _5=_4.deltaParentLength=this.convertToFolder(_2);var _6=_4.grandParent=(_2!=this.root&&this.getParent(_2)),_7=_4.origParentLength=(_6&&this.$86o(_2,_6));var _8=this.$87k(_1);if(_8){var _9=_8[this.idField];this.$87e(_9);if(_3){this.$87i(_8)}}
var _10=_2[this.childrenProperty];if(!_10)_10=_2[this.childrenProperty]=[];_4.children=_10;var _11=_4.childrenResultSet=isc.isA.ResultSet(_10);if(_10!=null&&!isc.isAn.Array(_10)&&!_11){_2[this.childrenProperty]=_10=[_10]}
var _12=this.idField
_1[this.parentIdField]=_2[_12];_1[this.parentProperty]=_2;delete _1.$87l},isc.A.$87g=function isc_Tree__postAdd(_1,_2,_3,_4){var _5=this.idField;_1[this.treeProperty]=this.ID;if(_1[_5]!=null)this.nodeIndex[_1[_5]]=_1;if(!_4.childrenResultSet){this.setLoadState(_2,isc.Tree.LOADED)}
this.$86w(_1,_2,_3);var _6=this.isFolder(_1);_1[this.$86j]=(this.openDisplayNodeType!=(_6?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0);var _7=_4.grandChildren=_1[this.childrenProperty],_8;if(_7!=null){_1[this.childrenProperty]=[];_8=this.$86o(_1,_2)}else{_8=this.$86o(_1,_2);var _9=this.isFolder(_1),_10=_1[this.isFolderProperty];if(_10!=null&&!isc.isA.Boolean(_10)){_10=isc.booleanValue(_10,true)}
if(_10==null&&this.defaultIsFolder)_10=true;if(_10&&!_9){_8+=this.convertToFolder(_1)}
_1[this.isFolderProperty]=_10}
_2[this.$86j]+=_8},isc.A.$86w=function isc_Tree__addToLevelCache(_1,_2,_3){if(!this.indexByLevel)return;var _4=this.getLevel(_2);if(!this.$86i[_4])this.$86i[_4]=[];var _5=this.$86i[_4];if(_5.length==0){if(!isc.isAn.Array(_1)){_5.push(_1)}else{_5.concat(_1)}}else{if(!isc.isAn.Array(_1)){if(_5.contains(_1))return}else{var _6=[];for(var j=0;j<_1.length;j++){if(!_5.contains(_1[j])){_6.push(_1[j])}}}
var _8=false,_9=0,i=0;for(i;i<_5.length;i++){if(this.getParent(_5[i])==_2){_8=true}else if(_8){break}else{continue}
if(_9===_3){break}
_9++}
if(!isc.isAn.Array(_1)){_5.splice(i,0,_1)}else{if(i==0){this.$86i[_4]=_6.concat(_5)}else if(i==_5.length){this.$86i[_4]=_5.concat(_6)}else{this.$86i[_4]=_5.slice(0,i).concat(_6,_5.slice(i))}}}},isc.A.addList=function isc_Tree_addList(_1,_2,_3){return this.$863(_1,_2,_3)},isc.A.$863=function isc_Tree__addList(_1,_2,_3){if(isc.isA.String(_2))_2=this.find(_2);if(!_2)return null;var _4=_2[this.childrenProperty];if(_4)this.markSubsetSortDirty(_4);this.$87h(_1,_2,_3);if(!this.$87m){this.$860(true);this.dataChanged()}
return _1},isc.A.$87h=function isc_Tree___addList(_1,_2,_3){var _4=(isc.isA.ResultSet(_1)?_1.$86v():_1.getLength());for(var i=0;i<_4;++i){var _6=_1.getCachedRow(i);if(_6!=null){this.$861(_6,_2,_3!=null?(_3+i):null)}}},isc.A.move=function isc_Tree_move(_1,_2,_3){return this.$87n(_1,_2,_3)},isc.A.$87n=function isc_Tree__move(_1,_2,_3){this.moveList([_1],_2,_3)},isc.A.moveBefore=function isc_Tree_moveBefore(_1,_2){this.moveListBefore([_1],_2)},isc.A.moveListBefore=function isc_Tree_moveListBefore(_1,_2){var _3=this.getParent(_2);var _4=this.getChildren(_3),_5=_4.indexOf(_2),_6=0;for(var i=0;i<_5;i++){if(_1.contains(_4[i])){_6+=1}}
this.moveList(_1,_3,_5-_6)},isc.A.moveList=function isc_Tree_moveList(_1,_2,_3){for(var i=_1.length,_5=false;i--;){var _6=_1[i];if(_6==_2||this.isDescendantOf(_2,_6)){if(!_5){_5=true;_1=_1.duplicate()}
this.logWarn("Tree.moveList():  Specified node '"+this.getPath(_6)+"' is an ancestor of the new parent node '"+this.getPath(_2)+"' and therefore cannot be made a child of that parent.  The specified node will remain where it is.");_1.removeAt(i)}}
if(_1.length==0){return}
this.$87m=true;this.$87o(_1);var _7=this.getChildren(_2);if(_7){var _8=(isc.isA.ResultSet(_7)?_7.$86v():_7.getLength());if(_3>_8){_3=_8}}
this.$863(_1,_2,_3);delete this.$87m;this.$860(true);this.dataChanged()},isc.A.remove=function isc_Tree_remove(_1,_2){return this.$87j(_1,_2)},isc.A.$87j=function isc_Tree__remove(_1,_2){var _3=this.getParent(_1);if(!_3)return false;var _4=this.getChildren(_3);if(_4){var _5=_4.indexOf(_1);if(_5!=-1){this.$87p(_1,_3,_4,_5);if(!_2){this.$860(true);this.dataChanged()}
return true}}
return false},isc.A.$87p=function isc_Tree___remove(_1,_2,_3,_4){var _5=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());_2[this.$86k]=1+(_2[this.$86k]||0);var _6={};this.$87q(_1,_2,_6);var _7=_6.deltaLength,_8=_6.grandParent,_9=_6.origParentLength;_3.remove(_1);this.$87r(_1,_2,_6);var _8=_6.grandParent;if((--_2[this.$86k])==0){delete _2[this.$86k];if(_8){var _10=(this.$86o(_2,_8)-_9);this.$86s(_8,_10)}}},isc.A.$87q=function isc_Tree__preRemove(_1,_2,_3){this.$87s(_1);_3.deltaLength=-this.$86o(_1,_2);var _4=_3.grandParent=(_2!=this.root&&this.getParent(_2));_3.origParentLength=_4&&this.$86o(_2,_4);this.$87t(_1);delete _1[this.parentProperty];delete _1[this.treeProperty]});isc.evalBoundary;isc.B.push(isc.A.$87r=function isc_Tree__postRemove(_1,_2,_3){var _4=_3.deltaLength;_2[this.$86j]+=_4},isc.A.$87s=function isc_Tree__removeFromNodeIndex(_1){delete this.nodeIndex[_1[this.idField]];var _2=this.getChildren(_1,null,null,null,null,null,true);if(!_2)return;var _3=(isc.isA.ResultSet(_2)?_2.$86v():_2.getLength());for(var i=0;i<_3;++i){var _5=_2.getCachedRow(i);if(_5!=null){this.$87s(_5)}}},isc.A.removeList=function isc_Tree_removeList(_1){return this.$87o(_1)},isc.A.$87o=function isc_Tree__removeList(_1){var _2=false;var i=(isc.isA.ResultSet(_1)?_1.$86v():_1.getLength());while(i--){var _4=_1.getCachedRow(i);if(_4!=null){if(this.$87j(_4,true)){_2=true}}}
if(_2&&!this.$87m){this.$860(true);this.dataChanged()}
return _2},isc.A.$87t=function isc_Tree__removeFromLevelCache(_1,_2){if(!this.indexByLevel)return;_2=_2||this.getLevel(_1)-1;var _3=this.getChildren(_1);if(_3){var _4=(isc.isA.ResultSet(_3)?_3.$86v():_3.getLength());for(var i=0;i<_4;++i){var _6=_3.getCachedRow(i);if(_6!=null){this.$87t(_6,_2+1)}}}
if(this.$86i[_2]){var _7=this.$86i[_2];for(var i=0;i<_7.length;i++){if(_7[i]==_1){_7.splice(i,1);break}}}},isc.A.getLoadState=function isc_Tree_getLoadState(_1){if(!_1)return null;if(this.isLeaf(_1))return isc.Tree.LOADED;if(!_1.$87l)return this.defaultLoadState;return _1.$87l},isc.A.isLoaded=function isc_Tree_isLoaded(_1){var _2=this.getLoadState(_1);return(_2==isc.Tree.LOADED||_2==isc.Tree.LOADING||_2==isc.Tree.LOADED_PARTIAL_CHILDREN)},isc.A.isLoading=function isc_Tree_isLoading(_1){return this.getLoadState(_1)==isc.Tree.LOADING},isc.A.allChildrenLoaded=function isc_Tree_allChildrenLoaded(_1){var _2=this.getLoadState(_1);return(_2==isc.Tree.LOADED)},isc.A.setLoadState=function isc_Tree_setLoadState(_1,_2){var _3=this.getLoadState(_1);_1.$87l=_2;_2=this.getLoadState(_1);var _4=(_3===isc.Tree.LOADED||_3===isc.Tree.LOADED_PARTIAL_CHILDREN),_5=(_2===isc.Tree.LOADED||_2===isc.Tree.LOADED_PARTIAL_CHILDREN),_6=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_6&&(_4!=_5)){var _7=this.getParent(_1);if(isc.isA.Boolean(_1[this.$86p])){this.$86q(_1,null,_7,false)}}},isc.A.loadRootChildren=function isc_Tree_loadRootChildren(_1){this.loadChildren(this.root,_1)},isc.A.loadChildren=function isc_Tree_loadChildren(_1,_2){if(!_1){_1=this.root}
var _3=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_3){this.$87u(_1,0,this.resultSize,_2)}else{this.$87u(_1,null,null,_2)}},isc.A.$87u=function isc_Tree__loadChildren(_1,_2,_3,_4){this.setLoadState(_1,isc.Tree.LOADED);if(_4){this.fireCallback(_4,"node",[_1],this)}},isc.A.unloadChildren=function isc_Tree_unloadChildren(_1,_2,_3){if(_1==null||this.isLeaf(_1)){return}
var _4,_5,_6;if(_2==isc.Tree.LEAVES_ONLY){_4=this.getLeaves(_1);_5=this.getFolders(_1);_6=isc.Tree.FOLDERS_LOADED}else{_4=_1[this.childrenProperty];_5=[];_6=isc.Tree.UNLOADED}
var _7,_8;if(_4){_7=(_1!=this.root&&this.getParent(_1));_8=_7&&this.$86o(_1,_7);for(var i=0;i<_4.getLength();i++){var _10=_4.get(i);if(!isc.isAn.Object(_10)||_10[this.idField]==null)continue;this.$87s(_10);_1[this.$86j]-=this.$86o(_10,_1)}}
_1[this.childrenProperty]=_5;this.setLoadState(_1,_3?isc.Tree.LOADED:_6);if(_4&&_7){var _11=(this.$86o(_1,_7)-_8);this.$86s(_7,_11)}
this.$860(true);this.dataChanged()},isc.A.reloadChildren=function isc_Tree_reloadChildren(_1,_2){this.unloadChildren(_1,_2);this.loadChildren(_1,_2)},isc.A.removeChildren=function isc_Tree_removeChildren(_1,_2){this.unloadChildren(_1,_2,true)},isc.A.setChildren=function isc_Tree_setChildren(_1,_2){this.removeChildren(_1);this.addList(_2||[],_1)},isc.A.$860=function isc_Tree__clearNodeCache(_1){if(_1)this.$87v=null;this.$87w=null},isc.A.isOpen=function isc_Tree_isOpen(_1){return _1!=null&&!!_1[this.openProperty]},isc.A.getOpenFolders=function isc_Tree_getOpenFolders(_1){if(_1==null)_1=this.root;var _2=this.openProperty;var _3=this.getDescendantFolders(_1,function(_1){return _1[_2]});if(this.isOpen(_1))_3.add(_1);return _3},isc.A.getOpenFolderPaths=function isc_Tree_getOpenFolderPaths(_1){var _2=this.getOpenFolders(_1);for(var i=0;i<_2.length;i++){_2[i]=this.getPath(_2[i])}
return _2},isc.A.changeDataVisibility=function(node,newState,callback){if(this.isLeaf(node)){if(callback){this.fireCallback(callback,"node",[node],this)}
return false}
var state=node[this.openProperty],closedToOpen=!state&&newState,openToClosed=state&&!newState;if(closedToOpen||openToClosed){var parent=(node!=this.root&&this.getParent(node))||null,prevLength=parent&&this.$86o(node,parent),newLength=(this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY?1:0);node[this.openProperty]=newState;if(closedToOpen){var childrenInOpenList=this.getChildren(node,isc.Tree.FOLDERS_AND_LEAVES,null,this.sortDirection,this.openListCriteria,this.$866,true,true,true),loadingMarker=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null);if(childrenInOpenList==null)childrenInOpenList=[];var i=(isc.isA.ResultSet(childrenInOpenList)?childrenInOpenList.$86v():childrenInOpenList.getLength());var pagedResultTree=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),knownLengthNulls=pagedResultTree;if(pagedResultTree){var openSubfoldersAllowed=(node[this.canReturnOpenSubfoldersProperty]!=null?node[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),defaultChildLength=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);knownLengthNulls=!(openSubfoldersAllowed||defaultChildLength==0)}
while(i--){var child=childrenInOpenList.getCachedRow(i);if(child!=null&&child!=loadingMarker){newLength+=this.$86o(child,node)}else if(knownLengthNulls){++newLength}}}
var prevCachedLength=node[this.$86j];node[this.$86j]=newLength;if(parent){var deltaLength=this.$86o(node,parent)-prevLength;this.$86s(parent,deltaLength)}
var affectsOpenListCache=(this.$87w!=null&&parent!=null&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY&&(closedToOpen?newLength>prevCachedLength:newLength<prevCachedLength)&&this.$87x(node,parent));for(var n=node,p=parent;p!=null&&affectsOpenListCache;){n=p;p=this.getParent(p);affectsOpenListCache=(p==null||this.$87x(n,p))}
if(parent==null){this.$860(false)}else if(affectsOpenListCache){var loadingMarker=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),foldersInOpenList=(this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY),displayNodeType=(this.openDisplayNodeType==isc.Tree.FOLDERS_ONLY?isc.Tree.FOLDERS_ONLY:isc.Tree.FOLDERS_AND_LEAVES),openListIndex=(foldersInOpenList&&this.showRoot?1:0);for(var n=node,p=parent;p!=null;){var children=this.getChildren(p,displayNodeType,this.$86n,this.sortDirection,this.openListCriteria,this.$866,true);if(children==null)children=[];var length=(isc.ResultSet!=null&&isc.isA.ResultSet(children)?children.$86v():children.getLength());for(var i=0;i<length;++i){var child=children.getCachedRow(i);if(child==n){if(foldersInOpenList){++openListIndex}
i=length}else if(!(child==null||child==loadingMarker)){openListIndex+=this.$86o(child,p)}}
n=p;p=this.getParent(p)}
if(closedToOpen){var args=this.getOpenList(node,this.openDisplayNodeType,this.$86n,this.sortDirection,this.openListCriteria,this.$866,false);if(foldersInOpenList){args[0]=0;args.unshift(openListIndex)}else{args.unshift(openListIndex,0)}
this.$87w.splice.apply(this.$87w,args)}else{this.$87w.splice(openListIndex,prevCachedLength-newLength)}}}else{node[this.openProperty]=newState}
if(newState&&!this.isLoaded(node)){this.loadChildren(node,callback)}else if(callback){this.fireCallback(callback,"node",[node],this)}},isc.A.toggleFolder=function isc_Tree_toggleFolder(_1){this.changeDataVisibility(_1,!this.isOpen(_1))},isc.A.openFolder=function isc_Tree_openFolder(_1,_2){if(_1==null)_1=this.root;if(!this.isOpen(_1)){this.changeDataVisibility(_1,true,_2)}else if(_2){this.fireCallback(_2,"node",[_1],this)}},isc.A.openFolders=function isc_Tree_openFolders(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)continue;if(isc.isA.String(_3))_3=this.find(_3);if(_3!=null){this.openFolder(_3)}}},isc.A.closeFolder=function isc_Tree_closeFolder(_1){if(this.isOpen(_1)){this.changeDataVisibility(_1,false)}},isc.A.closeFolders=function isc_Tree_closeFolders(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)continue;if(isc.isA.String(_3))_3=this.find(_3);if(_3!=null){this.closeFolder(_3)}}},isc.A.openAll=function isc_Tree_openAll(_1){if(!_1)_1=this.root;if(_1==this.root){this.$860(false)}
var _2=this.getDescendants(_1,isc.Tree.FOLDERS_ONLY);for(var i=0,_4=_2.length;i<_4;i++){if(!this.isOpen(_2[i])){this.changeDataVisibility(_2[i],true)}}
this.changeDataVisibility(_1,true)},isc.A.closeAll=function isc_Tree_closeAll(_1){if(!_1)_1=this.root;if(_1==this.root){this.$860(false)}
var _2=this.getDescendants(_1,isc.Tree.FOLDERS_ONLY);for(var i=0,_4=_2.length;i<_4;i++){if(this.isOpen(_2[i])){this.changeDataVisibility(_2[i],false)}}
if(!(_1==this.root&&this.showRoot==false))this.changeDataVisibility(_1,false)},isc.A.setOpenDisplayNodeType=function isc_Tree_setOpenDisplayNodeType(_1){var _2=this.openDisplayNodeType;this.openDisplayNodeType=_1;if(_2!=_1){this.$860(true)}},isc.A.setOpenListCriteria=function isc_Tree_setOpenListCriteria(_1){var _2=this.openListCriteria;this.openListCriteria=_1;if(_2!=_1){this.$860(true)}},isc.A.setSortProp=function isc_Tree_setSortProp(_1){var _2=this.sortProp;this.sortProp=_1;if(_2!=_1){this.$860(true)}},isc.A.setSortDirection=function isc_Tree_setSortDirection(_1){var _2=this.sortDirection;this.sortDirection=_1;if(_2!=_1){this.$860(true)}},isc.A.setShowRoot=function isc_Tree_setShowRoot(_1){var _2=this.showRoot;this.showRoot=_1;if(this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY){if(!_2&&_1){if(this.$87v!=null){this.$87v.unshift(this.root)}
if(this.$87w!=null){this.$87w.unshift(this.root)}}else if(_2&&!_1){if(this.$87v!=null){this.$87v.shift()}
if(this.$87w!=null){this.$87w.shift()}}}},isc.A.setSeparateFolders=function isc_Tree_setSeparateFolders(_1){var _2=this.separateFolders;this.separateFolders=_1;if(_2?!_1:_1){this.$860(true)}},isc.A.setSortFoldersBeforeLeaves=function isc_Tree_setSortFoldersBeforeLeaves(_1){var _2=this.sortFoldersBeforeLeaves;this.sortFoldersBeforeLeaves=_1;if(_2?!_1:_1){this.$860(true)}},isc.A.getOpenList=function isc_Tree_getOpenList(_1,_2,_3,_4,_5,_6,_7,_8){if(!_1)_1=this.root;if(_8)_3=null;else if(_3==null)_3=this.$86n;if(_4==null)_4=this.sortDirection;if(_6==null)_6=this.$866;if(this.isLeaf(_1)){if(_1==this.root)return[];return null}
var _9=[];if(_2!=isc.Tree.LEAVES_ONLY&&(_1!=this.root||this.showRoot)){_9[_9.length]=_1}
if(!_7&&!this.isOpen(_1)||this.hideLoadingNodes&&this.isLoading(_1)){return _9}
var _10=this.getChildren(_1,isc.Tree.FOLDERS_AND_LEAVES,_3,_4,_5,_6,false,false,_8);var _11=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),_12=(isc.ResultSet!=null&&isc.isA.ResultSet(_10)?_10.$86v():_10.getLength());for(var i=0;i<_12;++i){var _14=_10.getCachedRow(i);if(_14==null||_14==_11){continue}
var _15=_14[this.childrenProperty];if(_15&&!_15.isEmpty()){_9=_9.concat(this.getOpenList(_14,_2,_3,_4,_5,_6,_7,_8))}else{if(_2!=isc.Tree.FOLDERS_ONLY){_9[_9.length]=_14}}}
return _9},isc.A.$87y=function isc_Tree__getOpenListAsync(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12){var _13=_1,_14=false,_15,_16,_17,i,_19;if(_12==null){if(!_1)_13=_1=this.root;if(_3==null)_3=this.$86n;if(_4==null)_4=this.sortDirection;if(_6==null)_6=this.$866;_15=[];if(this.isLeaf(_1)){var _20=(_1==this.root?[]:null);_11.call(_8,_20);return}
_16=[];_17=[];_12={list:_15,node:_1,indexStack:_16,childrenStack:_17}}else{_15=_12.list;_1=_12.node;_16=_12.indexStack;_17=_12.childrenStack;i=_16.last();_19=_17.last()}
for(var _21=0;!_14&&_21<_10;++_21){if(_1!=null){if(this.isLeaf(_1)){_1=null;continue}
if(_2!=isc.Tree.LEAVES_ONLY&&(_1!=this.root||this.showRoot)){_15[_15.length]=_1}
if(!_7&&!this.isOpen(_1)){_1=null;continue}
i=0;_19=this.getChildren(_1,_2,_3,_4,_5,_6);_16.push(i);_17.push(_19)}
_1=null;var _22=false,_23=(isc.isA.ResultSet(_19)?_19.$86v():_19.getLength());for(;!_22&&i<_23&&_21<_10;++i){var _24=_19.getCachedRow(i);if(_24==null){continue}
var _25=_24[this.childrenProperty];if(_25&&!_25.isEmpty()){_22=true;_1=_12.node=_24;continue}else{if(_2!=isc.Tree.FOLDERS_ONLY){_15[_15.length]=_24}
++_21}}
_16[_16.length-1]=i;if(!_22&&i>=_23){if(_16.length>1){_16.pop();_17.pop();i=_16.last();_19=_17.last()}else{_14=true}}}
if(_14){_11.call(_8,_15)}else{_12.node=_1;_8[_9]=this.delayCall("$87y",[_13,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12],0)}},isc.A.$87z=function isc_Tree__getOpenList(){if(!this.$87w||!this.cacheOpenList){this.$87w=this.getOpenList(this.root,this.openDisplayNodeType,this.$86n,this.sortDirection,this.openListCriteria)}
return this.$87w},isc.A.getNodeList=function isc_Tree_getNodeList(_1,_2){if(_1&&(_2!=true||(this.$87w&&this.cacheOpenList))){return this.$87z()}else if(_2){return this.getOpenList(this.root,this.openDisplayNodeType,null,null,this.openListCriteria,null,(_1!=true),_2)}else if(!this.$87v||!this.cacheAllList){this.$87v=this.getAllNodes(this.root)}
return this.$87v},isc.A.$870=function isc_Tree__getNodeListAsync(_1,_2,_3,_4){if(!this.$87v||!this.cacheAllList){var _5=this;this.$871(this.root,_1,_2,_3,function(_6){_5.$87v=_6;_4.call(_1,_6)})}else{return this.$87v}},isc.A.getAllNodes=function isc_Tree_getAllNodes(_1){return this.getOpenList(_1,null,null,null,null,null,true)},isc.A.$871=function isc_Tree__getAllNodesAsync(_1,_2,_3,_4,_5){this.$87y(_1,null,null,null,null,null,true,_2,_3,_4,_5)},isc.A.getLength=function isc_Tree_getLength(){var _1=(this.root[this.$86j]-(!this.showRoot&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY?1:0));return _1},isc.A.$872=function isc_Tree__getLengthAsync(_1,_2,_3,_4){_4.call(_1,this.getLength())},isc.A.get=function isc_Tree_get(_1){return this.$87z()[_1]},isc.A.getCachedRow=function isc_Tree_getCachedRow(_1){return this.get(_1)},isc.A.getRange=function isc_Tree_getRange(_1,_2){if(!(0<=_1&&_1<_2))return[];return this.$87z().slice(_1,_2)},isc.A.indexOf=function isc_Tree_indexOf(_1,_2,_3){return this.$87z().indexOf(_1,_2,_3)},isc.A.lastIndexOf=function isc_Tree_lastIndexOf(_1,_2,_3){return this.$87z().lastIndexOf(_1,_2,_3)},isc.A.getAllItems=function isc_Tree_getAllItems(){return this.$87z()},isc.A.sortByProperty=function isc_Tree_sortByProperty(_1,_2,_3,_4){if(!_1&&this.separateFolders==false){if(this.sortProp)_1=this.sortProp;else _1=this.titleProperty}
if(!_2)_2=this.sortDirection;this.setSort([{property:_1,direction:(isc.isA.String(_2)?_2:(_2==true)?"ascending":"descending"),normalizer:_3,context:_4}])},isc.A.getSort=function isc_Tree_getSort(){return this.$166},isc.A.isSubsetSortDirty=function isc_Tree_isSubsetSortDirty(_1){return this.$86h!=_1.$86h},isc.A.markSubsetSortDirty=function isc_Tree_markSubsetSortDirty(_1){delete _1.$86h},isc.A.markSubsetAsSorted=function isc_Tree_markSubsetAsSorted(_1){_1.$86h=this.$86h},isc.A.setSort=function isc_Tree_setSort(_1){this.$86h++;if(!_1||!_1.length){if(this.sortProp){var _2=this.sortDirection;_1=[{property:this.sortProp,direction:(isc.isA.String(_2)?_2:(_2==true)?"ascending":"descending")}]}}else{var _3=[];var _4=this.dataSource?isc.DS.getDataSource(this.dataSource):null;for(var i=0;i<_1.length;i++){var _6=_1[i];if(_6){if(_6.context&&!isc.isA.String(_6.context)){var _7,_8=_4?_4.getField(_6.property):null,_9=_6.context.getField(_6.property)||_8;var _10=_9&&_9.displayField;if(_10===_7)_10=_8&&_8.displayField;var _11=_9&&_9.sortByDisplayField;if(_11===_7)_11=_8&&_8.sortByDisplayField;if(_10&&(_11!=false)){var _12=(_9&&_9.optionDataSource)||(_8&&_8.optionDataSource);if(_12){_12=isc.DataSource.getDataSource(_9.optionDataSource)}
if(!_12||_12==isc.DataSource.getDataSource(this.dataSource)){this.logInfo("Field:"+_9.name+" has displayField:"+_10+" (with optionDataSource:"+_12+"). Sorting by displayField. Set field.sortByDisplayField to false to disable this.","sorting");_6.owningField=_6.property;if(!_6.sortByField){_6.property=_9.displayField}else{_6.sortByProperty=_9.displayField}}}}
_3.add(isc.addProperties({},_6))}}
_1=_3}
this.$166=_1;this.$860(true);this.$868();this.$866=_1&&_1.length>0?_1[0].context:null;this.dataChanged()},isc.A.$868=function isc_Tree__makeOpenNormalizer(){var _1=this,_2=this.separateFolders!=false,_3=this.$166,_4=this.titleProperty;var _5,_6;if(this.sortFoldersBeforeLeaves){_5="0:";_6="1:"}else{_5="1:";_6="0:"}
_3.removeEmpty();if(_3.isEmpty()){this.$86n=isc.Class.NO_OP;return}
var _7=_3.getProperty("property");if((!_2||_7.length>1||!!_7[0])&&!_7.contains(_4))
{_7.add(_4)}
this.$86n=function(_19,_20){if(_1==null||_1.destroyed){_1=null;return}
var _8="";if(_2){_8+=(_1.isFolder(_19)?_5:_6)}
for(var i=0;i<_7.length;++i){var _10=_7[i];if(!_10)continue;var _11=_10==_4;var _12=_11?_1.getTitle(_19):_19[_10];if(_12==null)continue;if(isc.isA.Number(_12)){if(_12>0){_12="1"+_12.stringify(12,true)}else{_12=999999999999+_12;_12="0"+_12.stringify(12,true)}}else if(isc.isA.Date(_12)){_12=_12.getTime()}
if(_11){_8+=String(_12).toLowerCase()+":"}else{_8+=_12+":"}}
return _8};if(isc.Browser.isFirefox){this.$869=function(_19,_20){if(_19==null||_20==null){return Array.compareAscending(_19,_20)}
var m=_19.length,n=_20.length;if(m==0||n==0){return Array.compareAscending(_19,_20)}
var i=0,j=_19.indexOf(":",i),k=0,l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n;for(;;){var _18=Array.compareAscending(_19.substring(i,j),_20.substring(k,l));if(_18!=0){return _18}else{i=j+1;k=l+1;if(i>=m){if(k>=n){return 0}else{return-1}}else if(k>=n){return 1}else{j=_19.indexOf(":",i);l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n}}}};this.$87a=function(_19,_20){if(_19==null||_20==null){return Array.compareDescending(_19,_20)}
var m=_19.length,n=_20.length;if(m==0||n==0){return Array.compareDescending(_19,_20)}
var i=0,j=_19.indexOf(":",i),k=0,l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n;for(;;){var _18=Array.compareDescending(_19.substring(i,j),_20.substring(k,l));if(_18!=0){return _18}else{i=j+1;k=l+1;if(i>=m){if(k>=n){return 0}else{return 1}}else if(k>=n){return-1}else{j=_19.indexOf(":",i);l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n}}}}}
return},isc.A.loadSubtree=function isc_Tree_loadSubtree(_1,_2,_3){if(!_1)_1=this.getRoot();if(_2==null)_2=this.loadBatchSize;this.$873=_3?2:1;var _4=0,_5=1;while(_4<_2){var _6=this.$874(_2,_1,_4,_5++);if(_6==0)break;_4+=_6}
this.$873=null;if(_4>0)this.$860(true)},isc.A.loadingBatch=function isc_Tree_loadingBatch(_1){if(_1)return this.$873==2;else return this.$873},isc.A.$874=function isc_Tree__loadToDepth(_1,_2,_3,_4){var _5=0;if(!this.isOpen(_2)){if(!this.isLoaded(_2))this.loadChildren(_2);if(this.isLoaded(_2)){if(this.openFolder(_2)===false)return _5}
var _6=_2[this.childrenProperty];if(_6){var _7=(isc.isA.ResultSet(_6)?_6.$86v():_6.getLength());_5+=_7;_3+=_7}}
var _8=_2[this.childrenProperty];if(_3>=_1||_4==0||_8==null)return _5;var _9=(isc.isA.ResultSet(_8)?_8.$86v():_8.getLength());for(var i=0;i<_9;++i){var _11=_8.getCachedRow(i);if(_11!=null){var _12=this.$874(_1,_11,_3,_4-1);_5+=_12;_3+=_12;if(_3>=_1)return _5}}
return _5},isc.A.getFilteredTree=function isc_Tree_getFilteredTree(_1,_2,_3,_4){_2=_2||isc.Tree.STRICT;var _3=this.dataSource||_3;if(!_3){isc.logWarn("Cannot apply filter to Tree without dataSource");return null}
var _5=this.duplicate(true,true);if(isc.ResultTree&&isc.isA.ResultTree(_5)&&_5.isPaged()){_5.setCriteria(isc.DataSource.combineCriteria(_1,_5.criteria))}
_5.$875(_1,_2,_3,_5.getRoot(),_4);return _5},isc.A.$875=function isc_Tree__filterChildren(_1,_2,_3,_4,_5){var _6=(_2==isc.Tree.STRICT),_7=!_6;var _8=_4[this.childrenProperty];if(_8==null||_8.isEmpty())return false;var _9=false;if(isc.isA.String(_3))_3=isc.DS.get(_3);var _10=isc.isA.ResultSet(_8);_6=_6||_10;var i=(_10?_8.$86v():_8.getLength());while(i--){var _12=_8.getCachedRow(i);if(_12!=null){var _13=false,_14=_12[this.childrenProperty];if(_7){if(_14!=null&&!_14.isEmpty()){_13=this.$875(_1,_2,_3,_12,_5)}
_9=_9||_13}
if(!_13||_6){var _15=_3.applyFilter([_12],_1,_5);if(_15!=null&&_15.length>0){_9=true;if(_6&&_14!=null&&!_14.isEmpty()){this.$875(_1,_2,_3,_12,_5)}}else{this.$87j(_12,_4,_8,i)}}}}
return _9},isc.A.$87x=function isc_Tree__includeNodeLengthInParent(_1,_2){return this.isOpen(_2)},isc.A.$876=function isc_Tree__isNodeVisibleToParent(_1,_2){if(!this.$87x(_1,_2)){return false}else{var _3=_1[this.childrenProperty],_4=this.isFolder(_1)&&(_3&&_3.length);return(this.openDisplayNodeType!=(_4?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY))}},isc.A.$86o=function isc_Tree__getNodeLengthToParent(_1,_2){if(this.$87x(_1,_2)){var _3=_1[this.$86j],_4=_1[this.childrenProperty],_5=this.isFolder(_1),_6=(_4&&_4.length);if(_5!=_6){_3+=(-(this.openDisplayNodeType!=(_5?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0)+(this.openDisplayNodeType!=(_6?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0))}
return _3}else{return 0}},isc.A.$86x=function isc_Tree__getNodeLength(_1){var _2=this.isFolder(_1),_3=_2&&this.isOpen(_1),_4=(this.openDisplayNodeType!=(_2?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0);if(_3){var _5=this.getChildren(_1,this.openDisplayNodeType,null,this.sortDirection,this.openListCriteria,this.$866,null,null,true),_6=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),i=(isc.ResultSet!=null&&isc.isA.ResultSet(_5)?_5.$86v():_5.getLength());var _8=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),_9=_8;if(_8){var _10=(_1[this.canReturnOpenSubfoldersProperty]!=null?_1[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_11=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);_9=!(_10||_11==0)}
while(i--){var _12=_5.getCachedRow(i);if(_12!=null&&_12!=_6){_4+=this.$86o(_12,_1)}else if(_9){++_4}}}
return _4},isc.A.$86r=function isc_Tree__getDeltaLength(_1,_2,_3){if(_2!=_3){var _4=!_2,_5=!_3,_6=(-((_4&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)||(_2&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)?1:0)+((_5&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)||(_3&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)?1:0));return _6}else{return 0}},isc.A.$86s=function isc_Tree__updateParentLengths(_1,_2){if(_2!=0){for(;;){_1[this.$86j]+=_2;var _3=((_1[this.$86k]||0)>0);if(!(_1==this.root||_3)){var _4=this.getParent(_1);if(this.$87x(_1,_4)){_1=_4;continue}}
break}}});isc.B._maxIndex=isc.C+144;isc.A=isc.Tree;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.findChildrenProperty=function isc_c_Tree_findChildrenProperty(_1,_2){if(!isc.isAn.Object(_1))return;if(!_2)_2="any";var _3=(_2=="any"),_4=(_2=="object"),_5=(_2=="array"),_6=(_2=="objectArray");for(var _7 in _1){var _8=_1[_7];if(isc.isAn.Object(_8)){if(_3)return _7;if(isc.isAn.Array(_8)){if(isc.isAn.Object(_8[0]))return _7;if(!_4&&!_6)return _7}else{if(_4)return _7}}}},isc.A.discoverTree=function isc_c_Tree_discoverTree(_1,_2,_3){if(!_2)_2={};var _4=_2.childrenMode||"any";var _5=_2.scanMode||"branch";var _6=_2.tieMode||"node";var _7=_2.newChildrenProperty||isc.Tree.getInstanceProperty("childrenProperty"),_8=_2.typeProperty||"nodeType",_9=_2.nameProperty||"name";if(!isc.isAn.Array(_1))_1=[_1];var _10;if(_5=="level"||_5=="branch"){var _11={};for(var i=0;i<_1.length;i++){var _13=_1[i],_14=null;if(_13.$877)continue;_14=this.findChildrenProperty(_13,_4);if(_14==null)continue;_11[_14]=(_11[_14]||0);_11[_14]++}
var _15=isc.getValues(_11),_16=isc.getKeys(_11);if(_16.length==0){return}else if(_16.length==1){_10=_16[0]}else if(_6=="node"){}else if(_6=="stop"){return}else{var _17=_15.max(),_18=_15.indexOf(_17);_10=_16[_18]}}
var _19=[];for(var i=0;i<_1.length;i++){var _13=_1[i];var _20=_10;if(_13.$877)continue;if(!_20){_20=this.findChildrenProperty(_13,_4)}
if(_20==null)continue;var _21=_13[_20];if(_21!=null&&!isc.isAn.Array(_21))_21=[_21];else if(_21==null)_21=[];_13[_7]=_21;for(var j=0;j<_21.length;j++){var _23=_21[j];if(isc.isA.String(_23)){_21[j]=_23={name:_23,$877:true}}
_23[_8]=_20}
if(_5=="level"){_19.addAll(_21)}else{this.discoverTree(_21,_2,_20)}}
if(_5=="level"&&_19.length>0)this.discoverTree(_19,_2)},isc.A.getCleanNodeData=function isc_c_Tree_getCleanNodeData(_1,_2,_3,_4,_5){if(_1==null)return null;var _6=[],_7=false;if(!isc.isAn.Array(_1)){_1=[_1];_7=true}
for(var i=0;i<_1.length;i++){var _9=_1[i],_10={};if(_5==null){var _11=_9.$153;if(_11)_5=window[_11]}
for(var _12 in _9){if((_5!=null&&_12==_5.parentProperty)||(!_4&&_12=="$87l")||_12=="$153"||_12=="__ref"||_12=="__module"||_12.startsWith("_isOpen_")||_12.startsWith("_isFolder_")||_12.startsWith("$878")||_12=="$879"||_12=="_autoAssignedName"||_12.startsWith("_parent_")||_12.startsWith("_selection_")||_12.startsWith("_groupTree_")||(_2==false&&_5&&_12==_5.childrenProperty)||_12.startsWith("_cachedLength_")||_12.startsWith("_recursionCount_")||_12.startsWith("_visibleDescendantsCached_")||_12.startsWith("_initialLoadingState_")||_12.startsWith("_initialLoadingFetchCount_"))
{continue}
_10[_12]=_9[_12];if(_3&&_5&&_12==_5.childrenProperty&&isc.isAn.Array(_10[_12]))
{_10[_12]=isc.Tree.getCleanNodeData(_10[_12],_2,_3,_4,_5)}}
_6.add(_10)}
if(_7)return _6[0];return _6});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("Selection");isc.A=isc.Selection.getPrototype();isc.A.enabledProperty="enabled";isc.A.canSelectProperty="canSelect";isc.A.cascadeSelection=false;isc.A.$50=true;isc.A=isc.Selection;isc.A.NONE="none";isc.A.SINGLE="single";isc.A.MULTIPLE="multiple";isc.A.SIMPLE="simple";isc.A.$88a=0;isc.A=isc.Selection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.accessResultSetCache=true;isc.A.$315="up";isc.A.$318="down";isc.A.selectionRangeNotLoadedMessage="Can't select that many records at once.<br><br>Please try working in smaller batches.";isc.B.push(isc.A.init=function isc_Selection_init(){this.$69l=[];var _1=this.selectionProperty;if(!_1)this.selectionProperty="_selection_"+isc.Selection.$88a++;this.partialSelectionProperty="$88b"+this.selectionProperty;this.setData(this.data?this.data:[]);if(!_1)this.$50=false},isc.A.destroy=function isc_Selection_destroy(){if(this.data)this.ignoreData(this.data);delete this.data;this.Super("destroy",arguments)},isc.A.setData=function isc_Selection_setData(_1){if(this.data!=null)this.ignoreData(this.data);this.data=_1;if(this.data!=null)this.observeData(this.data);this.markForRedraw()},isc.A.observeData=function isc_Selection_observeData(_1){var _2=isc.ResultSet&&isc.isA.ResultSet(_1);if(_2){this.observe(_1,"dataChanged",function(_3,_4,_5,_6,_7,_8){this.dataChanged(_3,_4,_5,_6,_7,_8)})}else{this.observe(_1,"dataChanged",function(){this.dataChanged()})}
if(_1.dataArrived){if(_2){this.observe(_1,"dataArrived",function(_3,_4,_5){this.dataArrived(_3,_4,_5)})}else{this.observe(_1,"dataArrived",function(){this.dataChanged()})}}},isc.A.ignoreData=function isc_Selection_ignoreData(_1){if(!_1)return;if(this.isObserving(_1,"dataChanged"))this.ignore(_1,"dataChanged");if(this.isObserving(_1,"dataArrived"))this.ignore(_1,"dataArrived")},isc.A.dataArrived=function isc_Selection_dataArrived(_1,_2,_3){if(!this.data)return;var _4,_5,_6,_7,_8;if(this.data.$g2()&&isc.isA.ResultSet(this.data)){_4=this.data.$88c;_6=this.data.$88d;_5=this.data.$88e;_7=this.data.$88f}
this.dataChanged(_4,_5,_7,_6,false,_3);if(this.data.$g2()){this.$88g=true}},isc.A.dataChanged=function isc_Selection_dataChanged(_1,_2,_3,_4,_5,_6){if(this.$88g){delete this.$88g;return}
if(this.reselectOnUpdate&&_1=="update"&&_2!=null&&_2[this.selectionProperty])
{var _7=this.data.findByKey(_2);if(_7)this.performReselectOnUpdate(_7)}else if(_6){if(this.$50)this.cacheSelection();var _8=this.$69l,_9=[],_10=this.getItemList(),_11=_10.getLength();if(_8==null||isc.isA.ResultSet!=null&&isc.isA.ResultSet(_10)&&!_10.lengthIsKnown()){}else{for(var i=0;i<_11;i++){var _13=_10.getCachedRow(i),_14=_13==null?false:!!_13[this.selectionProperty];var _15;if(_14){_15=_8.contains(_13);if(_15){_9.add(_13)}else{_13[this.selectionProperty]=false}}}}}
this.markForRedraw()},isc.A.performReselectOnUpdate=function isc_Selection_performReselectOnUpdate(_1){this.select(_1)},isc.A.markForRedraw=function isc_Selection_markForRedraw(){this.$50=true;this.$88h=null},isc.A.isSelected=function isc_Selection_isSelected(_1,_2){if(_2&&(this.cascadeSelection||!isc.isA.Tree(this.data))){_2=false}
if(this.$50&&!(_2==true&&this.$88h!=null)&&!this.$88i){this.cacheSelection(_2)}
if(_1==null)return false;return!!_1[this.selectionProperty]},isc.A.isPartiallySelected=function isc_Selection_isPartiallySelected(_1){if(this.$50&&!this.$88i)this.cacheSelection();if(_1==null)return false;return!!_1[this.partialSelectionProperty]},isc.A.anySelected=function isc_Selection_anySelected(){return this.$56s().length>0},isc.A.getLength=function isc_Selection_getLength(){return this.$56s().length},isc.A.multipleSelected=function isc_Selection_multipleSelected(){return this.$56s().length>1},isc.A.getSelection=function isc_Selection_getSelection(_1,_2){var _3=this.$56s(_1,_2);return _3.duplicate()},isc.A.$56s=function isc_Selection__getSelection(_1,_2){if(this.$50){if(this.$88i)this.$88i=false;this.cacheSelection(false,_2)}
var _3=this.$69l;if(_1&&_3!=null&&_3.length>0){var _4=this.$69l;_3=[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(!this.isPartiallySelected(_6)){_3[_3.length]=_6}}}
return _3},isc.A.getSelectedRecord=function isc_Selection_getSelectedRecord(){var _1=this.$56s();if(_1&&_1.length>0)return _1[0]},isc.A.cacheSelection=function isc_Selection_cacheSelection(_1,_2){if(this.$88j||this.$88k){return}else if(this.$88i){return}
var _3;if(_1){_3=this.$88h=[]}else{_3=this.$69l=[];this.$88h=null}
var _4=this.getItemList(_1,_2);var _5=false;if(this.accessResultSetCache&&isc.isA.ResultSet(_4)){_5=true;_4=_4.localData||[]}
var _6=!isc.isAn.Array(_4),_7=_4.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_4)&&!_4.lengthIsKnown()){this.$50=false;return}
this.$88i=true;this.$88l=_1;if(this.cascadeSelection){var _8=false;for(var i=0;i<_7;i++){var _10=_6?_4.getCachedRow(i):_4[i];if(_10!=null&&_10!==Array.LOADING&&this.isSelected(_10,_1)){if(!this.isPartiallySelected(_10)){this.setSelected(_10,true,null,true);_8=true}
if(!_8){_3[_3.length]=_10}}}
if(_8){if(_1){_3=this.$88h=[]}else{_3=this.$69l=[];this.$88h=null}
for(var i=0;i<_7;i++){var _10=_6?_4.getCachedRow(i):_4[i];if(_10!=null&&_10!==Array.LOADING&&this.isSelected(_10,_1)){_3[_3.length]=_10}}}}else{if(_5){for(var i=0;i<_7;i++){var _10=_4[i];if(_10!=null&&_10!==Array.LOADING&&this.isSelected(_10,_1)){_3[_3.length]=_10}}}else{for(var i=0;i<_7;i++){var _10=_6?_4.getCachedRow(i):_4[i];if(_10!=null&&this.isSelected(_10,_1)){_3[_3.length]=_10}}}}
this.$88i=false;if(!_1)this.$50=false},isc.A.$88m=function isc_Selection__cacheSelectionAsync(_1,_2,_3,_4,_5){if(_5==null||_5.afterGetItemList){if(_5==null){if(this.$88i||this.$88j||this.$88k){_4.call(_1);return}
var _6=this;this.$88n(_1,_2,_3,function(_8){var _5={data:_8,afterGetItemList:true};_1[_2]=_6.delayCall("$88m",[_1,_2,_3,_4,_5],0)});return}
_5.afterGetItemList=false;_5.cache=[];_5.length=_5.data.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_5.data)&&!_5.data.lengthIsKnown()){this.$50=false;this.$69l=_7;this.$88h=null;_4.call(_1);return}
this.$88i=true;this.$88l=false;_5.inFirstLoop=true;_5.delayCache=false;_5.i=0}
var _7=_5.cache,_8=_5.data,_9=_5.length,_10=_5.inFirstLoop,_11=_5.delayCache,i=_5.i,_13=this.$50;this.$50=false;if(_10){var _14=Math.min(_9,i+_3);for(;i<_14;i=_5.i=i+1){var _15=_8.getCachedRow(i);if(_15!=null&&this.isSelected(_15)){if(this.cascadeSelection&&!this.isPartiallySelected(_15)){this.setSelected(_15,true,null,true);_11=_5.delayCache=true}
if(!_11){_7[_7.length]=_15}}}
if(i!=_9){this.$50=_13;if(_13)this.$88h=null;this.$88i=false;_1[_2]=this.delayCall("$88m",[_1,_2,_3,_4,_5],0);return}
_10=_5.inFirstLoop=false}
if(!_10&&_11){_7=_5.cache=[];i=_5.i=0;var _14=Math.min(_9,i+_3);for(;i<_9;i=_5.i=i+1){var _15=_8.getCachedRow(i);if(_15!=null&&this.isSelected(_15)){_7[_7.length]=_15}}
if(i!=_9){this.$50=_13;if(_13)this.$88h=null;this.$88i=false;_1[_2]=this.delayCall("$88m",[_1,_2,_3,_4,_5],0);return}}
this.$88i=false;this.$50=false;this.$69l=_7;this.$88h=null;_4.call(_1);return},isc.A.setSelected=function isc_Selection_setSelected(_1,_2,_3,_4){if(this.data==null||this.data.destroyed){return false}
if(!this.$88o(_1))return false;var _5=this.$88j;this.$88j=true;var _6=this.selectionProperty,_7=this.partialSelectionProperty,_8=this.data.childrenProperty||"children",_9=false;var _10=(_9?_1.getAttribute(_7):_1[_7]);if(_2==null)_2=true;if(this.cascadeSelection&&!this.useRemoteSelection){if(_3==this.$315){var _11=false,_12=_1[_8]?_1[_8].length:0;for(var i=0;i<_12;i++){var _14=_1[_8].get(i),_15=false;var _16=(_15?_14.getAttribute(_7):_14[_7]);if(_16||(_2&&!this.isSelected(_14))||(!_2&&this.isSelected(_14)))
{_11=true;break}}
if(_9){_1.setAttribute(_7,_11+"")}else{_1[_7]=_11}
if(_2!=_11)_2=true}else if(_1[_8]&&_1[_8].length>0){if(_9){_1.removeAttribute(_7)}else{delete _1[_7]}}}
var _17=_9?_1.getAttribute(_6):_1[_6];if(_17==null)_17=false;if(_9){_1.setAttribute(_6,(_2==true)+"")}else{_1[_6]=_2}
this.lastSelectionItem=_1;this.lastSelectionState=_2;this.lastSelectionPreviousState=_17;this.lastSelectionPartialValue=_11;this.lastSelectionPreviousPartialValue=_10;var _18=(_9?_1.getAttribute(_7):_1[_7]);var _19=true;if(_2==_17&&_18==_10){_19=false}
if(!_4&&_19==false){if(!_5)this.$88j=false;return false}
this.markForRedraw();if(this.cascadeSelection&&!this.useRemoteSelection)
{var _20=_1,_21=_2,_22=_17,_23=_11,_24=_10;var _25=false;if(this.cascadeSyncOnly==null){_25=true;this.cascadeSyncOnly=!_19}
if(_3!=this.$315&&!_9&&_1[_8]&&_1[_8].length>0)
{this.selectList(_1[_8],_2)}
if(_19||_25){if(_3!=this.$318&&isc.isA.Tree(this.data)){var _26=this.data.getParent(_1);if(_26){this.setSelected(_26,_2,this.$315)}}}
this.lastSelectionItem=_20;this.lastSelectionState=_21;this.lastSelectionPreviousState=_22;this.lastSelectionPartialValue=_23;this.lastSelectionPreviousPartialValue=_24;if(_25){this.cascadeSyncOnly=null}}
if(!_5)this.$88j=false;if(_19&&this.target&&this.target.selectionChange){this.target.selectionChange(_1,_2)}
return true},isc.A.$88o=function isc_Selection__canSelectItem(_1){if(_1==null){return false}
if(_1[this.enabledProperty]==false)return false;if(_1[this.canSelectProperty]==false)return false;return true},isc.A.select=function isc_Selection_select(_1){return this.setSelected(_1,true)},isc.A.deselect=function isc_Selection_deselect(_1){return this.setSelected(_1,false)},isc.A.selectSingle=function isc_Selection_selectSingle(_1){var _2,_3;_2=this.deselect(_1);_3=this.deselectAll();this.select(_1);return!_2||_3},isc.A.selectList=function isc_Selection_selectList(_1,_2,_3,_4){if(_2==null)_2=true;if(!_1)return false;if(this.$50)this.cacheSelection();var _5=this.$69l;var _6=_1.getLength();if(_3==null){_3=[];var _7=this.getItemList();var _8=false,_9=null,_10=null;if(_4!=null){_10=_4.getDataSource();_9=_10&&_10.getPrimaryKeyFields();if(_9&&isc.isA.emptyObject(_9))_9=null}
if(this.accessResultSetCache&&isc.isA.ResultSet(_7)){_8=true;_7=_7.localData||[]}
for(var i=0;i<_6;i++){var _12=_1.get(i),_13=this.isSelected(_12),_14=null;if(_13==_2)continue;if(_9){var _15=_10&&_10.filterPrimaryKeyFields(_12);if(_15){_14=_7.findIndex(_15);if(_14>=0)_12=_7[_14]}}else{_14=_7.indexOf(_12)}
if(_14==null||_14==-1){continue}
if(this.$88o(_12))_3[_3.length]=_12}}else{if(_5===_3)_3=_3.duplicate()}
var _16=false,_6=_3.length;var _17=this.$88k;this.$88k=true;var _18=this.$88p;this.$88p=_6>1?true:false;if(_6>0)this.$88h=null;for(var i=0;i<_6;i++){var _12=_3[i];if(_2){_5[_5.length]=_12}else{_5.remove(_12)}
_16=this.setSelected(_12,_2)||_16}
this.$88k=_17;if(this.cascadeSelection){if(this.$50)this.cacheSelection()}else{this.$50=false}
this.$88p=_18;return _16},isc.A.deselectList=function isc_Selection_deselectList(_1,_2){return this.selectList(_1,false,null,_2)},isc.A.selectAll=function isc_Selection_selectAll(_1){if(_1)return this.selectRange(0,this.data.getLength());else return this.selectList(this.getItemList())},isc.A.deselectAll=function isc_Selection_deselectAll(){var _1=this.$56s(false,true);var _2=this.selectList(_1,false,_1);this.$50=false;this.$69l=[];this.$88h=null;return _2},isc.A.selectItem=function isc_Selection_selectItem(_1){return this.selectRange(_1,_1+1)},isc.A.deselectItem=function isc_Selection_deselectItem(_1){return this.deselectRange(_1,_1+1)},isc.A.selectRange=function isc_Selection_selectRange(_1,_2,_3){if(_3==null)_3=true;var _4=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_4)&&!_4.rangeIsLoaded(_1,_2))
{this.warnSelectionRangeNotLoaded();return false}
return this.selectList(_4.getRange(_1,_2),_3)},isc.A.warnSelectionRangeNotLoaded=function isc_Selection_warnSelectionRangeNotLoaded(){this.logWarn("selectRange called - selection range not loaded. Showing selectionRangeNotLoadedMessage to the user.");isc.warn(this.selectionRangeNotLoadedMessage)},isc.A.deselectRange=function isc_Selection_deselectRange(_1,_2){return this.selectRange(_1,_2,false)},isc.A.selectOnMouseDown=function isc_Selection_selectOnMouseDown(_1,_2){var _3=_1.selectionType||isc.Selection.MULTIPLE;if(_3==isc.Selection.NONE)return false;this.startRow=this.lastRow=_2;this.logDebug("selectOnMouseDown: recordNum: "+_2);var _4=this.data.get(_2),_5=this.isSelected(_4,true),_6;if(Array.isLoading(_4))return false;this.deselectRecordOnMouseUp=false;this.deselectOthersOnMouseUp=false;var _7=(isc.Browser.isMac?isc.EventHandler.metaKeyDown():isc.EventHandler.ctrlKeyDown()),_8=isc.EH.shiftKeyDown();if(_3==isc.Selection.SINGLE){if(_7&&_5)this.deselect(_4);else if(!_5)this.selectSingle(_4);else return false;return true}else if(_8){_6=this.$56s();if(_6.length==0){this.select(_4);return true}else{var _9=this.data,_10=_9.indexOf(_6[0]),_11=_9.indexOf(_6.last());if(_2>=_11){this.selectRange(_10,_2+1)}else if(_2<=_10){this.selectRange(_2,_11+1)}else{this.selectRange(_10,_2+1);this.deselectRange(_2+1,_11+1)}
return true}}else if(_3==isc.Selection.SIMPLE){if(!_5){this.select(_4);return true}else{this.deselectRecordOnMouseUp=true;return false}}else if(_7){this.setSelected(_4,!_5);return true}else{if(!_5){this.selectSingle(_4);return true}else if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else{if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();this.selectOriginOnDragMove=true;return true}
this.selectSingle(_4);return true}else{if(this.simpleDeselect){this.deselectAllOnMouseUp=true}else{_6=this.$56s();this.deselectOthersOnMouseUp=(_6.length>1)}
return false}}}},isc.A.selectOnDragMove=function isc_Selection_selectOnDragMove(_1,_2){var _3=this.startRow,_4=this.lastRow;if(_2<0){this.logWarn("selectOnDragMove: got negative coordinate: "+_2);return}
if(_2==_4)return;if(this.selectOriginOnDragMove){this.select(this.data.getItem(_3));this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp){this.selectSingle(this.data.getItem(_3));this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}
if((_2>_3&&_3>_4)||(_4>_3&&_3>_2))
{this.deselectAll();if(_3>_2){this.selectRange(_2,_3+1)}else{this.selectRange(_3,_2+1)}}else if(_3>=_4&&_4>_2){this.selectRange(_2,_4)}else if(_3>=_2&&_2>_4){this.deselectRange(_4,_2)}else if(_3<=_2&&_2<_4){this.deselectRange(_2+1,_4+1)}else if(_3<=_4&&_4<_2){this.selectRange(_4,_2+1)}else{this.logWarn("dragMove case not handled: lastRow: "+_4+", currRow: "+_2+", startRow "+_3)}
this.lastRow=_2},isc.A.selectOnMouseUp=function isc_Selection_selectOnMouseUp(_1,_2){if(_1.selectionType==isc.Selection.NONE)return false;this.logDebug("selectOnMouseUp: recordNum: "+_2);var _3=false;if(this.deselectOthersOnMouseUp){_3=this.selectSingle(this.data.getItem(_2));this.deselectOthersOnMouseUp=false}else if(this.deselectRecordOnMouseUp){_3=this.deselect(this.data.getItem(_2));this.deselectRecordOnMouseUp=false}else if(this.deselectAllOnMouseUp){_3=this.deselectAll();this.deselectAllOnMouseUp=false}
return _3},isc.A.getItemList=function isc_Selection_getItemList(_1,_2){var _3=this.data;if(isc.isA.Tree(_3))return _3.getNodeList(_1,_2);return(_3!=null?_3:[])},isc.A.$88n=function isc_Selection__getItemListAsync(_1,_2,_3,_4){if(this.data&&isc.isA.Tree(this.data)&&isc.isA.Function(this.data.$870)){this.data.$870(_1,_2,_3,_4)}else{_4.call(_1,this.getItemList())}});isc.B._maxIndex=isc.C+38;isc.ClassFactory.defineClass("DetailViewer","Canvas","DataBoundComponent");isc.A=isc.DetailViewer.getPrototype();isc.A.dataFetchMode="basic";isc.A.dataArity="either";isc.A.fieldIdProperty="name";isc.A.recordsPerBlock=1;isc.A.blockSeparator="<br><br>";isc.A.showEmptyField=true;isc.A.emptyCellValue="&nbsp;";isc.A.labelPrefix="";isc.A.labelSuffix=":";isc.A.wrapValues=true;isc.A.useInnerWidth=true;isc.A.clipValues=false;isc.A.styleName="detailViewer";isc.A.blockStyle="detailBlock";isc.A.labelStyle="detailLabel";isc.A.cellStyle="detail";isc.A.headerStyle="detailHeader";isc.A.separatorStyle="detail";isc.A.cellPadding=3;isc.A.linkTextProperty="linkText";isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to display.";isc.A.emptyMessageStyle="normal";isc.A.loadingMessage="&nbsp;${loadingImage}";isc.A.loadingMessageStyle="normal";isc.A.defaultHeight=35;isc.A.showLabel=true;isc.A=isc.DetailViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$nz="date";isc.A.fieldPickerWindowDefaults={autoParent:"none",_constructor:"FieldPickerWindow"};isc.A.canPickFields=false;isc.A.configureFieldsText="Configure Fields...";isc.A.fieldPickerFieldProperties=null;isc.B.push(isc.A.initWidget=function isc_DetailViewer_initWidget(){if(this.labelAlign==null)this.labelAlign=this.isRTL()?"left":"right";if(this.valueAlign==null)this.valueAlign=this.isRTL()?"right":"left";this.Super("initWidget",arguments);if(this.fieldState!=null)this.setFieldState(this.fieldState);else this.setFields(this.fields);if(this.canPickFields){this.contextMenu=isc.Menu.create({data:[this.createFieldPickerWindowMenuItem(this.configureFieldsText)]})}},isc.A.setData=function isc_DetailViewer_setData(_1){if(this.data)this.ignore(this.data,"dataChanged");this.invalidateUserCache();this.data=_1;if(this.data&&this.data.dataChanged){this.observe(this.data,"dataChanged","observer.dataChanged()")}
this.markForRedraw("new data")},isc.A.dataChanged=function isc_DetailViewer_dataChanged(){this.setFields(this.completeFields);this.invalidateUserCache();this.applyHilites();this.markForRedraw()},isc.A.getData=function isc_DetailViewer_getData(){return this.data},isc.A.getFields=function isc_DetailViewer_getFields(){return this.fields},isc.A.getInnerHTML=function isc_DetailViewer_getInnerHTML(){var _1=this.getData();if(this.fields==null||this.fields.length==0){return"Note: you must define detailViewer.fields to specify what to display!"}
if(isc.ResultSet!=null&&isc.isA.ResultSet(_1)&&!_1.lengthIsKnown()){_1.get(0);return this.loadingMessageHTML()}
if(_1==null||(_1.getLength&&_1.getLength()==0)){return this.emptyMessageHTML()}
if(!isc.isA.List(_1))_1=[_1];if(Array.isLoading(_1.get(0))&&this.isOffline()){return this.emptyMessageHTML()}
if(_1.getLength()==1||this.recordsPerBlock=="*"){return this.getBlockHTML(_1)}else{var _2=isc.StringBuffer.create();for(var _3=0;_3<_1.getLength();_3+=this.recordsPerBlock){_2.append(this.getBlockHTML(_1.getRange(_3,_3+this.recordsPerBlock)),this.blockSeparator)}
return _2.release(false)}},isc.A.getBlockHTML=function isc_DetailViewer_getBlockHTML(_1){if(_1.getLength==null){var _2=[];for(var i=0;i<_1.length;i++){_2[i]=_1[i]}
_1=_2}
var _4=_1.getLength();var _5="<TABLE BORDER=0 CELLSPACING=0 CLASS='"+this.blockStyle+"' CELLPADDING='"+this.cellPadding+"' style='width:"+(this.useInnerWidth&&!this.isPrinting?this.getInnerWidth()+"px":"100%")+(this.clipValues?";table-layout:fixed":"")+"'>";var _6=this.fields;for(var _7=0,_8=_6.length;_7<_8;_7++){var _9=_6[_7];if(!_9||_9.hidden||_9.visible==false)continue;if(_9.showIf){if(!isc.isA.Function(_9.showIf)){isc.Func.replaceWithMethod(_9,"showIf","viewer,valueList")}
if(_9.showIf(this,_1)==false)continue}
var _10=_9.type?_9.type:"";if(_10!="separator"&&_10!="header"&&!this.showEmptyField){var _11=true;for(var i=0;i<_1.getLength();i++){var _12=_1.get(i)[_9[this.fieldIdProperty]]
if(!(_12==null||_12=="")){_11=false;break}}
if(_11)continue}
if(_9.output){if(!isc.isA.Function(_9.output)){isc.Func.replaceWithMethod(_9,"output","fieldNum,field,valueList")}
_5+=_9.output(_7,_9,_1)}else{_5+=this.outputItem(_7,_9,_1)}}
_5+="</TABLE>";return _5},isc.A.fieldIsVisible=function isc_DetailViewer_fieldIsVisible(_1){var _2=_1;if(!isc.isAn.Object(_2))_2=this.getSpecifiedField(_1);return this.fields.contains(_2)},isc.A.outputItem=function isc_DetailViewer_outputItem(_1,_2,_3){var _4=(_2.type?_2.type:"value"),_5="output_"+_4,_6="";if(!this[_5])_5="output_value";_6+="<TR"+(this.rowClass!=null?" CLASS='"+this.rowClass+"'":"")+">";_6+=this[_5](_1,_2,_3);_6+="</TR>\r";return _6},isc.A.output_blob=function isc_DetailViewer_output_blob(_1,_2,_3){return this.output_binary(_1,_2,_3)},isc.A.output_upload=function isc_DetailViewer_output_upload(_1,_2,_3){return this.output_binary(_1,_2,_3)},isc.A.output_binary=function isc_DetailViewer_output_binary(_1,_2,_3){var _4="<TD WIDTH=10% CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' style='text-align:"+this.labelAlign+";'"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(_2.title?_2.title:_2[this.fieldIdProperty])+this.labelSuffix+(this.wrapLabel?"":"<\/NOBR>")+"<\/TD>";for(var i=0;i<_3.getLength();i++){var _6=_3.get(i),_7=this.getData().indexOf(_6),_8=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_2.name):_2.name+"_filename",_9=_6[_8],_10="'"+this.getID()+".view",_11="'"+this.getID()+".download",_12="";if(_2&&_2.name){_12="Cell("+_7+", \""+_2.name+"\")'"}else{_12="Row("+_7+")'"}
var _13=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_10+_12);var _13=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_10+_12),_14=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_11+_12),_15=_13+"&nbsp;"+_14+(_9?"&nbsp;"+_9:"");_4+="<TD CLASS='"+this.getCellStyle(_15,_2,_6,this)+"'>"+_15+"<\/TD>"}
return _4},isc.A.viewRow=function isc_DetailViewer_viewRow(_1){isc.DS.get(this.dataSource).viewFile(this.getData().get(_1))},isc.A.downloadRow=function isc_DetailViewer_downloadRow(_1){isc.DS.get(this.dataSource).downloadFile(this.getData().get(_1))},isc.A.viewCell=function isc_DetailViewer_viewCell(_1,_2){isc.DS.get(this.dataSource).viewFile(this.getData().get(_1),_2)},isc.A.downloadCell=function isc_DetailViewer_downloadCell(_1,_2){isc.DS.get(this.dataSource).downloadFile(this.getData().get(_1),_2)},isc.A.output_value=function isc_DetailViewer_output_value(_1,_2,_3){var _4;if(this.showLabel){_4="<TD WIDTH="+(this.labelWidth!=null?this.labelWidth:"10%")+" CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' style='text-align:"+this.labelAlign+";'"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(_2.title?_2.title:_2[this.fieldIdProperty])+this.labelSuffix+(this.wrapLabel?"":"<\/NOBR>")+"<\/TD>"}else{_4=""}
if(_2.valueMap&&isc.isA.String(_2.valueMap))
_2.valueMap=this.getGlobalReference(_2.valueMap);for(var i=0;i<_3.getLength();i++){var _6=_3.get(i),_7="",_8;if(_2.type=="image"){var _9=isc.Canvas.getFieldImageDimensions(_2,_6);var _10=this.getCellValue(_6,_2),_11=_2.imageURLPrefix||_2.baseURL||_2.imgDir;if(_10==this.$16q(_2)){_8=this.$16q(_2)}else{_8=this.imgHTML(_10,_9.width,_9.height,null,_2.extraStuff,_11,_2.activeAreaHTML)}}else if(_2.type=="link"){var _12=_2.target||"_blank",_13=_2.linkTextProperty||this.linkTextProperty,_14=this.getCellValue(_6,_2),_15=_6[_13]||_2.linkText||_14,_16=_14;if(_16==this.$16q(_2)){_8=this.$16q(_2)}else{if(_2.linkURLPrefix){_16=_2.linkURLPrefix+_16}
if(_2.linkURLSuffix){_16=_16+_2.linkURLSuffix}
if(_12=="javascript"){_16="javascript:void";_7=" onclick=\"if(window."+this.ID+") return "+this.ID+".$599(event,'"+_2.name+"');\""}
_8=this.linkHTML(_16,_15,_12)}}else{_8=this.getCellValue(_6,_2)}
var _17=this.getRawValue(_6,_2);var _18;if(_2.getCellStyle){_18=_2.getCellStyle(_17,_2,_6,this)}else{_18=(this.getCellStyle(_17,_2,_6,this)||this.cellStyle)}
var _19=" style='";if(this.clipValues)_19+="overflow:hidden;";_19+="text-align:"+this.valueAlign;if(this.getCellCSSText){var _20=this.getCellCSSText(_17,_2,_6,this);if(_20!=null)_19+=isc.semi+_20}
_19+="'";_4+="<TD CLASS='"+_18+"'"+_19+(_2.height?"HEIGHT='"+_2.height+"' ":"")+_7+(this.wrapValues?">":" NOWRAP><NOBR>")+_8+(this.wrapValues?"":"<\/NOBR>")+"<\/TD>"}
return _4},isc.A.$599=function isc_DetailViewer__linkClicked(_1,_2){var _3=this.fields.find("name",_2)||{},_4=false;if(_1.target=="javascript"||_3.target=="javascript"){_4=true;if(_3.click)_3.click()}
if(_4){if(!isc.Browser.isIE){_1.preventDefault()}
return false}
return true},isc.A.getCellCSSText=function isc_DetailViewer_getCellCSSText(_1,_2,_3,_4){return this.getRecordHiliteCSSText(_3,"",_2,true)},isc.A.getCellStyle=function isc_DetailViewer_getCellStyle(_1,_2,_3,_4){if(_2){if(_2.getCellStyle)return _2.getCellStyle(_1,_2,_3,_4);if(this.isPrinting&&_2.printCellStyle){return _2.printCellStyle}
if(_2.cellStyle){return _2.cellStyle}}
return(this.isPrinting&&this.printCellStyle!=null)?this.printCellStyle:this.cellStyle},isc.A.getSelectedRecord=function isc_DetailViewer_getSelectedRecord(){return this.data.get(0)},isc.A.getCellValue=function isc_DetailViewer_getCellValue(_1,_2){var _3=this.getRawValue(_1,_2);if(isc.isA.String(_2.formatCellValue)){_2.formatCellValue=isc.Func.expressionToFunction("value,record,field,viewer",_2.formatCellValue)}
if(_2.getCellValue!=null){if(isc.isA.String(_2.getCellValue)){_2.getCellValue=isc.Func.expressionToFunction("value,record,field,viewer",_2.getCellValue)}
_3=_2.getCellValue(_3,_1,_2,this);if(_2.formatCellValue)_3=_2.formatCellValue(_3,_1,_2,this)}else{if(_2.valueMap!=null)_3=isc.getValueForKey(_3,_2.valueMap);if(_2.formatCellValue)_3=_2.formatCellValue(_3,_1,_2,this)}
if(_2.formatCellValue==null&&this.formatCellValue){_3=this.formatCellValue(_3,_1,_2)}else{if(_3==null||isc.is.emptyString(_3)){_3=this.$16q(_2)}else{_3=this.$51g(_1,_2,_3);var _4=_2.escapeHTML;if(_4==null)_4=_2.asHTML;if(_4)_3=_3.asHTML()}}
if(_2){if(_2.userFormula)_3=this.getFormulaFieldValue(_2,_1);else if(_2.userSummary)_3=this.getSummaryFieldValue(_2,_1);else if(_2.type=="imageFile"){var _5=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_2.name):_2.name+"_filename";if(_1[_5]!=null){if(_2.showFileInline!=false){if(!_1[_2[this.fieldIdProperty]+"$63h"]){var _6=isc.Canvas.getFieldImageDimensions(_2,_1),_7=this.getDataSource().getFileURL(_1,_2[this.fieldIdProperty]);_3=_1[_2[this.fieldIdProperty]+"$63h"]=this.imgHTML(_7,_6.width,_6.height,null,null,isc.Canvas.$13l)}else
_3=_1[_2[this.fieldIdProperty]+"$63h"]}else{_3=this.getViewDownloadHTML(_2,_1)}}}else if(_2.showFileInline==true){this.logWarn("getCellValue(): Unsupported field-type for showFileInline: "+_2.type)}
if(isc.isA.Number(_3)){if(isc.SimpleType.inheritsFrom(_2.type,"float")&&(_2.decimalPrecision!=null||_2.decimalPad!=null))
{_3=isc.Canvas.getFloatValueAsString(_3,_2.decimalPrecision,_2.decimalPad)}else if(_2.precision!=null){_3=isc.Canvas.getNumberValueAsString(_3,_2.precision,_2.type)}}}
var _8=this.getFieldHilites(_1,_2);if(_8!=null){_3=this.applyHiliteHTML(_8,_3);_3=this.applyHiliteIcon(_8,_2,_3)}
return _3},isc.A.getViewDownloadHTML=function isc_DetailViewer_getViewDownloadHTML(_1,_2){if(_2==null)return null;var _3=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_1.name):_1.name+"_filename",_4=_2[_3];if(!_1.filenameSuppressed&&(_4==null||isc.isA.emptyString(_4))){return"&nbsp;"}
var _5=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+this.getID()+".viewFile("+_2+","+_1+")'");var _6=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='alert('running');"+this.getID()+".downloadFile("+_2+","+_1+")'");return"<nobr>"+_5+"&nbsp;"+_6+"&nbsp;"+_4+"</nobr>"},isc.A.viewFile=function isc_DetailViewer_viewFile(_1,_2){isc.DS.get(this.dataSource).viewFile(_1,_2.name)},isc.A.downloadFile=function isc_DetailViewer_downloadFile(_1,_2){isc.DS.get(this.dataSource).downloadFile(_1,_2.name)},isc.A.$51g=function isc_DetailViewer__formatDataType(_1,_2,_3,_4){if(!_4&&_2&&_2.multiple&&isc.isA.Array(_3)){var _5=[];for(var i=0;i<_3.length;i++){_5[i]=this.$51g(_1,_2,_3[i],true)}
return _5.join(_2.multipleValueSeparator||", ")}
if(_2&&(isc.isA.Number(_3)||isc.isA.Date(_3))&&_2.format){return isc.isA.Number(_3)?isc.NumberUtil.format(_3,_2.format):isc.DateUtil.format(_3,_2.format)}
if(isc.isA.Date(_3)){if(this.$51j(_2)){var _7=isc.SimpleType.inheritsFrom(_2.type,"time");_3=isc.Time.toTime(_3,this.$51k(_2),_7)}else{var _8=this.$51l(_2);if(isc.SimpleType.inheritsFrom(_2.type,"date")&&!isc.SimpleType.inheritsFrom(_2.type,"datetime"))
{_3=_3.toShortDate(_8,false)}else{_3=_3.toNormalDatetime(_8)}}}
if(_2.valueMap&&_2.valueMap[""+_3+""]!=null){_3=_2.valueMap[""+_3+""]}
if(_2.$31u!=null&&_2.$31u.normalDisplayFormatter!=null){_3=_2.$31u.normalDisplayFormatter(_3,_2,this,_1)}
return isc.iscToLocaleString(_3)},isc.A.$51j=function isc_DetailViewer__formatAsTime(_1){if(_1==null)return false;if(_1.dateFormatter==null&&_1.timeFormatter!=null)return true;if(_1.timeFormatter==null&&_1.dateFormatter!=null)return false;return isc.SimpleType.inheritsFrom(_1.type,"time")},isc.A.$51l=function isc_DetailViewer__getDateFormatter(_1){if(_1.dateFormatter)return _1.dateFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"date")){return _1.displayFormat}
if(this.datetimeFormatter!=null&&isc.SimpleType.inheritsFrom(_1.type,"datetime")){return this.datetimeFormatter}
return this.dateFormatter},isc.A.$51k=function isc_DetailViewer__getTimeFormatter(_1){if(_1.timeFormatter)return _1.timeFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"time")){return _1.displayFormat}
return this.timeFormatter},isc.A.getRecordIndex=function isc_DetailViewer_getRecordIndex(_1){var _2=this.Super('getRecordIndex',arguments);if(_2==-1)_2=0;return _2},isc.A.output_header=function isc_DetailViewer_output_header(_1,_2,_3){return"<TD COLSPAN="+(_3.getLength()+1)+" CLASS='"+(this.isPrinting&&this.printHeaderStyle?this.printHeaderStyle:this.headerStyle)+"'>"+_2.value+"</TD>"},isc.A.output_separator=function isc_DetailViewer_output_separator(_1,_2,_3){var _4=(_2.width==null?_2.defaultSeparatorWidth:_2.width),_5=(_2.height==null?_2.defaultSeparatorHeight:_2.height);return"<TD COLSPAN="+(_3.getLength()+1)+" CLASS='"+this.separatorStyle+"'>"+isc.Canvas.spacerHTML(_4,_5)+"</TD>"},isc.A.getEmptyMessage=function isc_DetailViewer_getEmptyMessage(){return this.emptyMessage},isc.A.getLoadingMessage=function isc_DetailViewer_getLoadingMessage(){return this.loadingMessage==null?"&nbsp;":this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.emptyMessageHTML=function isc_DetailViewer_emptyMessageHTML(){if(this.isOffline()){if(!this.showOfflineMessage)return"&nbsp;"}else{if(!this.showEmptyMessage)return"&nbsp;"}
return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.emptyMessageStyle+"' ALIGN=CENTER><BR><BR>"+(this.isOffline()?this.offlineMessage:this.getEmptyMessage())+"<\/TD><\/TR><\/TABLE>"},isc.A.loadingMessageHTML=function isc_DetailViewer_loadingMessageHTML(){return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.loadingMessageStyle+"' ALIGN=CENTER><BR><BR>"+this.getLoadingMessage()+"<\/TD><\/TR><\/TABLE>"},isc.A.setFieldState=function isc_DetailViewer_setFieldState(_1){if(_1==null&&this.fieldState!=null){if(isc.isA.String(this.fieldState)){_1=this.evalViewState(this.fieldState,"fieldState")}}else _1=this.evalViewState(_1,"fieldState");this.completeFields=this.$16z(_1,true);this.setFields(this.completeFields);this.markForRedraw();this.fieldStateChanged()},isc.A.setFields=function isc_DetailViewer_setFields(_1){if(this.completeFields==null||this.fields==null)this.fields=[];this.completeFields=this.bindToDataSource(_1);if(this.completeFields==null)this.completeFields=[];this.deriveVisibleFields();this.updateFieldDependencies()},isc.A.deriveVisibleFields=function isc_DetailViewer_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields))},isc.A.getVisibleFields=function isc_DetailViewer_getVisibleFields(_1){var _2=this.getData(),_3=_1.duplicate();for(var i=0;i<_1.length;i++){var _5=_1.get(i);if(!this.fieldShouldBeVisible(_5,_2)||_5.visible==false)_3.remove(_5)}
return _3},isc.A.fieldShouldBeVisible=function isc_DetailViewer_fieldShouldBeVisible(_1,_2){if(_1.showIf!=null){if(_1.showIf==this.$16b||_1.showIf==this.$16a)return false;isc.Func.replaceWithMethod(_1,"showIf","viewer,valueList");if(!_1.showIf(this,_2))return false}
return true},isc.A.getTitleFieldValue=function isc_DetailViewer_getTitleFieldValue(_1){var _2=this.getDataSource().getTitleField(),_3=this.getCellValue(_1,this.getDataSource().getField(_2));return _3},isc.A.getStandaloneFieldValue=function isc_DetailViewer_getStandaloneFieldValue(_1,_2){var _3=this.getField(_2),_4=this.getCellValue(_1,_3);_4=this.addHiliteSpan(_1,_3,_4);return _4},isc.A.hideField=function isc_DetailViewer_hideField(_1){this.toggleField(_1,false)},isc.A.showField=function isc_DetailViewer_showField(_1){this.toggleField(_1,true)},isc.A.toggleField=function isc_DetailViewer_toggleField(_1,_2){var _3=this.getField(_1);_3.showIf=_2?"true":"false";_3.visible=_2;this.setFields(this.getAllFields());this.markForRedraw();this.fieldStateChanged()},isc.A.getField=function isc_DetailViewer_getField(_1){var _2=this.getAllFields(),_3=this.fields,_4;if(isc.isAn.Object(_1)&&_1[this.fieldIdProperty]!=null){_4=_2.find(this.fieldIdProperty,_1[this.fieldIdProperty])||_3.find(this.fieldIdProperty,_1[this.fieldIdProperty])}else if(isc.isA.Number(_1)){_4=_2[_1]||_3[_1]}else{_4=_2.find(this.fieldIdProperty,_1)||_3.find(this.fieldIdProperty,_1)}
return _4},isc.A.getFormattedValue=function isc_DetailViewer_getFormattedValue(_1,_2,_3){return this.getCellValue(_1,this.getSpecifiedField(_2))},isc.A.getPivotedExportData=function isc_DetailViewer_getPivotedExportData(_1){var _2=[],_3=this.getAllFields(),_4=this.data,_5,_6;if(_1==null)_1={};var _7=_1.includeHiddenFields;if(isc.isA.ResultSet(_4))_4=_4.getAllLoadedRows();if(!isc.isA.Array(_4))_4=[_4];for(var _8=0;_8<_3.length;_8++){var _9=_3[_8],_10={},_11=this.recordsPerBlock;_10.title=_9.title||_9.name;if(isc.isA.String(_10.title)){_10.title=this.htmlUnescapeExportFieldTitle(_10.title)}
if(_11==null)_11=1;if(_11=="*")_11=100000;if((!this.fields.contains(_9))&&!_7)continue;for(var _12=0;_12<_11&&_12<_4.getLength();_12++)
{var _13=_4[_12],_14=this.getFieldNum(_9.name),_15="value"+(_12+1),_16=_15+"$style";var _17=this.getExportFieldValue(_13,_9.name,_14);if(!(_17==null||_17=="&nbsp;"))_10[_15]=_17;this.addDetailedExportFieldValue(_10,_16,_13,_9,_14,_1);if(_10[_16]==null||_10[_16]=="&nbsp;")
delete _10[_16]}
_2.push(_10)}
return _2},isc.A.getViewState=function isc_DetailViewer_getViewState(_1){var _2={field:this.getFieldState(),sort:this.getSortState(),hilite:this.getHiliteState()};if(_1)return _2;return"("+isc.Comm.serialize(_2,false)+")"},isc.A.setViewState=function isc_DetailViewer_setViewState(_1){_1=this.evalViewState(_1,"viewState")
if(!_1)return;if(_1.field)this.setFieldState(_1.field);this.setSortState(_1.sort);this.setHiliteState(_1.hilite)});isc.B._maxIndex=isc.C+51;isc.DetailViewer.registerStringMethods({getCellValue:"record,field",getCellStyle:"value,field,record,viewer",getCellCSSText:"value,field,record,viewer",formatCellValue:"value,record,field,viewer",fieldStateChanged:""});isc.ClassFactory.defineClass("GridRenderer","Canvas");isc.A=isc.GridRenderer;isc.A.SELECTED="Selected";isc.A.DISABLED="Disabled";isc.A.OVER="Over";isc.A.standardStyleSuffixes=["","Over","Selected","SelectedOver","Disabled","DisabledOver","DisabledSelected","DisabledSelectedOver","Dark","OverDark","SelectedDark","SelectedOverDark","DisabledDark"];isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showFocusOutline=false;isc.A.totalRows=0;isc.A.drawAllMaxCells=250;isc.A.recordCanSelectProperty="canSelect";isc.A.isSeparatorProperty="isSeparator";isc.A.singleCellValueProperty="singleCellValue";isc.A.instantScrollTrackRedraw=true;isc.A.scrollRedrawDelay=75;isc.A.touchScrollRedrawDelay=300;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1.0;isc.A.cellHeight=20;isc.A.fixedRowHeights=true;isc.A.fixedColumnWidths=true;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.canSelectOnRightMouse=true;isc.A.hoverByCell=true;isc.A.backgroundColor="white";isc.A.tableStyle="listTable";isc.A.baseStyle="cell";isc.A.alternateRowFrequency=1;isc.A.alternateColumnFrequency=1;isc.A.emptyCellValue="&nbsp;";isc.A.emptyMessage="No data to display";isc.A.offlineMessage="No data available while offline";isc.A.fastCellUpdates=true;isc.A.overflow="auto";isc.A.$7q=true;isc.A.canFocus=true;isc.A.animateRowsMaxTime=1000;isc.A.snapToCells=false;isc.A.snapInsideBorder=false;isc.A.snapHDirection=isc.Canvas.BEFORE;isc.A.snapVDirection=isc.Canvas.BEFORE;isc.B.push(isc.A.shouldEnforceVClipping=function isc_GridRenderer_shouldEnforceVClipping(){return this.fixedRowHeights&&(this.enforceVClipping||this.wrapCells)},isc.A.setFastCellUpdates=function isc_GridRenderer_setFastCellUpdates(_1){if(_1&&!isc.Browser.isIE){this.fastCellUpdates=false;return}
if(_1==this.fastCellUpdates)return;this.fastCellUpdates=_1;this.markForRedraw()});isc.B._maxIndex=isc.C+2;isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.columnSizerDefaults={columnSizer:true,top:-1000,width:1,height:1,overflow:"hidden",ariaState:{hidden:true}};isc.A.clearColumnSizerDelay=100;isc.A.$88q=["<DIV id='",,"' style='"+(isc.Browser.isMoz&&isc.Browser.version==18?"display:inline;":"")+"position:absolute;overflow:",,";z-index:",,";width:",,"px'>",null,,,isc.Browser.isIE?"</form>":null,"</DIV>"];isc.A.$88r="<table style='position:absolute;top:0px;font-size:1px;height:100%;width:100%;z-index:1;overflow:hidden;visibility:hidden;'><tr><td>&nbsp;</td></tr></table>";isc.A.$88s="<form action='javascript:void(0)' style='overflow:hidden' onsubmit='return false;'>";isc.A.$88t="<form action='javascript:void(0)' onsubmit='return false;'>";isc.A.maxAnimateSlideInRows=100;isc.A.$sw="none";isc.A.screenReader_suppressHandleFocus=true;isc.A.allowRowSpanning=true;isc.A.closeNOBRs=false;isc.A.$88u={};isc.A.$88v="<DIV role='presentation' cellClipDiv=true style='overflow:hidden;"+isc.Browser.$s+":ellipsis;";isc.A.$88w="<div>";isc.A.$88x="</div>";isc.A.$88y=[,"<div style='height:",,,,,,"px;line-height:0px'>&nbsp;</div>"];isc.A.$88z="within";isc.A.$880="expand";isc.A.$46y="cell";isc.A.alignSnapToMap={left:{top:"TL",center:"L",bottom:"BL"},right:{top:"TR",center:"R",bottom:"BR"},center:{top:"T",center:"C",bottom:"B"}};isc.A.recordCustomStyleProperty="customStyle";isc.A.showSelectedStyle=true;isc.A.$881="NOBR";isc.A.$882="cellClipDiv";isc.A.$2t="height";isc.A.$883="minHeight";isc.A.$y5=";";isc.A.$884="padding-top:0px;padding-bottom:0px;";isc.A.$885="overflow:hidden;";isc.A.avgRowHeight=60;isc.B.push(isc.A.initWidget=function isc_GridRenderer_initWidget(){if(!this.$72y)this.setColumnWidths([]);if(this.selection)this.setSelection(this.selection);if(this.overflow==isc.Canvas.VISIBLE){this.showAllRows=true}
if(!this.fixedRowHeights&&this.virtualScrolling==null)this.virtualScrolling=true;if(this.virtualScrolling&&!this.showAllRows){if(this.showCustomScrollbars==false){this.logInfo("Variable height records cannot be used with native scrollbars; setting showCustomScrollbars:true on this GridRenderer and using the special 'NativeScrollbar' class as a scrollbarConstructor.");this.showCustomScrollbars=true;this.useNativeTouchScrolling=false;this.scrollbarConstructor="NativeScrollbar"}}
this.setFastCellUpdates(this.fastCellUpdates)},isc.A.clearColumnSizer=function isc_GridRenderer_clearColumnSizer(_1){var _2=this.$886;if(_2!=null){if(_1){_2.clear()}else{_2.setContents(isc.nbsp)}}},isc.A.destroy=function isc_GridRenderer_destroy(){this.clearSelection();this.Super("destroy",arguments);this.$886=null},isc.A.shouldShowAllColumns=function isc_GridRenderer_shouldShowAllColumns(){if(this.showAllColumns)return true;if(!this.fixedRowHeights&&!this.showAllRows)return true;if(this.overflow==isc.Canvas.VISIBLE){return true}
return false},isc.A.isEmpty=function isc_GridRenderer_isEmpty(){return false},isc.A.$887=function isc_GridRenderer__showEmptyMessage(_1,_2){return this.getEmptyMessageHTML(_1,_2,this.grid.isOffline())},isc.A.getEmptyMessageHTML=function isc_GridRenderer_getEmptyMessageHTML(_1,_2,_3){if(!_3){if(!this.showEmptyMessage)return"&nbsp;"}else{if(!this.showOfflineMessage)return"&nbsp;"}
if(this.isPrinting){if(_1==null)_1=0;if(_2==null)_2=this.fields?this.fields.getLength()-1:0;var _4=!(this.$888&&this.printChunkOnly);return"<TABLE role='presentation' cellspacing=0 style='width:100%'"+(this.emptyMessageTableStyle?(" class='"+this.emptyMessageTableStyle+"'"):"")+">"+(_4?this.getPrintHeaders(_1,_2+1):"")+"<TR><TD  ALIGN=CENTER class='"+(_3?this.offlineMessageStyle:this.emptyMessageStyle)+"' colspan='"+((_2-_1))+"'>"+(_3?this.getOfflineMessage():this.getEmptyMessage())+"</TD></TR>"+(_4?this.getPrintFooters(_1,_2+1):"")+"</TABLE>"}
var _5=this.getInnerWidth(),_6=0;if(this.expandEmptyMessageToMatchFields&&this.$72y){_6=this.$72y.sum()-_5;if(_6<0)_6=0}
if(this.applyHSpaceToEmptyMessage){if(this.leftSpace!=null)_6+=this.leftSpace;if(this.rightSpace!=null)_6+=this.rightSpace}
var _7=_6&&this.overflow!=isc.Canvas.VISIBLE;var _8=this.$889;if(_8==null){_8=0;if(this.$89a()){_8=(this.fixedRowHeights?0:this.cellPadding*2);if(this.emptyMessageTableStyle)_8+=isc.Element.$0h(this.emptyMessageTableStyle)}}
var _9=isc.StringBuffer.create();_9.append("<TABLE role='presentation' BORDER=0 MARGIN=0 CELLSPACING='",this.cellSpacing,"' CELLPADDING='",this.cellPadding,(this.emptyMessageTableStyle?("' CLASS='"+this.emptyMessageTableStyle):null),"' style='width:",(_5+_6),"px;",(isc.Browser.isSafari?"'":"' HEIGHT=100%"),"><TR><TD ALIGN=CENTER CLASS='",(_3?this.offlineMessageStyle:this.emptyMessageStyle),"' style='padding-left:0px;padding-right:0px;height:"+(this.cellHeight-_8)+"px'>",(_3?this.getOfflineMessage():this.getEmptyMessage()),(_6&&_7?"<br>"+isc.Canvas.spacerHTML(_5,1):null),"</TD>");if(_6&&_7){_9.append("<TD style='padding-left:0px;padding-right:0px;'>",isc.Canvas.spacerHTML(_6,1),"</TD>")}
_9.append("</TR></TABLE>");return _9.release(false)},isc.A.getEmptyMessage=function isc_GridRenderer_getEmptyMessage(){return this.emptyMessage},isc.A.getOfflineMessage=function isc_GridRenderer_getOfflineMessage(){return this.grid.offlineMessage},isc.A.$89b=function isc_GridRenderer__getZIndexDivID(){return this.$4b("zIndexDiv")},isc.A.$89c=function isc_GridRenderer__getZIndexDiv(){return this.getDocument().getElementById(this.$89b())},isc.A.$89d=function isc_GridRenderer__zIndexDivOverflowHidden(){return(this.fixedFieldWidths&&this.overflow!=isc.Canvas.VISIBLE)},isc.A.getInnerHTML=function isc_GridRenderer_getInnerHTML(){var _1=this.getTableHTML(),_2=this.$88q;_2[1]=this.$89b();var _3=this.$89d(),_4=_3?"hidden":"visible";_2[3]=_4;if(isc.Browser.isIE){_2[9]=_3?this.$88s:this.$88t}
_2[5]=this.getTableZIndex();var _5=this.grid,_6=this.$72y.sum();if(this.showCustomScrollbars&&!this.frozen&&_5!=null&&_5.$89e()&&!this.vscrollOn)
{_6+=_5.$89f()}
if(this.leftSpace)_6+=this.leftSpace;if(this.rightSpace)_6+=this.rightSpace;_2[7]=_6;_2[10]=_1;if(isc.Browser.isMoz)_2[11]=this.$88r;return _2.join(isc.emptyString)},isc.A.innerSizeChanged=function isc_GridRenderer_innerSizeChanged(_1,_2,_3,_4){var _5=this.invokeSuper(isc.GridRenderer,"innerSizeChanged",_1,_2,_3,_4);var _6=this.$89c();if(_6!=null){var _7=this.grid,_8=this.$72y.sum();if(this.showCustomScrollbars&&!this.frozen&&_7!=null&&_7.$89e()&&!this.vscrollOn)
{_8+=_7.$89f()}
_6.style.width=_8+isc.px}
return _5},isc.A.isFastScrolling=function isc_GridRenderer_isFastScrolling(){return this.isDragScrolling()||this.isRepeatTrackScrolling()||this.isMouseWheelScrolling()},isc.A.shouldUseQuickDrawAheadRatio=function isc_GridRenderer_shouldUseQuickDrawAheadRatio(){return this.useQuickDrawAheadRatio||this.isFastScrolling()},isc.A.doneFastScrolling=function isc_GridRenderer_doneFastScrolling(){var _1=this.$89g;if(_1){this.$89h=true;this.markForRedraw("Done Fast scrolling.")}},isc.A.addDrawAhead=function isc_GridRenderer_addDrawAhead(_1,_2,_3,_4,_5){var _6=this.shouldUseQuickDrawAheadRatio(),_7=_6&&this.quickDrawAheadRatio!=null?this.quickDrawAheadRatio:this.drawAheadRatio,_8=Math.ceil((_2-_1)*_7);if(this.$89h)_4=null;if(_4!=null){if(_4)_2=_1+_8;else _1=_2-_8}else{if(_1==0)_2=_8;else{var _9=Math.ceil((_8-(_2-_1))/2);_1-=_9;_2+=_9}}
if(_1<0){_2-=_1;_1=0}
if(_2>=_3){var _10=_2-(_3-1);_1=Math.max(0,(_1-_10));_2=Math.max(0,_3-1)}
if(_6)this.$89g=true;else delete this.$89g;return[_1,_2]},isc.A.$89i=function isc_GridRenderer__isFrozenBody(){if(this.grid&&this.grid.frozenBody==this)return 1;return 0},isc.A.getExtraRowHeight=function isc_GridRenderer_getExtraRowHeight(_1,_2){var _3=0;for(var _4=_1;_4<_2;_4++){var _5=this.getRowHeight(this.getCellRecord(_4,0),_4,this.$89i()),_6=(_5-this.cellHeight);if(_6>0){_3+=_6}}
return _3},isc.A.getDrawArea=function isc_GridRenderer_getDrawArea(_1){var _2=this.getTotalRows(),_3,_4,_5;var _6=_2*this.fields.length,_7=_6<=this.drawAllMaxCells&&!isc.EH.dragging&&!this.isAnimating()&&!(this.parentElement&&this.parentElement.isAnimating());if(this.showAllRows||_7){_3=0;_4=Math.max(_2-1,0)}else{var _8=this.$89j();_3=_8[0];_4=_8[1];_5=_8[2]}
var _9,_10,_11=this.fields.length,_12;if(_1!=null){_9=_1;_10=_1+1}else if(_7||this.shouldShowAllColumns()){_9=0;_10=_11-1}else{var _13=this.getVisibleColumns();_12=(this.lastScrollLeft==null?null:this.lastScrollLeft<this.getScrollLeft());var _14=this.addDrawAhead(_13[0],_13[1],_11,_12);_9=_14[0];_10=_14[1]}
if(this.cacheDOM&&!this.$89k){this.$89k=_4-_3;this.$89l=_10-_9}
return[_3,_4,_9,_10]},isc.A.$89j=function isc_GridRenderer__getDrawRows(){var _1=this.$89m();var _2=(this.lastScrollTop==null?null:this.lastScrollTop<this.getScrollTop());var _3=this.getTotalRows();var _4=this.addDrawAhead(_1[0],_1[1],_3,_2,true);if(this.virtualScrolling&&this.grid){var _5=this.grid.data,_6=_4[0];if(_6>0&&_6<this.getViewportHeight()/this.cellHeight){if(isc.ResultSet&&isc.isA.ResultSet(_5)){var _7=_5.findLastCached(_6,true);if(_7!=null)_4[0]=_7}else if(isc.ResultTree&&isc.isA.ResultTree(_5)){var _8=isc.ResultTree.getLoadingMarker(),_9=_5.getRange(0,_6,true),_7=_9.lastIndexOf(_8);_4[0]=_7+1}else{_4[0]=0}}}
_4[2]=_2;return _4},isc.A.getRowCoordinate=function isc_GridRenderer_getRowCoordinate(_1){var _2=this.getEventRow(_1),_3=this.getRowTop(_2),_4=_1-_3,_5=this.getRowSize(_2),_6=_4/_5;return _2+_6},isc.A.scrollToRatio=function isc_GridRenderer_scrollToRatio(_1,_2,_3,_4,_5){if(!_1||!this.$89n){return this.invokeSuper(isc.GridRenderer,"scrollToRatio",_1,_2,_3,_4,_5)}
var _6=this.getTotalRows()-1,_7=_2*_6,_8=Math.floor(_7),_9=Math.round((_7-_8)*this.getRowSize(_8));this.$89o=_8;this.$89p=_9;this.$89q(_3||"scrollToRatio");if(this.isDirty()){this.$89r=_2;this.$89o=_8;this.$89p=_9}},isc.A.getScrollRatio=function isc_GridRenderer_getScrollRatio(_1,_2,_3,_4){if(!_1||!this.$89n){return this.invokeSuper(isc.GridRenderer,"getScrollRatio",_1,_2,_3,_4)}
if(this.isDirty()&&this.$89r!=null)return this.$89r;var _5=this.getTotalRows()-1;if(_5<=0)return 0;var _6=this.getScrollTop(),_7=this.getRowCoordinate(_6),_8=_7/_5;return Math.min(1,_8)},isc.A.getViewportRatio=function isc_GridRenderer_getViewportRatio(_1,_2,_3,_4){if(!_1||!this.$89n){return this.invokeSuper(isc.GridRenderer,"getViewportRatio",_1,_2,_3,_4)}
var _5=this.$89s||this.getAvgRowHeight();return Math.min(1,(this.getViewportHeight()/_5)/this.getTotalRows())},isc.A.$89t=function isc_GridRenderer__storeTargetRow(_1,_2){if(this.$89u)return;if(this.isEmpty())return;var _3,_4,_5=this.getTotalRows()-1;if(_2>0){_3=_1+this.getViewportHeight();_4=this.getEventRow(_3);if(_4==-2&&_5>=0){_4=_5}}else{_3=_1;_4=this.getEventRow(_3)}
if(_4<this.$20t)_4=this.$20t;if(_4>this.$89v)_4=this.$89v;var _6=_1;if(_4<0||_4>_5){this.$89o=_5;this.$89p=0;_6=this.getRowTop(_5)}else{this.$89o=_4;this.$89p=_1-this.getRowTop(this.$89o)+_2;if(-this.$89p>this.getViewportHeight()||this.$89p>this.getRowSize(this.$89o))
{this.logInfo("storeTargetRow: targetRow: "+_4+" with offset: "+this.$89p+", resetting to use row containing scroll offset "+_1,"virtualScrolling");this.$89o=this.getEventRow(_1);this.$89p=_1-this.getRowTop(this.$89o)+_2}}
return _6},isc.A.$89q=function isc_GridRenderer__scrollToTargetRow(_1){var _2=this.$89o,_3=this.$89p;var _4=this.getRowTop(_2)+_3;this.$89u=true;this.$8h=null;this.scrollTo(null,_4,_1||"targetRow");this.$89u=false;this.$89r=null},isc.A.scrollIntoView=function isc_GridRenderer_scrollIntoView(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){if((_10!=null)&&(_10!=this)){return}
this.invokeSuper(isc.GridRenderer,"scrollIntoView",_1,_2,_3,_4,_5,_6,_7,_8,_9,_10)},isc.A.scrollTo=function isc_GridRenderer_scrollTo(_1,_2,_3,_4){if(isc.$et)arguments.$eu=this;if(this.$89n&&_2!=null&&_3!="nativeScroll"){var _5=this.getScrollTop(),_6=_2-_5;if(_6!=0){this.$89t(_5,_6);_2=Math.min(_2,this.getRowTop(this.getTotalRows()-1))}}
this.invokeSuper(isc.GridRenderer,"scrollTo",_1,_2,_3,_4);if(this.isDirty()||this.$89w)return;if(!this.$89x&&this.$89y()){this.redrawOnScroll(!this.isFastScrolling()&&this.instantScrollTrackRedraw&&(_3!==this.$3c||isc.Browser.iOSVersion<8||!this.$vg()))}},isc.A.$89z=function isc_GridRenderer__getRedrawOnScrollCallback(){if(this.$890==null){var _1=this;this.$890=function(){delete this.$891;_1.$109();_1.redraw("scrolled")}}
return this.$890},isc.A.redrawOnScroll=function isc_GridRenderer_redrawOnScroll(_1){if(this.$892){return}
if(_1){this.redraw("scrolled")}else{var _2=this.isMouseWheelScrolling(),_3=this.getScrollRedrawDelay(_2);if(_3==0){this.markForRedraw("scrolled")}else{this.fireOnPause("scrollRedraw",this.$89z(),_3);this.$891=_2}}
this.$893=true},isc.A.getScrollRedrawDelay=function isc_GridRenderer_getScrollRedrawDelay(_1){var _2=isc.Browser.isTouch?this.touchScrollRedrawDelay:this.scrollRedrawDelay;if(this.scrollWheelRedrawDelay==null)return _2;if(_1==null){_1=this.isMouseWheelScrolling()}
if(_1){_2=this.scrollWheelRedrawDelay}
return _2},isc.A.$894=function isc_GridRenderer__needRowRedraw(){if(this.showAllRows)return false;var _1=this.getVisibleRows(),_2=_1[0],_3=_1[1];var _4=this.getTotalRows();if(_3>_4-1)_3=_4-1;var _5=(_2<this.$20t||_3>this.$89v);return _5},isc.A.$895=function isc_GridRenderer__needColumnRedraw(){if(this.shouldShowAllColumns())return false;var _1=this.getVisibleColumns(),_2=_1[0],_3=_1[1],_4=(_2<this.$20u||_3>this.$896);return _4},isc.A.$89y=function isc_GridRenderer__needAxisRedraw(){return this.$894()||this.$895()},isc.A.setOverflow=function isc_GridRenderer_setOverflow(_1){if(_1==isc.Canvas.VISIBLE){this.showAllRows=true}
return this.Super("setOverflow",arguments)},isc.A.getRowChunkNum=function isc_GridRenderer_getRowChunkNum(_1){return Math.round(_1/this.$89k)},isc.A.getColChunkNum=function isc_GridRenderer_getColChunkNum(_1){return Math.round(_1/this.$89l)},isc.A.getTableChunk=function isc_GridRenderer_getTableChunk(_1,_2){var _3=this.$897;if(!_3)return;_1=_1||0;_2=_2||0;var _4=_3[_1];return _4?_4[_2]:null},isc.A.getTableChunkAt=function isc_GridRenderer_getTableChunkAt(_1,_2){var _3=this.getRowChunkNum(_1),_4=this.getColChunkNum(_2),_5=this.getTableChunk(_3,_4);if(_5!=null){this.$898=_3*this.$89k;this.$20u=_4*this.$89l;return _5}},isc.A.$57=function isc_GridRenderer__updateInnerHTML(_1,_2,_3,_4){if(this.cacheDOM){this.drawVisibleChunks()}else{this.$899();this.$90a=true;this.invokeSuper(isc.GridRenderer,"$57",_1,_2,_3,_4);delete this.$90a}},isc.A.$4r=function isc_GridRenderer__updateParentHTML(_1,_2,_3,_4){this.$899();this.$90a=true;this.invokeSuper(isc.GridRenderer,"$4r",_1,_2,_3,_4);delete this.$90a},isc.A.drawVisibleChunks=function isc_GridRenderer_drawVisibleChunks(){var _1=this.getVisibleRows(),_2=this.getVisibleColumns(),_3=this.getRowChunkNum(_1[0]),_4=this.getColChunkNum(_2[0]),_5=this.getRowChunkNum(_1[1]),_6=this.getColChunkNum(_2[1]);for(var _7=_3;_7<_5;_7++){for(var _8=_4;_8<_6;_8++){if(this.getTableChunk(_7,_8)==null){this.logWarn("drawing chunk: "+[_7,_8]);this.renderTableChunk(_7,_8)}}}
var _9=this.getTableHTML()},isc.A.renderTableChunk=function isc_GridRenderer_renderTableChunk(_1,_2){var _3=_1*this.$89k,_4=_3+this.$89k,_5=_2*this.$89l,_6=_5+this.$89l;var _7=this.getTableHTML([_5,_6],_3,_4),_8=isc.Element.insertAdjacentHTML(this.getHandle(),"beforeEnd",_7,true);var _9=this.$897=this.$897||[],_10=_9[_1]=_9[_1]||[];_10[_2]=_8},isc.A.startRowAnimation=function isc_GridRenderer_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){this.finishRowAnimation();if(!this.isDrawn()||!this.isVisible()){if(_4!=null){var _11=_9?this.parentElement:this;_11.fireCallback(_4)}
return}
if(_1==null)_1=true;if(_2==null)_2=0;if(_3==null)_3=this.getTotalRows()-1;if(_2==_3){this.logWarn("startRowAnimation passed empty row range, aborting: "+[_2,_3]);return}
var _12=this.readyToRedraw("animating show / hide of rows",false);if(!_12){this.$90b=[_1,_2,_3,_4,_5,_6,_7,_8,_9];this.$90c=isc.Timer.setTimeout({target:this,methodName:"$90d"},0);return}
if((_3-_2)>this.maxAnimateSlideInRows)_8=false;this.$90e=_8;var _13=this.$90f(_1,_2,_3,_4,_9);this.animateRowHeight(this.$90g,(_1?_13:0),{target:this,methodName:"$90h"},_5,_6,_7,_8)},isc.A.$90d=function isc_GridRenderer__delayedStartRowAnimation(){if(this.$90b==null){this.logWarn("Unable to perform delayed row animation - bailing");return}
var _1=this.$90b,_2=_1[0],_3=_1[1],_4=_1[2],_5=_1[3],_6=_1[4],_7=_1[5],_8=_1[6],_9=_1[7],_10=_1[8];this.$90b=null;this.$90c=null;this.startRowAnimation(_2,_3,_4,_5,_6,_7,_8,_9,_10,true)},isc.A.$90f=function isc_GridRenderer__initializeShowHideRow(_1,_2,_3,_4,_5){var _6=0;if(this.$90g==_2&&this.$90i==_3){var _7=this.getTableElement(this.$90g,0),_8=this.$90j(_7);if(!_8){_6=(_3-_2)*this.cellHeight}else _6=_8.scrollHeight}else{this.$90g=_2;this.$90i=_3;if(!_1){var _9=this.$90k();for(var i=_2;i<_3;i++){_6+=_9[i]}
this.$90l=_6;this.redraw("initializing animated hide row")}else{this.$90l=1;this.redraw("initializing animated show row");var _7=this.getTableElement(this.$90g,0),_8=this.$90j(_7);if(!_8){_6=(_3-_2)*this.cellHeight}else _6=_8.scrollHeight}
if(this.isDirty())this.redraw("Initializing row animation requires second redraw")}
this.$90m={callback:_4,target:(_5?this.parentElement:this)};return _6},isc.A.finishRowAnimation=function isc_GridRenderer_finishRowAnimation(){if(this.$90g!=null){this.finishAnimateRowHeight()}else{if(this.$90c!=null){isc.Timer.clearTimeout(this.$90c);var _1=this.$90b,_2=_1[0],_3=_1[1],_4=_1[2],_5=_1[3],_6=_1[4],_7=_1[5];delete this.$90b;delete this.$90c;if(!this.readyToRedraw()){this.logWarn("Finish row animation called while Grid is not ready to redraw. GridRenderer HTML will not be updated when callback fires.","animation");var _8=_7?this.parentElement:this;if(_5)_8.fireCallback(_5)}else{var _9=this.$90f(_2,_3,_4,_5,_7);this.setRowHeight(_3,(_2?_9:1));this.$90h()}}}},isc.A.$90h=function isc_GridRenderer__rowShowComplete(){var _1=this.$90m;delete this.$90m;delete this.$90g;delete this.$90i;delete this.$90l;if(_1&&_1.callback)_1.target.fireCallback(_1.callback)},isc.A.animateRowHeight=function isc_GridRenderer_animateRowHeight(_1,_2,_3,_4,_5,_6,_7,_8){if(!this.isDrawn()){if(_3){var _9=(_8?this.parentElement:this);_9.fireCallback(_3)}
return}
if(this.$892!=null){this.logInfo("early finish of row animation, because new animation started","animation")
this.finishAnimateRowHeight()}
var _10=this.getRowSize(_1);if(_4!=null){var _11=(_2-_10);if(_11<0)_11=0-_11;_5=Math.round((_11/_4)*1000);if(_5>this.animateRowsMaxTime)_5=this.animateRowsMaxTime}
this.$90n={$90o:_1,$90p:_10,$90q:_2,$220:_3,$23m:_7,$90r:_8}
_6=(_6||this.$sw);if(this.logIsInfoEnabled("animation")){this.logInfo("starting row animation, row:"+_1+", duration: "+_5+", effect: "+_6,"animation")}
this.$892=this.registerAnimation({target:this,method:this.$90s},_5,_6);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)
this.$6d=true},isc.A.$90s=function isc_GridRenderer__fireRowAnimation(_1){var _2=this.$90n;if(_2==null)return;var _3=_2.$90o,_4=this.$221(_2.$90p,_2.$90q,_1);if(isc.Browser.isSafari&&_2.$90p>_2.$90q)
this.$90t=true;this.setRowHeight(_3,_4,null,isc.emptyString,true,true,true);if(isc.Browser.isSafari)delete this.$90t;if(_2.$23m){var _5=this.$90j(this.getTableElement(_3,0));if(_5){var _6=_5.scrollHeight,_7=_5.offsetHeight;if(_6>_7)_5.scrollTop=_6-_7;else _5.scrollTop=0}}
if(_1==1){isc.Timer.setTimeout({target:this,methodName:"$90u"},0)}},isc.A.$90u=function isc_GridRenderer__rowAnimationComplete(){if(isc.screenReader){var _1=this.ns.EH.getFocusCanvas();this.$90v(this.getNativeFocusRow(),_1!=null&&_1!==this)}
delete this.$6d;this.adjustOverflow("row animation complete");var _2=this.$90n;delete this.$892;delete this.$90n;if(_2&&_2.$220){var _3=_2.$90r?this.parentElement:this;_3.fireCallback(_2.$220)}},isc.A.finishAnimateRowHeight=function isc_GridRenderer_finishAnimateRowHeight(){if(!this.$892)return;this.cancelAnimation(this.$892);this.$90s(1)},isc.A.$90w=function isc_GridRenderer__getPrintChildren(){return this.$90x},isc.A.getTablePrintHTML=function isc_GridRenderer_getTablePrintHTML(_1,_2,_3,_4,_5){return this.getTableHTML(_1,_2,_3,_4,_5)},isc.A.draw=function isc_GridRenderer_draw(){if(isc.screenReader&&this.screenReader_suppressHandleFocus){this.clipHandleIsFocusHandle=this.isEmpty()}
return this.Super("draw",arguments)},isc.A.handleKeyDown=function isc_GridRenderer_handleKeyDown(_1,_2){var _3=this.Super("handleKeyDown",arguments);if(_3!=false&&isc.screenReader&&this.screenReader_suppressHandleFocus){var _4=isc.EH.clickMaskUp(),_5=false;if(_4){var _6=isc.EH.clickMaskRegistry;for(var i=0;i<_6.length;i++){if(isc.EH.isHardMask(_6[i])){_5=true;break}}}
if(!_5){var _8=_1.keyName;if(_8=="Tab"){this.$tx(!isc.EH.shiftKeyDown())
return false}}}
delete this.$90y;return _3},isc.A.$90z=function isc_GridRenderer__getScreenReaderCellSeparatorID(){return this.$4b("screenReaderCellSeparator")},isc.A.$900=function isc_GridRenderer__getScreenReaderRowSeparatorID(){return this.$4b("screenReaderRowSeparator")},isc.A.$901=function isc_GridRenderer__lockVirtualScrolling(){},isc.A.$902=function isc_GridRenderer__canStopVirtualScrolling(){return false},isc.A.$89a=function isc_GridRenderer__shouldSubtractVBorderPadFromRowHeight(){return isc.Browser.isStrict&&((isc.Browser.isMoz&&isc.Browser.version>=17)||(isc.Browser.isSafari||isc.Browser.isIE))},isc.A.getTableHTML=function isc_GridRenderer_getTableHTML(_1,_2,_3,_4,_5,_6){if(isc.$et)arguments.$eu=this;var _7=isc.timeStamp();if(this.isEmpty()){this.$20t=this.$89v=this.$20u=this.$896=null;return this.$887()}
if(this.isPrinting&&(!this.$888||_2==0)){var _8=this.$90w();if(_8!=null&&_8.length>0){for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.$903!=null)continue;var _11={component:_10,colNum:_1,startRow:_2,endRow:_3,descreteCols:_4,asyncCallback:_5};var _12=_8[i].getPrintHTML(this.printProperties,_5==null?null:{target:this,methodName:"gotComponentPrintHTML",context:_11});if(_12!=null){_10.$903=_12}else{return null}}}}
var _13=(_2!=null&&_3!=null),_14=_2!=null?_2:0,_15=_3!=null?_3:this.getTotalRows();var _16=this.$904(_2,_3,true),_17=this.grid;if(!_13){var _18=(_16[0]==0&&_16[1]==this.getTotalRows());if(this.virtualScrolling){var _19=this.$89n,_20=!_18;if(_20!=_19&&(_20||this.$902()))
{this.$89n=_20;if(this.$89n){if(this.isDrawn()){var _21=this.getScrollTop(),_22=this.getEventRow(_21),_23=this.getRowTop(_22);if(_23<_21)_22++;this.$89o=_22;this.$89p=_21-this.getRowTop(_22);_16=this.$904(_2,_3,true)}}else{delete this.$89o;delete this.$89p;delete this.$89r;delete this.$905}}
if(this.$89n)this.$901()}}
_2=_16[0];_3=_16[1];if(!this.$906){this.$20u=_16[2];this.$896=_16[3]}
var _24=_1!=null&&isc.isAn.Array(_1),_25,_26;if(!_24)_4=false;if(_1!=null){if(_24){_25=_1[0];_26=_1[1]+1}else{_25=_1;_26=_1+1}}else{_25=this.$20u;_26=this.$896+1}
var _27;if(_4)_27=_1;else{_27=[];for(var i=_25;i<_26;i++){_27[_27.length]=i}}
var _28=_27.length;var _29=(this.shouldShowAllColumns()||_1!=null);var _30=isc.StringBuffer.create(),_31=this.fields,_32=this.$72y;this.$907=_27[0]!=0?null:this.$72y[0];var _33,_34,_35,_36;if(!_29||this.leftSpace!=null||this.rightSpace!=null){_33=(this.leftSpace!=null)?this.leftSpace:0;_34=(this.rightSpace!=null)?this.rightSpace:0;if(!_29){_33+=this.$72y.slice(0,_25).sum();_34+=this.$72y.slice(_26,this.$72y.length).sum()}
_35=this.$72y.sum()
_36=(this.cacheDOM||(isc.Browser.isIE&&!(isc.Browser.isIE8||isc.Browser.isIE9))?"margin":"padding")}
var _37=this.autoFit;var _38="";if(_1!=null){if(!_37&&this.fixedColumnWidths){_38=" WIDTH=100%"}}else if(this.isPrinting&&this.autoFit){_38=" WIDTH=100%"}else if((isc.Browser.isIE8Strict||isc.Browser.isMoz||isc.Browser.isSafari)&&!_37)
{var _39=this.$72y.slice(_25,_26).sum();_38=" WIDTH="+_39}
var _40=this.startSpace||0;if(_13)_40=0;if(_2!=_14){var _41=((_2-_14)*this.getAvgRowHeight());this.$908=_41;_40+=_41}else{this.$908=0}
var _42=true;var _43=(_15-_14)*this.getAvgRowHeight();if(isc.Browser.isIE){if(_43>1300000)_42=false}
if(!_13)this.$909=_42;if(_43>10000000){this.logWarn("This grid is showing "+(_15-_14).toLocalizedString()+" rows. Due to native rendering limitations, grids with this many rows may not appear correctly on all browsers. Consider filtering the data displayed to the user to reduce the total number of rows displayed at a time. This will improve usability as well as avoiding unpredictable behavior.")}
if(!this.cacheDOM&&!this.isPrinting){_30.append("<DIV style='width:1px;");if(_42){_30.append("height:",_40,"px;overflow:hidden;")}
if(_40==0)_30.append("display:none;");_30.append("' ");if(_13||this.isPrinting){_30.append(">")}else{_30.append(" ID="+this.getID()+"$91a>")}
_30.append(isc.Canvas.spacerHTML(1,_40),"</DIV>")}
if(!this.$888||(_2==0&&!this.printChunkOnly)){if(isc.screenReader){_30.append("<div id='",this.$90z(),"' style='display:none' aria-hidden='true'>",this.screenReaderCellSeparator,"</div>","<div id='",this.$900(),"' style='display:none' aria-hidden='true'>",this.screenReaderRowSeparator,"</div>")}
_30.append("<TABLE",(isc.Browser.isIE&&isc.screenReader?" unselectable='on'":null)," role='presentation' BORDER=0",_38,((!_13&&!this.isPrinting)?" ID="+this.getTableElementId():null),(this.tableStyle&&isc.Browser.isDOM?" CLASS='"+this.tableStyle+this.$1t:isc.$ba)," CELLSPACING=",this.cellSpacing," CELLPADDING=",this.cellPadding," STYLE='",(isc.Browser.isDOM&&!_37&&this.fixedColumnWidths?"table-layout:fixed;overflow:hidden;":""),(!_29?_36+(this.isRTL()?"-right: ":"-left:")+_33+"px;"+_36+(this.isRTL()?"-left:":"-right:")+_34+"px;":""),(this.cacheDOM&&this.$908>0?"margin-top:"+this.$908+"px;":""),(this.$89o!=null&&!(isc.Browser.isIE&&this.$7q)&&!this.isPrinting?"visibility:hidden;":""),"'>",(isc.Browser.isMoz?"<TBODY></TBODY>":""));var _44=0,_45=0,_46=this.$91b();if(this.$89a()){if((isc.Browser.isIE&&isc.Browser.version<8)||(isc.Browser.isSafari&&isc.Browser.safariVersion<530))
{_45=this.$91c()}
_44=(this.fixedRowHeights?0:this.cellPadding*2);_44+=isc.Element.$0h(_46)}
this.$889=_44;this.$91d=_45;_30.append("<colgroup>");if(!_37&&isc.Browser.isDOM){for(var i=0;i<_27.length;i++){_30.append("<COL WIDTH=",(_32[_27[i]]-_45),">")}}
_30.append("</colgroup>");_30.append("<TBODY>")}
var _47=this.cellHeight,_48=this.$91e(_47),_49=!this.wrapCells&&!isc.Browser.isIE8Strict,_50=!_49||_48,_51=(_50?"":"<NOBR>"),_52=(!this.closeNOBRs||_50?"":"</NOBR>");var _53=0;if(isc.Browser.isDOM){var _54=[],_55=1,_56=2,_57=3,_58=5,_59=6,_60=7,_61=8,_62=10,_63=11,_64=18,_65,_66,_67=21,_68=24;_54[0]="<TD";if(isc.Browser.isIE&&isc.screenReader)_54[0]+=" unselectable='on'";_54[4]=" ALIGN=";_54[16]=_50&&!this.wrapCells?";white-space: nowrap;":null;_54[17]=this.fastCellUpdates?"' ":"' class=";if(!_13&&!this.isPrinting&&(isc.screenReader||this.getCellElementId)){_54[19]=" id=";_65=20}
_54[23]=">"+_51;_54[30]=_52+(_48?"</DIV></TD>":"</TD>");var _69="<TR",_70="</TR>",_71=">",_72=" HEIGHT=",_73=" VALIGN=";if(_17&&_17.canDragRecordsOut&&_17.useNativeDrag){_69+=" draggable='true'"}
if(isc.Browser.isMobileWebkit)_69+=" onmousedown='return true;' style='-webkit-tap-highlight-color: rgba(0,0,0,0)'";var _74;if(isc.screenReader){_74=" tabIndex=-1"}
var _75=isc.Canvas.ariaEnabled();var _76=[],_77=0,_78=[];var _79=this.$91f={};this.$91g(_27,_37,_45,_48);if(this.isPrinting&&(!this.$888||(_2==0&&!this.printChunkOnly))){_30.append(this.getPrintHeaders(_25,_26))}
var _80=this.$89i();if(_65!=null){_66=new Array(_27.length)}
for(var _81=_2;_81<_3;_81++){var _82=(!_13&&this.$90g==_81);if(_65!=null){var _83=_81-_2;for(var i=0;i<_27.length;++i){var _1=_27[i],_84=_1-_25;if(this.getCellElementId){_66[_84]=this.getCellElementId(_81,_83,_1,_84)}else{_66[_84]=this.ID+"_cell"+_81+"_"+_1}}}
var _85=this.getCellRecord(_81);var _86=_82||this.$91h(_81,_85);_30.append(_69);if(_74!=null){if(this.screenReader_suppressHandleFocus){if(this.getNativeFocusRow()==_81){_30.append(" tabIndex=",this.getTabIndex(),isc.Canvas.$7b,this.$5h(),isc.Canvas.$7c,this.$5i())}else{_30.append(_74)}}else{_30.append(_74)}}
if(!_13&&!this.isPrinting&&this.getRowElementId){_30.append(" ID=",this.getRowElementId(_81,_81-_2))}
if(_75){var _87=this.getRowRole&&this.getRowRole(_81,_85);if(_87)_30.append(" role='",_87,"'");var _88;if(this.getRowAriaState!=null){_88=this.getRowAriaState(_81,_85)}else if(_65!=null&&isc.screenReader){_88={labelledby:null}}
if(_88!=null){if(_65!=null&&isc.screenReader&&_88.labelledby==null){var _89=_66;if(isc.isA.TreeGrid&&isc.isA.TreeGrid(_17)){var _90=_17.$91i,_91=_17.getFieldBody(_90);if(_91===this){var _92=_17.getLocalFieldNum(_90);if(_25<=_92&&_92<_26){_89=_66.duplicate();_89[_92-_25]=_17.$91j(_81)}}}
_88.labelledby=(_89.join(" "+this.$90z()+" ")+" "+this.$900())}
_30.append(isc.Canvas.getAriaStateAttributes(_88))}}
_30.append(_71);var _93=_82?this.$90l:(this.getRowHeight!=null?this.getRowHeight(_85,_81,_80):_47);var _94;if(_82){_94=true}else{_94=this.fixedRowHeights;if(_94&&this.shouldFixRowHeight!=null){_94=(this.shouldFixRowHeight(_85,_81)!=false)}}
if(_94){_54[_56]=_72;_54[_57]=_93-_44;_54[_62]=null}else{_54[_56]=null;_54[_57]=null;if(!_86&&_93==this.cellHeight&&!this.fixedRowHeights)
{_54[_62]=null}else{_54[_62]=this.$91k(_85,_81)}}
if(_48){_54[_67]=">"+this.$88v+this.$91l(_93,_85,_81,_82);if(_49)_54[_67]+="white-space:nowrap;"}
var _95=_86?this.$91m(_85,_81,_25,_26):null;for(var i=0;i<_27.length;i++){_1=_27[i];if(this.useCellRecords)_85=this.getCellRecord(_81,_1);var _96=_31[_1],_97=_85;if(_97==null)_97=this.getCellRecord(_81,_1);if(_76[_1]>0){_96.$91n[_81]=_78[_1];if(_1==0){_79[_81]=_81>0?_79[_81-1]:0}
_76[_1]--;if(_76[_1]==0){_77--;_78[_1]=null}
continue}else if(_1==0){_79[_81]=_81>0?_79[_81-1]+1:0}
_54[_58]=this.getCellAlign(_85,_96,_81,_1);var _98=this.getCellVAlign(_85,_96,_81,_1);if(_98!=null){_54[_59]=_73
_54[_60]=_98}
if(_95!=null&&(_1==_95[0])){_53++;_54[_61]=this.$91o(_95[1]-_95[0]);if(_48){_54[_67+1]=this.$1t}}else{_54[_61]=_96.$91p;if(this.allowRowSpanning&&this.getRowSpan){var _99=this.$91q(_85,_81,_1);if(_99>1){var _100=" ROWSPAN="+_99;if(_54[_58]!=null)
_54[_58]+=_100;else
_54[_58]=_100;_76[_1]=_99-1;_77++;if(_96.$91n==null)_96.$91n={};_96.$91n[_81]=_81;_78[_1]=_81;if(_1==0){_79[_81]=_81>0?_79[_81-1]+1:0}}}
_54[_55]=null;if(_75){var _101=this.getCellRole&&this.getCellRole(_81,_1,_85);if(_101){_54[_55]=" role='"+_101+"'"}
var _102=this.getCellAriaState&&this.getCellAriaState(_81,_1,_85);if(_102!=null){var _103=isc.Canvas.getAriaStateAttributes(_102);var _104=_54[_55];_54[_55]=(_104==null?_103:_104+_103)}}
if(_48){_54[_67+1]=_96.$91r}else{_54[_67+1]=null}}
var _105=this.getCellStyle(_85,_81,_1),_106=(this.getCellCSSText?this.getCellCSSText(_85,_81,_1):null);if(_82){var _107="padding:0px;border:0px;";if(_106)_106+=";"+_107
else _106=_107}
if(!this.fastCellUpdates){_54[_63]=_106==null?null:String.asAttValue(_106);_54[_64]=_82?"''":String.asAttValue(_105,false,true)}else{var _108=this.$91s(_105);_54[_63]=_108;_54[_63+1]=_106==null?null:String.asAttValue(_106)}
if(_82){this.$91t=true;var _109=this.getTableHTML(null,this.$90g,this.$90i);delete this.$91t;if(!_48){_54[_68]=isc.SB.concat(this.$88v,this.$91l(_93,_85,_81,_82),this.$1t,this.$1s,_109,"</DIV>")}else{_54[_68]=_109}}else
_54[_68]=this.$91u(_85,_81,_1);if(_65!=null){_54[_65]=_66[_1-_25]}
_30.append(_54);if(!_13&&_97!=null&&this.grid.$91v(_97)){var _110=this.grid.$91w(_97);if(_110[0]&&_110[0].rowNum==null){this.updateEmbeddedComponentCoords(_110,_97,_81,_1)}}
if(_86&&(_1==_95[0])){i+=_95[1]-_95[0]}}
_30.append(_70);if(this.isPrinting&&_85&&this.grid.$91v(_85)){var _110=this.grid.$91w(_85);for(var _111=0;_111<_110.length;_111++){var _112=_110[_111];if(_112.$91x==null&&_112.$903!=null){_30.append(_69,_71,'<td colspan="',_28,'">',_112.$903,"</td>",_70);delete _112.$903}}}
if(_82){_81=this.$90i-1}}}
if(!this.$888||(_3==this.getTotalRows()&&!this.printChunkOnly)){if(this.grid&&this.isPrinting){_30.append(this.getPrintFooters(_25,_26))}
_30.append("</TBODY></TABLE>")}
var _113=_15-_3,_114=(!_13&&this.$89n);var _115=this.cacheDOM?0:(this.endSpace||0);if(_13){_115=0}
if(!this.$906)this.$91y=0;if(!this.showAllRows&&(_113!=0||_114)){var _116=_113*this.getAvgRowHeight();if(_114&&_113==0&&!_13){var _117=this.getViewportHeight();if(_116<_117){_116=_117}}
if(!this.$906)this.$91y=_116;_115+=_116}
if(!this.cacheDOM&&!this.isPrinting){_30.append("<DIV style='width:1px;");if(_42){_30.append("height:",_115,"px;overflow:hidden;")}
if(_115==0)_30.append("display:none;");_30.append("' ");if(_13||this.isPrinting){_30.append(">")}else{_30.append(" ID="+this.getID()+"$91z>")}
_30.append(isc.Canvas.spacerHTML(1,_115),"</DIV>")}
if(this.logIsDebugEnabled("gridHTML")){var _118=(isc.timeStamp()-_7),_119=(_28*(_3-_2)),_120=(_118/_119),_121=(1000/_120);if(_120.toFixed!=null)_120=_120.toFixed(2);if(_121.toFixed!=null)_121=_121.toFixed(2);this.logDebug("getTableHTML: columns "+(_4?_27:_25+"->"+(_26-1))+", rows "+_2+"->"+(_3-1)+", time: "+_118+"ms ("+_119+" cells at "+_120+"ms per cell, "+_121+" cells per second), spacerHeights: ["+[_40,_115]+"], left/right pad: ["+[_33,_34]+"], "+_53+" single cell rows","gridHTML")}
var _122=_30.release(false);if(_6){if(_5!=null){this.fireCallback(_5,"HTML,callback",[_122,_5])}
return null}
return _122});isc.evalBoundary;isc.B.push(isc.A.$904=function isc_GridRenderer__getTableHTMLDrawArea(_1,_2,_3){var _4=(_1!=null&&_2!=null);var _5=this.getDrawArea(),_6=this.grid,_7;if(_6){if(_6.$910){_7=(_6.$910==null?0:isc.isAn.Array(_6.$910)?_6.$910[0]:_6.$910)}else if(_6.data&&_6.data.getFirstUsedIndex&&_5[0]==0){_7=_6.data.getFirstUsedIndex()}
if(_7){var _8=_5[1]-_5[0],_9=_7+_8,_10=this.getTotalRows();if(_9>=_10){_7-=(_9-(_10-1))
_9=_10-1}
if(_7<0)_7=0;_5[0]=_7;_5[1]=_9}}
if(!_4){var _11=_5[0],_12=_5[1];if(this.$90g!=null){_12+=(this.$90i-this.$90g);var _10=this.getTotalRows();if(_12>=_10)_12=_10-1}
_1=_11;_2=_12+1;if(_3){this.$20t=_11;this.$89v=_12}}else{var _13=_5[0],_14=_5[1]+1;if(this.$91t){if(_13>_2||_14<_1){_1=_2}else{if(!this.$90e){_1=Math.max(_1,_13);_2=Math.min(_2,_14)}}}}
_5[0]=_1;_5[1]=_2;return _5},isc.A.getPrintHeaders=function isc_GridRenderer_getPrintHeaders(_1,_2){return""},isc.A.getPrintFooters=function isc_GridRenderer_getPrintFooters(_1,_2){return""},isc.A.setFocus=function isc_GridRenderer_setFocus(_1,_2){if(this.$90y){return this.Super("setFocus",arguments)}
this.$90y=true;if(isc.screenReader){this.$911=[this.getScrollLeft(),this.getScrollTop()];if(_2=="focus on mousedown"){var _3=this.getEventRow();if(_3!=null&&!this.isEmpty()){if(_3==-2)_3=this.getTotalRows()-1;if(_3>=0){this.$90v(_3,true)}}}}
var _4=this.Super("setFocus",arguments);if(isc.screenReader){if(this.getScrollLeft()!=this.$911[0]||this.getScrollTop()!=this.$911[1])
{this.scrollTo(this.$911[0],this.$911[1],"reset scroll after native row focus (via setFocus())")}
delete this.$911}
return _4},isc.A.$90v=function isc_GridRenderer__putNativeFocusInRow(_1,_2){var _3=this.screenReader_suppressHandleFocus;if(_3){this.$912=true;this.$11v(false);this.$912=false;this.$11v(false)}
this.$913=_1;if(_3)this.$11v(true);if(_3){this.clipHandleIsFocusHandle=this.isEmpty()}
if(_2==null)_2=!this.hasFocus;if(_2){return}
var _4=this.$914();if(!(_4[0]<=_1&&_1<=_4[1])){return}
var _5;if(this.$915!=null){_5=false}else{this.$915=[this.getScrollLeft(),this.getScrollTop()];_5=true}
var _6=this.getFocusHandle();if(_6){this.logDebug("$90v() about to call native focus()","nativeFocus");_6.focus();if(!_3)isc.EH.$tw=null;this.logDebug("$90v() about to call native focus() again","nativeFocus");_6.focus();if(!_3)isc.EH.$tw=this}
if(_5){if(this.getScrollLeft()!=this.$915[0]||this.getScrollTop()!=this.$915[1])
{this.scrollTo(this.$915[0],this.$915[1],"reset scroll after native row focus (via putNativeFocusInRow())")}
delete this.$915}},isc.A.getFocusHandle=function isc_GridRenderer_getFocusHandle(){if(isc.screenReader&&!this.$912){var _1=this.getNativeFocusRow();var _2=this.getTableElement(_1);if(_2!=null)return _2}
return this.Super("getFocusHandle",arguments)},isc.A.gotComponentPrintHTML=function isc_GridRenderer_gotComponentPrintHTML(_1,_2){var _3=_2.context,_4=_3.component;if(_3.asyncCallback==null){return}
_4.$903=_1;return this.getTableHTML(_3.colNum,_3.startRow,_3.endRow,_3.discreteCols,_3.asyncCallback,true)},isc.A.$91s=function isc_GridRenderer__getEscapedStyleText(_1){if(this.$88u[_1]!=null)return this.$88u[_1];var _2=isc.Element.getStyleText(_1,true);this.$88u[_1]=String.asAttValue(_2);return this.$88u[_1]},isc.A.getCellVAlign=function isc_GridRenderer_getCellVAlign(_1,_2,_3,_4){return null},isc.A.getCellAlign=function isc_GridRenderer_getCellAlign(_1,_2,_3,_4){return _2.cellAlign||_2.align},isc.A.$91m=function isc_GridRenderer__getSingleCellSpan(_1,_2,_3,_4){return[_3,_4]},isc.A.$91o=function isc_GridRenderer__getTDSpanHTML(_1){if(!isc.GridRenderer.$916){isc.GridRenderer.$916={$917:{},$918:{}}}
var _2=this.fixedRowHeights?isc.GridRenderer.$916.$917:isc.GridRenderer.$916.$918;if(_2[_1])return _2[_1];else{return _2[_1]=" COLSPAN="+_1+" STYLE='"+(this.fixedRowHeights?"padding-top:0px;padding-bottom:0px;":"")}},isc.A.$91b=function isc_GridRenderer__getFirstRecordStyle(){var _1=this.grid,_2=0;if(_1){if(_1.$910){_2=_1.$910==null?0:isc.isAn.Array(_1.$910)?_1.$910[0]:_1.$910}else if(_1.data&&_1.data.getFirstUsedIndex){_2=_1.data.getFirstUsedIndex()}}
return(this.getBaseStyle!=null?this.getBaseStyle(this.getCellRecord(_2,0),0,0):this.baseStyle)},isc.A.$91g=function isc_GridRenderer__cacheColumnHTML(_1,_2,_3,_4){var _5=this.fields,_6=this.$72y;for(var i=0;i<_1.length;i++){var _8=_1[i],_9=_5[_8];_9.$91n=null;if(_2){_9.$91p=(isc.Browser.isIE&&!isc.Browser.isIEStrict)?" STYLE='":" STYLE='OVERFLOW:hidden;";_9.$91r=this.$1t}else{var _10=isc.Browser.isIE8Strict?" STYLE='overflow:hidden;":" STYLE='";_9.$91p=(isc.Browser.isIE?" WIDTH="+(_6[_8]-_3)+_10:" STYLE='"+this.$919(_8));if(_4){_9.$91r=(this.$92a(_8)+this.$1t)}}
if(!this.fixedRowHeights){_9.$91p+=this.$91k()}
if(this.fixedRowHeights)_9.$91p+="padding-top:0px;padding-bottom:0px;"}},isc.A.cellValueIsClipped=function isc_GridRenderer_cellValueIsClipped(_1,_2){var _3=this.getTableElement(_1,_2);var _4;if(!this.$91e(this.cellHeight))_4=_3;else _4=this.$90j(_3);return this.$92b(_4)},isc.A.$92b=function isc_GridRenderer__cellValueIsClipped(_1){if(_1==null)return null;return isc.Element.getClientWidth(_1)<_1.scrollWidth},isc.A.$91e=function isc_GridRenderer__writeDiv(_1){return(isc.Browser.isSafari||(isc.Browser.isOpera&&!this.autoFit&&(this.fixedColumnWidths||this.fixedRowHeights))||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20040113&&this.fixedColumnWidths&&!this.autoFit)||(this.shouldEnforceVClipping()&&(isc.Browser.isMoz||(isc.Browser.isIE&&(isc.Browser.isStrict||isc.Browser.version>=10)))))},isc.A.$91h=function isc_GridRenderer__drawRecordAsSingleCell(_1,_2){return(_2&&(_2[this.singleCellValueProperty]!=null||_2[this.isSeparatorProperty]||(Array.isLoading(_2)&&!(isc.Browser.isSafari&&(_1==0||_1==this.$20t)))))},isc.A.$92c=function isc_GridRenderer__useMaxHeightForCellDivCSSHeight(){return(isc.Browser.isMoz||isc.Browser.isSafari||(isc.Browser.isIE&&((isc.Browser.version>=7&&isc.Browser.isStrict)||isc.Browser.version>=10)))},isc.A.$91l=function isc_GridRenderer__getCellDivCSSHeight(_1,_2,_3,_4){var _5=_4||(this.shouldEnforceVClipping()&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_2,_3)!=false));if(_5){var _6=_1-2*this.cellSpacing-
(_4?0:2);if(_3==this.$92d){for(var i=0;i<this.$20w.getItems().length;i++){_6=Math.max(this.$20w.getItems()[i].getHeight(),this.$20w.getItems()[i].iconHeight)}}
if(_6<1)_6=1;return(this.$92c()?"MAX-HEIGHT:":"HEIGHT:")+_6+"px;"}
return isc.$ba},isc.A.$92a=function isc_GridRenderer__getFieldDivWidthCSSText(_1){if(!this.fixedColumnWidths||this.autoFit)return isc.emptyString;return"WIDTH:"+this.getInnerColumnWidth(_1)+"px;"},isc.A.$91k=function isc_GridRenderer__getMinHeightCSSText(_1,_2){var _3=(_2!=null?this.getRowHeight(_1,_2,this.$89i()):this.cellHeight),_4=isc.Browser.isIE,_5=isc.Browser.isStrict;if(_5)_3-=this.$889;if(_4&&!_5&&!(this.autoFit||!this.fixedColumnWidths)){return"MIN-HEIGHT:"+_3+"px;"}
return"HEIGHT:"+_3+"px;"},isc.A.$919=function isc_GridRenderer__getCSSTextForColWidth(_1){if(isc.Browser.isIE||this.autoFit)return isc.$ba;if(this.$92e==null){this.$92e=[];for(var i=0;i<this.$72y.length;i++){var _3=this.$72y[i];this.$92e[i]="WIDTH:"+_3+(this.fixedColumnWidths?"px;OVERFLOW:hidden;":"px;")}}
return this.$92e[_1]},isc.A.getCellRecord=function isc_GridRenderer_getCellRecord(_1,_2){return null},isc.A.findRowNum=function isc_GridRenderer_findRowNum(_1){return-1},isc.A.findColNum=function isc_GridRenderer_findColNum(_1){return-1},isc.A.$91u=function isc_GridRenderer__getCellValue(_1,_2,_3){var _4=this.isPrinting,_5=this.getCellValue(_1,_2,_3,this);if(!_4&&this.$92f(_1)){var _6=this.getMaxEmbeddedComponentHeight(_1),_7=this.$88y;if(_6.allWithin){if(_6.requiredHeight&&(_6.requiredHeight>this.cellHeight)){_7[0]=_5;isc.$cj(_7,(_6.requiredHeight-Math.max(isc.ListGrid.getInstanceProperty("cellHeight"),this.cellHeight)),2,5,false);_5=_7.join(isc.emptyString)}}else if(_6.requiredHeight>0){_7[0]=_5;isc.$cj(_7,_6.requiredHeight,2,5,false);_5=_7.join(isc.emptyString)}}else if(_1&&this.grid.$91v(_1)){var _8=0,_9=0;if(_4){_8=this.grid.$92g;_9=this.grid.$92h}
var _10=this.grid.$91w(_1);for(var i=0,_12=(_10?_10.length:0);i<_12;++i){var _13=_10[i];if(_13==null)continue;var _14=_13.$91x;if(_4&&_14!=null){_14+=(_13.$92i?_9:_8)}
if(_14!=_3){continue}
var _15=(_13.embeddedPosition==this.$88z);var _16=_13.$903;if(_16!=null){var _17=(_16!=isc.emptyString);if(_15&&_17){_16=this.$88w+_16+this.$88x}
if(_5==this.emptyCellValue&&_17){_5=_16}else{_5+=_16}
delete _13.$903}}}
return _5},isc.A.$92f=function isc_GridRenderer__writeEmbeddedComponentSpacer(_1){return(_1&&this.grid.$91v(_1))},isc.A.getCellValue=function isc_GridRenderer_getCellValue(_1,_2,_3){return this.emptyCellValue},isc.A.getTotalRows=function isc_GridRenderer_getTotalRows(){return this.totalRows},isc.A.setColumnWidth=function isc_GridRenderer_setColumnWidth(_1,_2){this.fields[_1].width=this.$72y[_1]=_2;this.$92e=null;this.markForRedraw("setColumnWidth")},isc.A.setColumnWidths=function isc_GridRenderer_setColumnWidths(_1){var _2=this.$72y;this.$72y=_1.duplicate();this.$92e=null;if(_2!=null&&_1!=null&&_2.length==_1.length){if(_2==_1)return;var _3=false;for(var i=0;i<_2.length;i++){if(_2[i]!=_1[i])_3=true}
if(!_3)return;if(!this.fixedColumnWidths&&!this.wrapCells&&this.isDrawn()&&_1.length==1){var _5=this.$907||_2[0],_6=_1[0],_7=this.getColumnSize(0);if((_5==_6)||(_7>_5&&_7>=_6)){return}}}
this.markForRedraw("setColumnWidths")},isc.A.shouldRedrawOnResize=function isc_GridRenderer_shouldRedrawOnResize(_1,_2,_3){if(this.redrawOnResize!=null)return this.redrawOnResize;if(isc.isA.ListGrid(this.parentElement)&&isc.isA.Layout(this.parentElement.parentElement))
{var _4=this.parentElement.parentElement.getMembers();if(_4&&_4.map("isAnimating").or())return false}
if(this.$894()||this.$895())return true;if(this.isEmpty())return true;return false},isc.A.getRowHeight=function isc_GridRenderer_getRowHeight(_1,_2){var _3=this.updateHeightForEmbeddedComponents(_1,_2,this.cellHeight);return _3},isc.A.updateHeightForEmbeddedComponents=function isc_GridRenderer_updateHeightForEmbeddedComponents(_1,_2,_3){if(_1&&this.grid.$91v(_1)){var _4=this.getMaxEmbeddedComponentHeight(_1,_2);if(_4.allWithin){_3=Math.max(_3,_4.requiredHeight)}else{_3+=_4.requiredHeight}}
return _3},isc.A.getMaxEmbeddedComponentHeight=function isc_GridRenderer_getMaxEmbeddedComponentHeight(_1,_2){var _3=this.grid.$91w(_1)||[],_4=0,_5=true,_6=this.isPrinting;for(var i=0;i<_3.length;i++){var _8=_3[i];if(!_8)continue;if(_6)continue;if(_2!=null)_8.$92j=_2;var _9=(_8.embeddedPosition==this.$88z);if(!_9)_5=false;var _10=_8.getVisibleHeight(),_11=0;if(!_9)_11=_10;else if(_10>this.cellHeight)_11=_10;if(_8._percent_height!=null){_8.height=_8._percent_height;_11=this.cellHeight}
var _12=_8.specifiedHeight;if(_9&&_12&&isc.isA.String(_12)&&_12.contains("%")){_11=0}
if(_11>_4){_4=_11}}
return{allWithin:_5,requiredHeight:_4}},isc.A.$91q=function isc_GridRenderer__getRowSpan(_1,_2,_3){if(!this.allowRowSpanning||!this.getRowSpan)return 1;var _4=this.getRowSpan(_1,_2,_3);return Math.min(_4,this.getTotalRows()-_2)},isc.A.getCellStartRow=function isc_GridRenderer_getCellStartRow(_1,_2){var _3=this.fields[_2];if(_3==null)return null;var _4=_3.$91n;if(_4==null||_4[_1]==null)return _1;return _4[_1]},isc.A.getCellRowSpan=function isc_GridRenderer_getCellRowSpan(_1,_2){var _3=this.fields[_2].$91n;if(_3==null)return 1;var _4=this.getCellStartRow(_1,_2);var _5=_1+1,_6=_1-_4+1;while(_5<=this.$89v&&_3[_5]==_4)
{_5++;_6++}
return _6},isc.A.addEmbeddedComponent=function isc_GridRenderer_addEmbeddedComponent(_1,_2,_3,_4,_5){if(_5==null)_5=this.$880;var _6=((_5==this.$880)||!this.fixedRowHeights);if(!isc.isA.Canvas(_1)){_1.autoDraw=false;var _7=isc.ClassFactory.getClass(_1._constructor);if(_7==null)_7=isc.Canvas;_1=_7.create(_1)}
var _8=false;if(this.$90x&&this.$90x.contains(_1)){if(this.grid.$91v(_2)&&this.grid.$91w(_2).contains(_1)&&_1.embeddedPosition==_5&&_1.$92j==_3&&_1.$91x==_4)
{return}
if(_5==_1.embeddedPosition&&!_6){_8=!this.isDirty()}
this.removeEmbeddedComponent(_1.embeddedRecord,_1,true)}else if(!_6){_8=!this.isDirty()}
this.grid.$92k(_2,_1);if(this.$90x==null)this.$90x=[];this.$90x.add(_1);_1.embeddedPosition=_5;_1.embeddedRecord=_2;_1.$92j=_3;_1.$91x=_4;_1.$92l=this.getID();_1.percentBox="custom";if(_1.parentElement!=this){var _9=this.$6d;this.$6d=true;_1.hide();this.addChild(_1);if(_9==null)delete this.$6d}
this.observe(_1,"resized",function(_10,_11){this.$92m(_1,_10,_11)});_1.$92n=_1._redrawWithParent;_1._redrawWithParent=false;_1.$92o=_1.bubbleMouseEvents;if(!_1.bubbleMouseEvents){_1.bubbleMouseEvents=["mouseDown","mouseUp","click","doubleClick","contextClick"]}
if(_8&&(_3==-1||_4==-1)){_8=false}
if(_8){this.placeEmbeddedComponent(_1)}else{this.markForRedraw("added embedded component")}
return _1},isc.A.$92m=function isc_GridRenderer__handleEmbeddedComponentResize(_1,_2,_3){var _4=_1.embeddedPosition;if(_4!=this.$88z){if(_3!=null&&_3!=0)this.markForRedraw('embedded component resized')}else{this.placeEmbeddedComponent(_1)}},isc.A.updateEmbeddedComponentCoords=function isc_GridRenderer_updateEmbeddedComponentCoords(_1,_2,_3,_4){_1.setProperty("$92j",_3)},isc.A.placeEmbeddedComponent=function isc_GridRenderer_placeEmbeddedComponent(_1){var _2=_1.$92j;if(_2==null||(this.$20t==null||this.$89v==null)||(_2<this.$20t||_2>this.$89v))
{if(_1.isDrawn())_1.clear();return}
if(!_1.removeOnHideField&&_1.$92p&&!this.grid.getField(_1.$92p))
{if(_1.isDrawn())_1.clear();return}
var _3=_1.embeddedRecord,_4=_1.embeddedPosition,_5=_1.$91x,_6=this.getRowTop(_2),_7=(_5!=null&&_5>=0)?this.getColumnLeft(_5):null,_8=(_5!=null&&_5>=0)?this.getColumnWidth(_5):Math.min(this.getInnerWidth(),this.$72y.sum());if(_7==null){if(!this.isRTL()){_7=this.getScrollLeft()}else{_7=this.$85(this.getScrollLeft(),true)}}
if(_4==this.$88z){var _9=this.getEmbeddedComponentSnapTo(_1,_3,_2,_5),_10=_1.snapEdge||_9;var _11;if(this.allowRowSpanning&&this.getRowSpan){var _12=this.getRowSpan(_3,_2,_5==null?0:_5);if(_12==null)_12=1;_11=0;for(var i=0;i<_12;i++){_11+=this.getRowSize(_2+i)}}else{_11=this.getRowSize(_2)}
var _14=_1._percent_width,_15=_1._percent_height,_16,_17;var _18=0,_19=this.grid.$91w(_3);for(var i=0;i<_19.length;i++){var _20=_19[i];if(_20==null)continue;var _21=(_20.embeddedPosition==this.$88z);if(_21)continue;var _22=_20.getVisibleHeight();if(_22>_18){_18=_22}}
_11-=_18;if(_1.snapOffsetLeft)_8-=_1.snapOffsetLeft;if(isc.isA.String(_14)&&_14.endsWith("%")){_16=Math.round((parseInt(_14)*_8)/100)}
if(isc.isA.String(_15)&&_15.endsWith("%")){_17=Math.round((parseInt(_15)*_11)/100)}
var _23=_17!=null?_17:_1.getHeight(),_24=_16!=null?_16:_1.getWidth();if(_17||_16){_1.resizeTo(_16,_17);_1._percent_width=_14;_1._percent_height=_15}
isc.Canvas.snapToEdge([_7,_6,_8,_11],_9,_1,_10)}else{_1.moveTo(_7,_6);var _16,_17,_15=_1._percent_height;if(isc.isA.String(_15)&&_15.endsWith("%")){_17=Math.round((parseInt(_15)*this.cellHeight)/100)}
_16=_8;_1.resizeTo(_16,_17)}
var _25=this.isDrawn();if(_25&&!_1.isDrawn())_1.draw();var _26=this.isDirty(),_27=this.getRowHeight(_3,_2,this.$89i()),_28=!this.isDirty()||_26;if(_28&&(_27!=this.getRowSize(_2))){this.setRowHeight(_2,_27,_3);this.refreshRow(_2)}
if(_25){if(_4!=this.$88z){var _29=this.getDrawnRowHeight(_2)-_1.getVisibleHeight()-1;_1.moveTo(null,this.getRowTop(_2)+_29)}
if(!_1.isVisible()){if(this.shouldAnimateEmbeddedComponent(_1)){_1.animateShow()}else{_1.show()}}}
this.updateEmbeddedComponentZIndex(_1)},isc.A.getEmbeddedComponentSnapTo=function isc_GridRenderer_getEmbeddedComponentSnapTo(_1,_2,_3,_4){if(_1.snapTo!=null)return _1.snapTo;if(_4==null){return"TL"}
var _5=this.getCellAlign(_2,this.fields[_4],_3,_4)||"center",_6=this.getCellVAlign(_2,this.fields[_4],_3,_4)||"center";var _7=this.alignSnapToMap[_5][_6];return _7},isc.A.shouldAnimateEmbeddedComponent=function isc_GridRenderer_shouldAnimateEmbeddedComponent(_1){return false},isc.A.updateEmbeddedComponentZIndex=function isc_GridRenderer_updateEmbeddedComponentZIndex(_1){},isc.A.getEmbeddedComponent=function isc_GridRenderer_getEmbeddedComponent(_1,_2){if(isc.isA.Number(_1))_1=this.getCellRecord(_1,0);var _3=this.grid.$91w(_1);if(_3==null)return;var _4=null;if(isc.isA.Number(_2))
_4=_3.find({$91x:_2,$92l:this.getID()});else
_4=_3.find({$92l:this.getID()});return _4},isc.A.removeEmbeddedComponent=function isc_GridRenderer_removeEmbeddedComponent(_1,_2,_3){if(isc.isA.Number(_1))_1=this.getCellRecord(_1,0);var _4=this.grid.$91w(_1);if(_4==null)return;if(isc.isA.Number(_2))
_2=_4.find({$91x:_2,$92l:this.getID()});if(!_2)
_2=_4.find({$92l:this.getID()});if(!_4.contains(_2))return;if(this.isObserving(_2,"resized")){this.ignore(_2,"resized")}
this.grid.$92q(_1,_2);if(this.$90x)this.$90x.remove(_2);_2._redrawWithParent=_2.$92n;_2.$92n=null;_2.bubbleMouseEvents=_2.$92o;var _5=_2.embeddedPosition==this.$880;_2.embeddedPosition=null;_2.$92j=null;_2.$91x=null;_2.$92l=null;if(_3){_2.hide();return}
if(_2.isExpansionComponent&&this.grid.expansionComponentPoolingMode!="none"){var _6=_2.members[0];if(this.grid.expansionComponentPoolingMode=="destroy"){if(!_6.isStockComponent){if(!this.grid.destroyCustomExpansionComponents&&!_6.destroyOnUnembed){_2.removeMember(_6);_6.deparent()}}
_2.destroy()}}else{if(_2.dontAutoDestroy){this.removeChild(_2)}else if(_2.destroyOnUnEmbed){_2.destroy()}else{this.removeChild(_2)}}
if(_5){this.markForRedraw("removed embedded component")}});isc.evalBoundary;isc.B.push(isc.A.$92r=function isc_GridRenderer__resetEmbeddedComponents(){var _1=this.$90x;if(_1==null)return;_1.setProperty("$92j",null)},isc.A.$92s=function isc_GridRenderer__placeEmbeddedComponents(){var _1=this.$90x;if(_1==null)return;_1.sortByProperty("$92j",true);for(var i=0;i<_1.length;i++){this.placeEmbeddedComponent(_1[i])}},isc.A.getTableZIndex=function isc_GridRenderer_getTableZIndex(){return 1000},isc.A.getCellStyle=function isc_GridRenderer_getCellStyle(_1,_2,_3){if(_1&&_1[this.recordCustomStyleProperty]!=null){return _1[this.recordCustomStyleProperty]}
var _4=this.getCellStyleIndex(_1,_2,_3);return this.getCellStyleName(_4,_1,_2,_3)},isc.A.getCellStyleName=function isc_GridRenderer_getCellStyleName(_1,_2,_3,_4){var _5=isc.GridRenderer.standardStyleSuffixes;if(this.getBaseStyle){var _6=this.getBaseStyle(_2,_3,_4);if(_6!==this.baseStyle){if(_1==0)return _6;return _6+_5[_1]}}
if(!this.$92t){this.$92t=[];for(var i=0;i<_5.length;i++){this.$92t[i]=this.baseStyle+_5[i]}}
return this.$92t[_1]},isc.A.getCellStyleIndex=function isc_GridRenderer_getCellStyleIndex(_1,_2,_3){var _4=0;var _5=true;if(this.grid!=null){var _6=this.grid.getField(this.grid.getFieldNumFromLocal(_3,this));_5=!_6?true:_6.showAlternateStyle!=false}
if(_5){var _7=false;if(this.alternateRowStyles){if(this.useRowSpanStyling){var _8=this.getSpanningRowNum(_2);_7=(Math.floor(_8/this.alternateRowFrequency)%2==1);if(_7)_4+=8}else{_7=(Math.floor(_2/this.alternateRowFrequency)%2==1);if(_7)_4+=8}}
if(this.alternateColumnStyles&&!_7){_7=(Math.floor(_3/this.alternateColumnFrequency)%2==1);if(_7)_4+=8}}
if(!this.cellIsEnabled(_2,_3,_1)){_4+=4}else{if(this.shouldShowRollOver(_2,_3)&&!this.isPrinting&&_2==this.lastOverRow&&(!this.useCellRollOvers||_3==this.lastOverCol))
{_4+=1}
if(this.showSelectedStyle&&this.selectionEnabled()){var _9;if(this.canSelectCells){var _10=_2;if(this.useRowSpanStyling)_10=this.getCellStartRow(_2,_3);_9=this.selection.cellIsSelected(_10,_3)}else{_9=this.selection.isSelected(_1,true)}
if(_9)_4+=2}}
return _4},isc.A.getSpanningRowNum=function isc_GridRenderer_getSpanningRowNum(_1){var _2=this.$91f;if(this.grid&&this.grid.frozenBody){var _2=this.grid.frozenBody.$91f}
return _2!=null?_2[_1]:_1},isc.A.cellIsEnabled=function isc_GridRenderer_cellIsEnabled(_1,_2,_3){return true},isc.A.getTableElementId=function isc_GridRenderer_getTableElementId(){return this.getCanvasName()+"table"},isc.A.getDOMTable=function isc_GridRenderer_getDOMTable(_1,_2){if(this.cacheDOM)return this.getTableChunkAt(_1,_2);if((_1!=null&&(_1-this.$20t<0||_1>this.$89v))||(_2!=null&&(_2-this.$20u<0||_2>this.$896)))
return null;var _3=this.$92u;if(_3==null){var _4=this.getTableElementId();var _3=isc.Element.get(_4);if(_3==null)return null;if(this.$90a){this.logInfo("getTableElement() called while updating table HTML. This call may be invalid as the table is being rewritten in the DOM. Suppressing caching of the current element.","redrawing");return _3}}
return this.$92u=_3},isc.A.getTableElement=function isc_GridRenderer_getTableElement(_1,_2){var _3=this.getDOMTable(_1,_2);if(_1==null)return _3;if(!_3)return null;var _4=_1-(this.$20t>0?this.$20t:0);if(_4<0){return null}
var _5;if(this.$92v!=null)_5=this.$92v[_4];if(_5==null)_5=_3.rows[_4];if(_5==null)return null;if(!this.$90a){if(this.$92v==null)this.$92v=[];this.$92v[_4]=_5}
if(_2==null)return _5;var _6=_2-this.$20u;if(_6<0){return null}
if(this.allowRowSpanning&&this.getRowSpan){var _7=this.getCellStartRow(_1,_6);if(_7!=_4){_4=_7;_5=this.getTableElement(_7)}
if(_5.childNodes.length<(this.$896-this.$20u+1)){var _8=0;for(var i=0;i<_6;i++){if(this.fields[i].$91n!=null&&this.fields[i].$91n[_4]!=null&&this.fields[i].$91n[_4]!=_4)_8++}
_6-=_8}}
return _5.childNodes[_6]},isc.A.$92w=function isc_GridRenderer__updateCellStyle(_1,_2,_3,_4,_5){if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);if(this.fastCellUpdates){_4.style.cssText=this.$92x(_1,_2,_3,_5)}else{if(_4.className!=_5)_4.className=_5;if(this.getCellCSSText){_4.style.cssText=this.$92x(_1,_2,_3,_5)}}
if(this.shouldRefreshCellHTML(_1,_2,_3)){this.refreshCellValue(_2,_3)}
if(!this.isDrawn())return;if(!this.suppressRowHeightUpdate)this.$92y(_1,_2,_5)},isc.A.$92y=function isc_GridRenderer__updateRowHeight(_1,_2,_3){var _4=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_1,_2)!=false),_5=(this.getRowHeight!=null?this.getRowHeight(_1,_2,this.$89i()):this.cellHeight);this.setRowHeight(_2,_5,_1,_3,_4)},isc.A.$90j=function isc_GridRenderer__getCellClipDiv(_1){if(_1==null)return null;var _2=_1.firstChild;if(!_2)return null;if(_2.tagName==this.$881)_2=_2.firstChild;if(_2&&(_2.cellClipDiv||(_2.getAttribute&&_2.getAttribute(this.$882))))
{return _2}
return null},isc.A.setRowHeight=function isc_GridRenderer_setRowHeight(_1,_2,_3,_4,_5,_6){var _7=this.$20u,_8=this.$896;if(_5==null){if(_3==null)_3=this.getCellRecord(_1,_7);_5=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_3,_1)!=false)}
var _9=this.getTableElement(_1,_7),_10=_9?parseInt(_9.height):null,_11;if(!isc.isA.Number(_10))_10=null;if(this.$89a()){if(_3==null)_3=this.getCellRecord(_1,_7);var _12=_4;if(_12==null)_12=this.getCellStyle(_3,_1,_7)
var _13=isc.Element.$0h(_12);if(!this.fixedRowHeights)_13+=this.cellPadding*2;_2-=_13}
if((!_5&&_10!=null)||(_10!=_2&&!(_10==null&&_2==isc.emptyString)))
{_11=true}
if(!_11)return;var _14=isc.isA.Number(_2);if(_14&&_2<=0)_2=_5?0:1;var _15=this.getTableElement(_1);if(_15==null)return;if(_2==0&&_5){_15.style.display="none"}else{_15.style.display=isc.emptyString;var _16=(!isc.Browser.isIE||isc.Browser.isStrict)?this.$2t:this.$883,_17=_14?_2+isc.px:_2,_18=_5?_17:isc.emptyString;for(var i=_7;i<=_8;i++){var _20=this.getTableElement(_1,i);if(_20){if(_5){_20.height=_17;_20.style[_16]=isc.emptyString}else{_20.height=isc.emptyString;_20.style[_16]=_17}
var _21=this.$90j(_20);if(_21){if(this.$92c()){_21.style.maxHeight=_18}else{_21.style.height=_18}}}}}
if(isc.Browser.isSafari&&this.$90t){var _22=this.getTableElement(_1);if(_22!=null){_22.innerHTML=_22.innerHTML}}
this.$899();if(_6){this.adjustOverflow("cell height changed")}else{this.$9j("cell height changed")}},isc.A.$92x=function isc_GridRenderer__getCompleteCellCSSText(_1,_2,_3,_4){var _5=null;if(this.fixedRowHeights)_5=this.$884;else{_5=this.$91k(_1,_2)}
if(isc.Browser.isIE8Strict){if(_5==null)_5=this.$885;else _5+=this.$885}
if(isc.Browser.isMoz||isc.Browser.isSafari){if(_5==null)_5=this.$919(_3);else _5+=this.$919(_3)}
if(this.fastCellUpdates){if(_4==null)_4=this.getCellStyle(_1,_2,_3);var _6=isc.Element.getStyleText(_4,true);if(_6==null&&isc.Page.$92z){this.logInfo("fastCellUpdates set to true but this page loads styles from a remote stylesheet. This is unsupported - disabling fastCellUpdates.");this.fastCellUpdates=false;this.redraw()}
if(_5!=null)_5+=_6;else _5=_6}
if(this.getCellCSSText){var _7=this.getCellCSSText(_1,_2,_3)
if(_7!=null){if(!_7.endsWith(this.$y5)){_7+=this.$y5}
if(_5!=null)_5+=_7
else _5=_7}}
if(isc.Browser.isIE8Strict&&!this.wrapCells){_5+=";white-space: nowrap;"}
return _5},isc.A.shouldRefreshCellHTML=function isc_GridRenderer_shouldRefreshCellHTML(_1,_2,_3){return this.showHiliteInCells},isc.A.$920=function isc_GridRenderer__readyToRefreshCell(_1,_2){if((isc.EH.$ug||isc.EH.$t8)&&isc.EH.lastEvent.target==this){var _3=this.getEventRow();if(_3!=_1)return true;if(_2!=null){var _4=this.getEventColumn();if(_2!=_4)return true}
return false}
var _5=this.ns.EH;if(_5.$vc()){var _6=this.getTableElement(_1,_2);if(_6!=null){if(isc.Browser.isMobileWebkit||isc.Browser.isChrome){var _7=_5.mouseDownEvent;if(_7!=null&&_7.DOMevent.target!=null&&_6.contains(_7.DOMevent.target))
{return false}}}}
return true},isc.A.refreshCellValue=function isc_GridRenderer_refreshCellValue(_1,_2){var _3=this.getTableElement(_1,_2);if(!_3)return;if(!this.$920(_1,_2)){this.delayCall("refreshCellValue",[_1,_2]);return}
var _4=this.getCellRecord(_1,_2),_5=this.fields[_2];if(!_5){this.logDebug("refreshCell called for invalid field "+_2);return}
var _6=isc.StringBuffer.create();var _7=this.$91e(_9),_8=!this.wrapCells&&!isc.Browser.isIE8Strict;if(_7){_6.append(this.$88v);var _9=(this.getRowHeight!=null?this.getRowHeight(_4,_1,this.$89i()):this.cellHeight);_6.append(this.$91l(_9,_4,_1));var _10=this.$91h(_1,_4);if(!_10){_6.append(this.$92a(_2))}
if(_8)_6.append("white-space:nowrap;");_6.append("'>")}
var _11=_8&&!_7;if(_11){_6.append("<NOBR>")}
_6.append(this.$91u(_4,_1,_2));if(_11&&this.closeNOBRs){_6.append("</NOBR>")}
if(_7){_6.append("</DIV>")}
_3.innerHTML=_6.release(false)},isc.A.setCellStyle=function isc_GridRenderer_setCellStyle(_1,_2,_3){return this.setRowStyle(_1,_3,_2)},isc.A.setRowStyle=function isc_GridRenderer_setRowStyle(_1,_2,_3){if(isc.$et)arguments.$eu=this;if(_1==null||_1<0){this.logWarn("setRowStyle: bad rowNum: "+_1);return false}
var _4=this.getTableElement(_1,_3);if(_4==null){return false}
var _5=this.getCellRecord(_1,_3);if(_5&&_5.$17d){return}
if(_3!=null){this.$92w(_5,_1,_3,_4,_2)}else{var _6=this.getTableElement(_1);if(_6!=null){var _7="TD",_8=(!this.shouldShowAllColumns()?this.$20u:0),_9=(!this.shouldShowAllColumns()?this.$896:this.fields.length-1),_10=0;var _11=this.suppressRowHeightUpdate;this.suppressRowHeightUpdate=true;for(var _12=_8;_12<=_9;_12++,_10++){var _4;if(this.showColumnsSeparately||this.cacheDOM){_4=this.getTableElement(_1,_12)}else{_4=_6.childNodes[_10]}
if(_4==null)continue;this.$92w(_5,_1,_12,_4,_2)}
if(!_11){delete this.suppressRowHeightUpdate;this.$92y(_5,_1,_2)}}}
return true},isc.A.refreshCellStyle=function isc_GridRenderer_refreshCellStyle(_1,_2,_3){return this.setCellStyle(_1,_2,_3)},isc.A.refreshCell=function isc_GridRenderer_refreshCell(_1,_2){this.refreshCellStyle(_1,_2);if(!this.shouldRefreshCellHTML())this.refreshCellValue(_1,_2)},isc.A.refreshRow=function isc_GridRenderer_refreshRow(_1){if(!this.$920(_1)){this.delayCall("refreshRow",[_1])}
for(var i=0;i<this.fields.length;i++){this.refreshCell(_1,i)}},isc.A.refreshCellStyles=function isc_GridRenderer_refreshCellStyles(_1,_2){this.logDebug("refreshing cell styles: "+_1.length+" cells");for(var i=0;i<_1.length;i++){var _4=_1[i][0],_5=_1[i][1];var _6=this.getTableElement(_4,_5);if(_6==null){continue}else{this.$92w(null,_4,_5,_6,_2)}}
return true},isc.A.getCellPageRect=function isc_GridRenderer_getCellPageRect(_1,_2){return[this.getColumnPageLeft(_2),this.getRowPageTop(_1),this.getColumnSize(_2),this.getRowSize(_1)]},isc.A.getColumnLeft=function isc_GridRenderer_getColumnLeft(_1){if(this.isRTL()){return this.getViewportWidth()-this.$72y.sum(0,_1+1)}else{return this.$72y.sum(0,_1)}},isc.A.getColumnPageLeft=function isc_GridRenderer_getColumnPageLeft(_1){var _2=this.getColumnLeft(_1);if(_2==null)return null;var _3=this.getPageLeft()-this.getScrollLeft()+_2;if(this.isRTL()){if(this.vscrollOn)_3+=this.getScrollbarSize();_3+=this.getScrollWidth()-this.getViewportWidth()}
return _3},isc.A.getColumnWidth=function isc_GridRenderer_getColumnWidth(_1){return this.$72y[_1]},isc.A.getInnerColumnWidth=function isc_GridRenderer_getInnerColumnWidth(_1){var _2=this.getColumnWidth(_1);if(_2==null)return null;return(_2-(2*this.cellSpacing+this.$91c()))},isc.A.$91c=function isc_GridRenderer__getCellHBorderPad(_1){if(!_1&&this.$921!=null)return this.$921;var _2=this.$91b(),_3=isc.Element.$0m(_2,true),_4=isc.Element.$0n(_2,true),_5=isc.Element.$0i(_2);if(_3==null)_3=this.cellPadding;if(_4==null)_4=this.cellPadding;this.$921=(_3+_4+_5);return this.$921},isc.A.getRowTop=function isc_GridRenderer_getRowTop(_1){if(_1<this.$20t)return this.getAvgRowHeight()*_1;var _2=this.$922(),_3=this.$90k();if(_1>this.$89v){return _2+_3.sum()+(((_1-1)-this.$89v)*this.getAvgRowHeight())}
return _2+_3.sum(0,_1-this.$20t)},isc.A.getRowPageTop=function isc_GridRenderer_getRowPageTop(_1){return this.getPageTop()+this.getTopBorderSize()+(this.getRowTop(_1)-this.getScrollTop())},isc.A.getRowSize=function isc_GridRenderer_getRowSize(_1){return this.getDrawnRowHeight(_1)},isc.A.getDrawnRowHeight=function isc_GridRenderer_getDrawnRowHeight(_1){if(this.$20t==null||this.$89v==null||_1<this.$20t||_1>this.$89v)
{return this.getAvgRowHeight()}
var _2=_1-this.$20t,_3=this.$90k();return _3[_2]},isc.A.getColumnSize=function isc_GridRenderer_getColumnSize(_1){if((this.fixedFieldWidths&&!this.autoSize)||(_1<this.$20u||_1>this.$896))
{return this.getColumnWidth(_1)}
var _2=_1-this.$20u,_3=this.getColumnSizes();return _3[_2]},isc.A.$922=function isc_GridRenderer__getUndrawnHeight(){return this.$20t*this.getAvgRowHeight()},isc.A.$90k=function isc_GridRenderer__getDrawnRowHeights(){var _1=this.getDrawnRows(),_2=_1[1]-_1[0]+1;if(this.$37g!=null){return this.$37g}
var _3=[];if(!this.$90a)this.$37g=_3;var _4=this.getTableElement();if(!_4||!_4.rows){delete this.$37g;return _3}
var _5=isc.Browser.isSafari&&isc.Browser.safariVersion<500;var _6=false,_7=null,_8=0,_9=this.isRTL();for(var _10=0;_10<=_2;_10++){var _11=this.cacheDOM?this.getTableElement(_10+this.$20t):_4.rows[_10];if(_11==null){}else if(isc.Browser.$t){var _12=isc.Element.getBoundingClientRect(_11);if(_7==null)_7=_12;_3[_10]=Math.round((_12.bottom-_7.top)-_8)}else if(this.allowRowSpanning&&this.getRowSpan){_3[_10]=_11.offsetHeight}else{var _13=(_5&&(this.fixedRowHeights==false||(this.shouldFixRowHeight!=null&&this.shouldFixRowHeight(this.getCellRecord(_10),_10)==false))),_14,_15=[];if(!_5||!_13){_14=_11.lastChild}else{for(var k=0;k<_11.childNodes.length;k++){_15[k]=_11.childNodes[k]}}
if(_13){_3[_10]=0;for(var _17=0;_17<_15.length;_17++){var _18=_15[_17],_19=_18.offsetHeight;var _20=parseInt(_18.style?_18.style.height:null);if(isc.Browser.isStrict){if(this.cellPadding)_20+=this.cellPadding;_20+=isc.Element.$0q(_18.className)}
if(isc.isA.Number(_20)&&_20>_19)
_19=_20;if(_19>_3[_10])_3[_10]=_19}
_3[_10]+=this.cellSpacing}else if(_14){if(!_5){_3[_10]=_14.offsetHeight}else{var _21=parseInt(_14.height);if(_21!=null&&isc.isA.Number(_21)){if(isc.Browser.isStrict){_21+=isc.Element.$0h(_14.className)}}else{_21=_14.offsetHeight||0}
_3[_10]=_21}
_3[_10]+=this.cellSpacing}}
var _19=_3[_10];if(_19>0){_6=true;_8+=_19}}
_3[0]+=this.cellSpacing;if(!_6){this.logWarn("row heights not yet available; returning all zeroes");this.$37g=null}
if(isc.Browser.isSafari&&!isc.Page.isLoaded())this.$37g=null;return _3},isc.A.getColumnSizes=function isc_GridRenderer_getColumnSizes(){if(this.$923!=null)return this.$923;if(!this.isDrawn())return this.$72y.duplicate()||[];var _1;if(this.fixedColumnWidths&&isc.Browser.version>=5){_1=this.$72y.duplicate();if(!this.$90a)this.$923=_1;return _1}else{_1=[];if(!this.$90a)this.$923=_1;var _2=this.getTableElement(this.$20t);if(_2==null){_1=_1.concat(this.$72y);if(!this.$90a)this.$923=_1;return _1}
var _3=(isc.Browser.isMac?this.cellSpacing:0);for(var _4=0;_4<this.fields.length;_4++){var _5;if(this.showColumnsSeparately){_5=this.getTableElement(this.$20t,_4)}else if(!(isc.Browser.isSafari&&isc.Browser.safariVersion<125)){_5=_2.childNodes[_4]}
if(_5){_1[_4]=_5.offsetWidth+_3}else{_1[_4]=this.$72y[_4]}}
this.innerWidth=this.getTableElement().offsetWidth;return _1}},isc.A.$u2=function isc_GridRenderer__differentEventCharacteristics(_1,_2){var _3=this.getEventRow(this.getOffsetY(_1)),_4=this.getEventRow(this.getOffsetY(_2));if(_3!=_4)return true;var _5=this.getEventColumn(this.getOffsetX(_1)),_6=this.getEventColumn(this.getOffsetX(_2));if(_5!=_6)return true;return false},isc.A.getEventRow=function isc_GridRenderer_getEventRow(_1){if(this.isEmpty())return-2;if(_1==null)_1=this.getOffsetY();if(this.startSpace)_1-=this.startSpace;var _2=this.$922();if(_1<=_2)return Math.floor(_1/this.getAvgRowHeight());var _3=_1-_2,_4=this.$90k();var _5=this.inWhichPosition(_4,_3),_6;if(_5>=0){_6=this.$20t+_5}else{var _7=_3-_4.sum();_6=this.$89v+1+Math.floor(_7/this.getAvgRowHeight());if(_6>=this.getTotalRows())_6=-2}
return _6},isc.A.getEventColumn=function isc_GridRenderer_getEventColumn(_1){var _2=this.getColumnSizes();if(_1==null)_1=this.getOffsetX();var _3=this.getTextDirection(),_4;if(!this.frozen&&_3==isc.Page.RTL&&!this.vscrollOn&&(_4=this.grid)!=null&&_4.$924())
{_1-=this.getScrollbarSize()}
return this.inWhichPosition(_2,_1,_3)},isc.A.getFocusRow=function isc_GridRenderer_getFocusRow(){return 0},isc.A.getFocusCol=function isc_GridRenderer_getFocusCol(){return 0},isc.A.getNativeFocusRow=function isc_GridRenderer_getNativeFocusRow(){var _1=this.$913;if(_1==null)_1=this.getFocusRow();var _2=this.getDrawnRows();if(_2!=null&&_2.length>0&&(_1==null||_1<_2[0]||_1>_2[1])){_1=this.$89m()[0];if(this.getRowTop(_1)<this.getScrollTop())_1+=1}
return _1},isc.A.getNearestRowToEvent=function isc_GridRenderer_getNearestRowToEvent(){var _1=this.getEventRow();if(_1<0){var _2=this.getVisibleRows();if(_1==-1)return _2[0];if(_1==-2)return _2[1]}
return _1},isc.A.getNearestColToEvent=function isc_GridRenderer_getNearestColToEvent(){var _1=this.getEventColumn();if(_1<0){var _2=this.getVisibleColumns();if(_1==-1)return _2[0];if(_1==-2)return _2[1]}
return _1},isc.A.$89m=function isc_GridRenderer__getViewportFillRows(){var _1=this.getViewportHeight(),_2=this.getAvgRowHeight();var _3=Math.floor(this.getScrollTop()/_2);var _4;if(this.autoFitData=="both"||this.autoFitData=="vertical"){_4=this.getTotalRows()-_3;var _5=this.autoFitMaxRecords;if(_5!=null&&_5<_4)_4=_5;var _6=this.getAutoFitMaxHeight();if(_6!=null){var _7=Math.ceil(_6/this.cellHeight);if(_7<_4)_4=_7}}else{_4=Math.ceil(_1/this.cellHeight)}
var _8=_3+_4-1;if(this.startSpace){var _9=Math.floor(this.startSpace/_2);_3=Math.max(0,_3-_9);_8=Math.max(0,_8-_9)}
var _10=this.virtualScrolling&&this.$89o!=null;if(_10){if(_3==0&&_8>=(this.getTotalRows()-1))_10=false}
if(!_10)return[_3,_8];var _11=this.$89o;if(this.$89p<0)_11+=Math.floor(this.$89p/this.cellHeight);if(_11<0)_11=0;var _12=_11+Math.ceil(_1/this.cellHeight);return[_11,_12]},isc.A.getAvgRowHeight=function isc_GridRenderer_getAvgRowHeight(){return this.fixedRowHeights?this.cellHeight:Math.max(this.cellHeight,this.avgRowHeight)},isc.A.getVisibleRows=function isc_GridRenderer_getVisibleRows(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){return[-1,-1]}
return this.$914()},isc.A.$914=function isc_GridRenderer__getVisibleRows(){var _1=this.getScrollTop();var _2=[this.getEventRow(_1),this.getEventRow(_1+this.getInnerHeight())];if(_2[1]==-2){var _3=this.getTotalRows();if(_3==0||_2[0]<0){_2[0]=-1;_2[1]=-1}else{_2[1]=this.getTotalRows()-1}}
return _2},isc.A.getVisibleColumns=function isc_GridRenderer_getVisibleColumns(){var _1=this.$72y;if(this.overflow==isc.Canvas.VISIBLE)return[0,_1.length-1];var _2=this.getScrollLeft();if(this.isRTL()){var _3=this.getScrollWidth()-this.getInnerWidth(),_2=_3-_2}
var _4=this.inWhichPosition(_1,_2),_5=this.inWhichPosition(_1,_2+this.getInnerWidth());if(_5==-2)_5=this.$72y.length-1;return[_4,_5]},isc.A.getDrawnRows=function isc_GridRenderer_getDrawnRows(){if(this.cacheDOM)return this.getVisibleRows();return[this.$20t,this.$89v]},isc.A.shouldShowRollOver=function isc_GridRenderer_shouldShowRollOver(_1,_2){return(this.showRollOver&&!this.$90n)},isc.A.updateRollOver=function isc_GridRenderer_updateRollOver(_1,_2){this.setRowStyle(_1,null,(this.useCellRollOvers?_2:null))},isc.A.startHover=function isc_GridRenderer_startHover(){},isc.A.mouseMove=function isc_GridRenderer_mouseMove(_1,_2){if(this.$20v(isc.EH.lastEvent))return;if(this.$925){this.$925=false;return}
var _3=this.getEventRow(),_4=this.getEventColumn();var _5=this.pendingActionOnPause("scrollRedraw"),_6=this.getDrawnRows();if(_5&&_6&&(_3<_6[0]||_3>_6[1]))
{return}
var _7=this.lastOverRow,_8=this.lastMouseOverRow,_9=this.lastOverCol,_10=this.lastMouseOverCol;var _11=(_3>=0&&_4>=0),_12=!(_3==_7&&_4==_9),_13=!(_3==_8&&_4==_10),_14=_11&&(_12||_13||this.cellMove||this.rowMove),_15=_14&&this.getCellRecord(_3,_4),_16=(_11&&_14&&this.cellIsEnabled(_3,_4,_15));if(_12){if(_7!=null&&_9!=null){this.lastOverRow=null;this.lastOverCol=null;if(_3!=_7||_4<0||this.useCellRollOvers){this.updateRollOver(_7,_9,_16)}}
if(_16){this.lastOverRow=_3;this.lastOverCol=_4;if(_7!=_3||this.useCellRollOvers){if(this.shouldShowRollOver(_3,_4)){this.updateRollOver(_3,_4)}}}}
var _17=this.$926!=_1.target&&(_1.target==this);this.$926=_1.target;if(_13||_17){if(_8!=null&&_10!=null){this.lastMouseOverRow=null;this.lastMouseOverCol=null;if((_3!=_8||_4<0||this.hoverByCell)&&this.getCanHover()&&!this.keepHoverActive)
{this.stopHover()}
var _18=this.getCellRecord(_8,_10);if(this.cellOut){this.cellOut(_18,_8,_10)}
if(_3!=_8&&this.rowOut){this.rowOut(_18,_8,_10)}}
if(_16){this.lastMouseOverRow=_3;this.lastMouseOverCol=_4;if(_3!=_8||this.hoverByCell){if(_11&&this.getCanHover()){var _19=this.getCellHoverDelay(_3,_4);isc.Hover.setAction(this,this.$927,[_3,_4],_19)}}
if(this.cellOver){this.cellOver(_15,_3,_4)}
if(_3!=_8&&this.rowOver){this.rowOver(_15,_3,_4)}}}
if(_11){if(this.cellMove){this.cellMove(_15,_3,_4)}
if(this.rowMove){this.rowMove(_15,_3,_4)}}
if(_5&&this.$11d){var _20=this.getScrollRedrawDelay(this.$891);this.fireOnPause("scrollRedraw",this.$89z(),_20)}},isc.A.$20v=function isc_GridRenderer__suppressEventHandling(_1){if(this.$90n!=null)return true;return false},isc.A.mouseOut=function isc_GridRenderer_mouseOut(){var _1=isc.EH.getTarget();if(this.$90x){var _2=this.$90x;for(var i=0;i<_2.length;i++){if(!_2[i])continue;if(_2[i].contains(_1,true)){return}}}
if(_1==this&&!isc.EH.getDragTarget()&&!isc.EH.$xn){return}
if(this.getCanHover())this.stopHover();if(this.lastOverRow!=null&&this.lastOverCol!=null){var _4=this.lastOverRow,_5=this.lastOverCol;this.lastOverRow=null;this.lastOverCol=null;if(this.shouldShowRollOver(_4,_5)){this.updateRollOver(_4,_5)}}
if(this.lastMouseOverRow!=null&&this.lastMouseOverCol!=null){var _4=this.lastMouseOverRow,_5=this.lastMouseOverCol,_6=this.getCellRecord(_4,_5);this.lastMouseOverRow=null;this.lastMouseOverCol=null;if(this.cellOut){this.cellOut(_6,_4,_5)}
if(this.rowOut){this.rowOut(_6,_4,_5)}}},isc.A.$928=function isc_GridRenderer__getShowClippedValuesOnHover(){return this.showClippedValuesOnHover},isc.A.getCellHoverDelay=function isc_GridRenderer_getCellHoverDelay(_1,_2){return this.hoverDelay},isc.A.$927=function isc_GridRenderer__cellHover(_1,_2){var _3=this.getCellRecord(_1,_2);if(!this.shouldFireCellHover(_3,_1,_2))return;var _4,_5=this.cellValueIsClipped(_1,_2);if(this.$928()&&_5&&this.cellValueHover&&this.cellValueHover(_3,_1,_2)==false)
{_4=false}
if(this.cellHover&&this.cellHover(_3,_1,_2)==false)_4=false;if(this.rowHover&&this.rowHover(_3,_1,_2)==false)_4=false;if(_4==false)return;if(this.showHover)this.$929(_3,_1,_2,_5)},isc.A.shouldFireCellHover=function isc_GridRenderer_shouldFireCellHover(_1,_2,_3){return _1!=null},isc.A.defaultCellValueHoverHTML=function isc_GridRenderer_defaultCellValueHoverHTML(_1,_2,_3){return this.$91u(_1,_2,_3)},isc.A.$12q=function isc_GridRenderer__getHoverProperties(_1,_2,_3){if(this.grid){var _4=this.grid.frozenBody&&this==this.grid.frozenBody,_5=!_4&&this.grid.frozenBody?this.grid.frozenFields.length:0,_6=_3!=null?this.grid.fields[_3+_5]:null;if(_6){return{align:_6.hoverAlign!=null?_6.hoverAlign:this.hoverAlign,baseStyle:_6.hoverStyle!=null?_6.hoverStyle:this.hoverStyle,height:_6.hoverHeight!=null?_6.hoverHeight:this.hoverHeight,hoverDelay:_6.hoverDelay!=null?_6.hoverDelay:this.hoverDelay,opacity:_6.hoverOpacity!=null?_6.hoverOpacity:this.hoverOpacity,moveWithMouse:_6.hoverMoveWithMouse!=null?_6.hoverMoveWithMouse:this.hoverMoveWithMouse,valign:_6.hoverVAlign!=null?_6.hoverVAlign:this.hoverVAlign,width:_6.hoverWidth!=null?_6.hoverWidth:this.hoverWidth,wrap:_6.hoverWrap!=null?_6.hoverWrap:this.hoverWrap}}}
return this.Super("$12q")},isc.A.$929=function isc_GridRenderer__showHover(_1,_2,_3,_4){var _5=this.$12q(_1,_2,_3);var _6=this.$93a(_1,_2,_3);if(!_6){var _7=false,_8=false;if(this.cellHoverHTML.$93b&&this.grid){var _9=this.grid,_10=_9.getFieldNumFromLocal(_3,this),_11=_9.getField(_10);_7=(_9.canHover||(_11.showHover&&_9.canHover!=false)||_9.cellHoverHTML!=_9.getClass().getInstanceProperty("cellHoverHTML")||(_9.canHover==null&&_11.showHover))&&_11.showHover!=false;_8=_9.$93c(_2,_10)}
if(!_8){if(!_7){if(this.$928()&&_4){_6=this.cellValueHoverHTML(_1,_2,_3,this.defaultCellValueHoverHTML(_1,_2,_3))}}else{_6=this.cellHoverHTML(_1,_2,_3)}}}
isc.Hover.show(_6,_5,this.cellHoverBoundary(_2,_3),this.getHoverTarget())},isc.A.$93a=function isc_GridRenderer__getCellHoverComponent(_1,_2,_3){},isc.A.getHoverTarget=function isc_GridRenderer_getHoverTarget(){return this},isc.A.cellHoverHTML=function isc_GridRenderer_cellHoverHTML(_1,_2,_3){return null},isc.A.cellValueHoverHTML=function isc_GridRenderer_cellValueHoverHTML(_1,_2,_3,_4){return null},isc.A.getCellHoverComponent=function isc_GridRenderer_getCellHoverComponent(_1,_2,_3){return null},isc.A.cellHoverBoundary=function isc_GridRenderer_cellHoverBoundary(_1,_2){return null},isc.A.showContextMenu=function isc_GridRenderer_showContextMenu(){if(this.$20v(isc.EH.lastEvent))return false;var _1=this.getEventRow(),_2=this.getEventColumn();var _3=isc.EH.isKeyEvent();if(_3){_1=this.getFocusRow(),_2=this.getFocusCol()}
var _4=(_1>=0&&_2>=0),_5=_4&&this.getCellRecord(_1,_2);if(_4&&this.cellIsEnabled(_1,_2,_5)){var _6;if(this.cellContextClick)
if(this.cellContextClick(_5,_1,_2)==false)_6=false;if(this.rowContextClick)
if(this.rowContextClick(_5,_1,_2)==false)_6=false;if(this.recordContextClick)
if(this.recordContextClick(_5,_1,_2)==false)_6=false;if(_6==false)return false}
return this.Super("showContextMenu")},isc.A.setSelection=function isc_GridRenderer_setSelection(_1){this.selection=_1;if(this.selection.isA("CellSelection")){this.observe(this.selection,"selectionChanged",function(){this.$93d(this.selection.changedCells)})}else{this.observe(this.selection,"setSelected",function(){this.$93e(this.selection)})}},isc.A.clearSelection=function isc_GridRenderer_clearSelection(){if(this.selection){if(this.isObserving(this.selection,"selectionChanged"))
this.ignore(this.selection,"selectionChanged");if(this.isObserving(this.selection,"setSelected"))
this.ignore(this.selection,"setSelected");delete this.selection}},isc.A.$93d=function isc_GridRenderer__cellSelectionChanged(_1){if(this.cellSelectionChanged){if(this.cellSelectionChanged(_1)==false)return false}
this.refreshCellStyles(_1)});isc.evalBoundary;isc.B.push(isc.A.$93e=function isc_GridRenderer__setSelectedObservation(_1){var _2=false;if(!!_1.lastSelectionPreviousState!=!!_1.lastSelectionState){_2=true}else if(_1.lastSelectionState&&(!!_1.lastSelectionPartialValue!=!!_1.lastSelectionPreviousPartialValue))
{_2=true}
if(_2){this.$93f(_1.lastSelectionItem,!!_1.lastSelectionState,_1.cascadeSyncOnly)}},isc.A.$93f=function isc_GridRenderer__rowSelectionChanged(_1,_2,_3){if(!_3){if(this.handleSelectionChanged(_1,_2)==false){return false}}
if(this.selection.$88p){this.markForRowSelectionRefresh();return}
var _4=this.selection,_5=_4.lastSelectionItem,_6=_4.data.indexOf(_5,this.$20t,this.$89v);if(_6==-1)_6=_4.data.indexOf(_5);if(_6==-1)return;this.updateRowSelection(_6)},isc.A.markForRowSelectionRefresh=function isc_GridRenderer_markForRowSelectionRefresh(){this.markForRedraw("Selection changed")},isc.A.handleSelectionChanged=function isc_GridRenderer_handleSelectionChanged(_1,_2){if(this.selectionChanged)return this.selectionChanged(_1,_2)},isc.A.updateRowSelection=function isc_GridRenderer_updateRowSelection(_1){this.setRowStyle(_1)},isc.A.redrawForSelectionChanged=function isc_GridRenderer_redrawForSelectionChanged(){this.markForRedraw("selection changed")},isc.A.selectionEnabled=function isc_GridRenderer_selectionEnabled(){return this.selection!=null},isc.A.canSelectRecord=function isc_GridRenderer_canSelectRecord(_1){return(_1!=null&&_1[this.recordCanSelectProperty]!==false)},isc.A.$93g=function isc_GridRenderer__getMouseDownCell(){return[this.getEventRow(),this.getEventColumn()]},isc.A.mouseDown=function isc_GridRenderer_mouseDown(){if(this.$20v(isc.EH.lastEvent)){return}
var _1=this.$93g(),_2=_1[0],_3=_1[1];if(!(_2>=0&&_3>=0))return;var _4=this.getCellRecord(_2,_3);if(!this.cellIsEnabled(_2,_3,_4)){return false}
this.$93h=_2;this.$93i=_3;this.$93j=false;this.$93k=isc.EH.getX();this.$93l=isc.EH.getY();if(!isc.EH.rightButtonDown()){return this.$93m(_4,_2,_3)}else{return this.$93n(_4,_2,_3)}},isc.A.rightMouseDown=function isc_GridRenderer_rightMouseDown(){return this.mouseDown()},isc.A.$93m=function isc_GridRenderer__cellMouseDown(_1,_2,_3){var _4;if(this.cellMouseDown&&(this.cellMouseDown(_1,_2,_3)==false))_4=false;if(this.rowMouseDown&&(this.rowMouseDown(_1,_2,_3)==false))_4=false;if(this.recordMouseDown&&this.recordMouseDown(_2,_3)==false)_4=false;if(_4==false)return false;this.selectOnMouseDown(_1,_2,_3)},isc.A.selectOnMouseDown=function isc_GridRenderer_selectOnMouseDown(_1,_2,_3,_4){if(!this.selectionEnabled()){return true}
if(_2>=0&&_3>=0&&this.canSelectRecord(_1)&&!this.$93o())
{this.$93p=true;var _5=this.selection.selectOnMouseDown(this,_2,_3);if(_5&&this.fireSelectionUpdated&&isc.isA.Function(this.fireSelectionUpdated)){this.fireSelectionUpdated()}}},isc.A.$93o=function isc_GridRenderer__shouldSelectOnMouseUp(){var _1=this.ns.EH;if(_1.dragTarget!=null&&_1.dragOperation==_1.DRAG_SCROLL||this.$vg())
{return true}
return false},isc.A.$93n=function isc_GridRenderer__cellRightMouseDown(_1,_2,_3){if(this.canSelectOnRightMouse)this.selectOnRightMouseDown(_1,_2,_3)},isc.A.$108=function isc_GridRenderer__scrolled(_1,_2){if(!this.$11c){this.$93j=true}
if(this.grid&&this.grid.$93q){if(isc.Browser.nativeMouseMoveOnCanvasScroll){this.$925=true;isc.Page.setEvent(isc.EH.MOUSE_MOVE,this,"once","$93r")}
this.$11b(this,_1,_2);if(this.scrolled)this.scrolled(_1,_2)}else{this.Super("$108",arguments)}},isc.A.$93r=function isc_GridRenderer__suppressMouseMove(){var _1=isc.EH.lastEvent.target;if(_1!=this)this.$925=false},isc.A.selectOnRightMouseDown=function isc_GridRenderer_selectOnRightMouseDown(_1,_2,_3){this.selectOnMouseDown(_1,_2,_3)},isc.A.mouseUp=function isc_GridRenderer_mouseUp(){if(this.$20v(isc.EH.lastEvent))return;var _1=this.getEventRow(),_2=this.getEventColumn();if(!(_1>=0&&_2>=0))return;var _3=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_3))return;var _4;if(this.cellMouseUp&&(this.cellMouseUp(_3,_1,_2)==false))_4=false;if(this.rowMouseUp&&(this.rowMouseUp(_3,_1,_2)==false))_4=false;if(this.recordMouseUp&&this.recordMouseUp(_1,_2)==false)_4=false;if(_4==false)return _4;this.selectOnMouseUp(_3,_1,_2)},isc.A.selectOnMouseUp=function isc_GridRenderer_selectOnMouseUp(_1,_2,_3,_4){if(!this.selectionEnabled()){return true}
if(_2>=0&&_3>=0&&this.canSelectRecord(_1)&&(_4||(this.$93h==_2&&this.$93i==_3&&!this.$93j)))
{var _5=false;if(this.$93o()){this.$93p=true;_5=this.selection.selectOnMouseDown(this,_2,_3)}
if(this.grid)this.grid.$93s=true;if(this.selection.selectOnMouseUp(this,_2,_3))_5=true;if(this.grid)this.grid.$93s=null;if(_5){this.redrawForSelectionChanged();if(this.$93p){if(this.fireSelectionUpdated&&isc.isA.Function(this.fireSelectionUpdated)){this.fireSelectionUpdated()}
if(this.grid.getCurrentCheckboxField()!=null){this.grid.updateCheckboxHeaderState()}
this.$93p=null}}}},isc.A.click=function isc_GridRenderer_click(){if(this.$20v(isc.EH.lastEvent))return;var _1=this.getEventRow(),_2=this.getEventColumn();return this.$93t(_1,_2)},isc.A.$93t=function isc_GridRenderer__rowClick(_1,_2){this.$93u=this.$93v=null;var _3=this.$93h;if(_3!=null&&_1!=_3){if(isc.EH.getX()==this.$93k){_1=this.$93h}else{return}}
if(isc.EH.getY()==this.$93l&&this.$93i!=null){_2=this.$93i}
if(!(_1>=0&&_2>=0))return;var _4=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_4))return false;this.$93u=_1;var _5;if(!this.$93w(_4,_1,_2))_5=false;if(this.rowClick&&(this.rowClick(_4,_1,_2)==false))
_5=false;this.$93h=null;return _5},isc.A.$93w=function isc_GridRenderer__cellClick(_1,_2,_3){if(this.$93i!=_3){this.$93v=null;return}
this.$93v=_3;this.$93x=null;return!(this.cellClick&&(this.cellClick(_1,_2,_3)==false))},isc.A.doubleClick=function isc_GridRenderer_doubleClick(){if(this.$20v(isc.EH.lastEvent))return;var _1=this.getEventRow(),_2=this.getEventColumn();if(!(_1>=0&&_2>=0))return;var _3=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_3))return false;if(_1!=this.$93u){return this.$93t(_1,_2)}
var _4;if(_2!=this.$93v){_4=this.$93w(_3,_1,_2)}else if(this.cellDoubleClick&&(this.cellDoubleClick(_3,_1,_2)==false))
{_4=false}
if(this.rowDoubleClick&&(this.rowDoubleClick(_3,_1,_2)==false))
_4=false;this.$93h=this.$93i=null;this.$93u=this.$93v=null;if(_4==false)return false},isc.A.dragStart=function isc_GridRenderer_dragStart(){var _1=isc.EH,_2=_1.lastEvent;if(_2.target==this&&_2.eventType=="dragStart")
{var _3;try{_3=_2.DOMevent.dataTransfer}catch(e){_3=null}
if(_3!=null&&_3.setDragImage!=null){var _4=this.getNearestRowToEvent(),_5=this.getTableElement(_4);if(_5!=null){var _6=isc.Element.getOffsets(_5),x=_1.getX(),y=_1.getY();_3.setDragImage(_5,x-_6.left,y-_6.top)}}}},isc.A.dragMove=function isc_GridRenderer_dragMove(){if(this.$20v(isc.EH.lastEvent)||!this.selectionEnabled()||!this.canDragSelect)
return true;var _1=this.getNearestRowToEvent(),_2=this.getNearestColToEvent();this.selection.selectOnDragMove(this,_1,_2)},isc.A.dragStop=function isc_GridRenderer_dragStop(){this.fireSelectionUpdated()},isc.A.noSnapDragOffset=function isc_GridRenderer_noSnapDragOffset(_1){return this.snapToCells},isc.A.getHSnapPosition=function isc_GridRenderer_getHSnapPosition(_1,_2){if(!this.snapToCells){return this.Super("getHSnapPosition",arguments)}
var _3=this.ns.EH,_4=_2||this.snapHDirection,_5=this.snapHGap?Math.floor(_1/this.snapHGap):this.getEventColumn(_1),_6=this.snapHGap?(_5*this.snapHGap):this.getColumnLeft(_5),_7=this.snapHGap?_6+this.snapHGap:this.getColumnLeft(_5)+this.getColumnSize(_5),_8=this.snapHGap?_5+1:this.getEventColumn(_7+1),_9;if(_8>=0){_9=this.snapHGap?_8*this.snapHGap:this.getColumnLeft(_8)}else{_9=_6}
var _10=_6+(this.snapHGap?this.snapHGap:this.getColumnSize(_5))/2;if(this.snapInsideBorder){var _11=isc.Element.$0f(this.baseStyle)
var _12=isc.Element.$0g(this.baseStyle)
_6+=_11;_7-=_12;_9+=_11}
if(_3.dragOperation==_3.DRAG_RESIZE){var _13=isc.EH.resizeEdge.contains("L");return _13?_6:_7}else{if(_4==isc.Canvas.BEFORE){return _6}else if(_4==isc.Canvas.AFTER){return _9}else{if(_1<=_10){return _6}else{return _9}}}},isc.A.getVSnapPosition=function isc_GridRenderer_getVSnapPosition(_1,_2){if(!this.snapToCells){return this.Super("getVSnapPosition",arguments)}
var _3=this.ns.EH,_4=_2||this.snapVDirection,_5=this.snapVGap?Math.floor(_1/this.snapVGap):this.getEventRow(_1),_6=this.snapVGap?(_5*this.snapVGap):this.getRowTop(_5),_7=this.snapVGap?_6+this.snapVGap:this.getRowTop(_5)+this.getRowSize(_5),_8=this.snapVGap?_5+1:this.getEventRow(_7+1),_9;if(_8>=0){_9=this.snapVGap?_8*this.snapVGap:this.getRowTop(_8)}else{_9=_6}
var _10=_6+(this.snapVGap?this.snapVGap:this.getRowSize(_5))/2;if(this.snapInsideBorder){var _11=isc.Element.$0c(this.baseStyle)
var _12=isc.Element.$0e(this.baseStyle)
_6+=_11;_7-=_12;_9+=_11}
if(_3.dragOperation==_3.DRAG_RESIZE){var _13=isc.EH.resizeEdge.contains("T");return _13?_6:_7}else{if(_4==isc.Canvas.BEFORE){return _6}else if(_4==isc.Canvas.AFTER){return _9}else{if(_1<=_10)return _6;else return _9}}},isc.A.getColumnAutoSize=function isc_GridRenderer_getColumnAutoSize(_1,_2,_3){if(this.isEmpty()){return null}
var _4=this.$886;if(_4==null){_4=this.$886=this.createAutoChild("columnSizer")}
var _5=this.autoFit,_6=this.wrapCells;this.autoFit=true;this.wrapCells=false;if(_2==null||_3==null){var _7=this.getDrawArea();_2=_7[0];_3=_7[1]+1}
this.$906=true;_4.setContents(this.getTableHTML(_1,_2,_3,true));delete this.$906;this.autoFit=_5;this.wrapCells=_6;if(!_4.isDrawn()){_4.draw()}else{if(_4.isDirty())_4.redraw();if(_4.$10u)_4.adjustOverflow("Check autoFit column sizing")}
var _8;if(isc.isA.Array(_1)){var _9,_10=_4.getHandle().childNodes;for(var i=0;i<_10.length;i++){if(_10[i].tagName.toLowerCase()=="table"){_9=_10[i];break}}
var _12=this.$93y();if(_9&&_9.rows[_12]){var _13=_9.rows[_12],_14=_13.childNodes,_15=_14.length;_8=[];if(isc.Browser.isMoz&&isc.Browser.hasTextOverflowEllipsis){for(var i=0;i<_15;++i){_8[i]=Math.ceil(_14[i].getBoundingClientRect().width)}}else if(isc.Browser.isIE10){var _16=_13.ownerDocument;var _17=_16.msCSSOMElementFloatMetrics;_16.msCSSOMElementFloatMetrics=true;for(var i=0;i<_15;++i){_8[i]=Math.ceil(_14[i].offsetWidth)}
_16.msCSSOMElementFloatMetrics=_17}else{for(var i=0;i<_15;++i){_8[i]=_14[i].offsetWidth;if(isc.Browser.hasTextOverflowEllipsis){var c=Math.ceil(_8[i]);_8[i]=(_8[i]==c?c+1:c)}}}}}else{_8=_4.getScrollWidth()}
var _19=this;this.fireOnPause("clearColumnSizer",function(){_19.clearColumnSizer()},this.clearColumnSizerDelay);return _8},isc.A.$93y=function isc_GridRenderer__getValidAutoFitRowNum(){return 0},isc.A.redraw=function isc_GridRenderer_redraw(_1,_2,_3,_4){this.$92r();this.invokeSuper(isc.GridRenderer,"redraw",_1,_2,_3,_4);delete this.$89h},isc.A.modifyContent=function isc_GridRenderer_modifyContent(){if(!this.$90g)this.$92s();if(this.$89o!=null){this.$89w=true;this.$89q("scrollToRow in modifyContent");this.$89w=null;var _1=this.getTableElement();if(_1)_1.style.visibility="inherit"}
if(this.$89n){var _2=this.$90k().sum();if(_2<this.getViewportHeight()){this.$91y=0;var _3=isc.Element.get(this.getID()+"$91z"),_4=this.$91y+(this.endSpace||0);if(_3){if(_4==0)_3.style.display="none"
else _3.style.display="";_3.style.height=_4+"px"}}
var _5=this.getVisibleRows(),_6=Math.max(1,_5[1]-_5[0]),_7=_6/this.getTotalRows(),_8=this.getViewportRatio(true);var _9=this.getScrollTop()+this.getViewportHeight(),_10=_9-this.getRowTop(_5[1]+1);if(isc.isA.Number(_7)&&(_10<=0||_5[0]==0)&&((_8==1&&_7<1)||_8/_7>1.25))
{this.$89s=Math.max(this.cellHeight,Math.round(this.getViewportHeight()/_6))}}},isc.A.setStartSpace=function isc_GridRenderer_setStartSpace(_1){if(!isc.isA.Number(_1)||_1==this.startSpace)return;var _2=this.startSpace&&this.startSpace>_1;this.startSpace=_1;if(!this.isDrawn())return;var _3=_1+this.$908,_4=isc.Element.get(this.getID()+"$91a");if(_4){if(_3==0)_4.style.display="none";else _4.style.display="";if(this.$909){_4.style.height=_3+"px"}
if(!_2||!this.$909){_4.innerHTML=isc.Canvas.spacerHTML(1,_3)}
this.$9j()}},isc.A.setEndSpace=function isc_GridRenderer_setEndSpace(_1){if(!isc.isA.Number(_1)||_1==this.endSpace)return;var _2=this.endSpace&&this.endSpace>_1;this.endSpace=_1;if(!this.isDrawn())return;var _3=_1+this.$91y,_4=isc.Element.get(this.getID()+"$91z");if(_4){if(_3==0)_4.style.display="none";else _4.style.display="";if(this.$909)_4.style.height=_3+"px";if(!_2||!this.$909){_4.innerHTML=isc.Canvas.spacerHTML(1,_3)}
this.$9j()}},isc.A.setLeftSpace=function isc_GridRenderer_setLeftSpace(_1){if(this.leftSpace==_1)return;this.leftSpace=_1;this.redraw()},isc.A.setRightSpace=function isc_GridRenderer_setRightSpace(_1){if(this.rightSpace==_1)return;this.rightSpace=_1;this.redraw()},isc.A.clear=function isc_GridRenderer_clear(){this.Super("clear",arguments);this.clearColumnSizer(true);this.$899();delete this.$89h},isc.A.$899=function isc_GridRenderer__clearTableCache(){this.$92v=null;this.$92u=null;delete this.$923;delete this.$37g;this.$893=false});isc.B._maxIndex=isc.C+228;isc.GridRenderer.$93z={getCellRecord:"rowNum,colNum",getCellValue:"record,rowNum,colNum,gridBody",findRowNum:"record",findColNum:"record",getBaseStyle:"record,rowNum,colNum",getCellStyle:"record,rowNum,colNum",getCellCSSText:"record,rowNum,colNum",cellIsEnabled:"rowNum,colNum",getRowHeight:"record,rowNum,isFrozenBody",getRowSpan:"record,rowNum,colNum",cellOut:"record,rowNum,colNum",cellOver:"record,rowNum,colNum",rowOut:"record,rowNum,colNum",rowOver:"record,rowNum,colNum",cellMove:"record,rowNum,colNum",rowMove:"record,rowNum,colNum",cellContextClick:"record,rowNum,colNum",rowContextClick:"record,rowNum,colNum",recordContextClick:"record,recordNum,fieldNum",cellMouseDown:"record,rowNum,colNum",rowMouseDown:"record,rowNum,colNum",recordMouseDown:"recordNum,fieldNum",cellMouseUp:"record,rowNum,colNum",rowMouseUp:"record,rowNum,colNum",recordMouseUp:"recordNum,fieldNum",selectOnMouseDown:"record,rowNum,colNum",selectOnRightMouseDown:"record,rowNum,colNum",selectOnMouseUp:"record,rowNum,colNum",cellClick:"record,rowNum,colNum",cellDoubleClick:"record,rowNum,colNum",rowClick:"record,rowNum,colNum",rowDoubleClick:"record,rowNum,colNum",cellHover:"record,rowNum,colNum",cellValueHover:"record,rowNum,colNum",rowHover:"record,rowNum,colNum",cellHoverHTML:"record,rowNum,colNum",cellValueHoverHTML:"record,rowNum,colNum,defaultHTML",getCellHoverComponent:"record,rowNum,colNum",selectionChanged:"record,state",cellSelectionChanged:"cellList",getRowElementId:"rowNum,physicalRowNum",getCellElementId:"rowNum,physicalRowNum,colNum,physicalColNum",shouldFixRowHeight:"record,rowNum",updateEmbeddedComponentZIndex:"component",updateEmbeddedComponentCoords:"component,record,rowNum,colNum",getRowRole:"rowNum,record",getRowAriaState:"rowNum,record",getCellRole:"rowNum,colNum,record",getCellAriaState:"rowNum,colNum,record"};isc.GridRenderer.registerStringMethods(isc.GridRenderer.$93z);isc.defineClass("SelectionOrRollOverCanvas","Canvas");isc.A=isc.SelectionOrRollOverCanvas.getPrototype();isc.A.cssPointerEvents="none";isc.ClassFactory.defineClass("ListGrid","VLayout","DataBoundComponent");isc.defer("isc.ListGrid.addProperties({ showRollOver: !isc.Browser.isTouch });");isc.addGlobal("ListViewer",isc.ListGrid);isc.defineClass("GridBody",isc.GridRenderer);isc.A=isc.GridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.adjustOverflowWhileDirty=false;isc.A.$29=isc.Browser.isIE&&isc.Browser.version>9;isc.A.expandEmptyMessageToMatchFields=true;isc.A.applyHSpaceToEmptyMessage=true;isc.B.push(isc.A.initWidget=function isc_GridBody_initWidget(){this.Super("initWidget",arguments);if(isc.screenReader)this.$29=false},isc.A.fireSelectionUpdated=function isc_GridBody_fireSelectionUpdated(){this.grid.fireSelectionUpdated()},isc.A.canSelectRecord=function isc_GridBody_canSelectRecord(_1){return this.grid.canSelectRecord(_1)},isc.A.redrawForSelectionChanged=function isc_GridBody_redrawForSelectionChanged(){this.grid.$930("selection changed")},isc.A.adjustOverflow=function isc_GridBody_adjustOverflow(_1,_2,_3,_4,_5){if(!this.isDrawn())return this.Super("adjustOverflow",arguments);if(this.$931)return;if(this.grid.$932){return this.Super("adjustOverflow",arguments)}
var _6=this.grid;if(_6==null)return this.Super("adjustOverflow",arguments);if(this.$8d!=null)delete this.$8d;if(this.$8h!=null)delete this.$8h;var _7=_6.data,_8=false;;if(isc.isA.ResultSet(_7)&&!_7.lengthIsKnown()){if(_6.emptyMessageHeight==null){return this.invokeSuper(isc.GridBody,"adjustOverflow",_1,_2,_3,_4,_5)}
_8=true}
var _9=this.getWidth(),_10=this.getHeight();var _11=(this.autoFitData=="both"),_12=_11,_13=_6&&_6.frozenFields!=null,_14=_13&&_6&&(_6.frozenBody==this);if(!_11)_11=(this.autoFitData=="vertical");if(!_12)_12=(this.autoFitData=="horizontal");if(_12||_11){var _15,_16,_17,_18,_19,_20,_21;if(_11){var _22=this.grid.getAutoFitMinBodyHeight();_15=_22;var _23=_8?0:this.getTotalRows(),_24=_23;_17=0;if(this.autoFitMaxRecords){_24=Math.min(_24,this.autoFitMaxRecords)}
if(_24>0){var _25=this.$90k();var _26=this.$20t,_27=this.$89v;if(this.$20t==null){_26=_24;_27=_24}
var _14=this.$89i();if(_26>0){_26=Math.min(_26,_24);for(var i=0;i<_26;i++){_17+=this.getRowHeight?this.getRowHeight(this.grid.getRecord(i),i,_14):this.cellHeight}}
var _29=_24-1;if(_27<_29){for(var i=_27+1;i<_29+1;i++){_17+=this.getRowHeight?this.getRowHeight(this.grid.getRecord(i),i,_14):this.cellHeight}}
_27=Math.min(_27,_29);for(var i=0;i<=_27-_26;i++){_17+=_25[i]}
_19=_23>_24;var _30=this.getAutoFitMaxHeight();if(_30&&_17>_30){_17=_30;_19=true}}else{if(this.grid.emptyMessageHeight!=null){_17=this.grid.emptyMessageHeight}}
if(this.autoFitExtraRecords&&this.autoFitExtraRecords>0){var _31=Math.round(this.autoFitExtraRecords*this.cellHeight);_17+=_31}}else{_19=this.getScrollHeight()>this.getHeight()}
if(_12&&!_14){var _16=this.grid.getInnerWidth(),_32;if(_13){var _33=this.grid.getFrozenSlots(this.grid.$72y);_32=_33.sum();_16-=_32}
var _34=this.getColumnSizes(),_35=_34.sum();if(this.autoFitMaxColumns){var _36=this.autoFitMaxColumns;if(_13){_36=Math.max(1,_36-this.grid.frozenFields.length)}
if(_36<_34.length){_34=_34.slice(0,_36)}}
var _37=_34.sum();if(this.autoFitMaxWidth){var _38=this.autoFitMaxWidth;if(_13)_38=Math.max(20,_38-_32);_37=Math.min(_38,_37)}
_18=(this.overflow==isc.Canvas.SCROLL)?true:(this.overflow==isc.Canvas.AUTO)?(_35>Math.max(_16,_37)):false}else{_18=this.overflow==isc.Canvas.SCROLL?true:this.overflow==isc.Canvas.AUTO?this.getScrollWidth()>this.getWidth():false}
if(_11&&_17!=null){_17+=this.getVBorderPad()+this.getVMarginSize();if(_18){_17+=this.getScrollbarSize();var _30=this.getAutoFitMaxHeight()
if(_30&&_17>_30){_17=_30}}
if(_17>_15){_15=_17;this.$933=true}else{if(this.$933)delete this.$933}}
if(_12&&!_14&&_37!=null){_37+=this.getHBorderPad()+this.getHMarginSize();if(_19||this.alwaysShowVScrollbar||this.grid.$924(!!_19)){_37+=this.getScrollbarSize();if(this.autoFitMaxWidth){var _38=this.autoFitMaxWidth;if(_13)_38=Math.max(20,_38-_32);_37=Math.min(_38,_37)}}
if(_37>_16){_16=_37;this.$934=true}else{if(this.$934)delete this.$934}}
this.$931=true;_21=this.getDelta(this.$2t,_15,this.getHeight());_20=this.getDelta(this.$2u,_16,this.getWidth());delete this.$931;if(_21!=null||_20!=null){this.resizeBy(_20,_21,null,null,true)}
if(_20!=null||(_14&&_12)){var _39=this.grid,_40=_39.$924()?_39.body.getScrollbarSize():0,_41=_16-_40,_42=_41;if(_13&&_39.headerLayout){if(_14){_42=this.getWidth()+_39.body.getWidth();if(_39.autoFitMaxWidth!=null&&(_42+_39.getHBorderPad()+_39.getHMarginSize()>_39.autoFitMaxWidth))
{return _39.body.adjustOverflow()}
_42-=_40}else{_42=_41+_39.frozenBody.getWidth()}
_39.headerLayout.setWidth(_42)}
if(!_14){var _43=_39.header;if(_43&&_43.isDrawn()){_43.setWidth(_41)}}}}
var _44=(!_11&&this.$933),_45=(!_12&&this.$934);if(_44||_45){delete this.$933;delete this.$934;var _46=_44?this.grid.getAutoFitMinBodyHeight():null,_47=_45?(!_13?this.grid.getInnerWidth():(this.grid.getInnerWidth()-this.grid.frozenBody.getWidth())):null;this.resizeTo(_16,_15);this.grid.$935("autoFitData mode changed")}
var _48=this.invokeSuper(isc.GridBody,"adjustOverflow",_1,_2,_3,_4,_5);if((_11||_12)&&(this.getWidth()!=_9||this.getHeight()!=_10))
{this.grid.updateRecordComponents(true)}
if(!_14)this.grid.bodyOverflowed();return _48},isc.A.getAutoFitMaxHeight=function isc_GridBody_getAutoFitMaxHeight(){return this.grid?this.grid.getAutoFitMaxBodyHeight():null},isc.A.$93y=function isc_GridBody__getValidAutoFitRowNum(){var _1=this.grid;if(this.grid&&this.grid.isGrouped){var _2=0;while(_2<this.grid.getTotalRows()){var _3=this.grid.getRecord(_2);if(_3==null||!this.grid.isGroupNode(_3)){return _2}
_2++}}
return 0},isc.A.resizeBy=function isc_GridBody_resizeBy(_1,_2,_3,_4,_5){if(!_5){this.$23g=this.getWidth()+(_1!=null?_1:0)}
var _6=this.invokeSuper(isc.GridBody,"resizeBy",_1,_2,_3,_4,_5);if(_5&&_1!=null&&!this.frozen){delete this.$3t}
return _6},isc.A.cellContextClick=function isc_GridBody_cellContextClick(_1,_2,_3){var _4=this.grid.getFieldNumFromLocal(_3,this);return this.grid.$936(_1,_2,_4)},isc.A.$93t=function isc_GridBody__rowClick(_1,_2){if(!this.grid)return;var _3;var _4=this.grid.getFieldNumFromLocal(_2,this);var _5=_1>=0?this.grid.getRecord(_1):null,_6=_4>=0?this.grid.getField(_4):null,_7=false;if(!isc.isA.RecordEditor(this.grid)&&_6&&_6.isRemoveField){_7=!_5||!(_5.$17b||_5.isGroupSummary||_5.isGridSummary)}
if(_7){if(_1>=0){this.grid.removeRecordClick(_1,_2);_3=false}}else{_3=this.Super("$93t",arguments)}
return _3},isc.A.getCellHoverDelay=function isc_GridBody_getCellHoverDelay(_1,_2){if(!this.grid)return;var _3=this.grid.getFieldNumFromLocal(_2,this);return this.grid.getCellHoverDelay(this.grid.getCellRecord(_1,_2),_1,_2)},isc.A.$93a=function isc_GridBody__getCellHoverComponent(_1,_2,_3){if(this.grid&&isc.isA.ListGrid(this.grid)){var _4=this.grid.getFieldNumFromLocal(_3,this);return this.grid.$93a(_1,_2,_4)}},isc.A.getInnerHTML=function isc_GridBody_getInnerHTML(){this.grid.bodyDrawing(this);return this.Super("getInnerHTML",arguments)},isc.A.$t4=function isc_GridBody__canFocus(){var _1=this.Super("$t4",arguments);if(_1&&this.grid&&!this.grid.canFocusInEmptyGrid&&this.isEmpty()){return false}
return _1},isc.A.getTablePrintHTML=function isc_GridBody_getTablePrintHTML(_1){var _2=_1.startRow,_3=_1.endRow,_4=_3!=null?(_3-_2):this.getTotalRows(),_5=this.printMaxRows,_6=_1.printWidths,_7=_1.printProps;var _8={target:this,methodName:"gotTablePrintHTML",printContext:_1,printCallback:_1.callback}
_1.callback=_8;if(_5<_4){this.logDebug("get table print html - breaking HTML into chunks","printing");if(_2==null)_2=_1.startRow=0;if(_3==null)_3=_1.endRow=this.getTotalRows();this.getPrintHTMLChunk(_1);return null}
var _9=this.grid.$937(_6,_7);var _10=this.getTableHTML(null,_2,_3,null,_8);this.grid.$938(_9);return _10},isc.A.gotTablePrintHTML=function isc_GridBody_gotTablePrintHTML(_1,_2){var _3=_2.printCallback;if(_3){this.fireCallback(_3,"HTML,callback",[_1,_3])}},isc.A.getPrintHTMLChunk=function isc_GridBody_getPrintHTMLChunk(_1,_2){var _3=this.grid.$937(_1.printWidths);this.$888=true;this.$939=true;var _4=_1.startRow,_5=_1.endRow,_6=this.printMaxRows,_7=_1.callback;this.currentPrintProperties=_1.printProps;if(!_1.html)_1.html=[];var _8=_1.chunkEndRow=Math.min(_5,(_4+_6)),_9=this.getTableHTML(null,_4,_8,null,{target:this,methodName:"gotPrintChunkHTML",printContext:_1,printCallback:_1.callback});this.grid.$938(_3);this.$888=false;if(_9!=null){delete this.$939;this.gotPrintChunkHTML(_9,{printContext:_1});if(_2){return _9}}},isc.A.gotPrintChunkHTML=function isc_GridBody_gotPrintChunkHTML(_1,_2){var _3=_2.printContext,_4=_3.startRow,_5=_3.endRow,_6=_3.chunkEndRow,_7=this.printMaxRows,_8=_3.callback;_3.html.add(_1);if(_6<_5){_3.startRow=_6;return this.delayCall("getPrintHTMLChunk",[_3],0)}
if(_8!=null){var _9=_3.html.join(isc.emptyString);this.fireCallback(_8,"HTML,callback",[_9,_8])}},isc.A.gotComponentPrintHTML=function isc_GridBody_gotComponentPrintHTML(_1,_2){var _3=_2.context.asyncCallback,_4=_3.printContext;var _5=_4.printWidths;var _6=this.grid.$937(_5);if(this.$939){this.$888=true}
var _1=this.Super("gotComponentPrintHTML",arguments);if(this.$888)delete this.$888;if(_1!=null){delete this.$939}else{this.grid.$938(_6)}},isc.A.getPrintHeaders=function isc_GridBody_getPrintHeaders(_1,_2){var _3=this.$94a;delete this.$94a;return _3==null?"":_3},isc.A.getPrintFooters=function isc_GridBody_getPrintFooters(_1,_2){var _3=this.$94b;delete this.$94b;return _3==null?"":_3},isc.A.refreshCellValue=function isc_GridBody_refreshCellValue(_1,_2){var _3=this.grid;if(_1>=0&&_2>=0&&_3&&_3.allowRowSpanning&&_3.useRowSpanStyling)
{var _4=this.getCellStartRow(_1,_2);if(_4!=_1){_1=_4}}
isc.GridRenderer.$dh.refreshCellValue.call(this,_1,_2)},isc.A.getCellVAlign=function isc_GridBody_getCellVAlign(_1,_2,_3,_4){if(this.grid&&this.grid.getCellVAlign){var _5=this.grid.getFieldNumFromLocal(_4,this);return this.grid.getCellVAlign(_1,_3,_5)}},isc.A.getCellAlign=function isc_GridBody_getCellAlign(_1,_2,_3,_4){if(this.grid&&this.grid.getCellAlign!=null){var _5=this.grid.getFieldNumFromLocal(_4,this);return this.grid.getCellAlign(_1,_3,_5)}else return _2.cellAlign||_2.align},isc.A.$91h=function isc_GridBody__drawRecordAsSingleCell(_1,_2,_3){var _4=this.grid;if(_4.showNewRecordRow&&_4.$94c(_1))return true;return isc.GridRenderer.$dh.$91h.call(this,_1,_2,_3)},isc.A.showSingleCellCheckboxField=function isc_GridBody_showSingleCellCheckboxField(_1){var _2=this.grid;return _2&&_2.showSingleCellCheckboxField(_1)},isc.A.$91m=function isc_GridBody__getSingleCellSpan(_1,_2,_3,_4){if(_2==this.$90g||!this.showSingleCellCheckboxField(_1)||(this.grid&&this.grid.frozenBody!=null&&this.grid.frozenBody!=this))
{return[_3,_4]}
return[Math.max(_3,1),_4]},isc.A.mouseWheel=function isc_GridBody_mouseWheel(){if(this.frozen&&this.grid!=null){var _1=this.ns.EH.lastEvent.wheelDelta;var _2=this.scrollTop+Math.round(_1*isc.Canvas.scrollWheelDelta);this.grid.body.scrollTo(null,_2,"frozenMouseWheel");return false}
return this.Super("mouseWheel",arguments)},isc.A.$89j=function isc_GridBody__getDrawRows(){if(this.frozen&&this.grid){var _1=this.grid;return _1.body.$89j()}
return this.Super("$89j",arguments)},isc.A.doneFastScrolling=function isc_GridBody_doneFastScrolling(){if(!this.frozen&&this.grid!=null&&this.grid.frozenBody!=null){var _1=this.$89g;this.Super("doneFastScrolling",arguments);if(_1){this.grid.frozenBody.$89h=true;this.grid.frozenBody.markForRedraw("Done fast scrolling on unfrozen body")}}},isc.A.scrollTo=function isc_GridBody_scrollTo(_1,_2,_3,_4){if(isc.$et)arguments.$eu=this;if(_1!=null){var _5=this.getScrollWidth()-this.getViewportWidth();_1=Math.max(0,Math.min(_5,_1))}
if(_2!=null){var _6=this.getScrollHeight()-this.getViewportHeight();_2=Math.max(0,Math.min(_6,_2))}
var _7=this.grid;this.invokeSuper(isc.GridBody,"scrollTo",_1,_2,_3,_4);var _8=this.$94d;if(!_8)_7.bodyScrolled(_1,_2,this.frozen);if(!this.isDirty()&&_7.$94e){var _9=_7.$20w,_10=_9.getItems(),_11=[];for(var i=0;i<_10.length;i++){if(_10[i].isDrawn())_11.add(_10[i])}
_9.itemsMoved(_11)}},isc.A.addEmbeddedComponent=function isc_GridBody_addEmbeddedComponent(_1,_2,_3,_4,_5){var _6=this.invokeSuper(isc.GridBody,"addEmbeddedComponent",_1,_2,_3,_4,_5);if(_1.$91x!=null&&_1.$91x!=-1&&this.grid){var _7=this.grid,_4=_1.$91x,_8=_7.getFieldNumFromLocal(_4,this),_9=_7.getFieldName(_8);_1.$92p=_9;if(_7.$94f==null){_7.$94f={}}
if(_7.$94f[_9]==null){_7.$94f[_9]={}}
_7.$94f[_9][_1.getID()]=true;if(_1._percent_width==null){_7.$94g(_9)}}
return _1},isc.A.removeEmbeddedComponent=function isc_GridBody_removeEmbeddedComponent(_1,_2,_3){var _4=this.grid;if(_4){var _5=_2.$92p;if(_5!=null){if(_4.$94f&&_4.$94f[_5]){delete _4.$94f[_5][_2.getID()]}
if(_2._percent_width==null){_4.$94g(_5)}}
_2.$92p=null}
this.invokeSuper(isc.GridBody,"removeEmbeddedComponent",_1,_2,_3)},isc.A.updateHeightForEmbeddedComponents=function isc_GridBody_updateHeightForEmbeddedComponents(_1,_2,_3){if(_1&&!this.grid.$91v(_1)&&this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)
{var _4=this.getMaxEmbeddedComponentHeight(_1,_2);if(_4.allWithin){_3=Math.max(_3,_4.requiredHeight)}else{_3+=_4.requiredHeight}
return _3}
return this.invokeSuper(isc.GridBody,"updateHeightForEmbeddedComponents",_1,_2,_3)},isc.A.getMaxEmbeddedComponentHeight=function isc_GridBody_getMaxEmbeddedComponentHeight(_1,_2){var _3=this.invokeSuper(isc.GridBody,"getMaxEmbeddedComponentHeight",_1,_2);if(this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null){_3.requiredHeight=Math.max(_3.requiredHeight,this.grid.recordComponentHeight)}
return _3},isc.A.$92f=function isc_GridBody__writeEmbeddedComponentSpacer(_1){if(_1&&this.grid&&this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)
{return true}
return this.invokeSuper(isc.GridBody,"$92f",_1)},isc.A.$92s=function isc_GridBody__placeEmbeddedComponents(){if(this.grid&&this.grid.$94h){return}
return this.Super("$92s",arguments)},isc.A.getAvgRowHeight=function isc_GridBody_getAvgRowHeight(){if(this.grid)return this.grid.getAvgRowHeight(this);return this.Super("getAvgRowHeight",arguments)},isc.A.shouldShowAllColumns=function isc_GridBody_shouldShowAllColumns(){if(this.showAllColumns){return true}
if(!this.fixedRowHeights&&!this.showAllRows){if(this.grid.canExpandRecords&&this.grid.$94i){return false}
return true}
if(this.overflow==isc.Canvas.VISIBLE){return true}
return false},isc.A.redraw=function isc_GridBody_redraw(_1,_2,_3,_4){if(this.$94j)this.cancelPendingCellRefresh();this.$94k=true;var _5=this.grid;if(_5.alwaysShowEditors&&!_5.$94e){_5.startEditing(null,null,true,null,true)}
var _6=_5.$20w,_7=_5.$94e,_8,_9,_10,_11,_12;_5.$94l();if(!_5.leaveScrollbarGap&&_5.predictScrollbarGap&&(this.overflow==isc.Canvas.AUTO)){var _13=this.vscrollOn,_14=!_5.isEmpty()&&(_5.getTotalRows()*_5.cellHeight)>this.getInnerHeight();if(_13!=_14){delete this.$94m;_5.$935("body redrawing with changed vertical scroll-state")}}
var _15=false;if(_7){this.logInfo("redraw with editors showing, editForm.hasFocus: "+_6.hasFocus,"gridEdit");_8=_5.getEditCol();this.$494();_12=this.$94n()}else if(_6!=null){var _16=_6.getItems();for(var i=0;i<_16.length;i++){if(_16[i].isDrawn())_16[i].clearing(true)}}else if(isc.screenReader){var _18=this.ns.EH.getFocusCanvas();_15=_18!=null&&_18!==this}
if(this.$94m!=null){var _19=this.$94m;delete this.$94m;_5.$935(_19)}
var _20=this.getDrawArea();var _21=this.grid,_22=this.$94o;if(!_22)_22=this.$94o=[0,0,0,0];var _21=this.grid,_23=_21.$94p(_20[0]),_24=_21.$94p(_20[1]),_25=(_23!=null&&_24!=null);if(_25&&!_22.equals(_20)){if(!this.frozen){_21.$94q(_22[0],_22[1],_22[2],_22[3],this);this.$94o=_20}}
delete this.$94r;this.invokeSuper(isc.GridBody,"redraw",_1,_2,_3,_4);delete this.$94k;if(!(this.frozen&&this.$94s)){_21.updateRecordComponents()}
this.$94s=false;if(_7){if(_12!=null&&_12.length>0){_6.removeItems(_12)}
_5.$94t(null,true,this);_5.updateEditRow(_5.getEditRow());if(_6.hasFocus||(this.$94u&&isc.EH.getFocusCanvas()==null))
{this.$94v(_8)}else{delete this.$94u}}else{if(_6!=null){_5.$94t(null,null,this)}
if(isc.screenReader){this.$90v(this.getNativeFocusRow(),_15)}}},isc.A.redrawOnScroll=function isc_GridBody_redrawOnScroll(_1){if(this.frozen)this.$94s=true;return this.Super("redrawOnScroll",arguments)},isc.A.$901=function isc_GridBody__lockVirtualScrolling(){this.grid.$94w=true},isc.A.$902=function isc_GridBody__canStopVirtualScrolling(){return!this.grid.$94w},isc.A.setHandleDisabled=function isc_GridBody_setHandleDisabled(_1){var _2=this.grid;if(this.isDrawn()&&_2&&_2.$94e){this.markForRedraw("Grid body disabled while editing")}
return this.Super("setHandleDisabled",arguments)},isc.A.$94n=function isc_GridBody__updateEditItems(){var _1=this.grid,_2=_1.getEditForm(),_3=[],_4=_2.getItems();if(!_1.editByCell){var _5=_1.getEditRow(),_6=_1.getRecord(_5),_7=_1.getEditFormItemFieldWidths(_6);var _4=_2.getItems(),_8=_4.getProperty(this.fieldIdProperty),_9=_1.getDrawnFields(),_10=_9.getProperty(this.fieldIdProperty);var _11=_4.length==_9.length,_12=false;for(var i=0;i<_4.length;i++){var _14=_10.indexOf(_8[i]),_15=_4[i].isDrawn();if(_14==-1){_12=true;_3.add(_4[i]);if(_15){_4[i].clearing(true)}}else{var _16=_8[i],_17=_1.canEditCell(_5,_14);if(_17){_4[i].width=_7[_4[i].colNum];_4[i].$37h=null;if(!_15)_4[i].drawing(true);else _4[i].redrawing()}else{if(_15)_4[i].clearing(true)}}}
if(!_11||_12){var _18=_1.getEditedRecord(_5,0);for(var i=0;i<_9.length;i++){if(!_8.contains(_10[i])){var _19=_1.fields.indexOf(_9[i]);var _20=_1.getEditItem(_9[i],_6,_18,_5,_19,_7[_19]);_2.addItem(_20);var _17=_1.canEditCell(_5,_19);if(_17){_2.getItem(_10[i]).drawing(true)}}}
_2.items.sortByProperty("colNum",Array.ASCENDING)}}
return _3},isc.A.$494=function isc_GridBody__storeFocusForRedraw(){var _1=this.grid,_2=_1.getEditForm(),_3=_1.getEditCol();if(_2.hasFocus){var _4=_2.getFocusSubItem();if(_4){_4.updateValue();var _5=_4;while(_4.parentItem!=null){_4=_4.parentItem}
if(!_1.canEditCell(_4.rowNum,_4.colNum)||_3!=_4.colNum){_2.blur()}else{if(_4.hasFocus){_4.rememberSelection();this.$94u=[_4.$53i,_4.$53j]}
_2.$402()}}}
_2.$21r=true},isc.A.$94v=function isc_GridBody__restoreFocusAfterRedraw(_1){var _2=this.grid,_3=_2.getEditForm(),_4=_3.getItem(_2.getEditorName(_2.getEditRow(),_1));if(_4!=null&&_4.isDrawn()){var _5=_2.body.getScrollLeft(),_6=_2.body.getScrollTop(),_7=_2.body.getViewportWidth(),_8=_2.body.getViewportHeight(),_9=_4.getRect(),_10=_9[0]<_5||_9[1]<_6||_9[0]+_9[2]>(_5+_7)||_9[1]+_9[3]>(_6+_8);if(!_10){_3.$41w(_4);if(this.$94u&&this.$94u[0]!=null){_4.setSelectionRange(this.$94u[0],this.$94u[1])}
delete this.$94u}}},isc.A.focusAtEnd=function isc_GridBody_focusAtEnd(_1){var _2=this.grid,_3=_2?_2.getEditForm():null;if(_3){_3.focusAtEnd(_1)}else{return this.Super("focusAtEnd",arguments)}},isc.A.$20v=function isc_GridBody__suppressEventHandling(_1){if(this.Super("$20v",arguments))return true;if(_1){var _2=_1.target;while(_2&&_2!=this){if(_2.isExpansionComponent)return true;_2=_2.parentElement}}
return false},isc.A.mouseOut=function isc_GridBody_mouseOut(_1,_2,_3,_4,_5){var _6=this.grid;if(_6.getEditRow()!=null){var _7=_6.getEditForm();var _8=isc.EH.getTarget();while(_8&&_8.parentElement){if(_8.canvasItem!=null&&_7.items.contains(_8.canvasItem)){return}
if(_8==this)break;_8=_8.parentElement}}
return this.invokeSuper(isc.GridBody,"mouseOut",_1,_2,_3,_4,_5)},isc.A.cellMove=function isc_GridBody_cellMove(_1,_2,_3){if(isc.EH.lastEvent.target==this){var _4=isc.EH.lastEvent?isc.EH.lastEvent.nativeTarget:null;if(_4&&_4.getAttribute!=null&&(_4.getAttribute("isErrorIcon")=="true"))
{_3=this.grid.getFieldNumFromLocal(_3,this);if(this.grid.$94x!=null){var _5=this.grid.$94x[0],_6=this.grid.$94x[1];if(_5!=_2||_6!=_3){this.grid.$94y()}}
if(this.grid.$94x==null){this.grid.$94z(_2,_3)}}else{if(this.grid.$94x!=null){this.grid.$94y()}}}},isc.A.cellOut=function isc_GridBody_cellOut(_1,_2,_3){if(this.grid.$94x!=null){this.grid.$94y()}},isc.A.shouldShowRollOver=function isc_GridBody_shouldShowRollOver(_1,_2,_3,_4){var _5=this.grid.hiliteRowOnFocus;if(_5==null)_5=this.grid.showRollOver;if((!this.grid.showRollOver&&(!_5||(this.$940!=_1)))||this.$90n)
{return false}
var _6=this.grid;if(_6.$94e&&!_6.editByCell&&_1==_6.$92d)return false;if(isc.EH.targetIsMasked(this))return false;return true},isc.A.updateRollOver=function isc_GridBody_updateRollOver(_1,_2,_3){var _4=this.grid;if(_4.showRollOverCanvas||_4.showRollUnderCanvas){if(!_3){var _5=!(this.lastOverRow==_1&&this.lastOverCol==_2);var _6=_4.getFieldNumFromLocal(_2,this);_4.updateRollOverCanvas(_1,_6,_5)}}
this.setRowStyle(_1,null,this.canSelectCells||this.useCellRollOvers?_2:null);var _7=(this==_4.body?_4.frozenBody:_4.body);if(_7&&!this.useCellRollOvers){_7.lastOverRow=this.lastOverRow;_7.lastOverCol=this.lastOverCol;_7.setRowStyle(_1,null,(this.useCellRollOvers?_2:null))}},isc.A.$941=function isc_GridBody__selectCellOnMouseDown(_1,_2,_3){this.grid.clearLastHilite();this.$942=_2;this.$943=_3;this.grid.$944=this;if(this.useRowSpanStyling){var _4=this.grid.selection;var _5=this.getCellStartRow(_2,_3);if(isc.EH.modifierKeyDown()){var _6=this.grid.getFieldNumFromLocal(_3,this);_4.selectOnMouseDown(this,_5,_6);return}
_4.deselectAll();var _7,_8,_9,_10=this.rowSpanSelectionMode;if(_10=="forward"||_10==null){_8=this.grid.getFieldNumFromLocal(_3,this);_9=this.getCellRowSpan(_5,_3)}else if(_10=="outerSpan"){_8=0;_7=this.grid.getFieldBody(0);_5=_7.getCellStartRow(_2,0);_9=_7.getCellRowSpan(_5,0)}else if(_10=="both"){_9=this.getCellRowSpan(_5,_3);_8=0}else{this.logWarn("unrecognized rowSpanSelectionMode: '"+_10+"'");return}
for(var _11=_8;_11<this.grid.fields.length;_11++){var _12=this.grid.getFieldBody(_11),_13=this.grid.getLocalFieldNum(_11);for(var i=_5;i<_5+_9;i++){var _15=_12.getCellStartRow(i,_13);_4.selectCell(_15,_11);i+=(_12.getCellRowSpan(_15,_13)-1)}}
return}
this.selection.selectOnMouseDown(this,_2,_3)},isc.A.selectOnMouseDown=function isc_GridBody_selectOnMouseDown(_1,_2,_3,_4,_5,_6){var _7=true,_8=this.grid.selectionAppearance,_9=(_8=="checkbox");if(_9){if((this.grid.frozenFields!=null&&this.grid.frozenBody!=this)||(this.grid.getCheckboxFieldPosition()!=_3))
{_7=false}}
if(_7){if(this.canSelectCells)this.$941(_1,_2,_3);else this.invokeSuper(isc.GridBody,"selectOnMouseDown",_1,_2,_3,_4,_5,_6)}
if(isc.screenReader){this.$90v(_2);if(this.canSelectCells){var _10=this.lastOverRow,_11=this.lastOverCol;this.lastOverRow=null;this.lastOverCol=null;this.updateRollOver(_10,_11);this.grid.$945=this;this.grid.$946(_2,_3)}}},isc.A.$93g=function isc_GridBody__getMouseDownCell(){if(this.$947!=null){var _1=this.$947;this.$947=null;return _1}
return this.Super("$93g",arguments)},isc.A.mouseUp=function isc_GridBody_mouseUp(){var _1=isc.EH.getTarget();if(this.grid&&_1!=null&&_1!=this&&this.grid.$94e){var _2=this.grid.getEditForm();while(_1!=this&&_1!=null&&_1!=_2){if(_1.canvasItem&&_2.items.contains(_1.canvasItem)){return}
_1=isc.isA.FormItem(_1)?_1.containerWidget:_1.parentElement}}
return this.Super("mouseUp",arguments)},isc.A.selectOnMouseUp=function isc_GridBody_selectOnMouseUp(_1,_2,_3,_4,_5,_6){var _7=this.grid.getCheckboxFieldPosition(),_8=this.grid.selectionAppearance;if(_8!="checkbox"||(_8=="checkbox"&&_7==_3)){this.invokeSuper(isc.GridBody,"selectOnMouseUp",_1,_2,_3,_4,_5,_6)}},isc.A.handleSelectionChanged=function isc_GridBody_handleSelectionChanged(_1,_2){if(this.grid.suppressSelectionChanged)return;var _3=this.Super("handleSelectionChanged",arguments);this.grid.handleViewStateChanged();return _3},isc.A.setSelection=function isc_GridBody_setSelection(_1){this.clearSelection();this.Super("setSelection",arguments)},isc.A.clearSelection=function isc_GridBody_clearSelection(){var _1=this.selection;this.Super("clearSelection",arguments);if(_1&&_1.isA("DependentCellSelection")){_1.destroy()}});isc.evalBoundary;isc.B.push(isc.A.$948=function isc_GridBody__setSeparateCellSelection(_1,_2){this.clearSelection();if(_1){this.selection=_1.getDependentCellSelection(this.fields.length);this.selection.$949(_2);this.observe(this.selection,"selectionChanged",function(){this.$93d(this.selection.changedCells)})}},isc.A.$92w=function isc_GridBody__updateCellStyle(_1,_2,_3,_4,_5,_6,_7,_8){this.invokeSuper(isc.GridBody,"$92w",_1,_2,_3,_4,_5,_6,_7,_8);var _9=this.grid;if(_9&&_9.getEditRow()==_2){var _10=_9.getFieldName(_9.getFieldNumFromLocal(_3,this)),_11=_9.getEditForm(),_12=_11?_11.getItem(_10):null;if(_12&&_12.gridCellStyleChanged){if(_5==null)_5=this.getCellStyle(_1,_2,_3);_12.gridCellStyleChanged(_1,_2,_3,_5)}}},isc.A.getHoverTarget=function isc_GridBody_getHoverTarget(){return this.grid},isc.A.keyPress=function isc_GridBody_keyPress(_1,_2){return this.grid.bodyKeyPress(_1,_2)},isc.A.getFocusRow=function isc_GridBody_getFocusRow(){return this.grid.getFocusRow()},isc.A.getFocusCol=function isc_GridBody_getFocusCol(){var _1=this.grid.$95a();return this.grid.getLocalFieldNum(_1)},isc.A.$x4=function isc_GridBody__restoreFocusForClickMaskHide(){this.$95b=true;this.focus();delete this.$95b},isc.A.$vm=function isc_GridBody__focusChanged(_1){var _2=this.Super("$vm",arguments);var _3=isc.EH.lastEvent;if(_3.target==this&&(_3.eventType==isc.EH.MOUSE_DOWN||_3.eventType==isc.EH.MOUSE_UP||_3.eventType==isc.EH.CLICK||_3.eventType==isc.EH.DOUBLE_CLICK))return _2;var _4,_5=this.grid;if(_1&&_5.isEditable()){if(_5.editOnFocus&&_5.isEditable()&&_5.getEditRow()==null)
{if(this.logIsInfoEnabled("gridEdit")){this.logInfo("Editing on focus: eventType: "+_3.eventType+", lastTarget "+_3.target,"gridEdit")}
if(_5.$95c){delete _5.$95c}else{var _4=_5.getFocusCell();var _6=isc.isAn.Array(_4)&&_4[0]!=null&&_4[0]>=0&&_4[1]!=null&&_4[1]>=0&&_5.canEditCell(_4[0],_4[1]);if(!_6){_4=_5.findNextEditCell(0,0,true,true)}
if(_4!=null){_5.handleEditCellEvent(_4[0],_4[1],isc.ListGrid.FOCUS)}}}}
var _7=_5.hiliteRowOnFocus;if(_7==null)_7=_5.showRollOver;if(isc.screenReader){if(_1){if(_4==null){var _8=this.getNativeFocusRow();this.$90v(_8)}}else{_5.clearLastHilite()}}else if(_7){if(_1){if(_4==null&&!this.$95b){if(_5.canSelectCells){_5.$95d(0,1,true,true,"focus")}else{_5.$372(1,true,"focus",true)}}}else{var _9=isc.EH.mouseDownTarget(),_10=isc.EH.lastEvent.eventType;if(_10!=isc.EH.MOUSE_DOWN||!this.contains(_9)){_5.clearLastHilite()}}}
return _2},isc.A.$90v=function isc_GridBody__putNativeFocusInRow(_1,_2){var _3=this.grid;if(_3&&_3.hiliteOnNativeRowFocus&&!_2)_3.$57o(_1);return this.Super("$90v",arguments)},isc.A.updateRowSelection=function isc_GridBody_updateRowSelection(_1){var _2=this.grid;if(!_2)return;if(_2.showSelectionCanvas||_2.showSelectionUnderCanvas)_2.updateSelectionCanvas();if(_2.$93s){return}
this.invokeSuper(isc.GridBody,"updateRowSelection",_1);if(isc.Canvas.ariaEnabled()&&_2.selection){this.setRowAriaState(_1,"selected",_2.selection.isSelected(_2.getRecord(_1),true))}
if(_2.getCurrentCheckboxField()!=null){var _3=_2.getCheckboxFieldPosition();if(_2){_2.refreshCell(_1,_3);_2.updateCheckboxHeaderState()}}else if(_2.getTreeFieldNum&&_2.selectionAppearance=="checkbox"){var _4=_2.getTreeFieldNum();_2.refreshCell(_1,_4)}},isc.A.markForRowSelectionRefresh=function isc_GridBody_markForRowSelectionRefresh(){var _1=this.grid;if(!_1)return;if(_1.showSelectionCanvas||_1.showSelectionUnderCanvas){_1.fireOnPause("updateSelectionCanvasFromRowRefresh","updateSelectionCanvas")}
if(_1.getCurrentCheckboxField()!=null){_1.fireOnPause("updateCheckboxHeaderFromRowRefresh","updateCheckboxHeaderState")}
if(_1.$93s){return}
this.invokeSuper(isc.GridBody,"markForRowSelectionRefresh")},isc.A.$93d=function isc_GridBody__cellSelectionChanged(_1,_2,_3,_4){var _5=this.grid;if(_5!=null&&(_5.showSelectionCanvas||_5.showSelectionUnderCanvas))
{_5.updateSelectionCanvas()}
return this.invokeSuper(isc.GridBody,"$93d",_1,_2,_3,_4)},isc.A.destroy=function isc_GridBody_destroy(){var _1=this.grid;if(this==_1.$944)_1.$944=null;if(this==_1.$945)_1.$945=null;this.Super("destroy",arguments)},isc.A.shouldAnimateEmbeddedComponent=function isc_GridBody_shouldAnimateEmbeddedComponent(_1){var _2=this.grid;if(_1==_2.selectionCanvas)return _2.animateSelection;if(_1==_2.selectionUnderCanvas)return _2.animateSelectionUnder;if(_1==_2.rollOverCanvas)return _2.animateRollOver;if(_1==_2.rollUnderCanvas)return _2.animateRollUnder;return false},isc.A.$92m=function isc_GridBody__handleEmbeddedComponentResize(_1,_2,_3){this.Super("$92m",arguments);this.grid.$92m(this,_1,_2,_3)},isc.A.draw=function isc_GridBody_draw(_1,_2,_3,_4){var _5=this.grid;if(_5.getEditRow()!=null){var _6=_5.getEditRow(),_7=_5.getRecord(_6),_8=_5.getEditCol(),_9=_5.$20w,_10=_5.getEditRowItems(_7,_6,_8,_5.editByCell),_11=_9.getItems();var _12=_11==null||_10.length!=_11.length;if(!_12){var _13=_11.getProperty("name");for(var i=0;i<_10.length;i++){if(!_13.contains(_10[i].name)){_12=true;break}}}
if(_12){this.logDebug("calling setItems on form from body draw","gridEdit");_9.setItems(_10)}else{this.logDebug("Skipping setItems() on form from body draw","gridEdit")}
_9.$21r=true}
delete this.$94r;this.invokeSuper(isc.GridBody,"draw",_1,_2,_3,_4);if(_5.$20w){_5.$94t(null,null,this)}
_5.updateEditRow(_5.getEditRow());if(_5.$910!=null){var _15=isc.isAn.Array(_5.$910)?_5.$910[0]:_5.$910,_16=isc.isAn.Array(_5.$910)?_5.$910[1]||0:0,_17=isc.isAn.Array(_5.$910)?_5.$910[2]:null,_18=isc.isAn.Array(_5.$910)?_5.$910[3]:null;_5.scrollToCell(_15,_16,_17,_18);delete _5.$910}
this.grid.updateRecordComponents();if(!this.$95e)this.grid.updateExpansionComponents()},isc.A.layoutChildren=function isc_GridBody_layoutChildren(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"layoutChildren",_1,_2,_3,_4);if(!this.isDrawn()||(this.grid.frozenFields&&!this.grid.bodyLayout.isDrawn())){return}
var _5=isc.startsWith(_1,"scrolling state changed"),_6=(_1=="introducing scrolling");if(_5||_6){if(this.isRTL()&&!this.$90g){this.$92s()}}
if(_5){if(this.$892==null){this.grid.layoutChildren("body scroll changed");delete this.$95f}else{this.$95f=true}}},isc.A.$90u=function isc_GridBody__rowAnimationComplete(){this.Super("$90u",arguments);if(this.$95f){this.grid.layoutChildren("body scroll changed during animation");delete this.$95f}},isc.A.handleMoved=function isc_GridBody_handleMoved(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"handleMoved",_1,_2,_3,_4);this.$95g()},isc.A.handleParentMoved=function isc_GridBody_handleParentMoved(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"handleParentMoved",_1,_2,_3,_4);this.$95g()},isc.A.$95g=function isc_GridBody__notifyEditItemsOnMoved(){var _1=this.grid;if(_1.$94e){var _2=_1.$20w,_3=_2.getItems(),_4=[];for(var i=0;i<_3.length;i++){if(_3[i].isDrawn())_4.add(_3[i])}
_2.itemsMoved(_4)}},isc.A.setVisibility=function isc_GridBody_setVisibility(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"setVisibility",_1,_2,_3,_4);var _5=this.grid;if(_5.$94e)_5.$20w.itemsVisibilityChanged();if(_5.fieldPickerWindow&&_1=="hidden")_5.fieldPickerWindow.hide()},isc.A.parentVisibilityChanged=function isc_GridBody_parentVisibilityChanged(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"parentVisibilityChanged",_1,_2,_3,_4);var _5=this.grid;if(_5.$94e)_5.$20w.itemsVisibilityChanged()},isc.A.clear=function isc_GridBody_clear(){var _1=this.grid;_1.$94l();delete this.$94r;this.Super("clear",arguments);if(_1.$94e){_1.$94t(null,null,this);_1.$20w.itemsVisibilityChanged()}},isc.A.zIndexChanged=function isc_GridBody_zIndexChanged(){this.Super("zIndexChanged",arguments);var _1=this.grid;if(_1&&_1.$94e)_1.$20w.itemsZIndexChanged()},isc.A.parentZIndexChanged=function isc_GridBody_parentZIndexChanged(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"zIndexChanged",_1,_2,_3,_4);var _5=this.grid;if(_5.$94e)_5.$20w.itemsZIndexChanged()},isc.A.redrawFormItem=function isc_GridBody_redrawFormItem(_1,_2){var _3=this.grid;if(_3&&(_1.form==_3.$20w)){var _4=_3.getEditRow(),_5=_3.getColNum(_1.getFieldName());if(_3.getEditCol()==_5){_3.storeUpdatedEditorValue()}
if(_4>=0&&_5>=0)_3.refreshCell(_4,_5,false,true)}else
return this.markForRedraw("Form Item Redraw "+(_2?_2:isc.emptyString))},isc.A.sizeFormItem=function isc_GridBody_sizeFormItem(_1){var _2=this.grid;var _3=_1.width,_4;if(isc.isA.String(_3)){var _5=_2.getEditFormItemFieldWidths(_1.record),_6=_5[_2.getFieldNum(_1.getFieldName())];if(_3=="*"){_4=_6}else if(_3.charAt(_3.length-1)=="%"){var _7=parseInt(_3);if(isc.isA.Number(_7)){_4=Math.floor(_6*(_7/100))}}}
var _8=_1.height,_9;if(isc.isA.String(_8)){var _10=_2.cellHeight;if(_3=="*"){_9=_10}else if(_8.charAt(_8.length-1)=="%"){var _11=parseInt(_8);if(isc.isA.Number(_11)){_9=Math.floor(_10*(_11/100))}}}
if(_9!=null||_4!=null){_1.$37h=[_4==null?_1.width:_4,_9==null?_1.height:_9]}},isc.A.startRowAnimation=function isc_GridBody_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9){this.finishRowAnimation();var _10=(_9&&(this.$95h!=null)),_11=this.grid;if(_10){var _12=_11.$95i;_11.$95i=true;_11.data.openFolder(this.$95h);_11.$95i=_12}
this.Super("startRowAnimation",arguments);if(_10){var _12=_11.$95i;_11.$95i=true;_11.data.closeFolder(this.$95h);_11.$95i=_12}
delete this.$95h});isc.B._maxIndex=isc.C+91;isc.A=isc.ListGrid;isc.A.CORNER="corner";isc.A.FIELD="field";isc.A.BEFORE="before";isc.A.AFTER="after";isc.A.OVER="over";isc.A.BETWEEN="between";isc.A.BODY="body";isc.A.CLICK_OUTSIDE="click_outside";isc.A.CLICK="click";isc.A.DOUBLE_CLICK="doubleClick";isc.A.ENTER_KEYPRESS="enter";isc.A.ESCAPE_KEYPRESS="escape";isc.A.UP_ARROW_KEYPRESS="arrow_up";isc.A.DOWN_ARROW_KEYPRESS="arrow_down";isc.A.LEFT_ARROW_KEYPRESS="arrow_left";isc.A.RIGHT_ARROW_KEYPRESS="arrow_right";isc.A.TAB_KEYPRESS="tab";isc.A.SHIFT_TAB_KEYPRESS="shift_tab";isc.A.EDIT_FIELD_CHANGE="field_change";isc.A.EDIT_ROW_CHANGE="row_change";isc.A.PROGRAMMATIC="programmatic";isc.A.FOCUS="focus";isc.A.$95j=["selection","selectionType","canSelectCells","canDragSelect","canSelectOnRightMouse","recordCanSelectProperty","useNativeTouchScrolling","canDrag","canAcceptDrop","canDrop","autoFit","wrapCells","cellSpacing","cellPadding","cellHeight","enforceVClipping","autoFitData","autoFitMaxRecords","autoFitMaxWidth","autoFitMaxColumns","autoFitMaxHeight","autoFitExtraRecords","allowRowSpanning","showAllColumns","drawAllMaxCells","drawAheadRatio","quickDrawAheadRatio","instantScrollTrackRedraw","scrollRedrawDelay","scrollWheelRedrawDelay","touchScrollRedrawDelay","printMaxRows","animateRowsMaxTime","fastCellUpdates","showRollOver","useCellRollOvers","canHover","showHover","showClippedValuesOnHover","hoverDelay","hoverWidth","hoverHeight","hoverAlign","hoverVAlign","hoverStyle","hoverOpacity","hoverMoveWithMouse","hoverByCell","keepHoverActive","cellHoverOutset","showEmptyMessage","emptyMessageStyle","emptyMessageTableStyle","showOfflineMessage","offlineMessageStyle","useCellRecords","singleCellValueProperty","isSeparatorProperty","accessKey","canFocus","_useNativeTabIndex","tableStyle","baseStyle","recordCustomStyleProperty","showSelectedStyle","useRowSpanStyling","rowSpanSelectionMode","showFocusOutline"];isc.A.$95k=["getCellStyleName","getCellStyleIndex","$928","getRowTop","getRowPageTop","getRowSize","getDrawnRowHeight","getCellStartRow","getCellRowSpan","getVisibleRows","getDrawnRows"];isc.A.$95l=["getTotalRows","isEmpty","cellIsEnabled","willAcceptDrop","scrolled","getTableElementId","getRowElementId","getCellElementId","shouldFixRowHeight","getEmptyMessage","getCanHover","stopHover","updateEmbeddedComponentZIndex"];isc.A.$95m=null;isc.A=isc.ListGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.makeBodyMethods=function isc_c_ListGrid_makeBodyMethods(_1){var _2=this.$dx;if(_2==null){_2=this.$dx=[,"this.grid.$95n = this;var returnVal = this.grid.",,"(",,");this.grid.$95n=null;return returnVal;"]}
var _3={};for(var i=0;i<_1.length;i++){var _5=_1[i],_6=isc.GridRenderer.getArgString(_5),_7=(_5=="cellIsEnabled");_2[0]="var methodName = '"+_5+"';\n";if(isc.contains(_6,"colNum")){_2[0]+="if (this.fields[colNum]) colNum = this.fields[colNum].masterIndex;"}else if(isc.isAn.emptyString(_6)){_6="body";_2[0]+="body = this;"}
if(_7){var _8="if (record === undefined) record = this.grid.getCellRecord("+_6+");";_2[0]+=_8}
_2[2]=_5;_2[4]=(_7?"record,"+_6:_6);var _9=_2.join(isc.emptyString);var _10=_3[_5]=isc.$bh((_7?_6+",record":_6),_9);_10.$93b=true}
return _3},isc.A.classInit=function isc_c_ListGrid_classInit(){this.addMethods(isc.ClassFactory.makePassthroughMethods(this.$95k,"body"));var _1={};var _2=isc.getKeys(isc.GridRenderer.$93z),_1=isc.ListGrid.makeBodyMethods(_2);isc.addProperties(_1,isc.ListGrid.makeBodyMethods(this.$95l));this.$95o=_1;var _3={},_4=[,"var $95n = this.$95n || this.body; if ($95n == null) {return;}if($95n.__orig_",,")return $95n.__orig_",,"(",,")"],_5="__orig_",_6=isc.GridRenderer.getPrototype();for(var i=0;i<_2.length;i++){var _8=_2[i],_9=isc.GridRenderer.getArgString(_8);if(isc.ListGrid.getInstanceProperty(_8)==null){if(isc.contains(_9,"colNum")){_4[0]="if (colNum != null && colNum >= 0) colNum = this.getLocalFieldNum(colNum);"}else{_4[0]=null}
_4[2]=_4[4]=_8;_4[6]=_9
_3[_8]=isc.$bh(_9,_4.join(isc.emptyString))}
_6[_5+_8]=_6[_8]}
this.$95p=_3;this.addMethods(_3)},isc.A.$95q=function isc_c_ListGrid__getCoordinateList(_1,_2){var _3=[];for(var _4 in _1){if(_1.hasOwnProperty(_4)){_3.add(parseInt(_4))}}
if(_2){_3.sort(function(_5,_6){return _5-_6})}
return _3});isc.B._maxIndex=isc.C+3;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.styleName="listGrid";isc.A.useCellRecords=false;isc.A.recordEnabledProperty="enabled";isc.A.canExpandRecordProperty="canExpand";isc.A.recordCanRemoveProperty="_canRemove";isc.A.animateFolders=true;isc.A.animateFolderTime=100;isc.A.animateFolderSpeed=3000;isc.A.animateRowsMaxTime=1000;isc.A.autoFetchDisplayMap=true;isc.A.warnOnUnmappedValueFieldChange=true;isc.A.showDetailFields=true;isc.A.groupStartOpen="first";isc.A.canCollapseGroup=true;isc.A.collapseGroupOnRowClick=true;isc.A.showGroupTitleColumn=true;isc.A.groupTitleColumnDefaults={canEdit:false,canFilter:false,canHide:false,canReorder:false,showDefaultContextMenu:false,autoFreeze:true,sortNormalizer:function(_1,_2,_3){return _1.groupTitle},autoFitWidth:true,autoFitWidthApproach:"value",title:"&nbsp;"};isc.A.groupTitleColumnName="groupTitle";isc.A.showGroupSummaryInHeader=false;isc.A.showCollapsedGroupSummary=false;isc.A.groupNodeStyle="groupNode";isc.A.groupNodeBaseStyle=null;isc.A.groupIcon="[SKINIMG]/TreeGrid/opener.gif";isc.A.groupIconSize=16;isc.A.groupIndentSize=20;isc.A.groupLeadingIndent=10;isc.A.canGroupBy=true;isc.A.groupByMaxRecords=1000;isc.A.groupByAsyncThreshold=50;isc.A.asynchGroupingPrompt="${loadingImage}&nbsp;Grouping data...";isc.A.nullGroupTitle="-none-";isc.A.valueIconSize=16;isc.A.valueIconLeftPadding=2;isc.A.valueIconRightPadding=2;isc.A.imageSize=16;isc.A.headerSpanVAlign="center";isc.A.showTreeColumnPicker=true;isc.A.reverseRTLAlign=true;isc.A.fetchDelay=300;isc.A.uniqueMatch=true;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.backgroundColor="white";isc.A.minHeight=50;isc.A.defaultWidth=200;isc.A.drawAllMaxCells=250;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1.0;isc.A.scrollRedrawDelay=75;isc.A.scrollWheelRedrawDelay=250;isc.A.dataFetchDelay=300;isc.A.body=null;isc.A.bodyConstructor="GridBody";isc.A.bodyOverflow=isc.Canvas.AUTO;isc.A.bodyBackgroundColor="white";isc.A.allowMismatchedHeaderBodyBorder=true;isc.A.emptyCellValue="&nbsp;";isc.A.cellHeight=20;isc.A.normalCellHeight=20;isc.A.fixedRecordHeights=true;isc.A.fixedFieldWidths=true;isc.A.autoFitMaxRecords=50;isc.A.autoFitMaxColumns=50;isc.A.canAutoFitFields=true;isc.A.headerAutoFitEvent="doubleClick";isc.A.autoSizeHeaderSpans=false;isc.A.autoFitFieldsFillViewport=true;isc.A.autoFitWidthApproach="value";isc.A.includeGridSummaryInAutoFitWidth=true;isc.A.autoFitIconFields="title";isc.A.leaveScrollbarGap=true;isc.A.resizeFieldsForScrollbar=true;isc.A.showClippedValuesOnHover=null;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.timeFormatter="toShortPaddedTime";isc.A.$95r=["<a href='",,"' target='",,"' onclick='if(window.",,") return ",,".$599(event,",,",",,");'>",,"</a>"];isc.A.$95s="\\'";isc.A.$95t="_blank";isc.A.linkTextProperty="linkText";isc.A.fastCellUpdates=isc.Browser.isIE&&!isc.Browser.isIE9;isc.A.normalBaseStyle="cell";isc.A.tallBaseStyle="cell";isc.A.editFailedBaseStyle=null;isc.A.editFailedCSSText="color:red;border:1px solid red;";isc.A.editPendingBaseStyle=null;isc.A.editPendingCSSText="color:#0066CC;";isc.A.recordCustomStyleProperty="customStyle";isc.A.recordBaseStyleProperty="_baseStyle";isc.A.shrinkForFreeze=false;isc.A.alternateFieldFrequency=1;isc.A.alternateRecordFrequency=1;isc.A.recordCSSTextProperty="cssText";isc.A.showHilitesInGroupSummary=true;isc.A.hiliteReplaceValueFieldTitle="Replace value with";isc.A.hiliteHTMLAfterFormat=true;isc.A.showSelectedStyle=true;isc.A.generateClickOnSpace=true;isc.A.generateDoubleClickOnEnter=true;isc.A.arrowKeyAction=null;isc.A.recordComponentPoolingMode="viewport";isc.A.poolComponentsPerColumn=true;isc.A.animateRollOver=false;isc.A.animateRollUnder=false;isc.A.backgroundComponentDefaults={snapTo:"TL",autoDraw:false,opacity:"50%"};isc.A.showHover=true;isc.A.showClippedHeaderTitlesOnHover=true;isc.A.cellHoverOutset=5;isc.A.hoverStyle="gridHover";isc.A.selectionAppearance="rowStyle";isc.A.selectionType=null;isc.A.reselectOnUpdate=true;isc.A.reselectOnUpdateNotifications="selectionChanged";isc.A.recordCanSelectProperty="canSelect";isc.A.navigateOnTab=true;isc.A.tabKeyAction="select";isc.A.useCopyPasteShortcuts=true;isc.A.copyEmptyCells=true;isc.A.animateSelection=false;isc.A.animateSelectionUnder=false;isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to show.";isc.A.emptyMessageStyle="emptyMessage";isc.A.filterButtonPrompt="Filter";isc.A.loadingDataMessage="${loadingImage}&nbsp;Loading data...";isc.A.loadingDataMessageStyle="loadingDataMessage";isc.A.loadingMessage="&nbsp;";isc.A.singleCellValueProperty="singleCellValue";isc.A.isSeparatorProperty="isSeparator";isc.A.filterEditorDefaults={shouldPrint:false};isc.A.filterEditorHeight=22;isc.A.autoFetchTextMatchStyle="substring";isc.A.canEditNew=false;isc.A.recordEditProperty="_canEdit";isc.A.editValuesTestedProperty="$95u";isc.A.autoValidate=true;isc.A.warnOnRemoval=false;isc.A.warnOnRemovalMessage="Are you sure you want to delete this record?";isc.A.recordRemovedProperty="$95v";isc.A.removedCSSText="text-decoration:line-through;";isc.A.removeIcon="[SKIN]/actions/remove.png";isc.A.unremoveIcon="[SKIN]/actions/undo.png";isc.A.removeIconSize=16;isc.A.animateRemoveRecord=true;isc.A.animateRemoveTime=100;isc.A.animateRemoveSpeed=200;isc.A.removeFieldTitle=isc.nbsp;isc.A.removeFieldDefaults={type:"icon",width:24,showDefaultContextMenu:false,canEdit:false,canHide:false,canSort:false,canGroupBy:false,canFilter:false,autoFitWidth:true,showTitle:false,canExport:false,ignoreKeyboardClicks:true,showGridSummary:false,showGroupSummary:false,summaryValue:"&nbsp;",treeField:false};isc.A.autoSaveEdits=true;isc.A.showErrorIcons=true;isc.A.errorIconHeight=16;isc.A.errorIconWidth=16;isc.A.errorIconSrc="[SKIN]/validation_error_icon.png";isc.A.cancelEditingConfirmationMessage="Cancelling this edit will discard unsaved changes for this record. Continue?";isc.A.confirmDiscardEdits=true;isc.A.autoConfirmSaveEdits=false;isc.A.confirmDiscardEditsMessage="This action will discard all unsaved changes for this list.";isc.A.discardEditsSaveButtonTitle="Save";isc.A.newRecordRowMessage="-- Add New Row --";isc.A.enterKeyEditAction="done";isc.A.escapeKeyEditAction="cancel";isc.A.editEvent=isc.EH.DOUBLE_CLICK;isc.A.editOnF2Keypress=true;isc.A.selectOnEdit=true;isc.A.enumCriteriaAsInitialValues=true;isc.A.autoSelectEditors=true;isc.A.editFormDefaults={canSelectText:true,autoDraw:false,errorOrientation:"left",showErrorText:false,showErrorStyle:false,itemKeyPress:function(_1,_2,_3){return this.grid.editorKeyPress(_1,_2,_3)}};isc.A.longTextEditorThreshold=255;isc.A.longTextEditorType="PopUpTextAreaItem";isc.A.headerHeight=22;isc.A.minFieldWidth=15;isc.A.showHeader=true;isc.A.headerBackgroundColor="#CCCCCC";isc.A.headerDefaults={instantRelayout:true,enforcePolicy:false,itemClick:function(_1,_2){this.Super("itemClick",arguments);this.grid.$95w(_2,this)},itemDoubleClick:function(_1,_2){this.Super("itemDoubleClick",arguments);this.grid.$95x(_2,this)},showContextMenu:function(){return this.grid.headerBarContextClick(this)},backgroundRepeat:isc.Canvas.NO_REPEAT,shouldPrint:false};isc.A.headerButtonDefaults={clipTitle:true,getCurrentCursor:function(){var _1=this.parentElement?this.parentElement.grid:null;var _2=isc.Canvas.DEFAULT;if(_1&&this.masterIndex!=null){var _3=_1.getField(this.masterIndex),_4=_1.$95y(_3)!=false;if(_4)_2=isc.Canvas.HAND}else{if(this.isSorterButton){if(!_1&&isc.isA.ListGrid(this.parentElement))_1=this.parentElement;if(_1){var _4=_1.$95y(_1.$95z())!=false;if(_4)_2=isc.Canvas.HAND}}else{_2=this.getClass().getPrototype().cursor}}
this.cursor=_2;return this.Super("getCurrentCursor",arguments)},dragScrollType:"parentsOnly",minWidth:20,hoverDelay:500};isc.A.clipHeaderTitles=(!isc.Browser.isIE||(isc.Browser.version>6&&isc.Browser.isStrict)||isc.Browser.version>=10);isc.A.sorterConstructor=isc.Button;isc.A.sorterButtonTitle="corner menu";isc.A.sorterDefaults={_redrawWithParent:false,getTitle:function(){return this.creator.getSortArrowImage()},click:function(){return this.creator.$950()},showContextMenu:function(){return this.creator.$951()},isSorterButton:true,align:"center"};isc.A.canSort=true;isc.A.canUnsort=false;isc.A.invalidateCacheOnUnsort=false;isc.A.selectHeaderOnSort=true;isc.A.sortDirection="ascending";isc.A.canPickFields=true;isc.A.canPickOmittedFields=false;isc.A.openRecordEditorContextMenuItemTitle="Edit";isc.A.dismissEmbeddedComponentContextMenuItemTitle="Dismiss";isc.A.deleteRecordContextMenuItemTitle="Delete";isc.A.canOpenRecordDetailGrid=true;isc.A.canOpenRecordEditor=true;isc.A.recordEditorSaveButtonTitle="Save";isc.A.recordEditorCancelButtonTitle="Cancel";isc.A.leaveHeaderMenuButtonSpace=null;isc.A.headerMenuButtonIcon="[SKIN]/ListGrid/headerMenuButton_icon.gif";isc.A.headerMenuButtonIconWidth=7;isc.A.headerMenuButtonIconHeight=7;isc.A.headerMenuButtonWidth=16;isc.A.headerMenuButtonHeight="100%";isc.A.canDragRecordsOut=false;isc.A.canReorderFields=true;isc.A.canResizeFields=true;isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragResizeAppearance=isc.EH.OUTLINE;isc.A.dragTrackerMode="title";isc.A.resizeFieldsInRealTime=((isc.Browser.isIE&&isc.Browser.isWin)||(isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20080529)||(isc.Browser.isSafari&&isc.Browser.safariVersion>=500));isc.A.embeddedComponentIndent=25;isc.A.nestedGridDefaults={height:150};isc.A.skinImgDir="images/ListGrid/";isc.A.sortAscendingImage={src:"[SKIN]sort_ascending.gif",width:7,height:7};isc.A.sortDescendingImage={src:"[SKIN]sort_descending.gif",width:7,height:7};isc.A.trackerImage={src:"[SKIN]tracker.gif",width:16,height:16};isc.A.booleanTrueImage=null;isc.A.booleanFalseImage=null;isc.A.booleanPartialImage=null;isc.A.printBooleanTrueImage=null;isc.A.printBooleanFalseImage=null;isc.A.printBooleanPartialImage=null;isc.A.booleanImageWidth=16;isc.A.booleanImageHeight=16;isc.A.mozBodyOutlineColor="white";isc.A.mozBodyNoHeaderOutlineColor="red";isc.A.rowNumberStyle="specialCol";isc.A.applyRowNumberStyle=true;isc.A.rowNumberStart=1;isc.A.rowNumberFieldDefaults={name:"$952",excludeFromState:true,canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,showAlternateStyle:false,$953:true,showDefaultContextMenu:false,keyboardFiresRecordClick:false,showGroupSummary:false,showGridSummary:false,summaryValue:"&nbsp;",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.isGrouped){if(_2==null||_2.$17b)return"&nbsp;";var _6=_5.getGroupedRecordIndex(_2);if(_6==-1)return null;return(_5.rowNumberStart+_6)}else{return this.rowNumberStart+_3}},autoFreeze:true,treeField:false};isc.A.$954=30;isc.A.expansionComponentPoolingMode="destroy";isc.A.destroyCustomExpansionComponents=false;isc.A.canExpandMultipleRecords=true;isc.A.maxExpandedRecordsPrompt="This grid is limited to ${count} simultaneously expanded records.  Please collapse some expanded records and retry.";isc.A.expansionFieldDefaults={name:"$955",canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,$956:true,showDefaultContextMenu:false,keyboardFiresRecordClick:false,cellAlign:"center",summaryValue:"&nbsp;",recordClick:function(_1,_2,_3,_4,_5,_6,_7){if(!_1.canExpandRecords||!_4.$956)return;if(!_1.$957(_2,_3))return;if(_1.isExpanded(_2))_1.collapseRecord(_2);else _1.expandRecord(_2)},formatCellValue:function(_1,_2,_3,_4,_5){_2=_5.getCellRecord(_3,_4);if(_2==null||_2.$17b)return null;if(!_5.$957(_2,_3))return null;var _6=_5.isExpanded(_2)?_5.expansionFieldTrueImage:_5.expansionFieldFalseImage
if(_5.expansionFieldImageShowRTL&&_5.isRTL()){_6=isc.Img.urlForState(_6,null,null,null,null,"rtl")}
return _5.getValueIconHTML(_6,this)},autoFreeze:true,treeField:false};isc.A.expansionFieldTrueImage="[SKINIMG]/ListGrid/group_opened.gif";isc.A.expansionFieldFalseImage="[SKINIMG]/ListGrid/group_opening.gif";isc.A.expansionFieldImageShowRTL=false;isc.A.expansionFieldExtraWidth=16;isc.A.$958=0;isc.A.$959="_expanded_";isc.A.$96a="_hasExpansionComponent_";isc.A.$96b="_embeddedComponents_";isc.A.$96c="_recordComponents_";isc.A.expansionDetailFieldDefaults={_constructor:isc.HTMLFlow,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionDetailsDefaults={_constructor:isc.DetailViewer,autoDraw:false,width:"100%"};isc.A.expansionRelatedDefaults={_constructor:isc.ListGrid,autoDraw:false,width:"100%",autoFitData:"vertical",autoFitMaxRecords:4};isc.A.expansionEditorDefaults={_constructor:"DynamicForm",autoDraw:false,numCols:4,colWidths:["*","*","*","*"],width:"100%",saveOperationType:"update"};isc.A.expansionEditorSaveDialogPrompt="You have unsaved changes - do you want to save them now?";isc.A.expansionEditorCollapseOnSave=true;isc.A.showExpansionEditorSaveButton=true;isc.A.expansionEditorSaveButtonDefaults={_constructor:"IButton",autoFit:true,layoutAlign:"center",click:function(){if(!this.grid||!this.form)return;var _1=this.grid,_2=(this.record&&_1.$91v(this.record))?_1.$91w(this.record).find("isExpansionComponent",true):null;this.grid.saveAndCollapseRecord(this.form,_2,this.record,false,this.grid.expansionEditorCollapseOnSave)}};isc.A.expansionEditorSaveButtonTitle="Save";isc.A.expansionDetailRelatedDefaults={_constructor:isc.HLayout,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionLayoutDefaults={_constructor:isc.VLayout,autoDraw:false,width:"100%",height:10,overflow:"visible"};isc.A.recordDetailDSProperty="detailDS";isc.A.recordDropAppearance=isc.ListGrid.BETWEEN;isc.B.push(isc.A.shouldAnimateFolder=function isc_ListGrid_shouldAnimateFolder(_1){if(!this.animateFolders||!this.isDrawn())return false;if(this.autoFitData=="vertical"||this.autoFitData=="both")return false;var _2;if(this.data.isFolder(_1)){_2=this.data.getOpenList(_1,null,null,null,null,null,null,true)}
if(_2==null||_2.length<=1)return false;return(_2.length<=this.getAnimateFolderMaxRows())},isc.A.getAnimateFolderMaxRows=function isc_ListGrid_getAnimateFolderMaxRows(){var _1=this.animateFolderMaxRows;if(_1==null){var _2=this.body?this.body.$89m():[0,0];_1=Math.min(75,(_2[1]-_2[0])*3)}
return _1},isc.A.getGroupTitleField=function isc_ListGrid_getGroupTitleField(){return this.groupTitleField},isc.A.showingGroupTitleColumn=function isc_ListGrid_showingGroupTitleColumn(){return(this.isGrouped&&this.showGroupSummary&&this.showGroupSummaryInHeader&&this.showGroupTitleColumn&&this.getGroupTitleField()==null)},isc.A.getGroupTitleColumn=function isc_ListGrid_getGroupTitleColumn(){var _1=this;var _2=isc.addProperties({$96d:true,getAutoFreezePosition:function(){return _1.getGroupTitleColumnPosition()}},this.groupTitleColumnDefaults,this.groupTitleColumnProperties);if(_2.name==null){_2.name=this.groupTitleColumnName}
return _2},isc.A.getGroupTitleColumnPosition=function isc_ListGrid_getGroupTitleColumnPosition(){if(!this.showingGroupTitleColumn())return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;if(this.shouldShowCheckboxField())_1++;if(this.shouldShowExpansionField())_1++;return _1},isc.A.singleCellGroupHeaders=function isc_ListGrid_singleCellGroupHeaders(){return this.$96e(this.showGroupSummary,this.showGroupSummaryInHeader)},isc.A.$96e=function isc_ListGrid__singleCellGroupHeaders(_1,_2){if(this.getGroupTitleField()!=null)return false;if(_1&&_2)return false;return true},isc.A.getBreadth=function isc_ListGrid_getBreadth(){return this.getInnerWidth()},isc.A.$96f=function isc_ListGrid__formatDateCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.Date(_1)){if(_3.$51j(_2)){var _7=_3.$51k(_2);var _8=isc.SimpleType.inheritsFrom(_2.type,"time");return isc.Time.toTime(_1,_7,_8)}
var _9=_2&&isc.SimpleType.inheritsFrom(_2.type,"datetime"),_10=!_9&&isc.SimpleType.inheritsFrom(_2.type,"date"),_7=_3.$51l(_2);if(_9)return _1.toShortDateTime(_7,true);return _1.toShortDate(_7,!_10)}
return _1},isc.A.$51j=function isc_ListGrid__formatAsTime(_1){if(_1==null)return false;if(_1.timeFormatter!=null&&_1.dateFormatter==null)return true;if(_1.dateFormatter!=null&&_1.timeFormatter==null)return false;return isc.SimpleType.inheritsFrom(_1.type,"time")},isc.A.$51l=function isc_ListGrid__getDateFormatter(_1){if(_1==null)return this.dateFormatter;if(_1.dateFormatter!=null)return _1.dateFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"date")){return _1.displayFormat}
if(this.datetimeFormatter!=null&&isc.SimpleType.inheritsFrom(_1.type,"datetime")){return this.datetimeFormatter}
return this.dateFormatter},isc.A.$96g=function isc_ListGrid__getDateInputFormat(_1){var _2;if(_1)_2=_1.inputFormat
if(!_2)_2=this.dateInputFormat;return _2},isc.A.$96h=function isc_ListGrid__formatNumberCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.Number(_1)){if(isc.SimpleType.inheritsFrom(_2.type,"float")&&(_2.decimalPrecision!=null||_2.decimalPad!=null))
{return isc.Canvas.getFloatValueAsString(_1,_2.decimalPrecision,_2.decimalPad)}else if(_2.precision!=null){return isc.Canvas.getNumberValueAsString(_1,_2.precision,_2.type)}else{var _7=(_2.numberFormatter||_2.formatter||_3.numberFormatter);return _1.toFormattedString(_7)}}
return _1},isc.A.$51k=function isc_ListGrid__getTimeFormatter(_1){if(_1!=null){if(_1.timeFormatter!=null)return _1.timeFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"time")){return _1.displayFormat}}
return this.timeFormatter},isc.A.$96i=function isc_ListGrid__formatTimeCellValue(_1,_2,_3,_4,_5,_6){var _7=_1;if(isc.isA.String(_7)){_7=isc.Time.parseInput(_7,true)}
if(isc.isA.Date(_7)){if(!_3.$51j(_2)){return _7.toShortDate(_3.$51l(_2),true)}
var _8=_3.$51k(_2);return isc.Time.toTime(_7,_8,true)}
return _1},isc.A.$96j=function isc_ListGrid__formatBinaryCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.String(_1))return _1;if(_4==null)return null;var _7=_2.name,_8=_3.getDataSource(),_9=(_8?_8.getFilenameField(_7):null)||_7+"_filename",_10=_4[_9],_1;if(_2.type=="imageFile"&&_2.showFileInline==true){var _11=_7+"$63h";if(!_4[_11]){var _12=isc.Canvas.getFieldImageDimensions(_2,_4),_13=_3.getDataSource().getFileURL(_4,_2.name);_12.width=_12.width||_3.imageSize;_12.height=_12.height||_3.imageSize;_1=_4[_11]=isc.Canvas.imgHTML(_13,_12.width,_12.height,null,null,isc.Canvas.$13l)}else
_1=_4[_11]}else{if(_2.showFileInline==true){this.logWarn("$96j(): Unsupported field-type for showFileInline: "+_2.type)}
if(!_2.filenameSuppressed&&(_10==null||isc.isAn.emptyString(_10))){return this.emptyCellValue}
var _14="'"+_3.getID()+".view",_15="'"+_3.getID()+".download",_16="";if(_2&&_2.name){_16="Cell("+_5+", \""+_2.name+"\")'"}else{_16="Row("+_5+")'"}
var _17=isc.Canvas.imgHTML({src:"[SKIN]actions/view.png",width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick="+_14+_16});var _18=isc.Canvas.imgHTML({src:"[SKIN]actions/download.png",width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick="+_15+_16});_1=_17+"&nbsp;"+_18+(_10?"&nbsp;"+_10:"")}
return _1},isc.A.$96k=function isc_ListGrid__formatLinkCellValue(_1,_2,_3,_4,_5,_6){if(_1==null||isc.is.emptyString(_1))return _1;var _7=_2.target?_2.target.replaceAll(_3.$1t,_3.$95s):_3.$95t;var _8=_2.linkTextProperty?_2.linkTextProperty:_3.linkTextProperty;var _9=(_4&&_4[_8])?_4[_8]:_2.linkText||_1;var _10=_1;if(_2.linkURLPrefix)_10=_2.linkURLPrefix+_10;if(_2.linkURLSuffix)_10=_10+_2.linkURLSuffix;_10=_10.replaceAll(_3.$1t,_3.$95s);if(_7=="javascript"){_10="javascript:void"}
var _11=_3.$95r;_11[1]=_10;_11[3]=_7;var _12=_3.getID();_11[5]=_12;_11[7]=_12;_11[9]=_5;_11[11]=_6;_11[13]=_9;return _11.join(isc.emptyString)},isc.A.$599=function isc_ListGrid__linkClicked(_1,_2,_3){var _4=this.getRecord(_2),_5=(this.destroyed||!this.isDrawn()||!this.isVisible()||isc.EH.targetIsMasked(this.body)||!this.recordIsEnabled(_4,_2,_3)),_6=this.getField(_3);if(_1.target=="javascript"||_6.target=="javascript"){_5=true;this.cellClick(_4,_2,_3)}
if(_5){if(!isc.Browser.isIE){_1.preventDefault()}
return false}
return true},isc.A.$96l=function isc_ListGrid__formatImageCellValue(_1,_2,_3,_4,_5,_6){if(_1==null||_1==isc.emptyString)return isc.emptyString;var _7=isc.Canvas.getFieldImageDimensions(_2,_4);_7.width=_7.width||_3.imageSize;_7.height=_7.height||_3.imageSize;var _8=_1,_9=_2.imageURLPrefix||_2.baseURL||_2.imgDir;if(_2.imageURLSuffix!=null)_8+=_2.imageURLSuffix;return isc.Canvas.imgHTML(_8,_7.width,_7.height,null,_2.extraStuff,_9,_2.activeAreaHTML)},isc.A.$96m=function isc_ListGrid__formatIconCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.RecordEditor(_3)&&_3.isAFilterEditor()&&_2.canFilter==false)return null;if(_2.$96n)return _2.$96n;_2.$96n=isc.Canvas.imgHTML(_2.cellIcon||_2.icon,_2.iconWidth||_2.iconSize||_3.imageSize,_2.iconHeight||_2.iconSize||_3.imageSize);return _2.$96n},isc.A.setFastCellUpdates=function isc_ListGrid_setFastCellUpdates(_1){if(this.body!=null){this.body.setFastCellUpdates(_1);_1=this.body.fastCellUpdates}
if(this.frozenBody!=null){this.frozenBody.setFastCellUpdates(_1)}
this.fastCellUpdates=_1},isc.A.shouldNavigateOnTab=function isc_ListGrid_shouldNavigateOnTab(){return this.canSelectCells&&this.navigateOnTab},isc.A.shouldShowRemoveField=function isc_ListGrid_shouldShowRemoveField(){if(this.fieldSourceGrid!=null)return this.fieldSourceGrid.shouldShowRemoveField();return this.canRemoveRecords},isc.A.markRecordRemoved=function isc_ListGrid_markRecordRemoved(_1,_2){if(!isc.isA.Number(_1))_1=this.findRowNum(_1);if(this.getEditRow()==_1)this.hideInlineEditor();if(this.canSelectCells){this.selection.deselectRow(_1)}else{var _3=this.getRecord(_1);this.selection.deselect(_3)}
this.setEditValue(_1,this.recordRemovedProperty,true,_2,false,_2);if(!_2)this.refreshRow(_1)},isc.A.markRecordsRemoved=function isc_ListGrid_markRecordsRemoved(_1){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){this.markRecordRemoved(_1[i],true)}},isc.A.recordMarkedAsRemoved=function isc_ListGrid_recordMarkedAsRemoved(_1){if(_1==null)return false;if(!isc.isA.Number(_1)){_1=this.getEditSessionRowNum(_1);if(_1==null)return false}
return(this.getEditValue(_1,this.recordRemovedProperty)==true)},isc.A.unmarkRecordRemoved=function isc_ListGrid_unmarkRecordRemoved(_1,_2){if(!isc.isA.Number(_1))_1=this.findRowNum(_1);this.clearEditValue(_1,this.recordRemovedProperty);if(!_2)this.refreshRow(_1)},isc.A.markSelectionRemoved=function isc_ListGrid_markSelectionRemoved(){var _1=this.getSelectedRecords(),_2=_1.length;for(var i=0;i<_2;++i){this.markRecordRemoved(_1[i],true)}
this.markForRedraw()},isc.A.shouldDeferRemoval=function isc_ListGrid_shouldDeferRemoval(){if(this.deferRemoval!=null)return this.deferRemoval;return!this.autoSaveEdits},isc.A.editorKeyDown=function isc_ListGrid_editorKeyDown(_1,_2){if(isc.Browser.isMoz&&_1&&_1.multiple&&isc.isA.NativeSelectItem(_1)&&_2=="Enter")
{_1.$96o=_1.getValue()}},isc.A.editorKeyPress=function isc_ListGrid_editorKeyPress(_1,_2,_3){var _4=isc.EH,_5,_6;var _7=isc.isA.PopUpTextAreaItem(_1)||(isc.RichTextItem&&isc.isA.RichTextItem(_1))||isc.isA.TextAreaItem(_1);if(_2=="Tab"){var _8=_4.shiftKeyDown();if(this.ns.isA.ContainerItem(_1)||(_1.icons!=null&&_1.icons.length>0&&!this.ns.isA.PopUpTextAreaItem(_1)))
{if(!this.$410(_1,_8)){return false}}
_6=_8?isc.ListGrid.SHIFT_TAB_KEYPRESS:isc.ListGrid.TAB_KEYPRESS;_5=false}else if(_2=="Enter"){if(_1.getFocusIconIndex()!=null)return;if(_7&&isc.EH.altKeyDown()==false){return _5}
if(_1.$96o!=null){var _9=_1.$96o;delete _1.$96o;_1.setValue(_9)}
_6=isc.ListGrid.ENTER_KEYPRESS;_5=false}else if(_2=="Escape"){_6=isc.ListGrid.ESCAPE_KEYPRESS;_5=false}else if(_2=="Arrow_Up"){var _10=_7;if(_10&&!isc.EH.altKeyDown())return _5;if(isc.isA.SpinnerItem(_1)&&!isc.EH.altKeyDown())return _5;if(isc.isA.SelectItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.isA.PresetCriteriaItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.EH.ctrlKeyDown()&&isc.EH.shiftKeyDown())return _5;_6=isc.ListGrid.UP_ARROW_KEYPRESS;_5=false}else if(_2=="Arrow_Down"){var _10=_7;if(_10&&!isc.EH.altKeyDown())return _5;if(isc.isA.SpinnerItem(_1)&&!isc.EH.altKeyDown())return _5;if(isc.isA.SelectItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.isA.PresetCriteriaItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.EH.ctrlKeyDown&&isc.EH.shiftKeyDown())return _5;_6=isc.ListGrid.DOWN_ARROW_KEYPRESS;_5=false}else if(this.moveEditorOnArrow&&this.$96p){if(_2=="Arrow_Left"){_6=isc.ListGrid.LEFT_ARROW_KEYPRESS;_5=false}else if(_2=="Arrow_Right"){_6=isc.ListGrid.RIGHT_ARROW_KEYPRESS;_5=false}}
if(_6!=null){if(isc.EH.clickMaskUp()){isc.EH.setMaskedFocusCanvas(null,isc.EH.clickMaskRegistry.last())}
this.cellEditEnd(_6)}
return _5},isc.A.$410=function isc_ListGrid__moveFocusWithinItem(_1,_2){if(!_1)return true;return(!_1.$410(!_2))},isc.A.$96q=function isc_ListGrid__editFormItem_elementFocus(_1){var _2=this.$96r(_1);this.Super("elementFocus",arguments);this.$96s(_2[0],_2[1])},isc.A.$96t=function isc_ListGrid__editFormItem_setLGEditCellForFocus(_1){var _2=this.form,_3=_2.grid;var _4,_5,_6,_7;if(_3.$94e){_4=_3.$92d;if(!_3.editByCell){_4=_3.$92d;_6=this.getFieldName();_5=_3.fields.findIndex(_3.fieldIdProperty,_6);if(!_1){_7=(_3.$96u!=_5);if(_7){_3.setNewEditCell(_4,_5);_3.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}}else{_5=_3.$96u}}
return[_4,_5]},isc.A.$96v=function isc_ListGrid__editFormItem_fireLGEditorEnter(_1,_2){var _3=this.form,_4=_3.grid;if(_4.$94e){var _5=this.$96w,_6=this.$96x;delete this.$96w;delete this.$96x;var _7=isc.addProperties({},_4.getCellRecord(_1,_2),_4.$96y(_1,_2));if(_6){var _8=_4.getFieldName(_2);_4.$96z(this,_1,_2,_7[_8])}
if(_5)_4.$960(this,_1,_7)}else{_4.logWarn("suppressing editorEnter handlers on focus as listGrid.$94e is null")}},isc.A.getParentGroupIndex=function isc_ListGrid_getParentGroupIndex(_1){if(!this.isGrouped)return 0;var _2=this.groupTree,_3=_2.getParent(_1),_4=_2.getChildren(_2.getParent(_3)),_5=0;if(!isc.isA.ResultSet(_4)||_4.lengthIsKnown()){for(var i=0,_7=_4.getLength();i<_7;++i){var _8=_4.getCachedRow(i);if(_8!=null&&_8.groupValue==_3.groupValue){_5=i;break}}}
return _5},isc.A.getGroupedRecordIndex=function isc_ListGrid_getGroupedRecordIndex(_1){if(!this.isGrouped)return-1;var _2=this.groupTree,_3=_2==null?null:_2.getParent(_1);if(_3==null)return-1;var _4=_2.getChildren(_2.getParent(_3)),_5=0,_6=0;if(!isc.isA.ResultSet(_4)||_4.lengthIsKnown()){for(var i=0,_8=_4.getLength();i<_8;++i){var _9=_4.getCachedRow(i);if(_9!=null){if(_9.groupValue==_3.groupValue){var _10=_2.getChildren(_9);if(!isc.isA.ResultSet(_10)||_10.lengthIsKnown()){for(var j=0,_12=_10.getLength();j<_12;++j){var _13=_10.getCachedRow(j);if(_13!=null&&this.objectsAreEqual(_13,_1)){return _6+j}}}}
var _14=_2.getChildren(_9);if(!isc.isA.ResultSet(_14)||_14.lengthIsKnown()){var _15=_14.getLength();if(this.showGroupSummary&&!this.showGroupSummaryInHeader){for(var _16=_15-1;_16>=0;--_16){var _17=_14.getCachedRow(_16);if(_17!=null){if(_17[this.groupSummaryRecordProperty])--_15;else break}}}
_6+=_15}}}}
return _6},isc.A.objectsAreEqual=function isc_ListGrid_objectsAreEqual(_1,_2){for(var _3 in _1){if(_1[_3]!=_2[_3])return false}
return true},isc.A.getRowNumberField=function isc_ListGrid_getRowNumberField(){var _1=this,_2={width:this.$954,rowNumberStart:this.rowNumberStart,getAutoFreezePosition:function(){return _1.getRowNumberFieldPosition()}};if(this.applyRowNumberStyle)_2.baseStyle=this.rowNumberStyle;isc.addProperties(_2,this.rowNumberFieldDefaults,this.rowNumberFieldProperties);_2.title=isc.nbsp;return _2},isc.A.getCurrentRowNumberField=function isc_ListGrid_getCurrentRowNumberField(){var _1=this.completeFields||this.fields,_2=_1.find(this.fieldIdProperty,"$952");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.isRowNumberField=function isc_ListGrid_isRowNumberField(_1){if(!_1||!_1.$953)return false;else return true},isc.A.getRowNumberFieldPosition=function isc_ListGrid_getRowNumberFieldPosition(){if(this.fieldSourceGrid)return this.fieldSourceGrid.getRowNumberFieldPosition();if(!this.shouldShowRowNumberField())return-1;return 0},isc.A.shouldShowRowNumberField=function isc_ListGrid_shouldShowRowNumberField(){return this.fieldSourceGrid?this.fieldSourceGrid.shouldShowRowNumberField():(this.showRowNumbers==true)},isc.A.shouldShowExpansionField=function isc_ListGrid_shouldShowExpansionField(){return this.fieldSourceGrid?this.fieldSourceGrid.shouldShowExpansionField():this.canExpandRecords},isc.A.getExpansionField=function isc_ListGrid_getExpansionField(){var _1=this,_2={excludeFromState:true,width:this.$961()+this.expansionFieldExtraWidth,getAutoFreezePosition:function(){return _1.getExpansionFieldPosition()}};_2.valueIconWidth=this.$961();_2.valueIconHeight=this.$962();isc.addProperties(_2,this.expansionFieldDefaults,this.expansionFieldProperties);_2.title=isc.nbsp;return _2},isc.A.getCurrentExpansionField=function isc_ListGrid_getCurrentExpansionField(){var _1=this.completeFields||this.fields,_2=_1.find(this.fieldIdProperty,"$955");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.$961=function isc_ListGrid__getExpansionFieldImageWidth(){return this.expansionFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)});isc.evalBoundary;isc.B.push(isc.A.$962=function isc_ListGrid__getExpansionFieldImageHeight(){return this.expansionFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null)},isc.A.isExpansionField=function isc_ListGrid_isExpansionField(_1){if(!_1||!_1.$956)return false;else return true},isc.A.getExpansionFieldPosition=function isc_ListGrid_getExpansionFieldPosition(){if(this.fieldSourceGrid!=null)return this.fieldSourceGrid.getExpansionFieldPosition();if(!this.shouldShowExpansionField())return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;if(this.shouldShowCheckboxField())_1++;return _1},isc.A.$957=function isc_ListGrid__canExpandRecord(_1,_2){if(_1==null)_1=this.getRecord(_2);if(_1==null)return false;return this.canExpandRecord(_1,_2)},isc.A.canExpandRecord=function isc_ListGrid_canExpandRecord(_1,_2){return _1[this.canExpandRecordProperty]==false?false:true&&(this.canExpandRecords!=false)},isc.A.setCanExpandRecords=function isc_ListGrid_setCanExpandRecords(_1){if(this.canExpandRecords==_1)return;if(!_1){var _2=this.data;if(_2){var _3=this.$963();if(_3!=null){for(var i=0;i<_3.length;i++){this.collapseRecord(_3[i])}}}}
this.canExpandRecords=_1;this.refreshFields()},isc.A.expandRecord=function isc_ListGrid_expandRecord(_1,_2){if(!this.body){if(!this.$964)this.$964=[];this.$964.add(_1);return}
var _3=false,_4;if(!this.isExpanded(_1)){if(this.onExpandRecord!=null&&!this.onExpandRecord(_1))return false;if(!this.canExpandMultipleRecords){if(this.$965)
this.collapseRecord(this.$965);this.$965=_1}else if(this.maxExpandedRecords!=null){if(this.$958>=this.maxExpandedRecords){var _5=this.maxExpandedRecordsPrompt.evalDynamicString(this,{count:this.maxExpandedRecords});isc.say(_5);return false}}
_4=this.getExpansionComponent(_1);var _6=this.isRTL(),_7=this.createAutoChild("expansionLayout",{layoutLeftMargin:_6?0:this.embeddedComponentIndent,layoutRightMargin:_6?this.embeddedComponentIndent:0,members:[_4]});_7.isExpansionComponent=true;_7.removeOnHideField=true;this.addEmbeddedComponent(_7,_1,this.data.indexOf(_1));this.$966(_1,true);this.$967(_1,true);this.$958++;if(!this.canExpandMultipleRecords)this.$965=_1;_3=true}
if(_2!=false){this.delayCall("markForRedraw",["Expanded Record"])}
return _3},isc.A.expandRecords=function isc_ListGrid_expandRecords(_1){if(!_1||_1.length==0)return;var _2=_1.length;for(var i=0;i<_2;i++){var _4=(i==_2-1);this.expandRecord(_1[i],_4)}},isc.A.collapseRecord=function isc_ListGrid_collapseRecord(_1,_2){var _3=(_1&&this.$91v(_1))?this.$91w(_1).find("isExpansionComponent",true):null;this.$968=_2;if(isc.isA.Layout(_3)){var _4=_3.getMember(0);if(_4){if(!isc.isA.DynamicForm(_4))_4=_4.formMember;if(isc.isA.DynamicForm(_4)&&_4.valuesHaveChanged()){this.saveAndCollapseRecord(_4,_3,_1,true,true);return}}}
this.$969(_1,_3)},isc.A.collapseRecords=function isc_ListGrid_collapseRecords(_1){if(!_1||_1.length==0)return;var _2=_1.length;for(var i=0;i<_2;i++){var _4=(i==_2-1);this.collapseRecord(_1[i],_4)}},isc.A.saveAndCollapseRecord=function isc_ListGrid_saveAndCollapseRecord(_1,_2,_3,_4,_5){if(this.autoSaveEdits==true){var _6=this;if(this.expansionEditorShowSaveDialog&&_4){isc.confirm(this.expansionEditorSaveDialogPrompt,function(_9){if(_9){_6.saveExpansionDetail(_1,_2,_3,_5)}else{if(_5)_6.$969(_3,_2)}})}else{this.saveExpansionDetail(_1,_2,_3,_5)}
return}else{var _7=_1.getChangedValues(),_8=this.getRecordIndex(_3),_6=this;if(this.expansionEditorShowSaveDialog&&_4){isc.confirm("You have unsaved changes - do you want to save them now?",function(_9){if(_9){_6.$97a(_8,_7)}
if(_5)_6.$969(_3,_2)});return}else{_6.$97a(_8,_7);if(_5)this.$969(_3,_2);return}}},isc.A.$97a=function isc_ListGrid__saveExpansionEditorValues(_1,_2){for(var _3 in _2){this.setEditValue(_1,_3,_2[_3])}},isc.A.saveExpansionDetail=function isc_ListGrid_saveExpansionDetail(_1,_2,_3,_4){var _5=this;_1.saveData(function(_6,_7,_8){if(_7){_3=_7;if(_4)_5.$969(_3,_2);else _1.editRecord(_3)}},{showPrompt:true,promptStyle:"cursor"})},isc.A.$969=function isc_ListGrid__collapseRecord(_1,_2){_2=_2||(_1&&this.$91v(_1)?this.$91w(_1).find("isExpansionComponent",true):null);if(this.isExpanded(_1)){if(this.onCollapseRecord!=null&&!this.onCollapseRecord(_1))return;if(this.$965&&this.$965==_1)
delete this.$965;this.removeEmbeddedComponent(_1,_2?_2:this.frozenFields?this.frozenFields.length:0);this.$958--}
this.$966(_1,false);if(this.$968!=false){this.markForRedraw()}},isc.A.isExpanded=function isc_ListGrid_isExpanded(_1){return(!_1?false:!!_1[this.$959+this.ID])},isc.A.getExpandedRecords=function isc_ListGrid_getExpandedRecords(){return this.$963()},isc.A.$966=function isc_ListGrid__setExpanded(_1,_2){_1[this.$959+this.ID]=_2},isc.A.$963=function isc_ListGrid__getExpandedRows(){return this.data.findAll(this.$959+this.ID,true)},isc.A.$97b=function isc_ListGrid__hasExpansionComponent(_1){return _1[this.$96a+this.ID]},isc.A.$967=function isc_ListGrid__setExpansionComponent(_1,_2){_1[this.$96a+this.ID]=_2},isc.A.$91v=function isc_ListGrid__hasEmbeddedComponents(_1){var _2=_1[this.$96b+this.ID];return(_2!=null&&_2.length>0)},isc.A.$91w=function isc_ListGrid__getEmbeddedComponents(_1){var _2=_1[this.$96b+this.ID],_3=[];if(!_2)return null;for(var i=0;i<_2.length;i++){_3[i]=isc.Canvas.getById(_2[i])}
return _3},isc.A.$97c=function isc_ListGrid__setEmbeddedComponents(_1,_2){_1[this.$96b+this.ID]=_2},isc.A.$92k=function isc_ListGrid__addEmbeddedComponent(_1,_2){if(!_1[this.$96b+this.ID]){_1[this.$96b+this.ID]=[]}
if(!_1[this.$96b+this.ID].contains(_2.getID())){_1[this.$96b+this.ID].add(_2.getID())}},isc.A.$92q=function isc_ListGrid__removeEmbeddedComponent(_1,_2){var _3=_1[this.$96b+this.ID];if(_3==null)return;if(_3.length==0){_1[this.$96b+this.ID]=null;return}
_3.remove(_2.getID());if(_3.length==0){_1[this.$96b+this.ID]=null}},isc.A.$97d=function isc_ListGrid__deleteEmbeddedComponents(_1,_2){delete _1[this.$96b+this.ID]},isc.A.$97e=function isc_ListGrid__hasRecordComponents(_1){return(_1&&_1[this.$96c+this.ID]!=null)},isc.A.$97f=function isc_ListGrid__getRecordComponents(_1){if(!_1)return null;var _2=_1[this.$96c+this.ID],_3={};if(_2){for(var _4 in _2){if(_2[_4].isNullMarker){_3[_4]=_2[_4]}else{_3[_4]=isc.Canvas.getById(_2[_4])}}}
return _3},isc.A.$97g=function isc_ListGrid__addRecordComponent(_1,_2,_3){if(!_1[this.$96c+this.ID]){_1[this.$96c+this.ID]={}}
if(_3.isNullMarker){_1[this.$96c+this.ID][_2]=_3}else{_1[this.$96c+this.ID][_2]=_3.getID()}},isc.A.$97h=function isc_ListGrid__deleteRecordComponent(_1,_2){var _3=_1[this.$96c+this.ID];if(_3==null)return;if(isc.isAn.emptyObject(_3)){_1[this.$96c+this.ID]=null;return}
if(_2==null)_2=this.$97i;delete _3[_2];if(isc.isAn.emptyObject(_3)){_1[this.$96c+this.ID]=null}},isc.A.getCurrentExpansionComponent=function isc_ListGrid_getCurrentExpansionComponent(_1){if(isc.isA.Number(_1))_1=this.getRecord(_1);if(!this.$97b(_1))return null;var _2=this.$91v(_1)?this.$91w(_1).find("isExpansionComponent",true):null;if(_2){return _2.members[0]}
return null},isc.A.getExpansionComponent=function isc_ListGrid_getExpansionComponent(_1){return this.$97j(_1,true,false,this.getRecordIndex(_1),0)},isc.A.getRelatedDataSource=function isc_ListGrid_getRelatedDataSource(_1){return isc.DS.getDataSource(_1[this.recordDetailDSProperty])||isc.DS.get(this.detailDS)});isc.B._maxIndex=isc.C+81;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnOnReusedFields=true;isc.A.autoFitExpandLengthThreshold=10;isc.A.clipRecordComponents=true;isc.A.$88z="within";isc.A.$97k="dataChanged";isc.A.$97l=0;isc.A.$nv="boolean";isc.A.discardEditsOnHideField=true;isc.A.$97m="set fields";isc.A.$42x="checkbox";isc.A.$97n=[];isc.A.checkboxFieldDefaults={name:"_checkboxField",excludeFromState:true,canEdit:false,shouldPrint:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,$20y:true,type:"boolean",showDefaultContextMenu:false,hoverHTML:"return null;",autoFreeze:true,showGridSummary:false,showGroupSummary:false,summaryValue:"&nbsp;",treeField:false,title:isc.nbsp};isc.A.checkboxFieldHSpace=15;isc.A.$97o="Getting listGrid fieldWidths. ";isc.A.gridComponents=["filterEditor","header","body","summaryRow"];isc.A.showComponentPropertyMap={header:"showHeader",filterEditor:"showFilterEditor",summaryRow:"showGridSummary"};isc.A.$ow="body";isc.A.$97p="header";isc.A.iconPadding=2;isc.A.$97q="summary";isc.A.applyFormulaAfterSummary=false;isc.A.refreshDependentFieldsForSummaries=true;isc.A.$46t="blank";isc.A.$97r="<HR>";isc.A.allowRowSpanning=false;isc.A.rowSpanSelectionMode="forward";isc.A.rowSpanEditMode="first";isc.A.$97s=["style='margin-left:",,"px;margin-right:",,"px;'"];isc.A.$nv="boolean";isc.A.$nq="text";isc.A.$97t={" ":true,"\n":true,"\r":true,"\r\n":true};isc.A.$1w="&nbsp;";isc.A.$97u={text:true,TextItem:true,select:true,SelectItem:true,combobox:true,ComboBoxItem:true,comboBox:true,checkbox:true,CheckboxItem:true,date:true,DateItem:true,spinner:true,SpinnerItem:true,popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$16b="false";isc.A.$16c="true";isc.A.$97i="$97v";isc.A.$97w=0;isc.A.$880="expand";isc.A.printAutoFit=true;isc.A.printWrapCells=true;isc.A.printHeaderStyle="printHeader";isc.A.printMaxRows=100;isc.A.shouldPrintAttributeMap={filterEditor:"printFilterEditor",header:"printHeader",summaryRow:"printSummaryRow"};isc.A.printFilterEditor=false;isc.A.$97x="hoverHTML";isc.A.$97y="record,value,rowNum,colNum,grid";isc.A.defaultCellHoverComponentWidth=100;isc.A.defaultCellHoverComponentHeight=1;isc.A.$61i="Arrow_Up";isc.A.$61j="Arrow_Down";isc.A.$97z="Arrow_Left";isc.A.$970="Arrow_Right";isc.A.$47c="Space";isc.A.$375="Enter";isc.A.$971="f2";isc.A.$ry="Tab";isc.A.$971="f2";isc.A.$ru="Escape";isc.A.$qx="Backspace";isc.A.$972="Delete";isc.A.$973="keyPress";isc.A.$sw="none";isc.A.$974="focus";isc.A.$42w="select";isc.A.$975="activate";isc.A.hiliteOnNativeRowFocus=true;isc.A.scrollToCellXPosition="center";isc.A.scrollToCellYPosition="center";isc.A._useFocusProxy=false;isc.A.canFocusInEmptyGrid=true;isc.A.showFocusOutline=!isc.Browser.isSafari;isc.A.showGridSummary=false;isc.A.invalidSummaryValue="&nbsp;";isc.A.includeInSummaryProperty="includeInSummary";isc.A.gridSummaryRecordProperty="isGridSummary";isc.A.groupSummaryRecordProperty="isGroupSummary";isc.A.recordApplyPluralTitleProperty="applyPluralTitle";isc.A.$97q="summary";isc.A.recordSummaryBaseStyle="recordSummaryCell";isc.A.summaryRowConstructor="ListGrid";isc.A.summaryRowDefaults={showRollOver:false};isc.A.summaryRowHeight=20;isc.A.summaryRowStyle="gridSummaryCell";isc.A.$42z="binary";isc.A.$423="file";isc.A.$43b="imageFile";isc.A.$16c="true";isc.A.updateEditorItemsInPlace=true;isc.A.$976={time:true,TimeItem:true};isc.A.$n0="time";isc.A.$158={date:true,DateItem:true};isc.A.$977={datetime:true,dateTime:true,DatetimeItem:true,DateTimeItem:true};isc.A.$nz="date";isc.A.$nx="datetime";isc.A.popUpTextAreaEditorTypes={popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$978={checkbox:true,CheckboxItem:true};isc.A.$nv="boolean";isc.A.$42x="checkbox";isc.A.$426="CycleItem";isc.A.$979={select:true,SelectItem:true};isc.A.$98a=["change","changed","defaultDynamicValue"];isc.A.$98b=["change","changed","defaultDynamicValue","keyPress","click","showIf","enableIf"];isc.A.$98c={};isc.A.$98d=100;isc.A.$98e=0.2;isc.A.$98f="column remap";isc.A.allowEditFormValueManipulation=true;isc.A.$98g=0;isc.A.$98h="rowNum,colNum,editCompletionEvent,success";isc.A.$27h=true;isc.A.cellRecordMode="row";isc.A.$98i="toggle frozen fields";isc.A.$98j="rebuilding body";isc.A.screenReaderCellSeparator="/";isc.A.screenReaderRowSeparator=",";isc.A.selectionCanvasDefaults={_constructor:"SelectionOrRollOverCanvas",opacity:20};isc.A.selectionUnderCanvasDefaults={};isc.A.rollOverCanvasDefaults={_constructor:"SelectionOrRollOverCanvas",snapTo:"TL",width:"100%",height:"100%"};isc.A.rollUnderCanvasDefaults={snapTo:"TL",width:"100%",height:"100%"};isc.A.showHeaderSpanTitlesInFormulaBuilder=true;isc.A.formulaBuilderSpanTitleSeparator=" - ";isc.A.showHeaderSpanTitlesInSortEditor=true;isc.A.sortEditorSpanTitleSeparator=" - ";isc.A.showHeaderSpanTitlesInHiliteEditor=true;isc.A.hiliteEditorSpanTitleSeparator=" - ";isc.A.$98k="header height changed";isc.A.$98l="header visibility changed";isc.A.headerMenuButtonDefaults={title:null,iconSpacing:0,showDisabled:false,showDisabledIcon:false,click:function(){this.creator.headerMenuButtonClick()},doubleClick:function(){this.creator.headerMenuButtonDoubleClick()},mouseOut:function(){var _1=this.ns.EH;if(!isc.Browser.isTouch){var _2=_1.getTarget();if(!_2||!this.parentElement.contains(_2)){this.hide()}}
this.Super("mouseOut",arguments)},visibilityChanged:function(_1){if(!_1&&this.parentElement!=null)this.parentElement.markForRedraw()}};isc.A.$27m="$39g";isc.A.predictScrollbarGap=true;isc.A.sortFieldAscendingText="Sort Ascending";isc.A.sortFieldDescendingText="Sort Descending";isc.A.clearSortFieldText="Clear Sort";isc.A.clearAllSortingText="Clear All Sorting";isc.A.clearFilterText="Clear Filter";isc.A.configureSortText="Configure Sort...";isc.A.configureGroupingText="Configure Grouping...";isc.A.autoFitFieldText="Auto Fit";isc.A.autoFitAllText="Auto Fit All Columns";isc.A.fieldVisibilitySubmenuTitle="Columns";isc.A.freezeFieldText="Freeze ${title}";isc.A.unfreezeFieldText="Unfreeze ${title}";isc.A.groupByText="Group by ${title}";isc.A.ungroupText="Ungroup";isc.A.headerContextMenuConstructor="Menu";isc.A.headerContextMenuDefaults={hide:function(){this.Super("hide",arguments);if(!isc.Browser.isTouch&&this.grid){this.grid.$618=false;this.grid.$98m()}},doSort:function(_1,_2){if(_2=="unsort")this.grid.toggleSort(this.grid.getFieldName(_1),_2);else this.grid.sort(_1,_2)},canHover:true,showHover:true,cellHoverHTML:function(_1,_2,_3){return _1.prompt},groupField:function(_1){var _2=this.grid,_3=_2.getGroupByFields();if((_1.targetField&&_1.groupType)||!(_3&&_3.length==1&&_3.contains(_1.fieldName)))
{var _4=_2.makeGroupSpecifier(_1.fieldName,_1.groupType,_1.groupGranularity,_1.groupPrecision);_2.setGroupSpecifiers([_4])}},ungroup:function(){this.grid.ungroup()}};isc.A.$98n="sort";isc.A.canMultiSort=true;isc.A.canMultiGroup=false;isc.A.sortNumeralStyle="sortNumeral";isc.A.$98o=["<span class='",,"'>",,,,"</span>"];isc.A.$98p="setSort";isc.A.chartConstructor="FacetChart";isc.A.chartType="Column";isc.A.groupIdField="groupId";isc.A.groupParentIdField="groupParentId";isc.A.retainOpenStateOnRegroup=true;isc.A.groupIconPadding=5;isc.A.showGroupSummary=false;isc.A.groupSummaryStyle="gridSummaryCell";isc.A.$98q={canDragSelect:true,canDragSelectText:true,canDragRecordsOut:true,canReorderRecords:true,canAcceptDroppedRecords:true};isc.A.$98r={bodyBackgroundColor:"backgroundColor",bodyStyleName:"styleName",fixedRecordHeights:"fixedRowHeights",fixedFieldWidths:"fixedColumnWidths",alternateRecordStyles:"alternateRowStyles",alternateRecordFrequency:"alternateRowFrequency",showAllRecords:"showAllRows",canSelectText:"canDragSelectText"};isc.A.useAdvancedFieldPicker=false;isc.A.canEditTitles=false;isc.A.fieldPickerWindowDefaults={autoParent:"none",_constructor:"FieldPickerWindow"};isc.A.fieldPickerFieldProperties=null;isc.A.advancedFieldPickerThreshold=25;isc.A.fieldPickerShowSampleValues=true;isc.B.push(isc.A.init=function isc_ListGrid_init(){if(this.disableTouchScrollingForDrag&&(this.canDragRecordsOut||this.canDragSelect||this.canReorderRecords)&&this.useTouchScrolling==null)
{this.logInfo("Automatically disabling touch scrolling","scrolling");this.useTouchScrolling=false}
this.Super("init",arguments)},isc.A.initWidget=function isc_ListGrid_initWidget(){this.$98s=true;this.Super("initWidget",arguments);if(isc.Browser.isMobile)this.resizeFieldsInRealTime=false;if(this.showRecordComponents){delete this.showRecordComponents;this.setShowRecordComponents(true)}
if(this.fields==null&&this.defaultFields!=null){this.fields=isc.shallowClone(this.defaultFields)}else if(this.warnOnReusedFields&&this.fields!=null){if(this.fields.$98t){this.logWarn("ListGrid initialized with this.fields attribute set to an array which is already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.")}else{var _1;if(isc.isAn.Array(this.fields)){_1=this.fields.findIndex("$98u",true)!=-1}else if(isc.isAn.Object(this.fields)){for(var _2 in this.fields){var _3=this.fields[_2];if(_3&&_3.$98u){_1=true;break}}}
if(_1){this.logWarn("ListGrid initialized with this.fields attribute set to an array containing fields which are already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.")}}
this.fields.$98t=true;if(isc.isAn.Array(this.fields)){var _4=0;for(var i=0;i<this.fields.length;i++){if(this.fields[i]==null){_4++;this.logWarn("ListGrid initialization: Specified fields array includes null entry. Removing.");continue}
if(_4>0){this.fields[i-_4]=this.fields[i]}
this.fields[i].$98u=true}
if(_4>0)this.fields.length=this.fields.length-_4}else if(isc.isAn.Object(this.fields)){for(var _2 in this.fields){var _3=this.fields[_2];if(_3){_3.$98u=true}}}}
if(this.canEditNew)this.listEndEditAction=this.rowEndEditAction="next";if(this.alwaysShowEditors){this.editByCell=false;this.selectionType="none";this.selectOnEdit=false;if(this.canGroup!=false){this.logInfo("grouping functionality is not supported when alwaysShowEditors is true. Explicitly disabling this.canGroup","inactiveEditorHTML");this.canGroup=false}
if(this.modalEditing){this.logInfo("modalEditing is not supported when alwaysShowEditors is true. Explicitly setting this.modalEditing to false","inactiveEditorHTML");this.modalEditing=false}
this.editEvent="click";if(!this.isEditable()){this.logInfo("alwaysShowEditors has been set for this grid but canEdit is unset and no fields are explicitly marked as editable. Defaulting this.canEdit to true. Note that to avoid this override developers can explicitly specify canEdit at the grid or field level","inactiveEditorHTML");this.canEdit=true}}
if(this.canExpandRecords||(this.fixedRecordHeights==false&&this.virtualScrolling==null))
{if(this.fixedRecordHeights)this.$94i=this.fixedRecordHeights;this.fixedRecordHeights=false;this.virtualScrolling=true}
if(this.canAddFormulaFields&&isc.FormulaBuilder==null){this.logInfo("Required modules for adding formula fields not present - setting canAddFormulaFields to false.");this.canAddFormulaFields=false}
if(this.canAddSummaryFields&&isc.SummaryBuilder==null){this.logInfo("Required modules for adding summary fields not present - setting canAddSummaryFields to false.");this.canAddSummaryFields=false}
if(this.useRowSpanStyling&&this.canSelectCells==null)this.canSelectCells=true;if(this.useCellRollOvers==null)this.useCellRollOvers=this.canSelectCells;if(this.loadingMessage==null||this.loadingMessage==isc.emptyString)
this.loadingMessage="&nbsp;";if(this.autoFitData!=null){this.$98v=this.overflow;this.setOverflow("visible")}
if(this.canCollapseGroup==false)this.groupStartOpen="all";this.sortDirection=Array.shouldSortAscending(this.sortDirection)?"ascending":"descending";this.$98w=Array.shouldSortAscending(this.sortDirection)?"ascending":"descending";if(this.hiliteState)this.setHiliteState(this.hiliteState);this.setData(this.data?null:this.getDefaultData());this.setSelectionAppearance(this.selectionAppearance,true);this.$98x();if(!this.canResizeFields)this.canAutoFitFields=false;if(this.wrapHeaderTitles==null){var _6=this.headerButtonProperties!=null?this.headerButtonProperties.wrap:null;if(_6==null){_6=this.headerButtonDefaults!=null?this.headerButtonDefaults.wrap:null}
if(_6==null)_6=false;this.wrapHeaderTitles=_6}
this.currentGroupState=this.getGroupState();delete this.$98s},isc.A.$98y=function isc_ListGrid__storeDragProperties(){if(!this.$98z){var _1=this.$98z={};_1.canDrag=this.canDrag;_1.canDrop=this.canDrop;_1.canAcceptDrop=this.canAcceptDrop}},isc.A.$980=function isc_ListGrid__restoreDragProperties(){var _1=this.$98z;if(_1){this.canDrag=_1.canDrag;this.canDrop=_1.canDrop;this.canAcceptDrop=_1.canAcceptDrop}},isc.A.$98x=function isc_ListGrid__setUpDragProperties(){if(!this.$98z){this.$98y()}
this.canDrag=!this.canDragSelectText&&(this.canDrag||this.canDragRecordsOut||this.canReorderRecords||this.canDragSelect);this.canDrop=(this.canDrop||this.canDragRecordsOut||this.canReorderRecords);this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderRecords)},isc.A.setCanReorderRecords=function isc_ListGrid_setCanReorderRecords(_1){if(_1!=this.canReorderRecords){this.canReorderRecords=_1;this.$980();this.$98x();this.redraw()}},isc.A.getEmptyMessage=function isc_ListGrid_getEmptyMessage(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){if(isc.Offline&&isc.Offline.isOffline()){return this.offlineMessage}
return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})}
if(this.isOffline()){return this.offlineMessage}
return this.emptyMessage==null?"&nbsp;":this.emptyMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function isc_ListGrid_isEmpty(){if(!this.data)return true;if(!this.fields||this.fields.length==0)return true;if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.isPaged()){if(!this.data.isEmpty())return false;var _1=this.getAllEditRows();if(_1&&_1.length>0){for(var i=0;i<_1.length;i++){if(_1[i]>=0)return false}}
return true}else{return(!this.data.lengthIsKnown()||this.getTotalRows()==0)}}else{return(this.getTotalRows()==0)}},isc.A.setData=function isc_ListGrid_setData(_1,_2){if(this.data==_1)return;this.dataSetChanged();if(!this.preserveEditsOnSetData)this.discardAllEdits();this.clearLastHilite();if(this.data){this.$981(this.data);if(this.data.$71k&&isc.isA.Function(this.data.destroy))
this.data.destroy()}
if(_1)this.data=_1;if(!this.data)return;if(!this.$982&&!this.isGrouped&&(!this.selection||(this.data!=this.selection.data)))
{this.createSelectionModel()}
this.$983(this.data);var _3,_4;if(isc.isA.ResultSet(this.data)&&!(_2&&this.sortByGroupFirst)&&(_3=this.data.getSort())&&this.data.lengthIsKnown())
{_4=_3}else{_4=this.getSort()}
if(_4){if(this.fields)this.setSort(_4);else{this.initialSort=_4;this.$984=true}}
if(this.preserveEditsOnSetData)this.$985();this.regroup(true);this.calculateRecordSummaries(null,null,null,true,true);var _5=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown();if(!_5&&this.$986()&&!this.$94e){this.startEditing(null,null,true,null,true)}
if(this.hilites)this.applyHilites();if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!(this.data.allRows&&this.data.neverDropCache)&&this.body&&this.body.overflow=="visible")
{this.body.showAllRows=false}
this.$958=0;if(!this.canExpandMultipleRecords&&this.$965)
delete this.$965;if(this.$987){this.setSelectedState(this.$987);delete this.$987}
if(this.isEmpty()&&((isc.ResultSet&&isc.isA.ResultSet(this.data))||(isc.ResultTree&&isc.isA.ResultTree(this.data))))
{this.$988=true}else{this.updateFieldWidthsForAutoFitValue("setData called.")}
this.$930("setData");this.updateBodyCanFocusForData()},isc.A.getAutoFitExpandField=function isc_ListGrid_getAutoFitExpandField(){if(!this.autoFitFieldsFillViewport)return null;if(this.autoFitExpandField!=null){var _1=this.getField(this.autoFitExpandField);if(_1!=null&&this.fields&&this.fields.contains(_1)&&(!this.frozenFields||!this.frozenFields.contains(_1)))
{return _1}}
var _2=[],_3=[];if(this.fields){for(var i=0;i<this.fields.length;i++){var _1=this.fields[i];if(!_1.showValueIconOnly&&(_1.type==null||(isc.SimpleType.inheritsFrom(_1.type,"text")&&!isc.SimpleType.inheritsFrom(_1.type,"image"))))
{if(!this.$989&&_1.frozen)continue;_2.add(_1);if(_1.length!=null)_3.add(_1)}}}
if(_3.length>0){_3.sortByProperty("length",Array.DESCENDING);if(_3.last().length>=this.autoFitExpandLengthThreshold||_3.length==_2.length)
{return _3[0]}}
if(_2.length>0){var i=0;_1=_2[i]
while(_1!=null&&((_1.width!=null&&_1.width!="*")||(_1.length!=null&&_1.length<this.autoFitExpandLengthThreshold)))
{i++;_1=_2[i]}
return _1}
return null},isc.A.updateFieldWidthsForAutoFitValue=function isc_ListGrid_updateFieldWidthsForAutoFitValue(_1){if(!this.body||this.body.$94m)return;var _2=this.fields||[];for(var i=0;i<_2.length;i++){var _4=this.shouldAutoFitField(_2[i]);if(!_4)continue;var _5=this.getAutoFitWidthApproach(_2[i]);if(_5=="value"||_5=="both"){this.fields.$99a=false;this.body.$94m="Updating field widths for field auto-fit"+(_1?(":"+_1):".");break}}},isc.A.invalidateCache=function isc_ListGrid_invalidateCache(){this.dataSetChanged();if(this.getCheckboxFieldPosition()!=-1){this.deselectAllRecords();this.$99b(false)}
if(this.body&&this.body.$94o)delete this.body.$94o;return this.Super("invalidateCache",arguments)},isc.A.dataSetChanged=function isc_ListGrid_dataSetChanged(){delete this.$94w},isc.A.$95y=function isc_ListGrid__canSort(_1){if(!isc.isAn.Object(_1)){_1=this.getSpecifiedField(_1)}
if(_1==null)return false;var _2=(_1.canSort==false)?false:this.canSort==false?false:true;_2=_2&&this.$99c(_1);return _2},isc.A.$99c=function isc_ListGrid__canSortData(_1){var _2=isc.isAn.Object(_1)?_1:this.getSpecifiedField(_1);if(_2==null)return false;if(isc.isAn.Array(this.data))return true;if(_2.canSortClientOnly==true){if(isc.isA.ResultSet(this.data)){if(!this.data.lengthIsKnown()||!this.data.canSortOnClient()){return false}}}
return true},isc.A.$99d=function isc_ListGrid__canMultiSort(){var _1=(this.canMultiSort!=false)&&this.canSort&&this.$99e();return _1},isc.A.$99e=function isc_ListGrid__canMultiSortData(){var _1=this.canMultiSort;if(!this.data.setSort){_1=false}else if(this.getDataSource()&&_1!=false){_1=this.getDataSource().canMultiSort&&this.canSort}
return _1},isc.A.$99f=function isc_ListGrid__getFieldSortDirection(_1){var _1=isc.isAn.Object(_1)?_1:this.getSpecifiedField(_1),_2;var _3=_1?_1.sortDirection:null;if(_3!=null){_2=Array.shouldSortAscending(_3)?"ascending":"descending"}else if(this.sortDirection!=null){_2=Array.shouldSortAscending(this.sortDirection)?"ascending":"descending"}else{_2=Array.shouldSortAscending(this.$98w)?"ascending":"descending"}
return _2},isc.A.createSelectionModel=function isc_ListGrid_createSelectionModel(){this.invokeSuper(isc.ListGrid,"createSelectionModel",arguments);if(isc.isA.Canvas(this.body)){this.body.setSelection(this.selection);if(this.frozenBody){this.frozenBody.setSelection(this.selection);this.$99g()}}},isc.A.destroySelectionModel=function isc_ListGrid_destroySelectionModel(){if(this.body)this.body.clearSelection();if(this.frozenBody)this.frozenBody.clearSelection();return this.Super("destroySelectionModel",arguments)},isc.A.performReselectOnUpdate=function isc_ListGrid_performReselectOnUpdate(_1){if(this.reselectOnUpdateNotifications=="none"){this.suppressSelectionChanged=true}
this.selection.select(_1);if(this.reselectOnUpdateNotifications=="selectionUpdated"){this.fireSelectionUpdated()}
delete this.suppressSelectionChanged},isc.A.setSelectionType=function isc_ListGrid_setSelectionType(_1,_2){this.selectionType=_1;if(this.body)this.body.selectionType=_1},isc.A.setSelectionAppearance=function isc_ListGrid_setSelectionAppearance(_1,_2){if(this.selectionAppearance==_1&&!_2)return;if(_1=="checkbox"&&this.canSelectCells){this.logWarn("ignoring selectionAppearance:'checkbox' since canSelectCells is set");_1="rowStyle"}
this.selectionAppearance=_1;if(_2&&this.selectionType==null&&!this.canSelectCells){this.selectionType=(_1=="checkbox"?isc.Selection.SIMPLE:isc.Selection.MULTIPLE)}
if(this.completeFields!=null){var _3=[];for(var i=0;i<this.completeFields.length;i++){var _5=this.completeFields[i];if(this.isCheckboxField(_5))continue;_3.add(_5)}
this.setFields(_3)}},isc.A.setBodyOverflow=function isc_ListGrid_setBodyOverflow(_1){this.bodyOverflow=_1;if(this.body)this.body.setOverflow(this.bodyOverflow)},isc.A.setBodyStyleName=function isc_ListGrid_setBodyStyleName(_1){this.bodyStyleName=_1;if(this.body&&(!this.alternateBodyStyleName||!this.alternateRecordStyles)){this.body.setStyleName(_1)}},isc.A.setAlternateBodyStyleName=function isc_ListGrid_setAlternateBodyStyleName(_1){this.alternateBodyStyleName=_1;if(this.body&&this.alternateRecordStyles){this.body.setStyleName(_1||this.bodyStyleName)}},isc.A.setAlternateRecordStyles=function isc_ListGrid_setAlternateRecordStyles(_1){if(this.alternateRecordStyles==_1)return;this.alternateRecordStyles=_1;if(this.body&&(this.alternateBodyStyleName!=null)){if(_1)this.body.setStyleName(this.alternateBodyStyleName);else this.body.setStyleName(this.bodyStyleName)}},isc.A.hasInherentHeight=function isc_ListGrid_hasInherentHeight(_1,_2,_3,_4){if(this.inherentHeight!=null)return this.inherentHeight;if(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH){return true}
return this.invokeSuper(isc.ListGrid,"hasInherentHeight",_1,_2,_3,_4)},isc.A.hasInherentWidth=function isc_ListGrid_hasInherentWidth(_1,_2,_3,_4){if(this.inherentWidth!=null)return this.inherentWidth;if(this.autoFitData==isc.Canvas.HORIZONTAL||this.autoFitData==isc.Canvas.BOTH){return true}
return this.invokeSuper(isc.ListGrid,"hasInherentWidth",_1,_2,_3,_4)},isc.A.setAutoFitData=function isc_ListGrid_setAutoFitData(_1){this.autoFitData=_1;if(this.$99h&&(_1=="both"||_1=="horizontal"||_1=="vertical")){delete this.$99h;delete this.canFreezeFields}
if(_1==null&&this.$98v){this.setOverflow(this.$98v)}else if(this.overflow!="visible"){this.$98v=this.overflow;this.setOverflow("visible")}
if(this.body){this.body.autoFitData=this.autoFitData;this.body.adjustOverflow()}},isc.A.setAutoFitExtraRecords=function isc_ListGrid_setAutoFitExtraRecords(_1){this.autoFitExtraRecords=_1;if(this.body){this.body.autoFitExtraRecords=_1;this.body.adjustOverflow()}},isc.A.setAutoFitMaxRecords=function isc_ListGrid_setAutoFitMaxRecords(_1){this.autoFitMaxRecords=_1;if(this.body){this.body.autoFitMaxRecords=_1;this.body.adjustOverflow();if(this.frozenBody){this.frozenBody.autoFitMaxRecords=_1;this.frozenBody.redraw()}}},isc.A.setAutoFitMaxHeight=function isc_ListGrid_setAutoFitMaxHeight(_1){this.autoFitMaxHeight=_1;if(this.body){this.body.adjustOverflow();if(this.frozenBody)this.frozenBody.redraw()}},isc.A.getAutoFitMaxBodyHeight=function isc_ListGrid_getAutoFitMaxBodyHeight(){if(this.autoFitMaxHeight==null)return null;var _1=this.getVBorderPad();if(this.showHeader)_1+=this.getHeaderHeight();if(this.showFilterEditor)_1+=this.filterEditorHeight;if(this.showGridSummary)_1+=this.summaryRowHeight;return this.autoFitMaxHeight-_1},isc.A.getAutoFitMinBodyHeight=function isc_ListGrid_getAutoFitMinBodyHeight(){var _1=this.getHeight(),_2=this.getVBorderPad();var _3=this.getGridMembers(),_4=this.bodyLayout||this.body;for(var i=0;i<_3.length;i++){if(_3[i]==_4)continue;_2+=_3[i].getVisibleHeight()}
return(_1-_2)},isc.A.setAutoFitMaxColumns=function isc_ListGrid_setAutoFitMaxColumns(_1){this.autoFitMaxColumns=_1;if(this.body){this.body.autoFitMaxColumns=_1;this.body.adjustOverflow()}},isc.A.setAutoFitMaxWidth=function isc_ListGrid_setAutoFitMaxWidth(_1){this.autoFitMaxWidth=_1;if(this.body){this.body.autoFitMaxWidth=_1;this.body.adjustOverflow()}},isc.A.autoFitField=function isc_ListGrid_autoFitField(_1,_2){var _3=this.getField(_1),_4=this.getFieldNum(_3);if(_3==null||_4==-1)return;var _5=this.getFieldAutoFitWidths([_3]);if(_5==null||_5[0]==null)return;this.$99i=_3;var _6=_5[0];var _7=this.shouldAutoFitField(_3);if(this.$72y&&_6!=this.$72y[_4]){this.resizeField(_1,_6,!_7)}else if(!_7)_3.width=_6;if(this.$72y&&_7)_3.$99j=this.$72y[_4];if(_2)this.scrollToColumn(_4,"left");if(this.headerMenuButton!=null&&this.headerMenuButton.masterIndex==_4){var _8=this.getFieldHeader(_4),_9=_8.getMember(this.getLocalFieldNum(_4));var _10=this.ns.EH;if(isc.Browser.isTouch||_9.containsPoint(_10.getX(),_10.getY()))
{_9.getScrollWidth(true);this.getHeaderMenuButton(_9)}else{this.headerMenuButton.hide()}}
delete this.$99i;return _6},isc.A.autoFitFields=function isc_ListGrid_autoFitFields(_1){if(!this.isDrawn()){this.logWarn("autoFitFields() called on undrawn grid. This will have no effect. For one-time auto-fit to drawn sizes, call this method after draw. To establish permanent auto-fit, use listGrid.autoFiedFieldWidths instead.");return}
if(this.body)this.body.$94m=true;this.autoSizeHeaderSpans=false;if(_1==null)_1=this.getAllCanAutoFitFields();this.$94h=true;var _2=[];for(var i=0;i<_1.length;i++){var _4=this.getField(_1[i]);if(_4!=null){delete _1[i].width;delete _1[i].$99j;_2[_2.length]=_4}}
_1=_2;var _5=this.getFieldAutoFitWidths(_1,this.autoFitFieldsFillViewport);var _6=[],_7=[],_8=[];for(var i=0;i<_1.length;i++){if(_5[i]==null)continue;var _9=_5[i],_4=_1[i],_10=this.getFieldNum(_1[i]),_11=_1[i].name;var _12=this.shouldAutoFitField(_4);if(this.$72y&&_9!=this.$72y[_10]){_6[_6.length]=_10;_7[_7.length]=_9;_8[_8.length]=!_12}else if(!_12)_4.width=_9}
this.$99k(_6,_7,_8);for(var i=0;i<_6.length;i++){if(!_8[i]){var _10=_6[i];this.getField(_10).$99j=this.$72y[_10]}}
this.$94h=false;if(this.frozenBody)this.frozenBody.$92s()
if(this.body)this.body.$92s();if(this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$99l()}
this.getFieldWidths();if(this.header)this.header.$99m()},isc.A.getAllCanAutoFitFields=function isc_ListGrid_getAllCanAutoFitFields(){var _1=this.fields;if(_1==null||_1.length==0){return _1}
var _2=[];for(var i=0;i<_1.length;i++){if(_1[i].canAutoFitWidth==false)continue;_2.add(_1[i])}
return _2},isc.A.shouldAutoFitField=function isc_ListGrid_shouldAutoFitField(_1){if(_1.autoFitWidth!=null)return _1.autoFitWidth;return this.autoFitFieldWidths},isc.A.getMinFieldWidth=function isc_ListGrid_getMinFieldWidth(_1,_2){var _3=this.minFieldWidth||1;if(!_2){var _4=_1.width;if(isc.isA.Number(_4)){_3=Math.max(_3,_1.width)}}
var _5=_1.name;if(!this.clipRecordComponents&&(this.$94f&&this.$94f[_5]))
{var _6=this.$99n(_5);if(_6>_3){_3=_6}}
return _3},isc.A.$99n=function isc_ListGrid__getFieldComponentMaxWidth(_1){var _2=this.getField(_1);if(_2==null)return 0;if(_2.$99o!=null)return _2.$99o;var _3=this.$94f[_1];var _4=0;for(var _5 in _3){var _6=window[_5];if(_6&&(_6.embeddedPosition==this.$88z)&&(_6.getVisibleWidth()>_4))
{_4=_6.getVisibleWidth()}}
_2.$99o=_4;return _4},isc.A.$94g=function isc_ListGrid__fieldComponentWidthsChanged(_1,_2){var _3=this.getField(_1);if(_3){if(_2)_3.$99o=_2;else delete _3.$99o;if(this.$99p==null){this.$99p={}}
this.$99p[_1]=true;this.fireOnPause("checkFieldComponentOverflow",{target:this,methodName:"$99q"},0)}},isc.A.$99q=function isc_ListGrid__checkFieldComponentOverflow(){if(this.fields==null)return;var _1=this.$72y||this.getFieldWidths(),_2=[],_3=[],_4=[],_5=false;for(var i=0;i<this.fields.length;i++){var _7=this.fields[i].name;if(!this.$99p[_7])continue;this.$99p[_7]=null;var _8=this.getMinFieldWidth(this.fields[i]);if(_8>_1[i]){_2.add(i);_3.add(_8);_4.add(false)}}
if(_2.length>0){this.$99k(_2,_3,_4)}},isc.A.getFieldAutoFitWidths=function isc_ListGrid_getFieldAutoFitWidths(_1,_2){if(this.body==null||_1==null)return;if(!isc.isA.Array(_1)){_1=[_1]}
var _3=[],_4=[],_5=[],_6=[];for(var i=0;i<_1.length;i++){var _8=this.getMinFieldWidth(_1[i],true),_9=_1[i],_10=this.getColNum(_9),_11=this.getAutoFitWidthApproach(_9,true),_12=_11!="value",_13=_11!="title";_4[i]=_10;_3[i]=_8;if(_12){var _14=this.getFieldHeaderButton(_10);if(_14!=null)_5[i]=_14}
if(_13){_6.add(_9)}}
if(_5.length>0){var _15=this.getAutoFitTitleWidths(_5);for(var i=0;i<_15.length;i++){if(_15[i]==null)continue;_3[i]=Math.max(_3[i],_15[i])}}
if(_6.length>0){var _16=this.getAutoFitValueWidths(_6);for(var i=0;i<_1.length;i++){if(_4[i]!=null){var _10=_4[i],_17=_16?_16[_10]:null;if(_17!=null){if(_3[i]==null||_17>_3[i]){_3[i]=_17}}}}}
if(_2){var _18=0,_19=0,_20,_21=this.getAutoFitExpandField(),_22=this.fields.indexOf(_21),_23=_4.contains(_22);if(_23){for(var i=0;i<this.fields.length;i++){var _24,_25=_4.indexOf(i);if(_25>=0){_24=_3[_25]}else{_24=this.$72y[i];if(_24==null){_23=false;break}}
if(this.fields[i].frozen){_18+=_24}else{_19+=_24}}
if(_23){_20=this.getAvailableFieldWidth(true)-_18;_23=_19<_20}
if(_23){_3[_22]+=(_20-_19)}}}
return _3},isc.A.getAutoFitTitleWidths=function isc_ListGrid_getAutoFitTitleWidths(_1){var _2="",_3={};for(var i=0;i<_1.length;i++){if(_1[i]==null){_3[i]=true;continue}
var _5=_1[i],_6=_5.titleStyle;if(_6==null)_6=_5.getStateName();_2+=_5.$245(this.getHeaderButtonTitle(_5,false))}
if(this.logIsDebugEnabled("autoFitFieldWidths")){this.logDebug("Auto Fit Title test HTML:\n"+_2,"autoFitFieldWidths")}
if(isc.ListGrid.headerWidthsTester==null){isc.ListGrid.headerWidthsTester=isc.Canvas.create({top:-100,autoDraw:true,overflow:"hidden",contents:_2,ariaState:{hidden:true}})}else{isc.ListGrid.headerWidthsTester.setContents(_2)}
if(!isc.ListGrid.headerWidthsTester.isDrawn()){isc.ListGrid.headerWidthsTester.draw()}
if(isc.ListGrid.headerWidthsTester.isDirty()){isc.ListGrid.headerWidthsTester.redraw()}
var _7=isc.ListGrid.headerWidthsTester.getHandle(),_8=_7.childNodes;var _9=[];for(var i=0,j=0;i<_1.length;i++){if(_3[i]){_9[i]=null;continue}
var _11=_8[j];if(isc.Browser.isChrome||isc.Browser.isMoz||isc.Browser.isIE9){var _12=_11.getBoundingClientRect();if(!isc.Browser.isIE||isc.Browser.isIE10){_9[i]=Math.ceil(_12.width)}else{_9[i]=(_12.width+1)<<0}}else{_9[i]=Math.ceil(_11.offsetWidth)}
j++}
if(_9.length!=_1.length){this.logWarn("getAutoFitTitleWidths(): Mismatch between headers passed in and calculated widths","autoFitFieldWidths")}
return _9});isc.evalBoundary;isc.B.push(isc.A.setAutoFitWidth=function isc_ListGrid_setAutoFitWidth(_1,_2){var _3=this.getField(_1);if(_3==null)return;if(_3.autoFitWidth==_2)return;_3.autoFitWidth=_2;if(_2)this.autoFitField(_3)},isc.A.setAutoFitFieldWidths=function isc_ListGrid_setAutoFitFieldWidths(_1,_2){if(_1==this.autoFitFieldWidths)return;this.autoFitFieldWidths=_1
if(_1){this.$935("autoFitFieldWidths enabled")}else if(!_2){if(this.showHeader&&this.headerHeight>0)this.updateHeader();this.fields.$99a=false;this.$935("autoFitFieldWidths disabled")}},isc.A.setAutoFitWidthApproach=function isc_ListGrid_setAutoFitWidthApproach(_1){if(this.autoFitWidthApproach==_1)return;this.autoFitWidthApproach=_1;if(this.showHeader&&this.headerHeight>0)this.updateHeader();this.fields.$99a=false;this.$935("autoFitFieldWidthApproach changed")},isc.A.$930=function isc_ListGrid__markBodyForRedraw(_1){if(this.bodies){this.bodies.map("markForRedraw",_1)}else if(this.body){this.markForRedraw(_1)}},isc.A.redraw=function isc_ListGrid_redraw(_1,_2,_3,_4){if(this.body){if(this.body.$95f){this.$935("scrollbar change during animation");delete this.body.$95f}}
this.invokeSuper(isc.ListGrid,"redraw",_1,_2,_3,_4)},isc.A.$983=function isc_ListGrid__observeData(_1){var _2=isc.ResultSet&&isc.isA.ResultSet(_1);if(!this.isObserving(_1,"dataChanged")){if(_2){this.observe(_1,"dataChanged",function(_3,_4,_5,_6,_7,_8){this.dataChanged(_3,_4,_5,_6,_7,_8)})}else{this.observe(_1,"dataChanged",function(){this.dataChanged()})}}
if(!this.isObserving(_1,"dataArrived")){if(_2){this.observe(_1,"dataArrived",function(_3,_4,_5){this.$99r(_3,_4,_5)})}else if(isc.ResultTree&&isc.isA.ResultTree(_1)){this.observe(_1,"dataArrived",function(_3){this.$99r(_3)})}}
if(isc.isA.Tree(_1)){this.observe(_1,"changeDataVisibility",function(_3,_4){this.$99s(_3,_4)})}},isc.A.groupTreeChanged=function isc_ListGrid_groupTreeChanged(){if(this.$99t)return;if(!this.$99u&&!this.suppressEditRowRemap)this.$985();var _1=this.getTotalRows()-1;if(this.body){if(this.body.lastOverRow>_1)delete this.body.lastOverRow;if(this.body.lastMouseOverRow>_1)delete this.body.lastMouseOverRow;if(this.body.$940>_1)delete this.body.$940}
if(this.$99v>_1)delete this.$99v;if(this.hilites)this.applyHilites();if(!this.$99w)this.redrawForDataChanged()},isc.A.$99x=function isc_ListGrid__observeGroupData(_1){this.observe(_1,"dataChanged",function(){this.groupTreeChanged()});this.observe(_1,"changeDataVisibility",function(_2,_3){this.$99s(_2,_3)})},isc.A.$99s=function isc_ListGrid__folderToggleObservation(_1,_2){if(_1!=null&&this.hilites&&_2){var _3=this.data.getLoadState(_1);if(_3==isc.Tree.LOADED||_3==isc.Tree.LOADED_PARTIAL_CHILDREN){this.applyHilites(true)}}
if(this.$95i){this.$985();this.updateFieldWidthsForAutoFitValue("Folder Toggled");return}
if(this.body)this.body.finishRowAnimation();this.$985();this.updateFieldWidthsForAutoFitValue("Folder Toggled");this.$930('folderToggled')},isc.A.toggleFolder=function isc_ListGrid_toggleFolder(_1){if(this.data.isOpen(_1)){this.closeFolder(_1)}else{this.openFolder(_1);var _2=this.data.getLoadState(_1);if(_2==isc.Tree.LOADING){var _3=this.getRecordIndex(_1);if(_3>=0)this.refreshCell(_3,this.$91i)}
if(this.frozenBody)this.frozenBody.markForRedraw()}},isc.A.openFolder=function isc_ListGrid_openFolder(_1){if(this.folderOpened!=null){this.convertToMethod("folderOpened");if(this.folderOpened(_1)==false)return false}
if(this.animateFolders){this.animateOpen(_1)}else{this.data.openFolder(_1)}},isc.A.animateOpen=function isc_ListGrid_animateOpen(_1){var _2=this.data;if(_2.isOpen(_1))return;this.$95i=true;_2.openFolder(_1);delete this.$95i;var _3=_2.getParent(_1);if(_3&&!_2.isOpen(_3))return;var _4=_2.getLoadState(_1);if(_4!=isc.Tree.LOADED&&_4!=isc.Tree.LOADED_PARTIAL_CHILDREN){this.$99y=_1;return}
this.$99z(_1)},isc.A.closeFolder=function isc_ListGrid_closeFolder(_1){if(this.folderClosed!=null){this.convertToMethod("folderClosed");if(this.folderClosed(_1)==false)return false}
if(this.getEditRow()!=null){var _2=this.getRecord(this.getEditRow());if(this.data.isDescendantOf(_2,_1))this.endEditing()}
if(this.shouldAnimateFolder(_1))
this.animateClose(_1);else
this.data.closeFolder(_1)},isc.A.animateClose=function isc_ListGrid_animateClose(_1){if(!this.data.isOpen(_1))return;var _2=this.data.getParent(_1);if(_2&&!this.data.isOpen(_2)){return this.closeFolder(_1)}
var _3=this.data,_4=_3.indexOf(_1),_5=_3.getOpenList(_1).getLength()-1;this.startRowAnimation(false,_4+1,_4+_5+1,{target:this,methodName:"redraw",args:["close folder animation complete"]},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true);var _6=this.$95i;this.$95i=true;this.data.closeFolder(_1);this.$95i=_6;if(this.body&&this.body.$90c!=null){this.body.$95h=_1}
if(this.frozenBody&&this.frozenBody.$90c!=null){this.frozenBody.$95h=_1}},isc.A.$99z=function isc_ListGrid__startFolderAnimation(_1){if(!this.shouldAnimateFolder(_1)){this.markForRedraw();return}
var _2=this.data,_3=_2.indexOf(_1),_4=_2.getOpenList(_1).getLength()-1;if(_3<0||_4<=0)return;this.startRowAnimation(true,_3+1,(_3+_4+1),{target:(this.bodyLayout||this.body),methodName:"redraw",args:["open folder animation complete"]},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true)},isc.A.$990=function isc_ListGrid__addNodeToOpenState(_1,_2,_3,_4){if(!_1.isOpen(_2)||!_1.isLoaded(_2))return false;var _5=_1.getFolders(_2),_6=false;if(_5!=null){for(var i=0;i<_5.length;i++){_6=this.$990(_1,_5[i],_3,_4)||_6}}
if(_4){var _8={};_8[_2.groupName]=_2.groupValue;_3.add(_8)}else{_3[_3.length]=_1.getPath(_2)}
return true},isc.A.$991=function isc_ListGrid__getDataChangedRecord(_1,_2,_3){if(_1==null&&_2==null)return;if(_3=="remove")return null;var _4=this.data;if(this.data.isGroupedOutput&&this.originalData)_4=this.originalData;var _5=_4.get(_2);if(_5==null)return null;if(_1!=null){var _6=this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():[];var _7=false;for(var i=0;i<_6.length;++i){if(_1[_6[i]]!=_5[_6[i]]){_7=true;break}}
if(_7){_5=null;if(_3=="update"){_2=_4.indexOf(_1);if(_2!=-1){_5=_4.get(_2)}}}}
return _5},isc.A.dataChanged=function isc_ListGrid_dataChanged(_1,_2,_3,_4,_5,_6){if(isc.$et)arguments.$eu=this;this.$99t=true;var _7=isc.isAn.Array(this.getOriginalData())||(_5||_1=="add"||_1=="remove");if(!_7&&_1=="replace"){if(_2==null||_3==null)_7=true;else{var _8=this.getOriginalData().get(_3);if(_8==null)_7=true;else{for(var i=0;i<this.fields.length;i++){if(this.shouldAutoFitField(this.fields[i])){var _10=this.getFieldName(this.fields[i]);if(_8[_10]!=_4[_10]){_7=true;break}}}}}}
var _11=false;var _12=(this.$992||this.getGroupByFields());if(_12!=null&&!this.$993){var _13=false;var _14=_1=="add",_15=!_14&&(_1=="remove"),_16=!_14&&!_15&&(_1=="update");var _8;if(_15){if(_2==null)_13=true}else if(_14||_16){if(_2==null)_14=true;_8=this.$991(_2,_3,_1);if(_8==null){if(!_14){_15=true}else{_13=true}}}else if(_1=="replace"||_5){_13=true}
if((_14||_15||_16)&&!_13){this.calculateRecordSummaries(_8,null,false,false);var _17=this.getDataSource().getPrimaryKeyFieldNames(),_18={};this.logInfo("dataChanged(): Attempting incremental regroup for operation type:"+_1+" will be treated as a[n] "+(_14?"add":_15?"remove":"update"),"grouping");if(_14){this.$994(_8,null)}else{for(var i=0;i<_17.length;i++){_18[_17[i]]=(_15?_2[_17[i]]:_8[_17[i]])}
var _19=this.data.findAll(_18);if(_19!=null){_19.removeWhere("$17b",true)}
if(!_19||_19.length!=1){_13=true}else{var _20=_19[0];if(_15){this.$994(null,_20)}else{var _21=this.getDataSource().getFieldNames();_21.addList(this.getCacheableFields().getProperty("name"));var _20=_19[0];for(var i=0;i<_12.length;i++){var _22,_10=_12[i];if(_2[_10]===_22)continue;var _23=this.getUnderlyingField(_10),_24=this.$995(_8[_10],_8,_23,_10),_25=this.$995(_2[_10],_2,_23,_10);if(_24!=_25){this.$985();this.$994(_8,_20,_4);_11=true;this.$996=true;break}}
if(_20!=_8){for(var i=0;i<_21.length;i++){_20[_21[i]]=_8[_21[i]]}
_20["_cache_"+this.ID]=_8["_cache_"+this.ID]}
if(!_11){_11=true;this.refreshGroupSummary(_20)}
var _26=this.data.getSort();if(_26!=null){this.data.setSort(_26)}}}}}
if(_13){this.$997(true,false,false,false,true,_12)}}
var _27=this.$166;if(_27!=null&&_27.length>0){var _28=this.getOriginalData();if(isc.isA.ResultSet(_28)&&((_28.shouldUpdatePartialCache()&&!_28.allMatchingRowsCached())||!_28.canSortOnClient())&&(_1=="replace"||_1=="update"))
{var _29=false;if(_2==null||_3==null){_29=true}else{var _8=this.$991(_2,_3,_1);if(_8==null)_29=true;else{for(var i=0,_30=_27.length;i<_30;++i){var _31=_27[i],_32=_31.property,_22;if(_2[_32]!==_22&&!this.fieldValuesAreEqual(_32,_2[_32],_8[_32]))
{_29=true}}}}
if(_29)this.unsort()}else{if(this.filterLocalData&&!this.data.$998&&this.data.resort)this.data.resort()}}
if(this.filterLocalData&&!this.$999){var _33=this.getOriginalData();if(_33.filterLocalData){this.$999=true;_33.filterLocalData();delete this.$999}}
if(this.$993&&(!this.isGrouped||!this.$99u)&&(!isc.isA.ResultSet(this.data)||this.data.lengthIsKnown()))
{this.$987=this.getSelectedState(true);this.regroup()}else if(this.$21z){var _34=this.$100a,_35;if(_34){_35=_34.gropuByFields||_34.groupByField}else{_35=this.groupByFields||this.$992}
this.logInfo("dataChanged() occurred while asynchronous regrouping in progress. Restarting grouping with fields:"+_35,"grouping");this.groupBy(_35)}
if(this.body)this.body.finishRowAnimation();if(!this.$99u){if(!this.suppressEditRowRemap)this.$985();if(this.$94e){var _36=this.getEditForm(),_37=this.getEditRow(),_38=this.getRecord(_37),_39={};if(isc.isA.Tree(this.data)){_38=this.data.getCleanNodeData(_38,false)}
if(_36&&_38!=null){for(var _10 in _38){if(this.$100b(_37,_10,true)!=null)continue;var _40=_36.getItem(_10),_41=_40?_40.getValue():null;if(_40&&!_40.compareValues(_41,_38[_10])&&!_40.compareValues(_40.$42o(),_41))
{continue}
_39[_10]=_38[_10]}
this.$100c(_37,this.getEditCol(),_39);var _42=_36.$40b;var _43={};isc.DynamicForm.$151(_36,_39,_43);for(var _10 in _39){_42[_10]=_43[_10]}}}}
if(!isc.isA.ResultSet(this.data)||this.data.lengthIsKnown()){this.$100d()}
if(this.$986()&&!this.$94e){this.startEditing(null,null,true,null,true)}
var _44=this.getTotalRows()-1;if(this.body){if(this.body.lastOverRow>_44)delete this.body.lastOverRow;if(this.body.lastMouseOverRow>_44)delete this.body.lastMouseOverRow;if(this.body.$940>_44)delete this.body.$940}
if(this.$99v>_44)delete this.$99v;var _45=null;if(_1!="update"&&_1!="remove"){_45=this.$991(_2,_3,_1)}
if(_11){if(this.summaryRow&&this.showGridSummary)this.summaryRow.$100e()}else{this.calculateRecordSummaries(_45,null,null,true,true,_1=="remove",_1!=null&&_1!="update")}
if(this.hilites)this.applyHilites();if(!this.$99w){if(_7)this.updateFieldWidthsForAutoFitValue(this.$97k);this.redrawForDataChanged()}
delete this.$99t;this.updateBodyCanFocusForData()},isc.A.$997=function isc_ListGrid__setMarkForRegroup(_1,_2,_3,_4,_5,_6,_7){var _8=this.$993;if(_2){this.$100f=_6;this.$982=true;this.$992=_7}else if(_3){if(_8&&!_1){this.$100g=this.$100f;delete this.$100f;delete this.$982;delete this.$992}}else if(_4){delete this.$982;delete this.$992;delete this.$100f;delete this.$100g}
this.$993=_1},isc.A.redrawForDataChanged=function isc_ListGrid_redrawForDataChanged(){if(this.frozenBody)this.frozenBody.$94s=true;this.$930(this.$97k)},isc.A.$100h=function isc_ListGrid__forceUpdateFieldWidths(_1){if(this.body&&this.fields){this.body.$94m=_1==null?true:_1;delete this.fields.$99a}},isc.A.$99r=function isc_ListGrid__dataArrived(_1,_2){var _3=this.$95z();if(this.$988||_1==0){this.$988=false;this.$100h("New dataset loaded")}
if(_3!=null&&_3!=-1){var _4=this.getFieldNum(_3),_5=this.getField(_4);if(_5&&_5.canSortClientOnly&&!this.$99c(_5)){this.$100i(null);if(_3!=null&&this.header&&isc.isA.Toolbar(this.header)){this.header.deselectButton(_3);var _6=this.header.getButton(_3);if(_6)_6.setTitle(this.getHeaderButtonTitle(_6))}
if(this.sorter&&this.sorter.setTitle)this.sorter.setTitle(this.sorter.getTitle())}}
if(!(this.canSelectAll==false)&&this.getCurrentCheckboxField()){var _7=this.getCheckboxFieldPosition(),_5=this.getField(_7);if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached())
{var _8={disabled:true,showHover:true,prompt:this.selection.selectionRangeNotLoadedMessage,title:(this.selectionType=="single")?isc.nbsp:this.$100j(false,false,true,true,_5)}}else{var _8={disabled:false,showHover:false,prompt:null,title:(this.selectionType=="single")?isc.nbsp:this.$100j(false,false,true,false,_5)}}
this.setFieldProperties(_7,_8)}
if(isc.screenReader&&this.body!=null){if(isc.isA.Tree(this.data)){var _9=_1;if(this.data.isOpen(_9)&&this.data.hasChildren(_9)){var _10=this.data.getChildren(_9);if(_10&&!_10.isEmpty())_9=_10.first()}
var _11=this.data.indexOf(_9);this.body.$90v(_11,!this.hasFocus)}}
if(this.$100k){this.$95x(this.$100l,this.$100m);this.$100l=null;this.$100m=null;this.$100k=false}
this.$930();this.$100n=true;this.dataArrived(_1,_2);delete this.$100n;this.updateBodyCanFocusForData()},isc.A.updateBodyCanFocusForData=function isc_ListGrid_updateBodyCanFocusForData(){if(this.body&&!this.canFocusInEmptyGrid){var _1=this.isEmpty();if(_1!=this.$100o){this.body.$10q();if(this.frozenBody!=null)this.frozenBody.$10q();this.$100o=_1}}},isc.A.dataArrived=function isc_ListGrid_dataArrived(_1,_2){},isc.A.$981=function isc_ListGrid__ignoreData(_1,_2){if(this.body)this.body.finishRowAnimation();if(isc.isA.Tree(this.data))this.ignore(_1,"changeDataVisibility");this.ignore(_1,"dataChanged");if(this.isObserving(_1,"dataArrived")){this.ignore(_1,"dataArrived")}
if(!_2&&this.selection)this.selection.deselectAll()},isc.A.applyFieldDefaults=function isc_ListGrid_applyFieldDefaults(_1){if(_1==null)return;var _2=this.getID();for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4==null)continue;if(_4.$100p==null)_4.$100p=_2;if(!this.allowNamelessFields&&_4[this.fieldIdProperty]==null){if(_4.dataPath==null){this.logWarn("unable to process field with no name / dataPath:"+this.echo(_4));continue}
_4[this.fieldIdProperty]="field"+this.$97l++}
var _5=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.RIGHT:isc.Canvas.LEFT;var _6=this.getFieldDisplayType(_4);var _7=(_6!=null?isc.SimpleType.getBaseType(_6):null);if(isc.SimpleType.inheritsFrom(_6,"image")){_4.$100q=this.$96l}else if(_7==this.$nq){if(_4.width==null&&_4.length!=null){if(_4.length<15&&!_4.valueMap){_4.width=_4.length*7}}}else if(_7=="integer"||_7=="float"){var _8=_4.valueMap!=null&&!isc.isAn.Array(_4.valueMap),_9=(this.isRTL()&&!this.reverseRTLAlign);_5=_8?(_9?isc.Canvas.RIGHT:isc.Canvas.LEFT):(_9?isc.Canvas.LEFT:isc.Canvas.RIGHT);_4.$100q=this.$96h}else if(_7=="date"){var _10=(this.canEdit==true&&_4.canEdit!=false)||(this.canEdit!=false&&_4.canEdit==true);_4.width=_4.width||(_10?100:80);_5=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.LEFT:isc.Canvas.RIGHT;_4.$100q=this.$96f}else if(_7=="time"){_4.width=_4.width||80;_4.$100q=this.$96i;_5=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.LEFT:isc.Canvas.RIGHT}else if(_6=="binary"||_6=="blob"||_6=="upload"||_6=="imageFile"){_4.$100q=this.$96j}else if(_6=="link"){_4.$100q=this.$96k}else if(_6=="icon"){if(_4.width==null&&_4.autoFitWidth==null){if(this.autoFitIconFields!="none"){_4.autoFitWidth=true;_4.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value"}}
if(_4.width==null&&_4.autoFitWidth==null){if(this.autoFitIconFields!="none"){_4.autoFitWidth=true;_4.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value";_4.width=this.getDefaultFieldWidth(_4)}}
_4.align=_4.align||"center";_4.$100q=this.$96m;_4.title=_4.title||isc.nbsp}else if(_6=="boolean"||_6=="checkbox"){if(_4.canToggle==null)_4.canToggle=true}
if(_4.formatCellValue!=null&&!isc.isA.Function(_4.formatCellValue))
isc.Func.replaceWithMethod(_4,"formatCellValue","value,record,rowNum,colNum,grid");if(this.showValueIconOnly(_4)){_5=isc.Canvas.CENTER;_4.iconSpacing=0;if(_4.width==null&&_4.autoFitWidth==null){if(this.autoFitIconFields!="none"){_4.autoFitWidth=true;_4.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value";_4.width=this.getDefaultFieldWidth(_4)}}}else if(_4.icon!=null&&_4.showTitle==false){_4.iconSpacing=0}
if(!_4.align)_4.align=_5;if(_4.multiple&&_4.validateEachItem==null)_4.validateEachItem=true;if(_4.hidden)_4.showIf="false"}},isc.A.getDisplayField=function isc_ListGrid_getDisplayField(_1){var _2=_1.displayField;if(_2!=null){var _3=_1.optionDataSource?isc.DataSource.get(_1.optionDataSource):null;if(_3!=null)_2=_3.getField(_2);else{_2=this.getField(_2);if(_2==null&&this.dataSource!=null){_2=this.getDataSource().getField(_1.displayField)}}}
return _2},isc.A.getFieldDisplayType=function isc_ListGrid_getFieldDisplayType(_1){var _2=this.getDisplayField(_1),_3;if(_2!=null)_3=_2.type;if(_3==null)_3=_1.type;return _3},isc.A.$100r=function isc_ListGrid__formatBooleanFieldAsImages(_1){if(this.booleanTrueImage==null&&this.booleanFalseImage==null)return false;var _2=this.getFieldDisplayType(_1),_3=(_2!=null?isc.SimpleType.getBaseType(_2):null);if(_3!=this.$nv)return false;return(!_1.suppressValueIcon&&_1.showValueIconOnly==null&&_1.valueIcons==null&&_1.formatCellValue==null)},isc.A.setFieldProperties=function isc_ListGrid_setFieldProperties(_1,_2){var _3,_4=this.getAllFields();var _5=_1;if(isc.isA.Number(_1)){_3=this.getField(_1)}else{var _6=isc.Class.getArrayItemIndex(_1,_4,this.fieldIdProperty);_3=_4[_6];_1=this.getFieldNum(_3)}
if(!_3)return;isc.addProperties(_3,_2);if(this.header!=null&&this.header.isDrawn()){var _7=this.getFieldHeader(_1),_8=_7.getMember(this.getLocalFieldNum(_1));if(_8)_8.setProperties(_2)}},isc.A.setFieldTitle=function isc_ListGrid_setFieldTitle(_1,_2){this.setFieldProperties(_1,{title:_2})},isc.A.setFieldHeaderBaseStyle=function isc_ListGrid_setFieldHeaderBaseStyle(_1,_2){var _3=this.getField(_1);if(_3==null){this.logWarn("setFieldHeaderBaseStyle() unable to find field:"+_1);return}
_3.headerBaseStyle=_2;var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){if(_2==null){var _5=this.getHeaderButtonProperties();if(_3.frozen&&_5.frozenBaseStyle){_2=_5.frozenBaseStyle}else if(_5.baseStyle){_2=_5.baseStyle}}
if(_2==null){_2=_4.getClass().getPrototype().baseStyle}
_4.setBaseStyle(_2)}},isc.A.setFieldHeaderTitleStyle=function isc_ListGrid_setFieldHeaderTitleStyle(_1,_2){var _3=this.getField(_1);if(_3==null){this.logWarn("setFieldHeaderTitleStyle() unable to find field:"+_1);return}
_3.headerTitleStyle=_2;var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){if(_2==null){var _5=this.getHeaderButtonProperties();if(_3.frozen&&_5.frozenTitleStyle){_2=_5.frozenTitleStyle}else if(_5.titleStyle){_2=_5.titleStyle}}
if(_2==null){_2=_4.getClass().getPrototype().titleStyle}
_4.setTitleStyle(_2)}},isc.A.setFieldIcon=function isc_ListGrid_setFieldIcon(_1,_2){var _3=this.getField(_1);this.setFieldProperties(_1,{icon:_2});if(_3&&_3.type=="icon"&&_3.cellIcon==null){delete _3.$96n
this.body.markForRedraw("Field icon changed")}},isc.A.setFieldCellIcon=function isc_ListGrid_setFieldCellIcon(_1,_2){this.setFieldProperties(_1,{cellIcon:_2});var _3=this.getField(_1);if(_3&&_3.type=="icon"){delete _3.$96n
this.body.markForRedraw("Field cell icon changed")}},isc.A.setAutoComplete=function isc_ListGrid_setAutoComplete(_1){this.autoComplete=_1},isc.A.setFieldAutoComplete=function isc_ListGrid_setFieldAutoComplete(_1,_2){_1=this.getField(_1);if(_1)_1.autoComplete=_2},isc.A.showFields=function isc_ListGrid_showFields(_1,_2){return this.showField(_1,_2)},isc.A.showField=function isc_ListGrid_showField(_1,_2){arguments.$eu=this;if(this.completeFields==null){this.setFields(this.completeFields||this.fields);return this.showField(_1,_2)}
if(!isc.isAn.Array(_1)){_1=[_1]}
var _3=true,_4=true;var _5=this.frozenFields||this.$989;for(var i=0;i<_1.length;i++){var _7=_1[i],_8=_7;_8=this.getSpecifiedField(_8);if(_8==null){_1[i]=null;this.logWarn("showField(): unable to find field object for field: "+_7+". Taking no action. Call setFields() to add new fields.")
continue}
_3=false;_8.hidden=false;if(_8.detail){_8.showIf="true"}else{if(_8.showIf!=null)_8.showIf=null}
if(_8.frozen||_8.masterIndex!=null&&_8.masterIndex!=i){_5=true}
if(this.spanMap&&this.spanMap[_8.name]!=null)_5=true;if(_5)continue;if(this.fields.contains(_8)){_1[i]=null;continue}
_4=false;_1[i]=_8}
if(_5){this.setFields(this.completeFields||this.fields);if(this.selectHeaderOnSort&&this.$166)this.selectSortFieldHeaderButton();this.handleFieldStateChanged();return}
if(_3||_4)return;this.deriveVisibleFields();_1.removeEmpty();var _9=[],_10=0;for(var i=0;i<this.fields.length;i++){var _11=_1.indexOf(this.fields[i]);if(_11!=-1){_9[_11]=i;_10++;if(_10==_1.length)break}}
var _12=this.header;if(_12!=null){if(!_2)this.header.hPolicy="fill";this.$100s=true;this.header.addButtons(_1.duplicate(),_9);delete this.$100s}
if(this.body){if(this.$94e){var _13=this.getEditRow(),_14=this.getRecord(_13),_15=this.getEditedRecord(_13),_16=false,_17=this.getEditForm().items,_18=_17.length-1,_19=_17[_18],_20=_19.colNum;_9.sort();for(var i=_9.length-1;i>=0;i--){var _21=i+1,_22=_9[i],_23=(_22-i);if(!_16&&this.$96u>=_22){this.$96u+=_21}
var _8=this.fields[_22],_24=this.getEditFormItemFieldWidths(_14)[_22],_25;while(_19!=null&&_20>=_23){_19.colNum+=_21;_18--;_19=(_18>=0)?_17[_18]:null;_20=(_19!=null)?_19.colNum:null}
var _26=this.body.getDrawArea();if(!this.editByCell&&_22>=_26[2]&&_22<=_26[3]){_25=this.getEditItem(_8,_14,_15,_13,_22,_24)}
if(_25!=null){this.$20w.addItems([_25],_18+1)}}}
this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$100t(this.body);if(this.body.isDrawn())this.body.redraw("show field")}
if(this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$99l()}
if(this.sortField!=null){this.sortFieldNum=null;this.sortFieldNum=this.$95z();if(this.selectHeaderOnSort)this.selectSortFieldHeaderButton()}
if(this.filterEditor!=null)this.filterEditor.showField(_1,_2);this.recalculateSummaries(null,_1);if(this.summaryRow!=null&&this.showGridSummary){this.summaryRow.showField(_1,_2)}
if(this.hilites)this.applyHilites()
this.markForRedraw("showField");this.handleFieldStateChanged();this.$175()},isc.A.selectSortFieldHeaderButton=function isc_ListGrid_selectSortFieldHeaderButton(){var _1=this.getSort();if(_1&&_1.length>0){var _2=this.getFieldNum(_1[0].property);if(_2>=0){var _3=this.getFieldHeader(_2),_4=this.getFieldHeaderButton(_2);if(_4){_3.selectButton(_4);if(isc.Browser.isTouch&&this.shouldShowHeaderMenuButton(_4,true)){this.$100u(_4)}}}}},isc.A.hideFields=function isc_ListGrid_hideFields(_1,_2){return this.hideField(_1,_2)},isc.A.hideField=function isc_ListGrid_hideField(_1,_2){arguments.$eu=this;if(this.completeFields==null){this.setFields(this.completeFields||this.fields);return this.hideField(_1,_2)}
var _3=true,_4=true;if(!isc.isAn.Array(_1)){_1=[_1]}
var _5=[];if(_1.length==this.getFields().length){this.logWarn("Attempt to hide all fields in one call - disallowed.");return}
var _6=this.frozenFields;var _7=this.$94e,_8=_7?this.getEditRow():null,_9=_7?this.getEditCol():null,_10=false;for(var i=0;i<_1.length;i++){var _12=_1[i],_13=_12;_13=this.getSpecifiedField(_13);if(_13==null){this.logWarn("hideField(): unable to find field object for field: "+_12+". Taking no action. To add this field use the setFields() method.");_1[i]=null;continue}
_3=false;_13.showIf=this.$16b;if(!this.fields.contains(_13)){_1[i]=null;continue}
_4=false;_13.hidden=true;if(_6)continue;var _14=this.fields.indexOf(_13),_15=this.getFieldName(_14);_5.add(_14);if(_7){if(_9==_14)_10=true;var _16=this.getEditFormItem(_15);if(_16&&_16.hasFocus)_16.blurItem();if(this.discardEditsOnHideField){this.clearEditValue(_8,_14,true)}}}
if(_3||_4)return;if(_6){this.setFields(this.completeFields||this.fields);if(this.selectHeaderOnSort&&this.$166)this.selectSortFieldHeaderButton();this.handleFieldStateChanged();return}
_1.removeEmpty();if(_7){if(_10){if(this.editByCell){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_7=false}else{var _17=_9-1,_18=false;while(_17>=0){if(!_5.contains(_17)&&this.canEditCell(_8,_17)&&this.$100v(_8,_17))
{_18=true;break}
_17--}
if(!_18){_17=_9+1;while(_17<this.fields.length){if(!_5.contains(_17)&&this.canEditCell(_8,_17)&&this.$100v(_8,_17))
{_18=true;break}
_17++}}
if(!_18){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_7=false}else{this.$100w(_8,_17,!this.getEditForm().hasFocus)}}}}
this.deriveVisibleFields();var _19=this.header;if(_19!=null){if(!_2)this.header.hPolicy="fill";var _20=[];for(var i=0;i<_5.length;i++){var _14=_5[i];var _21=this.header.getButton(_14);_20[_20.length]=_21;if(this.headerMenuButton&&this.headerMenuButton.masterElement==_21){this.headerMenuButton.depeer()}}
this.header.removeButtons(_20.duplicate());_20.map("destroy");if(this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$99l()}}
var _22=[];if(_7){_5.sort();var _23=this.$20w,_24=_23.getItems(),_25=_24.length-1,_26=_24[_25],_27=_26.colNum,_28=false;for(var i=_5.length-1;i>=0;i--){var _29=i+1,_30=_5[i];if(!_28&&this.$96u>_30){this.$96u-=_29;_28=true}
while(_26!=null&&_27>=_30){if(_27==_30)_22.add(_26);else _26.colNum-=_29;_25--;_26=(_25>=0)?_24[_25]:null;_27=(_26!=null)?_26.colNum:null}}}
if(this.body){this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$100t(this.body);if(this.body.isDrawn())this.body.redraw("hide field")}
if(_7&&_22.length>0){for(var i=0;i<_22.length;i++){var _26=_22[i];if(_26.destroyed)continue;this.$20w.removeItems([_26])}}
if(this.sortField!=null){this.sortFieldNum=null;this.sortFieldNum=this.$95z();if(this.selectHeaderOnSort&&this.header)this.selectSortFieldHeaderButton()}
if(this.filterEditor!=null)this.filterEditor.hideField(_1,_2);if(this.summaryRow&&this.showGridSummary){this.summaryRow.$100e();this.summaryRow.hideField(_1,_2)}
this.handleFieldStateChanged();this.$175()});isc.evalBoundary;isc.B.push(isc.A.fieldIsVisible=function isc_ListGrid_fieldIsVisible(_1,_2){var _3=_1;if(!isc.isAn.Object(_3))_3=this.getSpecifiedField(_1);if(_2){if(_3.showIf=="false")return false;else if(_3.showIf==null)return true}
return this.fields.contains(_3)},isc.A.showActionInPanel=function isc_ListGrid_showActionInPanel(_1){if(_1.name=="editNew")return true;return this.Super("showActionInPanel",arguments)},isc.A.setFields=function isc_ListGrid_setFields(_1){if(isc.$et)arguments.$eu=this;var _2=false;if(_1!=null&&this.fields!=null&&this.fields!=_1&&this.completeFields!=_1)
{delete this.fields.$99a}
if(isc.isAn.Array(_1)){var _3=0;for(var i=0;i<_1.length;i++){if(_1[i]==null){this.logWarn("listGrid.setFields : null entry in new fields array - removing the entry");_3+=1;continue}
if(_3>0)_1[i-_3]=_1[i];if(_1[i]&&(_1[i].userFormula||_1[i][this.$97q])){_2=true}}
if(_3>0)_1.length=_1.length-_3}
if(!_1&&this.getDataSource()&&!this.getDataSource().hasFields()){this.logWarn("ListGrid.setFields() : neither this ListGrid nor its dataSource have fields")}
if(!this.booleanFalseImage&&!this.booleanTrueImage&&!this.booleanPartialImage){this.booleanTrueImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("checkedImage"):null;this.booleanFalseImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("uncheckedImage"):null;this.booleanPartialImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("partialSelectedImage"):null;this.booleanImageWidth=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null;this.booleanImageHeight=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null}
if(!this.printBooleanFalseImage&&!this.printBooleanTrueImage&&!this.printBooleanPartialImage){this.printBooleanTrueImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("printCheckedImage"):null;this.printBooleanFalseImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("printUncheckedImage"):null;this.printBooleanPartialImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("printPartialSelectedImage"):null}
var _5=this.$95z(),_6=(_5!=null&&this.fields?this.fields[_5]:null);var _7=this.$94e,_8=this.getEditRow(),_9=this.getEditCol(),_10=this.$20w,_11=this.fields?this.getEditFieldName():null;if(this.completeFields==null)this.fields=[];if(!this.$100x){this.completeFields=this.bindToDataSource(_1,this.canPickOmittedFields)}
if(this.completeFields==null)this.completeFields=[];if(this.shouldShowRowNumberField()){var _12=this.getCurrentRowNumberField(),_13=this.getRowNumberFieldPosition(),_14=!_12;if(_14&&_1&&_1.find(this.fieldIdProperty,"$952")!=null)
{_14=false}
if(_14)_12=this.getRowNumberField();if(_14)this.completeFields.addAt(_12,_13);else this.completeFields.slideList([_12],_13)}else{var _12=this.getCurrentRowNumberField();if(_12)this.completeFields.remove(_12)}
if(this.shouldShowCheckboxField()){var _15=this.getCurrentCheckboxField(),_16=this.getCheckboxFieldPosition(),_14=!_15;if(_14&&_1&&_1.find(this.fieldIdProperty,"_checkboxField")){_14=false}
if(_14)_15=this.getCheckboxField();if(_16>this.completeFields.length)_16=this.completeFields.length;if(_14)this.completeFields.addAt(_15,_16);else this.completeFields.slideList([_15],_16)}else{var _15=this.getCurrentCheckboxField();if(_15)this.completeFields.remove(_15)}
if(this.shouldShowExpansionField()){var _17=this.getCurrentExpansionField(),_18=this.getExpansionFieldPosition(),_14=!_17;if(_14)_17=this.getExpansionField();if(_14)this.completeFields.addAt(_17,_18);else this.completeFields.slideList([_17],_18)}else{var _17=this.getCurrentExpansionField();if(_17)this.completeFields.remove(_17)}
if(this.shouldShowRemoveField()){var _19=this.completeFields.findIndex("isRemoveField",true),_20=(_19>=0)?this.completeFields[_19]:{excludeFromState:true,isRemoveField:true};if(_19==-1&&_1){_19=_1.findIndex("isRemoveField",true)}
if(!_20.$100y){isc.addProperties(_20,this.removeFieldDefaults,this.removeFieldProperties);if(_20.name==null)_20.name="$100z";if(_20.title==null)_20.title=this.removeFieldTitle;if(_20.cellIcon==null&&_20.formatCellValue==null){_20.formatCellValue=function(_39,_40,_41,_42,_43){if(_43.recordCanRemoveProperty&&_40&&_40[_43.recordCanRemoveProperty]===false)return"&nbsp;";if(!this.removeIconHTML){this.removeIconHTML=isc.Canvas.imgHTML({src:_43.removeIcon,width:_43.removeIconSize,height:_43.removeIconSize,extraCSSText:"cursor:"+isc.Canvas.HAND});this.unremoveIconHTML=isc.Canvas.imgHTML({src:_43.unremoveIcon,width:_43.removeIconSize,height:_43.removeIconSize,extraCSSText:"cursor:"+isc.Canvas.HAND})}
if(_43.recordMarkedAsRemoved(_41)){return this.unremoveIconHTML}else{return this.removeIconHTML}}
_20.iconSize=this.removeIconSize}
if(_19==-1){this.completeFields.add(_20)}
_20.$100y=true}}
if(this.headerSpans){this.reorderFieldsForHeaderSpans();this.spanMap=this.buildSpanMap()}
var _21=false;if(this.fieldState!=null){this.setFieldState();_21=true}
var _22=false;if(this.groupState!=null){this.setGroupState(this.groupState);_22=true}
this.deriveVisibleFields();this.applyFieldDefaults(this.completeFields);this.$175();if(isc.DataSource)this.$1000();if(this.fields.length==0&&this.completeFields.length>0){this.logWarn("All specified fields for this component are hidden. Note that fields may be hidden via 'showIf' or 'detail' attribute values. In order to display data this grid must have some visible fields.")}
this.$72y=null;var _23,_24,_25;if(_7){this.storeUpdatedEditorValue();_23=this.fields.findIndex(this.fieldIdProperty,_11);if(_23!=-1&&!this.canEditCell(_8,_23))
_23=-1;if(_23==-1){var _26;if(!this.editByCell)_26=this.findNextEditCell(_8,0,1,true,true,false,true);if(_26!=null&&_26[0]==_8){_23=_26[1]}
if(_23==-1){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_7=false}}else{var _27=_10.getItem(_11);if(_27){_25=_27.hasFocus;if(_25)_10.$402()}
_24=true}
if(_7)this.hideInlineEditor(false,true)}
var _28=(this.canFreezeFields==null||this.$99h)&&this.fixedRecordHeights!=false&&this.fixedFieldWidths!=false&&this.autoFitData!="horizontal"&&this.autoFitData!="both"&&this.bodyOverflow!="visible";if(_28){if(this.completeFields.getProperty("overflow").contains("visible"))_28=false}
if(_28){this.$99h=true;this.canFreezeFields=true}else if(this.$99h){delete this.$99h;this.canFreezeFields=null}
if(this.canSelectCells)this.selection.numCols=this.fields.length;var _29=this.showHeader&&this.headerHeight>0&&this.header!=null;if(_29){this.updateHeader()}
var _30=false;if(this.$984){delete this.$984;this.setSort(this.getSort());_30=true}else if(this.sortState!=null){this.setSortState(this.sortState);_30=true}else{var _5=this.$95z();if(_5!=null&&this.$99c(_5)){this.setSort(this.getSort())}}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate())}
this.updateFieldDependencies();this.calculateRecordSummaries(null,null,true,true,false,!_2);this.updateBody();if(this.filterEditor){this.filterEditor.updateDataSource(this.getDataSource());var _31=this.completeFields||[];this.filterEditor.setFields(_31.duplicate())}
this.layoutChildren(this.$97m);if(_29&&this.body!=null){this.syncHeaderScrolling(this.body.getScrollLeft())}
if(this.$1001!=null){var _32={};for(var i in this.$1001){if(this.$1001[i]==null)continue;var _33=this.$1001[i].$1002,_34=(this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():[]);for(var _35 in _33){if(!this.fields.containsProperty(this.fieldIdProperty,_35)&&!_34.contains(_35)){_32[_35]=true;this.clearEditValue(_33,_35,true)}}}
_32=isc.getKeys(_32);if(_32.length>0){this.logInfo("'setFields()' removed the following fields which had pending edit values for some row[s]: '"+_32.join("', '")+"'.\nEdit values for these fields have been dropped.","gridEdit")}}
if(_7){if(_24){this.showInlineEditor(_8,_23,false,false,true);if(_25)_10.$41w(_36)}else{this.$100w(_8,_23,!_25)}
if(_25){var _36=this.getEditFieldName();if(_36==_11){_10.$41w(_36)}else{_10.focusInItem(_36)}}}
if(this.hilites!=null)this.applyHilites();if(!this.$1003)this.defaultFieldState=this.getFieldState();if(this.viewState){var _37=this.viewState;this.viewState=null;if(_21){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.field}
_37="("+isc.Comm.serialize(_38,false)+")"}
if(_30){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.sort}
_37="("+isc.Comm.serialize(_38,false)+")"}
if(this.hiliteState){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.hilite}
_37="("+isc.Comm.serialize(_38,false)+")"}
if(_22){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.group}
_37="("+isc.Comm.serialize(_38,false)+")"}
this.setViewState(_37)}},isc.A.addField=function isc_ListGrid_addField(_1,_2){return this.Super("addField",[_1,_2,this.completeFields],arguments)},isc.A.removeField=function isc_ListGrid_removeField(_1){return this.Super("removeField",[_1,this.completeFields],arguments)},isc.A.shouldShowCheckboxField=function isc_ListGrid_shouldShowCheckboxField(){if(this.fieldSourceGrid)return this.fieldSourceGrid.shouldShowCheckboxField();return(this.selectionAppearance==this.$42x&&this.selectionType!=this.$sw&&!isc.isA.TreeGrid(this))},isc.A.focusInFilterEditor=function isc_ListGrid_focusInFilterEditor(_1){if(this.filterEditor==null)return;var _2=_1!=null?this.getColNum(_1):null;this.filterEditor.startEditing(0,_2)},isc.A.filterByEditor=function isc_ListGrid_filterByEditor(){if(this.filterEditor!=null)this.filterEditor.performAction()},isc.A.bindToDataSource=function isc_ListGrid_bindToDataSource(_1,_2,_3,_4,_5,_6){var _7=false;var _8=this.invokeSuper(isc.ListGrid,"bindToDataSource",_1,_2,_3,_4,_5,_6);if(_8!=null){for(var i=0;i<_8.length;i++){var _10=_8[i];if(this.showDetailFields){if(_10.showIf==null&&_10.detail==true){_10.showIf=this.$16b}
if(this.$1004(_10.name)){_7=true}
if(this.$71y(_10)){_10.$71y=true}}
var _11=this.getFieldEditorValidators(_10);if(_11)_10.validators=(_10.validators||[]).addList(_11)}}
this.$1005=!_7;return _8},isc.A.$71y=function isc_ListGrid__isFieldObject(_1){if(_1==null)return false;return(!_1.isRemoveField&&!_1.$953&&!_1.$956&&!_1.$20y)},isc.A.$1004=function isc_ListGrid__isNumberOrArrayProp(_1){if(this.$97n[_1]!=null)return true;if(isc.isA.Number(parseInt(_1))&&parseInt(_1).toString()==_1)return true;return false},isc.A.setFieldState=function isc_ListGrid_setFieldState(_1){if(this.completeFields==null)this.setFields(this.fields);if(_1==null&&this.fieldState!=null){if(isc.isA.String(this.fieldState)){_1=this.evalViewState(this.fieldState,"fieldState")}else{_1=this.fieldState}
this.completeFields=this.$16z(_1);this.fieldState=null;return}
_1=this.evalViewState(_1,"fieldState")
if(_1){this.completeFields=this.$16z(_1);this.refreshFields()}},isc.A.handleFieldStateChanged=function isc_ListGrid_handleFieldStateChanged(_1){this.fieldStateChanged();this.handleViewStateChanged();if(this.canSelectCells&&!_1){this.selection.deselectAll();if(this.fields&&this.fields.length!=this.selection.numCols){this.selection.numCols=this.fields.length}}},isc.A.setHilites=function isc_ListGrid_setHilites(){this.Super("setHilites",arguments);this.handleViewStateChanged()},isc.A.$16j=function isc_ListGrid__handleHilitesChanged(_1){this.Super("$16j",arguments);if(isc.isA.Function(this.hilitesChanged))this.hilitesChanged()},isc.A.redrawHilites=function isc_ListGrid_redrawHilites(){this.$930("redrawHilites")},isc.A.getCheckboxField=function isc_ListGrid_getCheckboxField(){var _1=this,_2={width:this.checkboxFieldHSpace+this.$1006(),getAutoFreezePosition:function(){return _1.getCheckboxFieldPosition()}};isc.addProperties(_2,this.checkboxFieldDefaults,this.checkboxFieldProperties);_2.title=(this.canSelectAll==false||this.selectionType=="single"?isc.nbsp:this.$100j(false,false,true,false,_2));return _2},isc.A.getCurrentCheckboxField=function isc_ListGrid_getCurrentCheckboxField(){var _1=this.completeFields||this.fields;if(!_1)return null;var _2=_1.find(this.fieldIdProperty,"_checkboxField");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.$1006=function isc_ListGrid__getCheckboxFieldImageWidth(){return this.checkboxFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.$1007=function isc_ListGrid__getCheckboxFieldImageHeight(){return this.checkboxFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.isCheckboxField=function isc_ListGrid_isCheckboxField(_1){if(!_1||!_1.$20y)return false;else return true},isc.A.getCheckboxFieldPosition=function isc_ListGrid_getCheckboxFieldPosition(){if(this.fieldSourceGrid)return this.fieldSourceGrid.getCheckboxFieldPosition();if(this.selectionAppearance!="checkbox"||isc.isA.TreeGrid(this))return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;return _1},isc.A.getSelectedState=function isc_ListGrid_getSelectedState(_1,_2){if(!this.selection)return null;if(!this.dataSource||isc.isAn.emptyObject(this.getDataSource().getPrimaryKeyFields()))
{if(!_1){this.logWarn("can't getSelectedState without a DataSource with a primary key field set")}
return null}
var _3=[];if(this.canSelectCells){var _4=this.selection.getSelectedCells();for(var i=0;i<_4.length;i++){var _6=_4[i],_7=this.getPrimaryKeys(_6[0]),_8=null;for(var k=0;k<_3.length;k++){if(this.objectsAreEqual(_7,_3[k].PKs)){_8=_3[k];break}}
if(!_8){_3.add({PKs:_7,cells:[]});_8=_3[_3.length-1]}
_8.cells.add(_6[1])}}else{var _4=this.getSelection();var _10=_4.length;for(var i=0;i<_10;++i){_3[i]=this.getPrimaryKeys(_4[i])}}
if(_2)return _3;return isc.Comm.serialize(_3,false)},isc.A.getCellSelection=function isc_ListGrid_getCellSelection(){if(!this.canSelectCells)return null;return this.getSelectionObject()},isc.A.setSelectedState=function isc_ListGrid_setSelectedState(_1){_1=this.evalViewState(_1,"selectedState")
if(!_1||_1.length==0){if(this.selection)this.selection.deselectAll();this.fireSelectionUpdated();return}
if(_1[0].PKs&&!this.canSelectCells){if(this.selection)this.selection.deselectAll();this.fireSelectionUpdated();this.logWarn("Cannot restore CellSelection state to a ListGrid with canSelectCells: false.");return}else if(!_1[0].PKs&&this.canSelectCells){if(this.selection)this.selection.deselectAll();this.fireSelectionUpdated();this.logWarn("Cannot restore Selection state to a ListGrid with canSelectCells: true.");return}
var _2=this.selection,_3=this.originalData||this.data;if(isc.ResultSet&&isc.isA.ResultSet(_3)&&!_3.lengthIsKnown())return;if(_3&&_2){_2.deselectAll();var _4=[];for(var i=0;i<_1.length;i++){var _6=_1[i]
var _7=_1[i];if(isc.isAn.Object(_6)&&_6.cells!=null){_7=_1[i].PKs}
var _8=_3.findByKeys(_7,this.getDataSource());if(_8!=-1){if(this.canSelectCells){var _9=_6.cells;for(var k=0;k<_9.length;k++){_4.add([_8,_9[k]])}}else{_4.add(_3.get(_8))}}}
if(this.canSelectCells){this.selection.selectCellList(_4)}else{this.selection.selectList(_4)}
this.fireSelectionUpdated()}},isc.A.getSortState=function isc_ListGrid_getSortState(_1){if(this.logIsInfoEnabled("sorting")){this.logInfo("\ngrid.sortFieldNum is: "+this.sortFieldNum+"\ngrid.sortField is: "+this.sortField+"\ngrid.getField(grid.sortFieldNum) is:\n"+isc.echoAll(this.getField(this.sortFieldNum))+"\n-----------------------------------------\ngrid.$95z() is: "+this.$95z()+"\ngrid.getField(grid.$95z()) is:\n"+isc.echoAll(this.getField(this.$95z()))+"\n","sorting")}
var _2=this.$95z();if(_2!=null||(this.$166&&this.$166.length>0)){var _3=(_2!=null?this.getField(_2):null),_4=_3!=null?this.getFieldName(_3):null,_5=this.$99f(_3),_6={fieldName:_4,sortDir:_5};if(this.$166){var _7=isc.shallowClone(this.$166);_7.clearProperty("primarySort");_7.clearProperty("sortIndex");_7.clearProperty("normalizer");_7.clearProperty("context");_7.clearProperty("$m5");_6.sortSpecifiers=_7}
if(_1)return _6;return"("+isc.Comm.serialize(_6,false)+")"}},isc.A.setSortState=function isc_ListGrid_setSortState(_1){_1=this.evalViewState(_1,"sortState")
if(!_1){if(this.getSort())this.clearSort();return}
if(_1.sortSpecifiers){this.setSort(isc.shallowClone(_1.sortSpecifiers))}else if(_1.fieldName==null){this.clearSort()}else{var _2=this.getFieldNum(_1.fieldName)
if(_2!=-1)this.sort(_2,_1.sortDir)}},isc.A.getViewState=function isc_ListGrid_getViewState(_1){var _2={},_3=this.getSelectedState(true,true),_4=this.getFieldState(true),_5=this.getSortState(true),_6=this.getHiliteState(true),_7=this.getGroupState(true),_8=0;if(_3&&_3!=""){_8++;_2.selected=_3}
if(_4&&_4!=""){_8++;_2.field=_4}
if(_5&&_5!=""){_8++;_2.sort=_5}
if(_6&&_6!=""){_8++;_2.hilite=_6}
if(_7&&_7!=""){_8++;_2.group=_7}
if(_8>0){if(_1)return _2;return"("+isc.Comm.serialize(_2,false)+")"}},isc.A.getGroupState=function isc_ListGrid_getGroupState(_1){var i,_3,_4,_5=this.getGroupByFields();if(_5==null){return""}else{_4=[];for(i=0;i<_5.length;i++){var _6=this.completeFields||this.fields||[];_3=_6.find("name",_5[i]);if(_3){_4.add({fieldName:_5[i],groupingMode:_3.groupingMode,groupGranularity:_3.groupGranularity,groupPrecision:_3.groupPrecision})}}}
if(_1)return _4;return"("+isc.Comm.serialize(_4,false)+")"},isc.A.setGroupState=function isc_ListGrid_setGroupState(_1){var _2=[];if(_1){if(isc.isA.String(_1)){if(!_1.startsWith("(")){_1=_1.split(",");for(var i=0;i<_1.length;i++){_1[i]={fieldName:_1[i]}}}else{_1=this.evalViewState(_1,"groupState")}}
for(var i=0;i<_1.length;i++){var _4=_1[i]
var _5=this.makeGroupSpecifier(_4.property||_4.fieldName,_4.grouping||_4.groupingMode,_4.granularity||_4.groupGranularity,_4.precision||_4.groupPrecision);if(_5)_2.add(_5)}}else{_2=null}
this.setGroupSpecifiers(_2)},isc.A.setViewState=function isc_ListGrid_setViewState(_1){_1=this.evalViewState(_1,"viewState")
if(!_1)return;var _2=this.$1008;if(_1.field)this.setFieldState(_1.field);if(_1.group&&_1.group!="")this.setGroupState(_1.group);if(_1.sort&&_1.sort!="")this.setSortState(_1.sort);if(_1.hilite&&_1.hilite!="")this.setHiliteState(_1.hilite);if(_1.selected&&_1.selected!="")this.setSelectedState(_1.selected);if(_2&&!this.isDrawn()){this.$1008=true}},isc.A.handleGroupStateChanged=function isc_ListGrid_handleGroupStateChanged(){var _1=this.getGroupState();if(this.currentGroupState==_1)return;this.currentGroupState=_1;this.groupStateChanged();this.handleViewStateChanged()},isc.A.groupStateChanged=function isc_ListGrid_groupStateChanged(){},isc.A.handleViewStateChanged=function isc_ListGrid_handleViewStateChanged(){this.fireOnPause("viewStateChangeNotification",{target:this,methodName:"viewStateChanged"},0)},isc.A.getViewStateChangedFunction=function isc_ListGrid_getViewStateChangedFunction(){if(this.$1009==null){var _1=this;this.$1009=function(){if(_1.destroyed)return;_1.viewStateChanged()}}
return this.$1009},isc.A.viewStateChanged=function isc_ListGrid_viewStateChanged(){},isc.A.setDataSource=function isc_ListGrid_setDataSource(_1,_2){var _3=this.getDataSource();if(_3!=null&&_3!=_1&&_3.ID!=_1){this.ungroup()}
this.discardAllEdits();if(this.$94e)this.hideInlineEditor();if(this.$20w){this.$20w.destroy();delete this.$20w}
this.Super("setDataSource",arguments);this.clearFilterValues()},isc.A.deriveVisibleFields=function isc_ListGrid_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields));delete this.fields.$99a
this.deriveFrozenFields();this.refreshMasterIndex()},isc.A.refreshFields=function isc_ListGrid_refreshFields(){if(!this.completeFields)return;this.$1003=true;this.$100x=true;this.setFields(this.completeFields);delete this.$100x;delete this.$1003},isc.A.getCurrentFieldWidths=function isc_ListGrid_getCurrentFieldWidths(){var _1=[];for(var i=0;i<this.fields.length;i++){_1[i]=this.getFieldWidth(i)}
return _1},isc.A.getFieldWidths=function isc_ListGrid_getFieldWidths(_1){var _2=this.$101a();if(this.autoFitFieldWidths&&!this.$101b&&!this.$101c)
{this.$101b=true;var _3=_2.duplicate(),_4=null;if(this.frozenFields!=null){var _5=this.freezeStart();if(_5){_4=_3.slice(0,this.frozenFields.length);_3=_3.slice(this.frozenFields.length)}else{_4=_3.slice(-this.frozenFields.length);_3=_3.slice(0,-this.frozenFields.length)}}
var _6=this.getAvailableFieldWidth(true),_7=_3.sum();var _8=_6;if(_4!=null)_8-=_4.sum();var _9=true;if(this.autoFitWidthApproach!="title"){var _10=this.getDrawArea();if(!this.data||_10==null||Array.isLoading(this.data.get(_10[0]))){_9=false}}
if(_7<_8&&_9){var _11=this.getAutoFitExpandField();if(_11){var _12=this.getFieldNum(_11);var _13=_8-_7;_2[_12]+=_13;var _14=this.getFieldHeaderButton(_12);if(_14&&_14.isDrawn()){_14.setWidth(_2[_12])}}}else if(_7>_8&&this.autoFitClipFields!=null){var _15;var _16=this.autoFitClipFields;for(var i=0;i<_16.length;i++){var _18=this.getField(_16[i]),_19=this.getFieldNum(_18);if(_18==null||_19<0)continue;if(!this.$989&&_18.frozen){this.logInfo("auto-fitting field:"+_18.name+" is present in the autoFitClipFields array for this grid, but is currently frozen. This is not supported - the field will not be clipped.","frozenFields");continue}
delete _18.$99j;var _20=this.getFieldHeader(_19);if(_20&&_20.isDrawn()){_14=_20.getMember(this.getLocalFieldNum(_19));_14.setWidth(_18.width||"*");_14.setOverflow("hidden")}}
if(this.header&&this.header.isDrawn()){var _21=this.$97o;if(_1!=null)_21+=_1;_15=this.header.hPolicy;this.header.hPolicy="fill";this.header.reflowNow(_21);this.header.hPolicy=_15;if(this.frozenHeader){this.frozenHeader.hPolicy="fill";this.frozenHeader.reflowNow(_21);this.frozenHeader.hPolicy=_15}}
_2=this.$101a()}
this.$101b=false}
return _2},isc.A.$101a=function isc_ListGrid__getCalculatedFieldWidths(){var _1=this.header;if(isc.isA.Layout(_1)&&_1.isDrawn()){if(_1.$26w){_1.reflowNow()}
var _2=_1.members;for(var i=0;i<_2.length;i++){if(_2[i].isDirty())_2[i].redraw();if(_2[i].label!=null&&_2[i].label.isDirty())_2[i].label.redraw()}
var _4=_1.getMemberSizes();if(_4.length>0){if(this.allowMismatchedHeaderBodyBorder){var _5=_1.getLeftBorderSize()+_1.getLeftMargin(),_6=_1.getRightBorderSize()+_1.getRightMargin();if(_5!=0){_4[0]+=_5}}
var _7=_4.sum(),_8=_1.getInnerWidth();if(this.allowMismatchedHeaderBodyBorder){var _9=_7-_8;if(_9>0){_4[_4.length-1]+=Math.min(_9,_6)}}}
if(this.frozenFields){var _10=this.frozenHeader.getMemberSizes();_4.addListAt(_10,this.freezeStart()?0:_4.length)}}else{var _4=this.getStretchResizeWidths()}
return _4},isc.A.getStretchResizeWidths=function isc_ListGrid_getStretchResizeWidths(){if(this.fields==null)return[];var _1=this.fields.getProperty("width"),_2=this.fields.getProperty("$99j"),_3=[];for(var i=0;i<_1.length;i++){if(_2[i]!=null){if(isc.isA.String(_1[i])){_3.add(i)}else if((_1[i]==null)||(_1[i]<_2[i])){_1[i]=_2[i]}}}
var _5=(this.innerWidth!=null?this.innerWidth:this.getAvailableFieldWidth()),_6=isc.Canvas.applyStretchResizePolicy(_1,_5,this.minFieldSize);if(_3.length>0){var _7=false;for(var i=0;i<_3.length;i++){var j=_3[i];if(_6[j]<_2[j]){_7=true;_1[j]=_2[j]}}
if(_7){_6=isc.Canvas.applyStretchResizePolicy(_1,_5,this.minFieldSize)}}
return _6},isc.A.getAvailableFieldWidth=function isc_ListGrid_getAvailableFieldWidth(_1){if(_1==null){_1=this.autoFitData!="both"&&this.autoFitData!="horizontal"}
var _2=(!_1?this.getVisibleWidth():this.getWidth());return this.$101d(_2)},isc.A.$101d=function isc_ListGrid__getInnerSpaceFromWidth(_1){_1-=this.getHMarginBorderPad();var _2=this.$924();if(_2){_1-=this.body?this.body.getScrollbarSize():this.getScrollbarSize()}
return Math.max(1,_1)},isc.A.getFieldWidth=function isc_ListGrid_getFieldWidth(_1){_1=this.getFieldNum(_1);if(_1==-1||!this.fields||_1>=this.fields.length)return null;var _2;if(this.body!=null)_2=this.getColumnWidth(_1);if(_2==null||isNaN(_2))_2=this.getFieldWidths()[_1];return _2},isc.A.$101e=function isc_ListGrid__adjustFieldSizesForBodyStyling(_1,_2){if(_2==null)_2=false;if(_1==null||_1.length==0)return _1;if(!this.body){return _1}
_1[_1.length-1]=this.$101f(_1[_1.length-1],_1.sum(),_2);_1[0]=this.$101g(_1[0],_2);return _1},isc.A.$101g=function isc_ListGrid__adjustFirstFieldForBodyStyling(_1,_2){if(!this.body)return _1;var _3=(_2?this.body.getTopBorderSize()+this.body.getTopMargin():this.body.getLeftBorderSize()+this.body.getLeftMargin());if(_3!=0)_1-=_3;return Math.max(0,_1)},isc.A.$101f=function isc_ListGrid__adjustLastFieldForBodyStyling(_1,_2,_3){if(!this.body)return _1;var _4=(_3?this.body.getBottomBorderSize()+this.body.getBottomMargin():this.body.getRightBorderSize()+this.body.getRightMargin());if(_4!=0){var _5=_2-
(_3?this.body.getInnerHeight():this.body.getInnerWidth());if(_5>0){_1-=Math.min(_5,_4)}}
return Math.max(_1,1)},isc.A.setBodyFieldWidths=function isc_ListGrid_setBodyFieldWidths(_1){this.$72y=_1;var _2=_1;if(this.allowMismatchedHeaderBodyBorder){if(isc.isAn.Array(_1)){_1=this.$101e(_1.duplicate())}}
var _3=this.frozenFields;if(_3&&this.frozenBody){var _4=this.getFrozenSlots(_1);_1=this.getUnfrozenSlots(_1);this.frozenBody.setColumnWidths(_4);var _5=_4.sum();this.frozenBody.setWidth(_5);this.frozenBody.$3t=_5;if(this.frozenHeader)this.frozenHeader.setWidth(_5)}
if(this.body!=null)this.body.setColumnWidths(_1);if(this.$94e){var _6=this.$20w.getItems(),_7=this.getRecord(this.getEditRow()),_8=this.getEditFormItemFieldWidths(_7);for(var i=0;i<_6.length;i++){var _10=_6[i].colNum;if(_6[i].width!=_8[_10])
_6[i].setWidth(_8[_10])}}});isc.evalBoundary;isc.B.push(isc.A.getGridMembers=function isc_ListGrid_getGridMembers(){var _1=this.gridComponents,_2=[],_3;for(var i=0;i<_1.length;i++){var _5=_1[i],_6=null;if(isc.isA.Canvas(_5)){_6=_5}else if(isc.isA.String(_5)){if(!this.shouldShowGridComponent(_5))continue;switch(_5){case"filterEditor":if(this.filterEditor==null)this.makeFilterEditor();_6=this.filterEditor;break;case"header":if(this.header==null){this.makeHeader()}
_6=this.headerLayout||this.header;break;case"body":_3=true;this.createBodies();_6=this.bodyLayout||this.body;break;case"summaryRow":_6=this.getSummaryRow();break}}
if(_5!=null&&_6==null){_6=this.createCanvas(_5)}
_2.add(_6)}
if(!_3){this.logWarn("ListGrid specified with gridComponents:"+_1+".  This does not include a \"body\" entry. ListGrids with no body are unsupported, displaying the body as the last member in the grid.");_2[_2.length]=this.createBodies()}
return _2},isc.A.shouldShowGridComponent=function isc_ListGrid_shouldShowGridComponent(_1){if(_1==this.$ow)return true;if(_1==this.$97p&&this.headerHeight==0){return false}
var _2=this.showComponentPropertyMap[_1];if(_2==null){this.showComponentPropertyMap[_1]=_2="show"+_1.substring(0,1).toUpperCase+_1.substring(1)}
return this[_2]},isc.A.createChildren=function isc_ListGrid_createChildren(){this.updateGridComponents();if(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111){if(this.header){this.body.mozOutlineOffset="0px";if(this.body.mozOutlineColor==null)
this.body.mozOutlineColor=this.mozBodyOutlineColor}else{if(this.body.mozOutlineColor==null)
this.body.mozOutlineColor=this.mozBodyNoHeaderOutlineColor;this.body.mozOutlineOffset="-1px"}}
this.$101h=this._useNativeTabIndex;this._useNativeTabIndex=false},isc.A.updateGridComponents=function isc_ListGrid_updateGridComponents(){this.setMembers(this.getGridMembers())},isc.A.layoutChildren=function isc_ListGrid_layoutChildren(_1,_2,_3){if(this.body!=null){this.$935(_1,_2,_3)}
isc.VLayout.$dh.layoutChildren.call(this,_1,_2,_3);if(this.body!=null){if(this.frozenBody){var _4=this.shrinkForFreeze&&this.body.hscrollOn;var _5=this.bodyLayout.getInnerHeight();if(_4)_5-=this.body.getScrollbarSize();this.frozenBody.setHeight(_5);if(this.frozenBody.$894())this.frozenBody.markForRedraw("height changed");this.frozenBody.$3u=_5}}},isc.A.updateMemberTabIndex=function isc_ListGrid_updateMemberTabIndex(_1){if(this.tabIndex!=null&&!this.$76&&this.tabIndex!=-1&&(this.canvasItem==null)&&(this.tabIndex<isc.Canvas.TAB_INDEX_FLOOR))
{_1.setTabIndex(this.tabIndex);return}
return this.Super("updateMemberTabIndex",arguments)},isc.A.$101i=function isc_ListGrid__updateHeaderWidth(_1,_2,_3){var _4=this.autoFitMaxColumns;if(_4!=null){if(this.frozenFields==null||this.freezeStart()){_1=_1.slice(0,_4)}else{var _5=this.frozenFields.length;if(_4<_5){_1=_1.slice(-_5,-_5+_4)}else{var _6=_1.slice(0,_4-_5);_1=_1.slice(-_5);_1.addList(_6)}}}
var _7=_1.sum();var _8=this.autoFitMaxWidth;if(_8!=null){_8=this.$101d(_8)}
if(_8!=null&&_7>_8){_7=_8}
if(_7>_2){if(_3)_3.resizeTo(_7);else _2=_7}
return _2},isc.A.$935=function isc_ListGrid__updateFieldWidths(_1,_2,_3){if(this.body==null)return;if(this.$101j){if(_2)this.$101k=true;return}else{this.$101k=false}
if(this.$101b){return}
if(this.$94h){return}
this.$101j=true;var _4=this.$72y;this.$72y=null;if(_1!==this.$97m&&this.fields&&!this.skipAutoFitWidths){if(!this.fields.$99a){var _5=this.getAutoFitValueWidths(null,true);if(_5==null){this.fields.setProperty("$99j",null)}else{for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(_5[i]==null){_7.$99j=null;continue}
var _8=this.getMinFieldWidth(_7);var _9=this.getFieldHeaderButton(i);if(_9!=null){var _10=this.getAutoFitWidthApproach(_7)=="both",_11=_9.overflow,_12=_10&&(_11!="visible");if(_10&&_12){_9.setOverflow("visible")}
if(_8<_5[i]){_9.setWidth(_5[i]);_9.parentElement.reflow()}else{_9.setWidth(_8);_9.parentElement.reflow()}
if(_9.isDirty())_9.redraw();if(_9.label&&_9.label.isDirty()){_9.label.redraw()}
if(_10){var _13=_9.getVisibleWidth(),_14=Math.max(_8,_5[i]);if(_13>_14){_5[i]=_13;_9.setWidth(_13)}
if(_12){_9.setOverflow(_11)}}}
_7.$99j=_5[i];if(_8<_5[i]){var _9=this.getFieldHeaderButton(i);if(_9!=null){_9.setWidth(_5[i]);_9.parentElement.reflow()}}else{var _9=this.getFieldHeaderButton(i);if(_9!=null){_9.setWidth(_8);_9.parentElement.reflow()}}}
this.fields.$99a=true;this.$101l=this.getWidth()}}else if(this.$101l!=this.getWidth()){var _15=this.getAutoFitExpandField();if(_15){var _16=this.getFieldNum(_15);delete _15.$99j;var _5=this.getAutoFitValueWidths(null,true);if(_5){var _17=_5[_16];if(isc.isA.Number(_17)){var _8=this.getMinFieldWidth(_15);_15.$99j=_17;var _9=this.getFieldHeaderButton(_16);if(_9!=null){_9.setWidth(Math.max(_8,_17));_9.parentElement.reflow()}
this.$101l=this.getWidth()}}}}}
var _18=this.getAvailableFieldWidth(true),_19=(_18!=this.innerWidth);this.innerWidth=_18;var _20=this.header,_21=(this.showHeader?this.getHeaderHeight():0);if(_20!=null){var _22=(this.isRTL()&&this.$89e()?this.$89f():0);_20.hPolicy="fill";if(this.frozenHeader)this.frozenHeader.hPolicy="fill";var _23=this.autoFitData=="horizontal"||this.autoFitData=="both",_24=this.innerWidth,_25;if(_23&&this.$101c){_25=this.getFieldWidths(_1+" [sizing horizontal auto-fit header]");_24=this.$101i(_25,_24)}
if(!this.leaveScrollbarGap&&_20.isDrawn()&&_24!=_20.getWidth()&&_1=="body scroll changed"){if(this.$101m||!this.resizeFieldsForScrollbar){_20.hPolicy="none"}}
var _26=this.headerLayout||_20;_26.resizeTo(_24,_21);_26.$3u=_21;if(_23&&!this.$101c){_25=this.getFieldWidths(_1+" [sizing horizontal auto-fit header]");this.$101i(_25,_24,_26)}
var _27=(_1=="initial draw");if(!_20.isDrawn()&&(_27||this.isDrawn())){if(!this.frozenFields){if(_27)this.$255(_20);_20.draw()}else{if(_25==null){_25=this.getFieldWidths(_1+" [sizing frozen fields]")}
var _28=this.getFrozenSlots(_25);var _29=_28.sum();this.frozenHeader.setWidth(_29);this.frozenHeader.$3t=_29;if(_27)this.$255(this.headerLayout);this.headerLayout.draw()}}
if(_20.isDrawn())_20.hPolicy="none";if(this.frozenHeader&&this.frozenHeader.isDrawn())this.frozenHeader.hPolicy="none";if(this.sorter){this.updateSorter()}
if(this.autoFitHeaderHeights){var _21=this.getHeaderHeight();this.dropCachedHeaderButtonHeights();var _30=this.getHeaderHeight();if(_21!=_30||this.header.getHeight()!=_30)
{this.header.setHeight(_30);this.$99l()}else{if(this.headerSpans){this.header.$101n(true)}}}}
if((!this.$72y||_19)&&((_20&&_20.isDrawn())||_21==0))
{var _25=this.getFieldWidths(_1);this.setBodyFieldWidths(_25);if(this.filterEditor&&this.filterEditor.body!=null){this.filterEditor.setBodyFieldWidths(this.filterEditor.getFieldWidths(_1))}
if(this.summaryRow&&this.showGridSummary&&this.summaryRow.body!=null){this.summaryRow.setBodyFieldWidths(_25.duplicate())}
if(this.logIsDebugEnabled("layout")){this.logDebug("new field widths: "+this.$72y,"layout")}}
if(_23&&this.filterEditor){this.filterEditor.setWidth(this.body.getVisibleWidth())}
this.$101j=false;if(this.headerSpans!=null&&this.autoSizeHeaderSpans){var _31=false;if(this.$101k){_31=true}else if(this.$72y!=null&&_4!=null){if(_4.length!=this.$72y.length){_31=true}else{for(var i=0;i<_4.length;i++){if(_4[i]!=this.$72y[i]){_31=true;break}}}}
if(_31){if(this.$101o){}else{this.logDebug("Re-running update field widths to account for header span auto-size");this.$101o=true;var _32="Ensure header span and field sizes sync";if(_1!=null)_32+=" [from "+_1+"]";this.$935(_32)}
this.$101o=false}}},isc.A.getHeaderButtonDefaultHeight=function isc_ListGrid_getHeaderButtonDefaultHeight(_1,_2){if(_2||_1.$101p==null){this.calculateDefaultSpanHeights()}
return _1.$101p},isc.A.calculateDefaultSpanHeights=function isc_ListGrid_calculateDefaultSpanHeights(){if(this.headerSpans==null){return}
if(this.headerSpans!=null){var _1=this.getFields(),_2=_1.getProperty("name");for(var i=0;i<this.headerSpans.length;i++){var _4=this.headerHeight,_5=this.headerSpans[i];this.$101q(_5,_4,_2)}
for(var i=0;i<_1.length;i++){if(this.spanMap[_1[i].name]==null){_1[i].$101p=this.headerHeight}}}},isc.A.$101q=function isc_ListGrid__calculateDefaultSpanHeight(_1,_2,_3,_4){if(!_4){if(!this.$101r(_3,_1))return;var _5;if(!_1.$101s){_5=_1.height||this.headerSpanHeight}
if(_5==null){var _6=this.getNestedSpanDepth(_1);_6+=1;_5=Math.floor(_2/_6)}
_1.$101p=_5;_2-=_5;if(_1.spans){for(var i=0;i<_1.spans.length;i++){this.$101q(_1.spans[i],_2,_3)}}else{for(var i=0;i<_1.fields.length;i++){var _8=this.getField(_1.fields[i]);if(_8){this.$101q(_8,_2,_3,true)}}}}else{if(!_3.contains(_1.name))return;_1.$101p=_2}},isc.A.getHeaderButtonMinHeight=function isc_ListGrid_getHeaderButtonMinHeight(_1,_2){if(!_2&&_1.$101t!=null){return _1.$101t}
return this.getHeaderButtonMinHeights([_1],_2)[0]},isc.A.getHeaderButtonMinHeights=function isc_ListGrid_getHeaderButtonMinHeights(_1,_2){var _3=[];var _4=[];var _5="";for(var i=0;i<_1.length;i++){var _7=_1[i];if(!_2&&_7.$101t!=null){_4[i]=_7.$101t}else{var _8=!this.fields.contains(_7);var _9;if(_8){var _10=this.getSpannedFields(_7),_9=0;for(var _11=0;_11<_10.length;_11++){var _12=this.getField(_10[_11]);if(_12==null){continue}
_9+=this.getFieldWidth(_10[_11])}}else{_9=this.getFieldWidth(_7)}
if(isNaN(_9)){_4[i]=1}else{var _13=_7.headerBaseStyle,_14=this.getHeaderButtonProperties();if(_13==null){if(_7.frozen&&_14.frozenBaseStyle){_13=_14.frozenBaseStyle}else if(_14.baseStyle){_13=_14.baseStyle}}
var _15=_7.headerTitleStyle;if(_15==null){if(_7.frozen&&_14.frozenTitleStyle){_15=_14.frozenTitleStyle}else if(_14.titleStyle){_15=_14.titleStyle}}
if(_13==null||_15==null){var _16=this.headerButtonConstructor||this.header?this.header.buttonConstructor:isc.Toolbar.getPrototype().buttonConstructor;if(isc.isA.String(_16)){_16=isc[_16]}
if(_13==null){_13=_16.getPrototype().baseStyle}
if(_15==null){_15=_16.getPrototype().titleStyle}}
var _17=_8?_7.headerTitle||_7.title:this.getHeaderButtonTitle(_7);var _18=_7.$101u;if(_18&&_18.baseStyle==_13&&_18.titleStyle==_15&&_18.width==_9&&_18.wrap==_7.wrap&&_18.title==_17)
{_7.$101t=_18.height;_4[i]=_18.height}}}
if(_4[i]!=null)continue;var _19={};_19.width=_9;_19.baseStyle=_13;_19.titleStyle=_15;_19.wrap=_7.wrap;_19.title=_17
_3.add({index:i,config:_19});var _20=_19.wrap;if(_20==null)_20=this.wrapHeaderTitles;_5+="<div style='position:absolute;width:"+_9+"px;'><div class="+(_19.titleStyle||_19.baseStyle)+(_20?">":" style='white-space:nowrap;'>")+_17+"</div></div>"}
if(_3.length==0)return _4;if(isc.ListGrid.headerHeightTester==null){isc.ListGrid.headerHeightTester=isc.Canvas.create({overflow:"hidden",top:-1000,autoDraw:true,contents:_5})}else{isc.ListGrid.headerHeightTester.setContents(_5)}
if(isc.ListGrid.headerHeightTester.isDirty())isc.ListGrid.headerHeightTester.redraw();var _21=isc.ListGrid.headerHeightTester.getHandle(),_22=_21.childNodes;if(_22.length!=_3.length){}
for(var i=0;i<_22.length;i++){var _23=_22[i];var _19=_3[i].config,_24=_3[i].index,_7=_1[_24];_19.height=_23.offsetHeight;_7.$101u=_19;_7.$101t=_19.height;_4[_24]=_19.height}
return _4},isc.A.dropCachedHeaderButtonHeights=function isc_ListGrid_dropCachedHeaderButtonHeights(){for(var i=0;i<this.fields.length;i++){this.fields[i].$101p=null;this.fields[i].$101t=null;if(this.spanMap){var _2=this.spanMap[this.fields[i].name];while(_2!=null){_2.$101p=null;_2.$101t=null;_2=_2.parentSpan}}}},isc.A.getHeaderHeight=function isc_ListGrid_getHeaderHeight(){if(this.headerHeight==0||!this.showHeader)return 0;if(!this.autoFitHeaderHeights)return this.headerHeight;var _1=0;if(this.headerSpans==null){_1=this.headerHeight;var _2=this.getFields();var _3=this.getHeaderButtonMinHeights(_2);_1=Math.max(_1,_3.max())}else{var _2=this.getFields(),_4=0;var _5=this.getHeaderButtonMinHeights(_2),_6=[];for(var i=0;i<_2.length;i++){if(this.spanMap[_2[i].name]){var _8=this.spanMap[_2[i].name];while(_8){if(!_6.contains(_8)){_6.add(_8)}
_8=_8.parentSpan}}}
var _9=this.getHeaderButtonMinHeights(_6);for(var i=0;i<_2.length;i++){_4=Math.max(this.getHeaderButtonDefaultHeight(_2[i]),this.getHeaderButtonMinHeight(_2[i]));if(this.spanMap[_2[i].name]){var _8=this.spanMap[_2[i].name];while(_8){_4+=Math.max(this.getHeaderButtonDefaultHeight(_8),this.getHeaderButtonMinHeight(_8));_8=_8.parentSpan}}
_1=Math.max(_1,_4)}}
return Math.max(_1,this.headerHeight)},isc.A.getAutoFitValueWidths=function isc_ListGrid_getAutoFitValueWidths(_1,_2){if(this.data==null)return;if(isc.isA.ResultSet(this.data)){var _3=this.body.getDrawArea();if(!this.data.rangeIsLoaded(_3[0],_3[1])){if(_1==null){this.updateFieldWidthsForAutoFitValue("Delayed resize pending data load")}
return}}else if(isc.isA.ResultTree(this.data)){var _4=this.data.getRoot();if(!_4||(this.data.getLoadState(_4)!=isc.Tree.LOADED))
{this.updateFieldWidthsForAutoFitValue("Delayed resize pending tree data load");return}}
var _5=(_1==null);if(_1==null){_1=[];for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(this.shouldAutoFitField(_7)){if(!_2||this.getAutoFitWidthApproach(_7)!="title"){_1.add(_7);_5=false}}}}
if(_5)return[];var _8=[],_9=false,_10=[],_11=[],_12=[],_13=[];for(var i=0;i<this.fields.length;i++){if(_1.contains(this.fields[i])){var _7=this.fields[i];var _14=this.getDefaultFieldWidth(this.fields[i],true);if(_14==null){_9=true;if(_7.frozen){_10.add(this.getLocalFieldNum(i));_11.add(i)}else{_12.add(this.getLocalFieldNum(i));_13.add(i)}}else{_8[i]=_14}}}
if(_9){if(_10.length>0){var _15=this.$101v(true,_10);if(_15!=null){for(var i=0;i<_15.length;i++){_8[_11[i]]=_15[i]}}}
if(_12.length>0){var _15=this.$101v(false,_12);if(_15!=null){for(var i=0;i<_15.length;i++){_8[_13[i]]=_15[i]}}}}
return _8},isc.A.$101v=function isc_ListGrid__getBodyColumnAutoSize(_1,_2){var _3=_1?this.frozenBody:this.body;if(_3==null)return null;var _4=_3.getColumnAutoSize(_2);if(this.includeGridSummaryInAutoFitWidth&&this.showGridSummary&&this.summaryRow!=null)
{var _5=(_1?this.summaryRow.frozenBody:this.summaryRow.body);if(_5!=null){var _6=_5.getColumnAutoSize(_2);if(_6!=null){if(_4==null)_4=[];for(var i=0;i<_6.length;i++){if(_4[i]==null||_6[i]>_4[i])_4[i]=_6[i]}}}}
if(this.allowMismatchedHeaderBodyBorder&&_4!=null){var _3=_1?this.frozenBody:this.body,_8=_2.indexOf(0),_9=_2.indexOf((_1?this.frozenFields.length:this.fields.length)-1);if(_8!=-1){_4[_8]=_4[_8]+_3.getLeftBorderSize()+_3.getLeftMargin()}
if(_9!=-1){_4[_9]=_4[_9]+_3.getRightBorderSize()+_3.getRightMargin()}}
return _4},isc.A.getDefaultFieldWidth=function isc_ListGrid_getDefaultFieldWidth(_1,_2){var _3;if(_1.defaultWidth!=null)return _1.defaultWidth;if(_1.type=="icon"&&(_1.iconWidth!=null||_1.iconSize!=null)){return(_1.iconWidth||_1.iconSize)+2*this.cellPadding+2*this.iconPadding}else if(this.showValueIconOnly(_1)){_3=this.getValueIconWidth(_1)+(2*this.cellPadding)+this.getValueIconRightPadding(_1)+this.getValueIconLeftPadding(_1);if(this.showFilterEditor&&this.fields!=null&&this.fields.length>0){var _4=_1.cellAlign||_1.align;if(_4===this.$2r&&_1===this.fields[this.fields.length-1]){_3+=2*this.$89f()}}
return _3}
if(_2){return null}
return this.getFieldContentWidth(_1)},isc.A.getFieldContentWidth=function isc_ListGrid_getFieldContentWidth(_1){var _2,_3=this.getFieldNum(_1),_4=this.getLocalFieldNum(_3);var _5=this.$101v(_1.frozen,[_4]);_2=_5?_5[0]:null;if(_2==null)_2=_1.width;return _2},isc.A.getAutoFitWidthApproach=function isc_ListGrid_getAutoFitWidthApproach(_1){if(_1.autoFitWidthApproach!=null)return _1.autoFitWidthApproach;return this.autoFitWidthApproach},isc.A.draw=function isc_ListGrid_draw(_1,_2,_3,_4){if(isc.$et)arguments.$eu=this;if(!this.readyToDraw())return this;this.$101w=true;this.prepareForDraw();this.invokeSuper(isc.ListGrid,"draw",_1,_2,_3,_4);delete this.$101w;this.body.getColumnSizes();for(var i=0;i<this.bodies.length;i++){var _6=this.bodies[i];if(_6.$90x)this.markForRedraw()}
var _7=this.$95z();if(this.header&&_7!=null&&this.selectHeaderOnSort){this.selectSortFieldHeaderButton()}
this.bodyScrolled(this.body.getScrollLeft(),this.body.getScrollTop());if(this.sorter)this.updateSorter();if(this.body.$90x||(this.frozenBody&&this.frozenBody.$90x))
{this.updateFieldWidthsForAutoFitValue("Initial draw with embeddedComponents")}
this.$100o=this.isEmpty();if(isc.Browser.isIE&&this.header&&this.headerSpans&&this.autoFitWidthApproach=="both"){this.header.layoutChildren()}
if(!isc.isA.PickListMenu||!isc.isA.PickListMenu(this)){this.$101x()}
return this},isc.A.$986=function isc_ListGrid__alwaysShowEditors(_1,_2){if(!_2&&this.getTotalRows()==0)return false;if(this.alwaysShowEditors)return true;var _3=_1?[_1]:this.fields;if(_3){for(var i=0;i<_3.length;i++){if(_3[i].alwaysShowEditors){return true}}}
return false},isc.A.prepareForDraw=function isc_ListGrid_prepareForDraw(){var _1=this.groupByField&&!this.isGrouped;if(this.data){this.data.$101y=_1}
if(this.completeFields==null)this.setFields(this.fields);if(this.data){delete this.data.$101y}
if(this.getEditRow()==null){var _2=this.$986();if(_2)this.startEditing(null,null,true,null,true)}
if(_1){var _3=this.getGroupByFields();this.groupByField=null;this.groupBy(_3)}
this.createChildren()},isc.A.getGroupByFields=function isc_ListGrid_getGroupByFields(){var _1=this.groupByField;if(_1!=null&&!isc.isAn.Array(_1)){_1=[_1]}
return _1},isc.A.openGroup=function isc_ListGrid_openGroup(_1){if(isc.isA.Tree(this.data)&&_1.isFolder){if(!this.data.isOpen(_1)){this.openFolder(_1);return true}}
return false},isc.A.closeGroup=function isc_ListGrid_closeGroup(_1){if(isc.isA.Tree(this.data)&&_1.isFolder){if(this.data.isOpen(_1)){this.closeFolder(_1);return true}}
return false},isc.A.prepareForDestroy=function isc_ListGrid_prepareForDestroy(_1){if(this._dragLine){this._dragLine.destroy();this._dragLine=null}
if(this.$61p)this.$61p.destroy();if(this.spanContextMenu)this.spanContextMenu.destroy();if(this.cellContextMenu)this.cellContextMenu.destroy();if(this.$20w){this.$20w.destroy();delete this.$20w;delete this.$94e}
if(this.data){if(this.data.$71k&&isc.isA.Function(this.data.destroy)){this.data.destroy()}else{this.$981(this.data,true);delete this.data}}
if(this.originalData){if(this.originalData.$71k&&isc.isA.Function(this.originalData.destroy)){this.originalData.destroy()}else{this.$981(this.originalData,true);delete this.originalData}}
if(this.selection){this.destroySelectionModel()}
if(this.selectionCanvas)this.selectionCanvas.destroy();if(this.selectionUnderCanvas)this.selectionUnderCanvas.destroy();if(this.currentRollOverCanvas)this.currentRollOverCanvas.destroy();if(this.currentRollUnderCanvas)this.currentRollUnderCanvas.destroy();this.$101z();var _2=this.getRecordComponentPool();if(_2){for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4&&_4.destroy&&!_4.destroyed){if(!_4.dontAutoDestroy)_4.destroy();else _4.deparent()}}}
if(this.$1010!=null){for(var _5 in this.$1010){var _4=this.$1010[_5];if(!_4||_4.destroyed||_4.destroying||_4.$6w)
{continue}
if(!_4.dontAutoDestroy)_4.destroy();else _4.deparent()}}
this.Super("prepareForDestroy",arguments)},isc.A.redrawHeader=function isc_ListGrid_redrawHeader(_1){var _2=this.headerLayout||this.header;if(_2){if(_1){_2.redraw(this.ID+": redrawHeader()")}else{_2.markForRedraw(this.ID+": redrawHeader()")}}},isc.A.getBaseStyle=function isc_ListGrid_getBaseStyle(_1,_2,_3){if(this.canEdit==true&&!this.isPrinting){if(this.editFailedBaseStyle&&this.cellHasErrors(_2,_3))
return this.editFailedBaseStyle;if(this.editPendingBaseStyle&&this.$1011(_2,_3,false,true))
return this.editPendingBaseStyle}
if(this.originBaseStyle&&this.selection.$1012(_2,_3)){return this.originBaseStyle}
if(_1&&this.recordBaseStyleProperty&&_1[this.recordBaseStyleProperty])
return _1[this.recordBaseStyleProperty];var _4=this.getField(_3);if(_4&&_4.baseStyle)return _4.baseStyle;if(_4&&_4.type=="summary"&&this.recordSummaryBaseStyle)
return this.recordSummaryBaseStyle;if(_4&&_4.frozen&&!this.$989&&this.frozenBaseStyle){return this.frozenBaseStyle}
if(this.isPrinting&&(this.printBaseStyle!=null))return this.printBaseStyle;var _5=this.baseStyle;if(_5==null){if(this.cellHeight!=this.normalCellHeight||this.fastCellUpdates||this.allowRowSpanning||!this.shouldFixRowHeight(_1,_2)||(_1!=null&&this.$91v(_1)))
{_5=this.tallBaseStyle}else{_5=this.normalBaseStyle}}
return _5},isc.A.getCellCSSText=function isc_ListGrid_getCellCSSText(_1,_2,_3){var _4=this.getField(_3),_5;if(_1){if(!_1.$17b&&this.fieldSourceGrid==null&&_4!=null&&this.showValueIconOnly(_4)){_5="line-height:0px;"}
var _6=_1[this.recordCSSTextProperty];if(_6!=null){return _5!=null?_5+_6:_6}}
var _7=this.removedCSSText;if(this.recordMarkedAsRemoved(_2)&&_7){_5=_5!=null?_5+_7:_7}else{if(this.isEditable()){var _8;if(this.editFailedBaseStyle==null&&(_8=this.editFailedCSSText)&&this.cellHasErrors(_2,_3))
{_5=_5!=null?_5+_8:_8}else if(this.editPendingBaseStyle==null&&(_8=this.editPendingCSSText)&&this.$1011(_2,_3,false,true))
{_5=_5!=null?_5+_8:_8}}}
_5=this.getRecordHiliteCSSText(_1,_5,this.getField(_3),true);return _5},isc.A.getRawCellValue=function isc_ListGrid_getRawCellValue(_1,_2,_3,_4){return this.$1013(this.emptyCellValue,this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,null,null,this.data,this.applyFormulaAfterSummary,null,null,null,null,_1,_2,_3,_4)},isc.A.$1013=function isc_ListGrid__getRawCellValue(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15){if(this.getRawCellValue!=isc.ListGrid.getInstanceProperty("getRawCellValue")){return this.getRawCellValue(_12,_13,_14,_15)}
var _16,_17,_18;if(_15){_17=_14
_16=this.completeFields?isc.Class.getArrayItem(_17,this.completeFields,this.fieldIdProperty):this.getField(_17)}else{_16=this.fields[_14];_17=_16?_16[this.fieldIdProperty]:_17}
if(_8==null){_8=(_16&&_16.userFormula!=null)}
if(_8&&_9==null){_9=_16.userFormula}
if(_10==null){_10=(_16&&_16.userSummary!=null)}
if(_10&&_11==null){_11=_16.userSummary}
_18=_16?this.getTrimmedFieldDataPath(_16):null;if(_17==null&&_18==null)return _1;var _19,_20,_21;if(this.$1014!=null&&this.$1014[_13]!=null){_19=this.$100b(_13,_14)}
if(_19!==_21){return _19}else if(_12==null){return _1}else if(this.$1015(_2,_3,_16,_12)&&!this.shouldApplyRecordSummaryToRecord(_16))
{_20=this.$1016(_4,_5,_13,_16)}else{if(_6.getFieldValue&&_16){_20=_6.getFieldValue(_12,_18,_16,this,"getRawValue")}else if(_12.ownerDocument&&_16){_20=isc.xml.getFieldValue(_12,_17,_16)}else{_20=isc.Canvas.$n2(_18,_16,_12,this,true,"getRawValue");if(_20==null)_20=_12[_17]}}
if(_16&&_16.getRawCellValue){isc.Func.replaceWithMethod(_16,"getRawCellValue","viewer,record,recordNum,field,fieldNum,value");_20=_16.getRawCellValue(this,_12,_13,_16,_14,_20)}
if(_16){if(this.$1017(_7,_8,_16)&&this.$1018(_2,_7,_16,_12))
{var _22=_16.userFormula;_16.userFormula=_9;_20=this.getFormulaFieldValue(_16,_12);_16.userFormula=_22}
if(_10){var _23=_16.userSummary;_16.userSummary=_11;this.getSummaryFunction(_16);_16.userSummary=_23}}
return _20},isc.A.shouldShowRecordSummary=function isc_ListGrid_shouldShowRecordSummary(_1,_2){return this.$1015(this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,_1,_2)},isc.A.$1015=function isc_ListGrid__shouldShowRecordSummary(_1,_2,_3,_4){if(_3&&_3.type==this.$97q){if(_4[_1]){return(_3.summaryFunction==null&&_3.getGroupSummary==null)}else if(_4[_2]){return(_3.summaryFunction==null&&_3.getGridSummary==null)}
return true}
return false},isc.A.shouldShowUserFormula=function isc_ListGrid_shouldShowUserFormula(_1,_2){return this.$1018(this.groupSummaryRecordProperty,this.applyFormulaAfterSummary,_1,_2)},isc.A.$1018=function isc_ListGrid__shouldShowUserFormula(_1,_2,_3,_4){var _5=this.$1019||(_4&&_4[_1]);if(_5&&!this.$102a(_2,_3)){return false}
return true},isc.A.$102b=function isc_ListGrid__applyFieldFormulaAfterSummary(_1){return this.$102a(this.applyFormulaAfterSummary,_1)},isc.A.$102a=function isc_ListGrid___applyFieldFormulaAfterSummary(_1,_2){var _3=_2&&_2.applyAfterSummary;if(_3==null)_3=_1;if(_3==null)_3=false;return _3},isc.A.$100j=function isc_ListGrid__getCheckboxValueIconHTML(_1,_2,_3,_4,_5){var _6,_7;if(!_3){_6=this.$46t}else{var _8=this.isPrinting;var _9=(_8?this.printBooleanBaseStyle||this.booleanBaseStyle:this.booleanBaseStyle);if(_1){if(_2){_6=(_8?this.printCheckboxFieldPartialImage||this.checkboxFieldPartialImage||this.printBooleanPartialImage||this.booleanPartialImage:this.checkboxFieldPartialImage||this.booleanPartialImage);_7=_9==null?null:_9+"Partial"}else{_6=(_8?this.printCheckboxFieldTrueImage||this.checkboxFieldTrueImage||this.printBooleanTrueImage||this.booleanTrueImage:this.checkboxFieldTrueImage||this.booleanTrueImage);_7=_9==null?null:_9+"True"}}else{_6=(_8?this.printCheckboxFieldFalseImage||this.checkboxFieldFalseImage||this.printBooleanFalseImage||this.booleanFalseImage:this.checkboxFieldFalseImage||this.booleanFalseImage);_7=_9==null?null:_9+"False"}
if(_6==null)_6=this.$46t}
if(_4){if(_6!=this.$46t)_6=isc.Img.urlForState(_6,false,false,isc.StatefulCanvas.STATE_DISABLED);if(_7!=null)_7+=isc.StatefulCanvas.STATE_DISABLED}
if(_6==this.$46t)_6=isc.Canvas.$13o;var _10;if(_7!=null){_10="class='"+_7+this.$1t}
return this.getValueIconHTML(_6,_5,_10)});isc.evalBoundary;isc.B.push(isc.A.getCellValue=function isc_ListGrid_getCellValue(_1,_2,_3,_4){if(_4==null)_4=this.getFieldBody(_3);if(_1==null){if(this.showNewRecordRow&&this.$94c(_2)){return this.getNewRecordRowCellValue()}
_1=this.$96y(_2,_3)}else{if(_1[this.isSeparatorProperty])return this.$97r;if(_1.$17b&&_3!=null){var _5=this.fields[_3],_6=this.getGroupTitleField(),_7;if(_6==null){_7=_5.$96d}else{_7=_5.name==_6}
if(this.showGroupSummaryInHeader&&_5.name==_1.groupName){var _8=_1.$102c&&_1.$102c[0];if((!_8||!_8[_5.name])&&_5.masterIndex!=0)return isc.nbsp}
var _9=this.isCheckboxField(this.getField(_3));if((!this.canSelectGroups||!_9)&&((this.singleCellGroupHeaders()&&!_4.$906)||_7))
{return this.getGroupNodeHTML(_1,_4)}else if(_9?!this.canSelectGroups:!this.showGroupSummaryInHeader)
{return isc.nbsp}}}
var _10=this.fields[_3],_11=null;if(_10==null)return isc.emptyString;if(this.$1019&&_10.summaryValue){return _10.summaryValue}
if(this.isCheckboxField(_10)){return this.$100j(!!this.selection.isSelected(_1),this.showPartialSelection&&!!this.selection.isPartiallySelected(_1),this.body.canSelectRecord(_1),_1&&_1[this.recordEnabledProperty]==false,_10)}
var _12,_13,_14=this.showValueIconOnly(_10),_15;if(_1!=null){if(_1[this.singleCellValueProperty]!=null){return _1[this.singleCellValueProperty]}
if(Array.isLoading(_1)){if(!isc.Browser.isSafari||_3==0){return this.loadingMessage}
return isc.nbsp}
var _16=this.$92d,_17=_16;if(_17!=null&&this.allowRowSpanning){_17=this.getCellStartRow(_17,_3)}
_15=(this.$94e&&_17==_2&&(!this.editByCell||this.$96u==_3)&&this.canEditCell(_16,_3));if(_15){var _18=_1;if(_16!=_2){_18=this.getCellRecord(_16,_3)}
if(_4.$906){_11=this.getInactiveEditorCellValue(_18,_16,_3)}else{_11=this.getEditItemCellValue(_18,_16,_3)}}else if(this.$102d(_3)&&this.canEditCell(_2,_3)){_11=this.getInactiveEditorCellValue(_1,_2,_3);_15=true}else{var _10=this.fields[_3],_19,_20,_21;if(_10.displayField!=null){_20=!_10.valueMap&&!_10.getCellValue&&this.$18d(_10)&&(_1[_10.displayField]!==_21||this.$100b(_2,_10.displayField)!=_21);if(_20){var _22=_10.displayField;_19=this.getRawCellValue(_1,_2,_22,true)}}
_11=this.getRawCellValue(_1,_2,_3);if(_10.getCellValue){isc.Func.replaceWithMethod(_10,"getCellValue","viewer,record,recordNum,field,fieldNum,value");_11=_10.getCellValue(this,_1,_2,_10,_3,_11)}
_12=this.getValueIcon(_10,_11,_1,_2);_13=this.getValueIconStyle(_10,_11,_1,_2);if(!_14){var _23=_10.valueMap;if(_23){_11=this.resolveValueMap(_11,_10.valueMap)}}
if(_20)_11=_19}}
if(!_15){if(_1&&((_1[this.groupSummaryRecordProperty]&&!this.shouldShowGroupSummary(_10))||(this.$1019&&((_1[this.gridSummaryRecordProperty]&&!this.shouldShowGridSummary(_10))||(_10.showGridSummary==false)))))
{_11=this.emptyCellValue}else{var _24=null;if(_12!=null){var _25=_13==null?null:"class='"+_13+this.$1t;_24=this.getValueIconHTML(_12,_10,_25)}
if(_14){if(!_24||isc.isAn.emptyString(_24))_24=this.emptyCellValue;_11=_24}else{var _26=this.getFieldHilites(_1,_10);var _27=_10.hiliteHTMLAfterFormat;if(_27==null)_27=this.hiliteHTMLAfterFormat;if(_27==null)_27=true;if(_27){_11=this.$57n(_11,_1,_10,_2,_3);if(_26!=null)_11=this.applyHiliteHTML(_26,_11)}else{if(_26!=null)_11=this.applyHiliteHTML(_26,_11);_11=this.$57n(_11,_1,_10,_2,_3)}
if(_24){if(_10.valueIconOrientation!=isc.Canvas.RIGHT)
_11=_24+_11;else
_11=_11+_24}}
if(this.isEditable()&&this.showErrorIcons&&this.cellHasErrors(_2,_3)){_11=this.getErrorIconHTML(_1,_2,_3)+_11}
var _10=this.fields[_3];var _26=this.getFieldHilites(_1,_10);if(_26!=null){if(!_1||(_1&&!_1.isGroupSummary)||(this.showHilitesInGroupSummary&&_10.showHilitesInGroupSummary!=false)){_11=this.applyHiliteIcon(_26,_10,_11)}}}}
var _28=this.isGrouped?this.getGroupTitleField():null;if(_28&&this.fields[_3].name==_28){var _29=isc.Canvas.spacerHTML(this.groupIndentSize+this.groupLeadingIndent,1);_11=_29+_11}
return _11},isc.A.cellValueIsClipped=function isc_ListGrid_cellValueIsClipped(_1,_2){var _3=this.getFieldBody(_2);_2=this.getLocalFieldNum(_2);return _3.cellValueIsClipped(_1,_2)},isc.A.resolveValueMap=function isc_ListGrid_resolveValueMap(_1,_2){if(isc.isA.String(_2))_2=this.getGlobalReference(_2);if(!isc.isAn.Array(_2)){if(isc.isAn.Array(_1)){var _3=[];for(var i=0;i<_1.length;i++){var _5=isc.getValueForKey(_1[i],_2,_1[i]);_3[_3.length]=_5}
_1=_3}else{_1=isc.getValueForKey(_1,_2)}}
return _1},isc.A.getTitleFieldValue=function isc_ListGrid_getTitleFieldValue(_1){var _2=this.getDataSource().getTitleField(),_3=this.getCellValue(_1,this.getRecordIndex(_1),this.getFieldNum(_2),this.body);if(!_3||_3==""){_3=this.getRawCellValue(_1,this.getRecordIndex(_1),_2,true)}
return _3},isc.A.getRawValue=function isc_ListGrid_getRawValue(_1,_2){var _3=this.getRecordIndex(_1);return this.getRawCellValue(_1,_3,_2,true)},isc.A.getFormattedValue=function isc_ListGrid_getFormattedValue(_1,_2,_3){var _4=this.getRecordIndex(_1),_5=this.getSpecifiedField(_2),_6=this.getFieldNum(_2);if(this.fieldIsVisible(_5)&&_3==null){return this.getCellValue(_1,_4,_6,this.body)}
if(_3==null)_3=this.getRawValue(_1,_2);var _7=_5?_5.valueMap:null;if(_7){if(isc.isA.String(_7))_7=this.getGlobalReference(_7);if(!isc.isAn.Array(_7)){if(isc.isAn.Array(_3)){var _8=[];for(var i=0;i<_3.length;i++){var _10=isc.getValueForKey(_3[i],_7,_3[i]);_8[_8.length]=_10}
_3=_8}else{_3=isc.getValueForKey(_3,_7)}}}
var _11=this.$57n(_3,_1,_5,_4,_6);return _11},isc.A.getSpecifiedFieldWidth=function isc_ListGrid_getSpecifiedFieldWidth(_1){var _2=this.getField(_1);if(_2==null){if(isc.isAn.Object(_1))_1=_1[this.fieldIdProperty];_2=this.getSpecifiedField(_1)}
if(_2==null)return;var _1=_2[this.fieldIdProperty],_3=this.header?this.header.members:null,_4=this.frozenFields&&this.frozenHeader?this.frozenHeader.members:null,_5;if(_3||_4){var _6;if(_3)_6=_3.find(this.fieldIdProperty,_1);if(!_6&&_4){_6=_4.find(this.fieldIdProperty,_1)}
if(_6){if(_6.$3t&&isc.isA.Number(_6.$3t)){_5=_6.$3t}}else{if(_2.width!=null&&isc.isA.Number(_2.width)){_5=_2.width}}}
return _5},isc.A.showValueIconHandCursor=function isc_ListGrid_showValueIconHandCursor(_1){return _1.valueIconClick!=null},isc.A.getValueIconHTML=function isc_ListGrid_getValueIconHTML(_1,_2,_3){var _4=_2.imageURLPrefix||_2.baseURL||_2.imgDir,_5=_2.imageURLSuffix,_6=this.getValueIconWidth(_2),_7=this.getValueIconHeight(_2),_8=this.getValueIconLeftPadding(_2),_9=this.getValueIconRightPadding(_2);if(_5!=null)_1+=_5;var _10;if(this.showValueIconHandCursor(_2)){_10="cursor:pointer;"}
var _11=isc.Canvas.$141(_1,_4,_6,_7,_8,_9,null,this,_3,_10);return _11},isc.A.getCellAlign=function isc_ListGrid_getCellAlign(_1,_2,_3){var _4=this.isRTL();if(_1&&_1[this.singleCellValueProperty]!=null&&(!this.showSingleCellCheckboxField(_1)||!this.isCheckboxField(this.getField(_3))))
{return _4?isc.Canvas.RIGHT:isc.Canvas.LEFT}
return this.getFieldCellAlign(_3,_4)},isc.A.getFieldCellAlign=function isc_ListGrid_getFieldCellAlign(_1,_2){var _3=this.getField(_1);if(!_3)return _2?isc.Canvas.RIGHT:isc.Canvas.LEFT;if(_3.cellAlign==null&&_3.userFormula){return _2?isc.Canvas.LEFT:isc.Canvas.RIGHT}
var _4=_3.cellAlign||_3.align;if(_2&&this.reverseRTLAlign){if(_4==isc.Canvas.RIGHT)_4=isc.Canvas.LEFT;else if(_4==isc.Canvas.LEFT)_4=isc.Canvas.RIGHT}
return _4},isc.A.showSingleCellCheckboxField=function isc_ListGrid_showSingleCellCheckboxField(_1){return(this.getCurrentCheckboxField()!=null)&&_1&&(this.canSelectGroups||!_1.$17b)&&!_1[this.isSeparatorProperty]},isc.A.$18d=function isc_ListGrid__useDisplayFieldValue(_1){if(!_1||_1.valueMap||_1.displayField==null||(_1.displayField==_1.name))
{return false}
if(_1.optionDataSource==null){if(_1.displayValueFromRecord==false)return false;return true}
var _2=_1.autoFetchDisplayMap;if(_2==null)_2=this.autoFetchDisplayMap;if(_2)return false;if(_1.displayValueFromRecord!=null)return _1.displayValueFromRecord;return(_1.valueField==null||_1.valueField==_1.name)&&(isc.DS.get(_1.optionDataSource)==this.getDataSource())},isc.A.getValueIcon=function isc_ListGrid_getValueIcon(_1,_2,_3,_4){if(!_1.valueIcons||_1.suppressValueIcon){if(this.$100r(_1)){var _5;if(_2){_5=(this.isPrinting?this.printBooleanTrueImage||this.booleanTrueImage:this.booleanTrueImage)}else{_5=(this.isPrinting?this.printBooleanFalseImage||this.booleanFalseImage:this.booleanFalseImage)}
_4=(_4!=null)?_4:this.findRowNum(_3);var _6=_1.masterIndex;if(!this.canEditCell(_4,_6)&&_1.canToggle&&_5!=this.$46t){_5=isc.Img.urlForState(_5,false,false,isc.StatefulCanvas.STATE_DISABLED)}
if(_5==this.$46t){_5=isc.Canvas.$13o}else if(_5==null){_5=isc.Canvas.getImgURL(isc.Canvas.$wv)}
return _5}
return null}
var _7=_1.valueIcons[_2];return _7},isc.A.getValueIconStyle=function isc_ListGrid_getValueIconStyle(_1,_2,_3,_4){var _5=(this.isPrinting?this.printBooleanBaseStyle||this.booleanBaseStyle:this.booleanBaseStyle);if(_5&&_1&&(!_1.valueIcons||_1.suppressValueIcon)){if(this.$100r(_1)){var _6=_5+(_2?"True":"False");_4=(_4!=null)?_4:this.findRowNum(_3);var _7=_1.masterIndex;if(!this.canEditCell(_4,_7)&&_1.canToggle){_6+=isc.StatefulCanvas.STATE_DISABLED}
return _6}}
return null},isc.A.getValueIconLeftPadding=function isc_ListGrid_getValueIconLeftPadding(_1){return(_1&&_1.valueIconLeftPadding!=null?_1.valueIconLeftPadding:this.valueIconLeftPadding||0)},isc.A.getValueIconRightPadding=function isc_ListGrid_getValueIconRightPadding(_1){return(_1&&_1.valueIconRightPadding!=null?_1.valueIconRightPadding:this.valueIconRightPadding||0)},isc.A.showValueIconOnly=function isc_ListGrid_showValueIconOnly(_1){if(_1.showValueIconOnly!=null)return _1.showValueIconOnly;if(_1.valueIcons!=null&&_1.valueMap!=null)return true;return this.$100r(_1)},isc.A.getValueIconWidth=function isc_ListGrid_getValueIconWidth(_1){if(this.isCheckboxField(_1))return this.$1006();if(this.$100r(_1))return this.booleanImageWidth;return(_1.valueIconWidth!=null?_1.valueIconWidth:(_1.valueIconSize!=null?_1.valueIconSize:(this.valueIconWidth!=null?this.valueIconWidth:this.valueIconSize)))},isc.A.getValueIconHeight=function isc_ListGrid_getValueIconHeight(_1){if(this.isCheckboxField(_1))return this.$1007();if(this.isExpansionField(_1))return this.$962();if(this.$100r(_1))return this.booleanImageHeight;return(_1.valueIconHeight!=null?_1.valueIconHeight:(_1.valueIconSize!=null?_1.valueIconSize:(this.valueIconHeight!=null?this.valueIconHeight:this.valueIconSize)))},isc.A.$94c=function isc_ListGrid__isNewRecordRow(_1){return this.showNewRecordRow&&(_1==this.getTotalRows()-1)},isc.A.getNewRecordRowCellValue=function isc_ListGrid_getNewRecordRowCellValue(){return'<div align="center">'+this.newRecordRowMessage+'</div>'},isc.A.getErrorIconHTML=function isc_ListGrid_getErrorIconHTML(_1,_2,_3){var _4=this.getCellErrors(_2,_3);if(_4==null)return isc.$ba;var _5=this.imgHTML(this.errorIconSrc,this.errorIconWidth,this.errorIconHeight,null," isErrorIcon='true'");var _6=this.isRTL(),_7=this.getCellAlign(_1,_2,_3),_8=((_6&&_7===isc.Canvas.LEFT)||(!_6&&_7===isc.Canvas.RIGHT));var _9;if(isc.Browser.isIE&&this.$94e&&this.getEditRow()==_2&&(!this.editByCell||this.getEditCol()==_3))
{_9=" "}else{_9=isc.Canvas.spacerHTML(this.cellPadding,"auto")}
if(_8){_5=_9+_5}else{_5+=_9}
return _5},isc.A.$94z=function isc_ListGrid__handleErrorIconOver(_1,_2){this.$94x=[_1,_2];if(this.cellErrorIconHover&&this.cellErrorIconHover(this.getRecord(_1,_2),_1,_2)==false)
{return}
isc.Hover.setAction(this,this.$53z)},isc.A.$53z=function isc_ListGrid__handleErrorIconHover(){if(this.$94x==null)return;var _1=this.$94x[0],_2=this.$94x[1];var _3=this.getCellErrors(_1,_2);if(_3==null)return;var _4=isc.FormItem.getErrorPromptString(_3);isc.Hover.show(_4,this.$12q())},isc.A.$94y=function isc_ListGrid__handleErrorIconOut(){delete this.$94x;if(isc.Hover.isActive){isc.Hover.clear()}},isc.A.$57n=function isc_ListGrid__formatCellValue(_1,_2,_3,_4,_5){if(_3&&_3.userSummary){_1=this.getSummaryFieldValue(_3,_2)}else{var _6=false;if(_2&&_2[this.groupSummaryRecordProperty]){if(_3&&_3.formatGroupSummary){if(!isc.isA.Function(_3.formatGroupSummary)){_3.formatGroupSummary=isc.Func.expressionToFunction("value",_3.formatGroupSummary)}
if(isc.isA.Function(_3.formatGroupSummary)){_1=_3.formatGroupSummary(_1);_6=true}}}
if(_2&&this.$1019){if(_3&&_3.formatGridSummary){if(!isc.isA.Function(_3.formatGridSummary)){_3.formatGridSummary=isc.Func.expressionToFunction("value",_3.formatGridSummary)}
if(isc.isA.Function(_3.formatGridSummary)){_1=_3.formatGridSummary(_1);_6=true}}}
if(!_6){var _7;if(_3&&_3.formatCellValue!=null){_1=_3.formatCellValue(_1,_2,_4,_5,this)}else if(_3&&_3.cellValueTemplate){_1=_3.cellValueTemplate.evalDynamicString(this,{value:_1,record:_2,field:_3})}else if(this.formatCellValue!=null){_1=this.formatCellValue(_1,_2,_4,_5)}else if(_3&&_3.format&&(isc.isA.Number(_1)||isc.isA.Date(_1))){_1=isc.isA.Number(_1)?isc.NumberUtil.format(_1,_3.format):isc.DateUtil.format(_1,_3.format)}else if(isc.CubeGrid&&isc.isA.CubeGrid(this)&&(isc.isA.Number(_1)||isc.isA.Date(_1))&&(_7=this.getValueFormat(_4,_5))!=null)
{_1=isc.isA.Number(_1)?isc.NumberUtil.format(_1,_7):isc.DateUtil.format(_1,_7)}else if(_3&&!_3.$102e){_1=this.applyCellTypeFormatters(_1,_2,_3,_4,_5)}}}
_1=this.formatValueAsString(_1,_2,_3,_4,_5);if(this.formatDisplayValue){_1=this.formatDisplayValue(_1,_2,_4,_5)}
if(_3&&_3.escapeHTML){if(isc.isA.String(_1)&&_1!=this.$1w&&(_3.emptyCellValue==null||_1!=_3.emptyCellValue))
{_1=_1.asHTML()}}
return _1},isc.A.getDefaultFormattedValue=function isc_ListGrid_getDefaultFormattedValue(_1,_2,_3){var _4=this.getField(_3);var _5=this.applyCellTypeFormatters(this.getRawCellValue(_1,_2,_3),_1,_4,_2,_3);return this.formatValueAsString(_5,_1,_4,_2,_3)},isc.A.getDefaultFormattedFieldValue=function isc_ListGrid_getDefaultFormattedFieldValue(_1,_2,_3,_4){var _5=isc.DataSource.getFieldValue(_2,_1);if(_3==null)_3=-1;if(_4==null)_4=-1;var _6;if(_2&&_2.formatCellValue!=null){_6=_2.formatCellValue(_5,_1,_3,_4,this)}else{_6=this.applyCellTypeFormatters(_5,_1,_2,_3,_4)}
return this.formatValueAsString(_6,_1,_2,_3,_4)},isc.A.applyCellTypeFormatters=function isc_ListGrid_applyCellTypeFormatters(_1,_2,_3,_4,_5,_6){if(!_6&&_3&&_3.multiple&&isc.isA.Array(_1)){var _7=[];for(var i=0;i<_1.length;i++){_7[i]=this.applyCellTypeFormatters(_1[i],_2,_3,_4,_5,true)}
return _7.join(_3.multipleValueSeparator||", ")}
if(_3&&_3.$31u!=null&&_3.$31u.shortDisplayFormatter!=null)
{_1=_3.$31u.shortDisplayFormatter(_1,_3,this,_2,_4,_5)}else if(_3&&_3.$100q!=null){_1=_3.$100q(_1,_3,this,_2,_4,_5)}
if(_1!=null&&!isc.isA.emptyString(_1)&&_2&&_3&&_2[this.recordApplyPluralTitleProperty])
{var _9=_2[this.recordApplyPluralTitleProperty];if(_9.contains(_3.name)){var _10=_3.pluralTitle;if(_10==null)_10=_3.title;if(_10!=null)_1+=" "+_10}}
if(_1==null&&_2&&_3&&this.invalidSummaryValue!=null&&((_2[this.groupSummaryRecordProperty]&&this.shouldShowGroupSummary(_3))||(_2[this.gridSummaryRecordProperty]&&this.shouldShowGridSummary(_3))))
{_1=this.invalidSummaryValue}
return _1},isc.A.formatValueAsString=function isc_ListGrid_formatValueAsString(_1,_2,_3,_4,_5){if(_1==null||isc.is.emptyString(_1)){if(this.$16q(_3)!=this.emptyCellValue){_1=this.$16q(_3)}else if(_3.type=="summary"){_1=this.invalidSummaryValue}else{_1=this.emptyCellValue}}else if(this.$97t[_1]==true){_1=this.$1w}else if(!isc.isA.String(_1)){if(isc.isA.Date(_1)){if(this.$51j(_3)){var _6=this.$51k(_3);var _7=isc.SimpleType.inheritsFrom(_3.type,"time");_1=isc.Time.toTime(_1,_6,_7)}else{var _8=_3&&isc.SimpleType.inheritsFrom(_3.type,"datetime"),_9=!_8&&_3&&isc.SimpleType.inheritsFrom(_3.type,"date"),_6=this.$51l(_3);if(_8)_1=_1.toShortDateTime(_6,true);else _1=_1.toShortDate(_6,!_9)}}else{_1=isc.iscToLocaleString(_1)}}
return _1},isc.A.getEditItemCellValue=function isc_ListGrid_getEditItemCellValue(_1,_2,_3){var _4=this.getEditorName(_2,_3);if(!this.$20w||!this.$20w.getItem(_4)){return"&nbsp;"}
var _5=this.getCellErrors(_2,_3);if(_5){this.$20w.setFieldErrors(_4,_5)}
var _6=this.$20w.getItem(_4),_7=_6.getStandaloneItemHTML(_6.getValue(),false,true);if(_5){this.$20w.setFieldErrors(_4,null)}
var _8=_6.containerWidget;if(!_8.$94r)_8.$94r=[];if(!_8.$94r.contains(_6)){_8.$94r.add(_6)}
return _7},isc.A.$102d=function isc_ListGrid__showInactiveEditor(_1){return this.$986(_1)},isc.A.getInactiveEditorCellValue=function isc_ListGrid_getInactiveEditorCellValue(_1,_2,_3){var _4=this.getEditorName(_2,_3);var _5=this.$20w.getItem(_4);if(_5==null){return this.getFormattedValue(_1,_2,_3)}
var _6=isc.DynamicForm.getEditorType(_5,this.$20w),_7=this.getRawCellValue(_1,_2,_3),_8;if(this.shouldShowEditorPlaceholder(this.getField(_3),_6)){_8=this.getEditorPlaceholderHTML(_6,_7,_1,_2,_3)}else{var _9={grid:this.getID(),record:_1,rowNum:_2,colNum:_3}
var _10=this.getCellErrors(_2,_3);if(_10){this.$20w.setFieldErrors(_4,_10)}
_8=_5.getInactiveEditorHTML(_7,false,true,_9);if(_10){this.$20w.setFieldErrors(_4,null)}
if(!this.$102f)this.$102f={};var _11="_"+_2+"_"+_3;if(this.$102f[_11]){this.logWarn("creating new inactiveEditor context for a cell without having cleared the previous one."+this.getStackTrace(),"inactiveEditorHTML")}
this.$102f[_11]=_9}
return _8},isc.A.shouldShowEditorPlaceholder=function isc_ListGrid_shouldShowEditorPlaceholder(_1,_2){if(_1.showEditorPlaceholder!=null)return _1.showEditorPlaceholder;return!this.$97u[_2]},isc.A.getEditorPlaceholderHTML=function isc_ListGrid_getEditorPlaceholderHTML(_1,_2,_3,_4,_5){return _2},isc.A.$94t=function isc_ListGrid__editItemsDrawingNotification(_1,_2,_3){var _4=isc.RPCManager&&!isc.RPCManager.startQueue();var _5;if(_1)_5=[_1];else{_5=[];var _6=this.$20w.getItems();for(var i=0;i<_6.length;i++){if(_6[i].containerWidget==_3)_5.add(_6[i])}}
var _8=_3.$94r;for(var i=0;i<_5.length;i++){var _9=_5[i],_10=_9.isDrawn(),_11=_8?_8.contains(_9):false,_12=isc.CanvasItem&&isc.isA.CanvasItem(_9);if(_10){if(_11){_9.redrawn();if(_2)_9.moved()}else{_9.cleared(true)}}else if(_11){if(_12)_9.placeCanvas();_9.drawn(true)}else{if(isc.CanvasItem&&isc.isA.CanvasItem(_9)){if(_9.canvas&&_9.canvas.isDrawn()){_9.canvas.clear();_9.canvas.deparent()}}}}
if(this.$20w){this.$20w.destroyOrphanedItems("Grid edit-items removed")}
if(_4)isc.RPCManager.sendQueue();delete _3.$94r},isc.A.$94l=function isc_ListGrid__clearingInactiveEditorHTML(_1,_2){if(this.$102f==null)return;if(!this.$20w||!this.$986((_2!=null?this.getField(_2):null),true))return;if(_1!=null){var _3="_"+_1+"_"+_2,_4=this.$102f[_3];if(_4){_4.formItem.clearInactiveEditorContext(_4);delete this.$102f[_3]}}else{var _5=this.getEditForm(),_6=_5.getItems();for(var i=0;i<_6.length;i++){_6[i].clearAllInactiveEditorContexts()}
delete this.$102f}},isc.A.setRecordValues=function isc_ListGrid_setRecordValues(_1,_2){if(!this.shouldSaveLocally()){this.logWarn("setRecordValues() not supported for grids where saveLocally is false");return}
if(!this.data)return;var _3=this.data.indexOf(_1),_4=this.data.get(_3);var _5=isc.Canvas.$n2(this.dataPath,null,_2,this,true);if(!_5){_5=_2}
this.combineRecords(_4,_5);this.calculateRecordSummaries(_4,null,true,true);if(this.useCellRecords){_3=this.findRowNum(_4);var _6=this.findColNum(_4);this.refreshCell(_3,_6)}else{this.refreshRow(_3)}
this.resort();this.filterByEditor();if(this.valuesManager!=null){this.valuesManager.$18o(_3,null,_4,this)}},isc.A.combineRecords=function isc_ListGrid_combineRecords(_1,_2){return isc.combineObjects(_1,_2)},isc.A.setRawCellValue=function isc_ListGrid_setRawCellValue(_1,_2,_3,_4){var _5=this.fields[_3];if(!_1||!_5)return;if(_5.setRawCellValue){isc.Func.replaceWithMethod(_5,"setRawCellValue","viewer,record,recordNum,field,fieldNum,value");_5.setRawCellValue(this,_1,_2,_5,_3,_4)}else{isc.Canvas.$13e(null,_5,_4,_1,this,true)}
this.getOriginalData().dataChanged()},isc.A.getCellBooleanProperty=function isc_ListGrid_getCellBooleanProperty(_1,_2,_3,_4){var _5=false,_6=this[_1];if(_6==false||_6==this.$16b)return false;var _7=this.fields[_3][_1];if(_7==false||_7==this.$16b)return false;if(_4!=null){var _8=this.getRecord(_2,_3),_9=(_8!=null?_8[_4]:false);if(_9==false||_9==this.$16b)return false;if(_9==true||_9==this.$16c)return true}
return(_6==true)||(_7==true)||(_6==this.$16c)||(_7==this.$16c)},isc.A.setShowRecordComponents=function isc_ListGrid_setShowRecordComponents(_1){if(this.showRecordComponents==_1)return;if(_1){if(this.animateFolders){this.$102g=true
this.animateFolders=false}}else{if(this.$102g){this.animateFolders=true;delete this.$102g}}
this.showRecordComponents=_1;this.$102h();if(_1){this.$102i=this.drawAllMaxCells;this.drawAllMaxCells=0;if(this.body!=null)this.body.drawAllMaxCells=0}else{if(this.$102i!=null){this.drawAllMaxCells=this.$102i;if(this.body!=null)this.body.drawAllMaxCells=this.$102i;delete this.$102i}}
this.invalidateRecordComponents();if(!_1&&(this.recordComponentPosition==this.$88z||(this.recordComponentPosition==null&&this.showRecordComponentsByCell)))
{this.updateFieldWidthsForAutoFitValue("showRecordComponents changed");this.$935()}},isc.A.$102h=function isc_ListGrid__updateVirtualScrollingForRecordComponents(){if(!this.showRecordComponents){if(this.$102j){delete this.virtualScrolling;delete this.$102j}}else{if(this.virtualScrolling==null||this.$102j){if(this.frozenFields==null){this.virtualScrolling=true;this.$102j=true}else{if(this.recordComponentHeight==null){this.logWarn("This grid has frozen fields and is showing recordComponents. This may lead to unpredictable row heights which are not supported with frozen fields. Setting listGrid.recordComponentHeight will avoid this issue.","recordComponents")}
if(this.$102j){delete this.virtualScrolling;delete this.$102j}}}}
if(this.body&&this.virtualScrolling!=this.body.virtualScrolling){this.body.virtualScrolling=this.virtualScrolling;if(this.frozenBody){this.frozenBody.virtualScrolling=this.virtualScrolling}}},isc.A.getDrawArea=function isc_ListGrid_getDrawArea(){if(this.body){var _1=this.body.getDrawArea();if(this.frozenFields&&this.freezeStart()){_1[2]+=this.frozenFields.length;_1[3]+=this.frozenFields.length}
return _1}
return null},isc.A.$94q=function isc_ListGrid__drawAreaChanged(_1,_2,_3,_4,_5){if(this.frozenFields&&this.freezeStart()){_3+=this.frozenFields.length;_4+=this.frozenFields.length}
var _6=[_1,_2,_3,_4];if(_6.equals(this.getDrawArea()))return;this.drawAreaChanged(_1,_2,_3,_4)},isc.A.drawAreaChanged=function isc_ListGrid_drawAreaChanged(){},isc.A.updateExpansionComponents=function isc_ListGrid_updateExpansionComponents(){if(!this.$964||this.$964.length==0)return;this.$95e=true;for(var i=this.$964.length-1;i>=0;i--){this.expandRecord(this.$964[i])}
delete this.$95e;delete this.$964},isc.A.updateRecordComponents=function isc_ListGrid_updateRecordComponents(){var _1=this.logIsDebugEnabled("recordComponents");if(this.$932){if(_1){this.logDebug("updateRecordComponents called recursively - returning","recordComponents")}
return}
var _2=this.body,_3=this.frozenBody;if(_2==null)return;if(_2.$90g!=null){return}
if((!_2.isDrawn()||_2.$72y==null||(_2.$72y.length==0&&_2.fields.length>0))||(_3&&(!_3.isDrawn()||_3.$72y==null||(_3.$72y.length==0&&_3.fields.length>0))))
{return}
this.$932=true;var _4=this.$102k||[],_5=this.$102l||{};if(_1){this.logDebug("updateRecordComponents - old record components before refreshing:"+this.echo(_4),"recordComponents")}
this.$102l={};this.$102k=[];if(this.showRecordComponents||this.showBackgroundComponents){var _6=this.body.getDrawArea(),_7=this.showRecordComponentsByCell,_8=this.body.getID(),_9=this.frozenBody?this.frozenBody.getID():null;if(this.recordComponentPoolingMode=="recycle"){if(_1){this.logDebug("START updateRecordComponents - pre-loop recordComponent cleanup - drawArea is "+_6);var _10=[]}
for(var i=0;i<_4.length;i++){var _12=_4[i];if(!_12)continue;var _13=this.getRecordIndex(_12.currentRecord);if(_13<_6[0]||_13>_6[1]){this.$102m(_12);_5[_12.getID()]=null;if(_1){_10.add(_12);this.logDebug("cleaned up recordComponent: "+_12.ID+" from row "+_13)}}}
if(_1){this.logDebug("END updateRecordComponents - pre-loop recordComponent cleanup: cleaned "+_10.length+" components")}}
if(_1){this.logDebug("updating to potentially show recordComponents for drawArea:"+_6,"recordComponents")}
for(var _14=_6[0];_14<=_6[1];_14++){var _15=this.getRecord(_14);if(_15==null||Array.isLoading(_15))continue;if(this.showRecordComponents){if(!_7){var _16=null;if(this.allowRowSpanning&&this.getRowSpan){var _17=this.getCellStartRow(_14,0)!=_14;if(_17)_16=false}
if(_16==null){_16=this.shouldShowRecordComponent(_15)}
var _18=null;if(_16){_18=this.$102n(_15,null,_8);if(_18!=null){if(_18.isNullMarker){_18=null}else{var _19=_18.getID();_5[_19]=null}}else{_18=this.$102o(_15,null,this.body,_14)}}
if(_18!=null){var _19=_18.getID();this.$102l[_19]=true;this.$102k[this.$102k.length]=_18}}else{if(this.frozenBody!=null){for(var _20=0;_20<this.frozenBody.fields.length;_20++){var _21=this.frozenBody.fields[_20],_22=_21.name;var _16=null;if(this.allowRowSpanning&&this.getRowSpan){var _17=this.getCellStartRow(_14,_21.masterIndex)!=_14;if(_17)_16=false}
if(_16==null){_16=this.shouldShowRecordComponent(_15,_21.masterIndex)}
var _18=null;if(_16){_18=this.$102n(_15,_22,_9);if(_18!=null){if(!_18.isNullMarker){var _19=_18.getID();_5[_19]=null}else{_18=null}}else{_18=this.$102o(_15,_22,this.frozenBody,_14,_20)}}
if(_18!=null){var _19=_18.getID();this.$102l[_19]=true;this.$102k[this.$102k.length]=_18}}}
for(var _23=_6[2];_23<=_6[3];_23++){var _21=this.body.fields[_23],_22=_21.name;var _16=null;if(this.allowRowSpanning&&this.getRowSpan){var _17=this.getCellStartRow(_14,_21.masterIndex)!=_14;if(_17)_16=false}
if(_16==null){_16=this.shouldShowRecordComponent(_15,_21.masterIndex)}
var _18=null;if(_16){var _18=this.$102n(_15,_22,_8);if(_18!=null){if(!_18.isNullMarker){var _19=_18.getID();_5[_19]=null}else{_18=null}}else{_18=this.$102o(_15,_22,this.body,_14,_23)}}
if(_18!=null){var _19=_18.getID();this.$102l[_19]=true;this.$102k[this.$102k.length]=_18}}}}
if(this.showBackgroundComponents){if(_15&&_15.backgroundComponent){var _24=this.$91v(_15)?this.$91w(_15).find("isBackgroundComponent",true):null;if(!_24){if(isc.isA.Canvas(_15.backgroundComponent)){var _12=_15.backgroundComponent.addProperties(this.backgroundComponentProperties,{isBackgroundComponent:true})}else{var _25=isc.addProperties({isBackgroundComponent:true},this.backgroundComponentProperties,_15.backgroundComponent);var _12=this.createAutoChild("backgroundComponent",_25)}
var _26=_2.getTableZIndex();_12.setZIndex(_26-49);_12.setWidth("100%");_12.setHeight("100%");_12.setOverflow("hidden");_12.removeOnHideField=true;this.addEmbeddedComponent(_15.backgroundComponent,_15,_14,null,"within")}}}}}
if(this.logIsInfoEnabled("recordComponents")){this.logInfo("updateRecordComponents - new recordComponents:"+this.echo(this.$102l)+", old record components (will be cleaned up if value is 'true'):"+this.echo(_5),"recordComponents")}
for(var i=0;i<_4.length;i++){var _19=_4[i].getID();if(_5[_19]!=true){continue}
if(_1){this.logDebug("cleaning up RecordComponent:"+_4[i],"recordComponents")}
this.$102m(_4[i]);_5[_19]=null}
delete this.$932});isc.evalBoundary;isc.B.push(isc.A.$102o=function isc_ListGrid__applyNewRecordComponent(_1,_2,_3,_4,_5){if(this.logIsDebugEnabled("recordComponents")){this.logDebug("getting record component for row/field:"+[_4,_2],"recordComponents")}
var _6=this.recordComponentPoolingMode=="recycle",_7,_8,_9=_2==null?null:this.getColNum(_2);if(_6){var _10=this.getFromRecordComponentPool(_1,_2);_7=_10?_10[0]:null;_8=_10?_10[1]:null}
if(!_7){if(this.createRecordComponent&&isc.isA.Function(this.createRecordComponent)){_7=this.createRecordComponent(_1,this.getColNum(_2));if(_7!=null)_7.isRecordComponent=true;this.logDebug("created new record component:"+_7,"recordComponents")}}else{if(this.updateRecordComponent&&isc.isA.Function(this.updateRecordComponent)){var _11=_7;_7=this.updateRecordComponent(_1,_9,_7,!_8);if(_7==null){if(this.logIsInfoEnabled("recordComponents")){this.logInfo("showRecordComponents: updateRecordComponent() method failed to return an updated component.","recordComponents")}
this.addToRecordComponentPool(_11)}
this.logDebug("updated record component from pool:"+_7,"recordComponents")}}
return this.$102p(_1,_2,_3,_4,_5,_7)},isc.A.$102p=function isc_ListGrid__finishApplyNewRecordComponent(_1,_2,_3,_4,_5,_6){var _7=this.recordComponentPoolingMode=="recycle",_8=_6==null;if(_8){_6={isNullMarker:true,$92l:_3.getID(),$102q:this.$97w}}
if(_2==null)_2=this.$97i;this.$97g(_1,_2,_6);if(_7&&!_8){_6.currentFieldName=_2;_6.currentRecord=_1}
if(!_8){_6.removeOnHideField=true;return _3.addEmbeddedComponent(_6,_1,_4,_5,this.getRecordComponentPosition())}},isc.A.setDontAutoDestroyComponent=function isc_ListGrid_setDontAutoDestroyComponent(_1,_2){_1.dontAutoDestroy=_2},isc.A.$102m=function isc_ListGrid__cleanUpRecordComponent(_1,_2){if(this.logIsDebugEnabled("recordComponents")){this.logDebug("cleaning up recordComponent:"+_1,"recordComponents")}
var _3=this.recordComponentPoolingMode;if(_2)_3="viewport";if(_3=="data"){if(!_1.destroyed&&!_1.destroying&&!_1.$6w){if(this.$1010==null){this.$1010={}}
var _4=_1.ID;if(this.$1010[_4]!=_1){this.$1010[_4]=_1;if(_1.pointersToThis==null)_1.pointersToThis=[];_1.pointersToThis.add({object:this.$1010,property:_4})}}}else{var _4=_1.ID,_5=isc.Canvas.getById(_1.$92l),_6=_1.embeddedRecord,_7=_1.$92p;if(this.$97e(_6)){this.$97h(_6,_7)}
if(_5!=null){_5.removeEmbeddedComponent(_6,_1);this.$92q(_6,_1)}
if(_3=="viewport"){if(!_1.dontAutoDestroy)_1.markForDestroy()}else{if(_1.destroying||_1.destroyed||_1.$6w)return;this.addToRecordComponentPool(_1)}}},isc.A.getLiveRecordComponent=function isc_ListGrid_getLiveRecordComponent(_1,_2,_3){if(!_1)return null;if(isc.isA.Number(_1))_1=this.getRecord(_1);if(!_3)_3=this.body.getID();var _4=this.$102n(_1,_2,_3);return _4},isc.A.$102n=function isc_ListGrid__getLiveRecordComponent(_1,_2,_3){if(_2==null)_2=this.$97i;if(!this.$97e(_1))return null;var _4=this.$97f(_1);if(_4[_2]==null)return null;var _5=_4[_2];if(_5.$92l!=_3){return null}
if(_5.isNullMarker&&_5.$102q!=this.$97w){return null}
if(_5.destroyed||_5.destroying||_5.$6w){this.logWarn("Destroyed or Destroying record component:"+_5+" present on record. Ignoring","recordComponents");_4[_2]=null;return null}
return _5},isc.A.invalidateRecordComponents=function isc_ListGrid_invalidateRecordComponents(){this.dropRecordComponents(true);if(this.showRecordComponents&&this.isDrawn()){this.updateRecordComponents()}},isc.A.dropRecordComponents=function isc_ListGrid_dropRecordComponents(_1){this.$97w++;var _2=this.$102k||[];delete this.$102k;delete this.$102l;for(var i=0;i<_2.length;i++){this.$102m(_2[i],_1)}},isc.A.refreshRecordComponent=function isc_ListGrid_refreshRecordComponent(_1,_2){if(!this.showRecordComponents||_1==null||this.body==null)return;if(this.showRecordComponentsByCell&&_2==null){this.logWarn("refreshRecordComponent() called with no colNum. This parameter is required when showRecordComponentsByCell is true. Taking no action.");return}
var _3=this.getRecord(_1);if(_3==null||Array.isLoading(_3))return;var _4=this.body,_5=null,_6=null;if(this.showRecordComponentsByCell){_4=this.getFieldBody(_2);_5=this.getLocalFieldNum(_2);_6=this.getFieldName(_2)}
var _7=this.$102n(_3,_6,_4.getID());if(_7!=null&&_7.isNullMarker)_7=null;var _8=this.shouldShowRecordComponent(_3,_2);var _9;if(_7!=null){if(_8&&isc.isA.Function(this.updateRecordComponent)){_9=this.updateRecordComponent(_3,_2,_7,false);if(_9!=_7){this.$102m(_7,(this.recordComponentPoolingMode!="recycle"));this.addToRecordComponentPool(_7);_9=this.$102p(_3,_6,_4,_1,_5,_9);if(_9&&_9.isNullMarker)_9=null}
_8=false}else{this.$102m(_7,(this.recordComponentPoolingMode!="recycle"))}}
if(_8){_9=this.$102o(_3,_6,_4,_1,_5);if(_9&&_9.isNullMarker)_9=null}
var _10=this.$102k.length;if(_7){var _11=_7.getID();this.$102l[_7.getID()]=null;if(_9!=null){_10=this.$102k.indexOf(_7);this.$102k[_10]=null}else{this.$102k.remove(_7)}}
if(_9!=null){var _11=_9.getID();this.$102l[_11]=true;this.$102k[_10]=_9}},isc.A.getRecordComponentPosition=function isc_ListGrid_getRecordComponentPosition(){if(this.recordComponentPosition!=null)return this.recordComponentPosition;return(this.showRecordComponentsByCell?"within":"expand")},isc.A.getRecordComponentPool=function isc_ListGrid_getRecordComponentPool(){if(!this.$102r)this.$102r=[];return this.$102r},isc.A.getFromRecordComponentPool=function isc_ListGrid_getFromRecordComponentPool(_1,_2){var _3=this.getRecordComponentPool(),_4=[],_5=this.showRecordComponentsByCell&&this.poolComponentsPerColumn==true,_6;if(!_3||_3.length==0)return null;if(_5){_4=_3.findAll("currentFieldName",_2)}else{_4=_3}
if(!_4||_4.length==0)return null;for(var i=0;i<_4.length;i++){_6=_4[i];var _8=_6.currentRecord;if(this.comparePrimaryKeys(_8,_1)){_3.remove(_6);return[_6,true]}}
_3.remove(_6);return[_6,false]},isc.A.addToRecordComponentPool=function isc_ListGrid_addToRecordComponentPool(_1){var _2=this.getRecordComponentPool();_2.add(_1)},isc.A.shouldShowRecordComponent=function isc_ListGrid_shouldShowRecordComponent(_1,_2){if(_1==null||_1.$17b||_1[this.isSeparatorProperty]||Array.isLoading(_1))
{return false}
return this.showRecordComponent(_1,_2)},isc.A.showRecordComponent=function isc_ListGrid_showRecordComponent(){return true},isc.A.bodyDrawing=function isc_ListGrid_bodyDrawing(_1){if(isc.$et)arguments.$eu=this;if(_1!=this.body)return;var _2;if(this.$1008){_2=!isc.RPCManager.startQueue();this.$102s()}
this.requestVisibleRows();if(_2)isc.RPCManager.sendQueue();this.$1008=null},isc.A.setRecordComponentHeight=function isc_ListGrid_setRecordComponentHeight(_1){this.recordComponentHeight=_1;if(this.isDrawn())this.markForRedraw()},isc.A.getAvgRowHeight=function isc_ListGrid_getAvgRowHeight(_1){if(this.showRecordComponents&&this.recordComponentHeight!=null){var _2=this.getRecordComponentRowHeight();if(_2!=null)return _2}
return!_1.virtualScrolling?_1.cellHeight:Math.max(_1.cellHeight,_1.avgRowHeight)},isc.A.getRecordComponentRowHeight=function isc_ListGrid_getRecordComponentRowHeight(){if(this.recordComponentHeight==null)return null;var _1=this.getRecordComponentPosition();if(_1==this.$880)return this.cellHeight+this.recordComponentHeight;else return Math.max(this.recordComponentHeight,this.cellHeight)},isc.A.$1000=function isc_ListGrid__setOptionDataSources(){var _1=this.$1008;this.$1008=null;var _2=this.$102t;this.$102t=[];var _3=this.getDataSource();for(var i=0;i<this.completeFields.length;i++){var _5=this.completeFields[i];if(_5==null){this.logWarn("Fields array contains an empty entry");continue}
var _6=_5.displayField||_5[this.fieldIdProperty],_7=_5.valueField||_5[this.fieldIdProperty];if(_5.optionDataSource==null||_5.displayField==null||(_5.displayField==_5.valueField)||(_5.valueField==null&&(_5.displayField==_5[this.fieldIdProperty]))||(_5.autoFetchDisplayMap==false)||(this.autoFetchDisplayMap==false&&_5.autoFetchDisplayMap==null))
{continue}
var _8=isc.DS.get(_5.optionDataSource);if(_8==null){this.logWarn(_5.optionDataSource+" dataSource not found, check value of optionDataSource property on the "+_5[this.fieldIdProperty]+" field");continue}
var _9=_8.ID,_10=_5[this.fieldIdProperty],_11=_5.optionCriteria;var _12=false;if(_2&&!_5.optionFilterContext){for(var _13=0;_13<_2.length;_13++){var _14=_2[_13];if(_14==null)continue;if(this.$102u(_5,_14)){_14.$57w=[_5];this.$102t.add(_14);_2[_13]=null;_12=true;break}}}
if(!_12&&!_5.optionFilterContext){for(var _13=0;_13<this.$102t.length;_13++){var _14=this.$102t[_13];if(this.$102u(_5,_14)){_14.$57w.add(_5);_12=true;break}}}
if(!_12){this.$102t.add({$102v:_9,$57w:[_5],$102w:_5.optionTextMatchStyle,$102x:_11,$102y:_5.optionFilterContext,$102z:_5.optionOperationId});this.$1008=true}}
if(_12&&!this.$1008&&_1){this.$1008=true}
for(var i=0;i<this.$102t.length;i++){if(this.$102t[i].$1020!=null){this.$1021(this.$102t[i])}}
if(_2!=null){for(var i=0;i<_2.length;i++){if(_2[i]&&_2[i].$1020)_2[i].$1020.destroy()}}},isc.A.$102u=function isc_ListGrid__fieldMatchesODSConfig(_1,_2){return(_2.$102v==_1.optionDataSource&&(_1.optionTextMatchStyle==_2.$102w)&&(_1.optionOperationId==_2.$102z)&&(isc.DataSource.getDataSource(_2.$102v).compareCriteria(_1.optionCriteria||{},_2.$102x||{})==0))},isc.A.$1021=function isc_ListGrid__updateValueMapFromODS(_1){var _2=_1.$102v,_3=_1.$57w;if(_3==null||_3.length==0){this.logWarn("$1021 fired for dataSource:"+_2+" which no longer applies to any fields in this ListGrid");return}
var _4=_1.$1020;if(_4==null||(isc.isA.ResultSet(_4)&&!_4.lengthIsKnown()&&!_4.initialData))
{return}
if(_1.$102z){_4.fetchOperation=_1.$102z}
var _5=this.getGroupByFields()||[],_6=_3.getProperty(this.fieldIdProperty),_7=false;if(!isc.isAn.Array(_5))_5=[_5];for(var i=0;i<_3.length;i++){var _9=_3[i],_10=(_9.valueField||_9[this.fieldIdProperty]),_11=_4.getValueMap(_10,_9.displayField);if(this.getField(_9[this.fieldIdProperty])==null){_9.valueMap=_11}else{this.setValueMap(_9[this.fieldIdProperty],_11)}
if(_5.contains(_9.valueField)||_5.contains(_9.displayField)){this.$1022=true}}
if(this.$1022){var _12=true;for(var i=0;i<this.$102t.length;i++){var _1=this.$102t[i];if(!_1.$1020){_12=false;break}}
if(_12){this.regroup(true);delete this.$1022}}},isc.A.$102s=function isc_ListGrid__fetchValueMapData(){var _1;for(var i=0;i<this.$102t.length;i++){var _3=this.$102t[i];if(_3.$1020==null){if(_1==null){_1=!isc.RPCManager.startQueue()}
var _4=_3.$102v;var _5,_6=_3.$57w;if(_6&&_6.length>0){_5="ODS:";for(var _7=0;_7<_6.length;_7++){_5+=_6[_7].name;if(_7<_6.length-1)_5+=","}}
var _8=_3.$102y||{};isc.addProperties(_8,{showPrompt:false,internalClientContext:{ODSConfig:_3},componentId:this.getID(),componentContext:_5,textMatchStyle:_3.$102w});if(_3.$102z!=null){_8.operationId=_3.$102z}
isc.DataSource.getDataSource(_4).fetchData(_3.$102x,{target:this,methodName:"$1023"},_8)}}
if(_1)isc.RPCManager.sendQueue()},isc.A.$1023=function isc_ListGrid__fetchValueMapCallback(_1,_2,_3){var _4=_3.internalClientContext.ODSConfig;if(!_4||(_4.$1020!=null)||!this.$102t||!this.$102t.contains(_4))
{return}
_4.$1020=isc.ResultSet.create({dataSource:_4.$102v,ODSConfig:_4,targetGrid:this,dataChanged:"this.targetGrid.$1021(this.ODSConfig)",initialData:_2})
this.$1021(_4);return true},isc.A.$101z=function isc_ListGrid__dropODSData(){if(this.$102t==null)return;for(var i=0;i<this.$102t.length;i++){var _2=this.$102t[i].$1020;if(_2)_2.destroy()}
delete this.$102t},isc.A.requestVisibleRows=function isc_ListGrid_requestVisibleRows(){var _1=(isc.ResultSet!=null&&isc.isA.ResultSet(this.data)),_2=(isc.ResultTree!=null&&isc.isA.ResultTree(this.data)&&this.data.isPaged());if(_1||_2){if(this.body==null||this.body.$47v){var _3=(_1&&(this.isGrouped||(this.groupByField!=null&&this.getUnderlyingField(this.groupByField))));if(_3){var _4=Math.max(this.dataPageSize||0,1);return this.data.getRange(0,Math.max(_4,this.groupByMaxRecords))}else{return this.data.getRange(0,this.dataPageSize)}}
if(_1&&this.data.lengthIsKnown()&&this.data.getLength()==0){return}
if((_1&&!this.data.lengthIsKnown())||_2){this.body.showAllRows=false}else{this.body.showAllRows=(this.body.overflow==isc.Canvas.VISIBLE?true:this.showAllRecords)}
var _5=this.body.getDrawArea();if(this.$910&&isc.isAn.Array(this.$910)){var _6=_5[1]-_5[0];_5[0]=this.$910[0];_5[1]=_5[0]+_6}
if(_1&&this.isGrouped){return this.data.getRange(0,this.groupByMaxRecords)}else{return this.data.getRange(_5[0],_5[1]+1)}}else if(this.body!=null){this.body.showAllRows=(this.body.overflow==isc.Canvas.VISIBLE?true:this.showAllRecords)}
return null},isc.A.getPrintHTML=function isc_ListGrid_getPrintHTML(_1,_2){var _3=_2&&!(isc.isAn.Object(_2)&&_2.$47);var _4=this.body;if(_4==null){this.createChildren();_4=this.body}
if(this.isDirty()||_4.isDirty()){this.redraw("updating HTML for printing")}
var _5=isc.addProperties({},_1,this.printProperties);var _6,_7;if(isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached()){var _8=this.body.getVisibleRows(),_9=_8?_8[0]:null,_10=this.data.getCachedRange(_9);if(_10!=null){_6=_10[0];_7=_10[1]}}
var _11=isc.Canvas.applyStretchResizePolicy(this.fields.getProperty("width"),_5.width||isc.Page.getWidth());var _12=this.setupHeaderPrintHTML({startRow:_6,endRow:_7,callback:_2,printWidths:_11,printProps:_5});if(this.isExpansionGrid||!_3){return _12}},isc.A.setupHeaderPrintHTML=function isc_ListGrid_setupHeaderPrintHTML(_1,_2,_3){var _4=_3!=null;if(_2==null)_2="";if(_3==null)_3=0;var _5=this.body;this.currentPrintProperties=_1.printProps;var _6=this.gridComponents;for(var i=_3;i<_6.length;i++){var _8=_6[i];if(_8=="body"){_5.$94a=_2;_2="";continue}
if(!this.shouldPrintGridComponent(_8)){continue}
if(_8=="header"){_2+=this.getPrintHeaderRow()}else if(_8=="summaryRow"){_2+=this.getPrintSummaryRow()}else if(isc.isA.Canvas(_8)){var _9=this,_10=function componentPrintCallback(_12){_2+="<TR><TD colSpan='"+_9.fields.length+"'>"+_12+"</TD></TR>";_9.setupHeaderPrintHTML(_1,_2,i+1)}
var _11=_8.getPrintHTML(_1.printProps,_10);if(_11==null){return null}
_2+="<TR><TD colSpan='"+this.fields.length+"'>"+_11+"</TD></TR>"}else{this.logWarn("getPrintHTML() - unable to get print HTML for gridComponent "+_8)}}
delete this.currentPrintProperties;_5.$94b=_2;return this.setupHeaderPrintHTMLComplete(_1,_4)},isc.A.setupHeaderPrintHTMLComplete=function isc_ListGrid_setupHeaderPrintHTMLComplete(_1,_2){var _3=this.body.getTablePrintHTML(_1);var _4=_1.callback&&_1.callback.printCallback;if(_3!=null&&(_4||_2)){var _5=_1.callback;if(_5){this.fireCallback(_5,"HTML,callback",[_3,_5])}}
return _2?null:_3},isc.A.shouldPrintGridComponent=function isc_ListGrid_shouldPrintGridComponent(_1){if(_1==null)return false;if(isc.isA.String(_1)){var _2=this.shouldPrintAttributeMap[_1];if(_2!=null&&this[_2]!=null){return this[_2]}
return this.shouldShowGridComponent(_1)}
return this.shouldPrintChild(_1)},isc.A.getPrintHeaderRow=function isc_ListGrid_getPrintHeaderRow(){var _1=this.fields.duplicate();_1.removeAll(_1.findAll("shouldPrint",false));var _2=0,_3=_1.length;var _4=isc.Canvas.LEFT,_5=this.printHeaderStyle||this.headerBaseStyle,_6;if(this.headerSpans){var _7=[],_8=1;var _9=this.buildSpanMap(null,null,true);for(var i=_2;i<_3;++i){var _11=_1[i];_7[i]=[_11];var _12=_9[_11.name];while(_12!=null){_7[i].add(_12);_12=_12.parentSpan}
_8=Math.max(_7[i].length,_8)}
_6=[];for(var i=_8-1;i>=0;i--){_6[_6.length]="<TR>";var _13=null,_14=null;for(var _15=_2;_15<_3;_15++){var _16=1,_17=1;var _18=(i==0);var _19=_7[_15][i];if(_19=="spanned"){continue}
var _20=0,_21=_15,_22=[];_17=0;while(_21<_3){var _23=null,_24=false;for(var _25=0;(i-_25)>=0;_25++){_23=_7[_21][i-_25];if(_23!=null){if(_19==null){_19=_23;_20=_25;if(i-_25==0){_18=true}}
if(_19==_23){_22[_17]=_25;_20=Math.min(_25,_20)}else{_24=true}
break}}
if(_24){break}
_21++;_17++}
if(_20!=null){_16=_20+1}
for(var _26=0;_26<_22.length;_26++)
{var _27=_7[_26+_15],_25=_22[_26];for(var _28=0;_28<=_25;_28++){if(_26==0&&_28==0){_27[i-_28]=_19}else if(_28<=_20){_27[i-_28]="spanned"}else{_27[i-_28]=null}}}
if(_19==null){this.logWarn("Error in getPrintHeaders() - unable to generate print header HTML from this component's specified headerSpans")}
var _29="center",_30;if(_18){_29=_19.align||_4;_30=this.getHeaderButtonTitle(_19.masterIndex)}else{_30=_19.title}
if(this.isRTL()&&this.reverseRTLAlign){if(_29==isc.Canvas.LEFT)_29=isc.Canvas.RIGHT;else if(_29==isc.Canvas.RIGHT)_29=isc.Canvas.LEFT}
var _31=_6.length;_6[_6.length]="<TD class='";_6[_6.length]=_5;_6[_6.length]="' align='";_6[_6.length]=_29;_6[_6.length]="' rowSpan='";_6[_6.length]=_16;_6[_6.length]="' colSpan='";_6[_6.length]=_17;_6[_6.length]="'>";_6[_6.length]=_30;_6[_6.length]="</TD>"}
_6[_6.length]="</TR>"}}else{var _6=["<TR>"];var _32=["<TD CLASS=",_5," ALIGN="].join("");for(var _33=_2;_33<_3;_33++){var _11=_1[_33];var _29=_11.align||_4;if(this.isRTL()&&this.reverseRTLAlign){if(_29==isc.Canvas.LEFT)_29=isc.Canvas.RIGHT;else if(_29==isc.Canvas.RIGHT)_29=isc.Canvas.LEFT}
_6.addList([_32,_29,">",this.getHeaderButtonTitle(_11.masterIndex),"</TD>"])}
_6[_6.length]="</TR>"}
return _6.join(isc.emptyString)},isc.A.getPrintSummaryRow=function isc_ListGrid_getPrintSummaryRow(){if(!(this.summaryRow)||!(this.summaryRow.body)||!(this.showGridSummary)){return""}
var _1={startRow:0,endRow:this.summaryRow.getTotalRows(),maxRows:this.summaryRow.printMaxRows,printProps:this.printProperties||{},html:[]}
var _2=isc.Canvas.applyStretchResizePolicy(this.fields.getProperty("width"),_1.printProps.width||isc.Page.getWidth());_1.printWidths=_2;this.summaryRow.body.printChunkOnly=true;var _3=this.summaryRow.body.getPrintHTMLChunk(_1,true);delete this.summaryRow.body.printChunkOnly;return _3},isc.A.$937=function isc_ListGrid__prepareBodyForPrinting(_1,_2){this.isPrinting=this.body.isPrinting=true;this.currentPrintProperties=_2;var _3=this.body,_4=this.$94e;var _5=isc.getProperties(_3,["autoFit","wrapCells","showAllRows","showAllColumns","fixedRowHeights","$72y","fields"]);_3.showAllRows=true;_3.showAllColumns=true;this.$94e=false;_3.autoFit=this.printAutoFit;_3.wrapCells=this.printWrapCells;_3.fixedRowHeights=!this.printWrapCells;var _6=this.fields.duplicate();_6.removeAll(_6.findAll("shouldPrint",false));_3.fields=_6;var _7=this.frozenFields;delete this.frozenFields;var _8=this.$1024=_3.$90x,_9=(this.frozenBody!=null&&this.frozenBody.$90x!=null?this.frozenBody.$90x.length:0);if(_9>0){var _10=(_8!=null?_8.length:0),_11=_9+_10,_12=_3.$90x=new Array(_11);for(var i=_10;i--;){_12[i]=_8[i]}
for(var i=_9;i--;){var _14=this.frozenBody.$90x[i];_14.$92i=true;_12[_10+i]=_14}}
this.$92g=0;this.$92h=0;if(this.freezeStart()){if(this.frozenBody&&this.frozenBody.$896!=null&&this.frozenBody.$20u!=null)
{this.$92g=(this.frozenBody.$896-this.frozenBody.$20u+1)}}else{if(this.body&&this.body.$896!=null&&this.body.$20u!=null)
{this.$92h=(this.body.$896-this.body.$20u+1)}}
_3.$72y=_1;return{oldEditorShowing:_4,oldFrozenFields:_7,origProps:_5}},isc.A.$938=function isc_ListGrid__bodyDonePrinting(_1){var _2=this.body,_3=_1.origProps,_4=_1.oldEditorShowing;isc.addProperties(_2,_3);if(_3.showAllRows==null)_2.showAllRows=null;this.$94e=_4;this.frozenFields=_1.oldFrozenFields;_2.$90x=this.$1024;delete this.$1024;if(this.frozenBody!=null&&this.frozenBody.$90x!=null){for(var i=this.frozenBody.$90x.length;i--;){var _6=this.frozenBody.$90x[i];delete _6.$92i}}
delete this.$92g;delete this.$92h;delete this.currentPrintProperties;this.isPrinting=this.body.isPrinting=false;this.body.markForRedraw("finished printing")},isc.A.rowClick=function isc_ListGrid_rowClick(_1,_2,_3,_4){this.$99v=_2;var _1=this.getCellRecord(_2,_3),_5=this.fields[_3];if(Array.isLoading(_1))return;var _6=this.getCellValue(_1,_2,_3);var _7=this.getRawCellValue(_1,_2,_3);if(_1!=null&&_1.$17b){if(this.canCollapseGroup==false)return;if(_4){var _8=isc.EH.getKey();if(_8!="Space"&&_8!="Enter")return}
if(this.canSelectGroups&&this.isCheckboxField(_5)){return}
if(!this.collapseGroupOnRowClick){var _9=this.getEventPart();if(!_9||_9.part!="opener")return}
var _10=this,_11=_1;if(this.getEditRow()!=null){if(this.autoSaveEdits){var _12=this.saveAllEdits(null,function(){_10.toggleFolder(_11)});if(_12)return}else{this.storeUpdatedEditorValue()}}
this.toggleFolder(_1);return}
if(_5.valueIconClick!=null&&!_4){var _9=this.getEventPart();if(_9&&_9.part=="valueicon"){isc.Func.replaceWithMethod(_5,"valueIconClick","viewer,record,recordNum,field,rawValue,editor");var _13=_5.valueIconClick(this,_1,_2,_5,_7,null);if(_13==false)return false}}
if(_5.recordClick&&!(_4&&_5.keyboardFiresRecordClick==false)){isc.Func.replaceWithMethod(_5,"recordClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var _13=_5.recordClick(this,_1,_2,_5,_3,_6,_7);if(_13==false)return false}
if(this.recordClick){if(this.onRecordClick(this,_1,_2,_5,_3,_6,_7)==false)
return false;if(this.recordClick(this,_1,_2,_5,_3,_6,_7)==false)
return false}
var _14=this.isEditable()&&(this.editEvent==isc.EH.CLICK||this.editOnFocus);if(_5.canToggle&&this.canEditCell(_2,_3)&&this.shouldToggle(_5,_4))
{var _15=this.getEditorValueMap(_5,this.getEditedRecord(_2,_3));if(_15==null&&isc.SimpleType.getBaseType(_5.type)==this.$nv){_15=[true,false]}
if(_15!=null){if(!isc.isAn.Array(_15))_15=isc.getKeys(_15);if(_15.length>1){var _16=this.getFieldName(_3),_17=this.getEditedCell(_2,_3),_18=_15.indexOf(_17);_18+=1;if(_18>=_15.length)_18=0;var _19=_17;_17=_15[_18];var _20;if(_5.change!=null){this.logInfo("canToggle firing specified field.change() event directly","gridEdit");_20=this.fireCallback(_5.change,"form,item,value,oldValue",[null,null,_17,_19])==false}
if(!_20){if(!_14&&this.autoSaveEdits){this.setEditValue(_2,_3,_17,true,false)}else{this.setEditValue(_2,_3,_17)}
if(_5.changed!=null){this.logInfo("canToggle firing specified field.changed() event directly","gridEdit");this.fireCallback(_5.changed,"form,item,value",[null,null,_17])}
if(this.autoSaveEdits)this.saveEdits(null,null,_2,_3)}}}}
if(_14){if(this.handleEditCellEvent(_2,_3,isc.ListGrid.CLICK)==true){return true}
if(_4){for(var i=0;i<this.fields.length;i++){if(i==_3)continue;if(this.handleEditCellEvent(_2,i,isc.ListGrid.CLICK)==true){return true}}}}},isc.A.shouldToggle=function isc_ListGrid_shouldToggle(_1,_2){if(_2){var _3=isc.EH.getKey();if(_3==this.$47c||_3==this.$375)return true}
if(!this.$100r(_1))return true;var _4=this.getEventPart();return(_4&&_4.part=="valueicon")},isc.A.rowDoubleClick=function isc_ListGrid_rowDoubleClick(_1,_2,_3,_4){var _5=this.fields[_3],_6=this.getCellValue(_1,_2,_3),_7=this.getRawCellValue(_1,_2,_3);if(_1!=null&&_1.$17b)return;if(_5.recordDoubleClick){isc.Func.replaceWithMethod(_5,"recordDoubleClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var _8=_5.recordDoubleClick(this,_1,_2,_5,_3,_6,_7);if(_8==false)return _8}
if(this.recordDoubleClick!=null){var _8=this.recordDoubleClick(this,_1,_2,_5,_3,_6,_7);if(_8==false)return _8}
if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK){if(this.handleEditCellEvent(_2,_3,isc.ListGrid.DOUBLE_CLICK)==true)return true;if(_4){for(var i=0;i<this.fields.length;i++){if(i==_3)continue;if(this.handleEditCellEvent(_2,i,isc.ListGrid.DOUBLE_CLICK)==true)return true}}}},isc.A.$936=function isc_ListGrid__cellContextClick(_1,_2,_3){this.cellContextItems=null;if(this.cellContextClick){var _1=this.getCellRecord(_2,_3);if(this.cellContextClick(_1,_2,_3)==false)return false}
if(this.showCellContextMenus){if(!this.cellContextMenu){this.cellContextMenu=this.createAutoChild("cellContextMenu",this.contextMenuProperties,this.getMenuConstructor())}
if(!this.cellContextItems){this.cellContextItems=this.makeCellContextItems(this.getCellRecord(_2,_3),_2,_3)}
if(isc.isAn.Array(this.cellContextItems)&&this.cellContextItems.length>0){this.cellContextMenu.setData(this.cellContextItems);this.cellContextMenu.showContextMenu(this)}
return false}else{return true}});isc.evalBoundary;isc.B.push(isc.A.getShowChildDataSourceContextMenuItemTitle=function isc_ListGrid_getShowChildDataSourceContextMenuItemTitle(_1){return"Show "+_1.getPluralTitle()},isc.A.makeCellContextItems=function isc_ListGrid_makeCellContextItems(_1,_2,_3){if(this.dataSource!=null){var _4=[];if(this.canOpenRecordDetailGrid){var _5=isc.DS.get(this.getRecordDataSource(_1)),_6=_5.getChildDataSources();if(_6!=null){for(var i=0;i<_6.length;i++){var _8=_6[i];_4.add({title:this.getShowChildDataSourceContextMenuItemTitle(_8),record:_1,dataSource:_8,click:"target.openRecordDetailGrid(item.record, item.dataSource)"})}}}
if(this.canOpenRecordEditor){_4.add({title:this.openRecordEditorContextMenuItemTitle,record:_1,click:"target.endEditing();target.openRecordEditor(item.record)"})}
if(_1!=null&&this.$1025==_1){_4.add({title:this.dismissEmbeddedComponentContextMenuItemTitle,click:"target.closeRecord()"})}
_4.add({title:this.deleteRecordContextMenuItemTitle,click:"target.removeSelectedData()"});return(_4.length>0?_4:null)}
return null},isc.A.getCanHover=function isc_ListGrid_getCanHover(){if(this.canHover!=null)return this.canHover;var _1=this.$928();if(_1)return _1;var _2=this.getFields();if(_2!=null){for(var i=0;i<_2.length;i++){if(_2[i].showHover)return true}}
return this.canHover},isc.A.$1026=function isc_ListGrid__getFieldHoverHTMLCallback(_1,_2){var _3=this.getField(_2);if(_3==null)return null;if(_3.showHover==false)return null;if(_3.showHover==null&&!this.canHover)return null;if(_3.hoverHTML){isc.Func.replaceWithMethod(_3,this.$97x,this.$97y);return{target:_3,methodName:this.$97x}}
return null},isc.A.$93c=function isc_ListGrid__isCellHoverSuppressed(_1,_2){if(this.isEditingCell(_1,_2)){return true}
if(this.$102d(_2)&&this.canEditCell(_1,_2)){return true}
return false},isc.A.getCellHoverDelay=function isc_ListGrid_getCellHoverDelay(_1,_2,_3){var _4=this.getField(_3).hoverDelay;if(_4!=null)return _4;return this.hoverDelay},isc.A.cellHoverHTML=function isc_ListGrid_cellHoverHTML(_1,_2,_3){var _4=this.$1026(_2,_3),_5=this.getCellValue(_1,_2,_3);if(_4){return isc.Class.fireCallback(_4,this.$97y,[_1,_5,_2,_3,this])}
if(_5!=null&&!isc.isAn.emptyString(_5)&&_5!=this.emptyCellValue){return _5}},isc.A.cellValueHoverHTML=function isc_ListGrid_cellValueHoverHTML(_1,_2,_3,_4){var _5=this.getField(_3);if(_5.showHover==false)return null;if(_5.showHover==null&&this.canHover==false)return null;return _4},isc.A.$93a=function isc_ListGrid__getCellHoverComponent(_1,_2,_3){if(!this.showHoverComponents)return null;if(this.$94e&&this.getEditRow()==_2&&(!this.editByCell||this.getEditCol()==_3))return null;var _4=this.getField(_3);if(_4.showHover==false)return null;if(_4.showHover==null&&!this.canHover)return null;if(this.getCellHoverComponent&&isc.isA.Function(this.getCellHoverComponent)){return this.getCellHoverComponent(_1,_2,_3)}else return null},isc.A.getCellHoverComponent=function isc_ListGrid_getCellHoverComponent(_1,_2,_3){return this.$97j(_1,false,true,_2,_3)},isc.A.$97j=function isc_ListGrid__getStockEmbeddedComponent(_1,_2,_3,_4,_5){var _6=this.getFields(),_7=this.dataSource?isc.getValues(this.getDataSource().getFields()):_6,_8=(!_3?null:this.hoverWidth||this.hoverSize||this.defaultCellHoverComponentWidth),_9=(!_3?null:this.hoverHeight||this.hoverSize||this.defaultCellHoverComponentHeight),_10=[],_11;for(var i=0;i<_7.length;i++){var _13=_7.get(i);if(this.dataSource){if(!_6.find("name",_13.name)){_10.add(_13)}}else{if(!this.isExpansionField(_13)){_10.add(_13)}}}
var _14=(_3?this.hoverMode:(_2?this.expansionMode:null));var _15;if(_14=="detailField"){if(!_2&&!_1[this.detailField])return null;_11=this.createAutoChild("expansionDetailField",{styleName:this.hoverStyle,contents:_1[this.detailField]});_15={width:(_3?_8:"100%"),height:(_3?_9:"100%"),members:[_11]};if(_3){_15=isc.addProperties(_15,{hoverAutoDestroy:this.hoverAutoDestroy})}
_11=isc.VLayout.create(_15)}else if(_14=="details"){_10=_10.map(function(_13){if(_13.showIf==null)return _13;return isc.addProperties({},_13,{showIf:"true"})});_15={dataSource:this.dataSource,fields:_10};if(_3){_15=isc.addProperties(_15,{width:_8,height:_9,hoverAutoDestroy:this.hoverAutoDestroy})}
_11=this.createAutoChild("expansionDetails",_15);if(isc.isA.ResultSet(_1)){_11.setData(_1)}else{var _16=isc.ResultSet.create({dataSource:this.dataSource,initialData:[_1]});_11.setData(_16)}}else if(_14=="related"){_15={dataSource:this.getRelatedDataSource(_1)};if(_3){_15=isc.addProperties(_15,{canEdit:false,width:_8,height:_9,dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy})}
if(_2){if(this.childExpansionMode!=null)_15=isc.addProperties(_15,{canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode});if(this.expansionCanEdit!=null)_15=isc.addProperties(_15,{canEdit:this.expansionCanEdit});_15.isExpansionGrid=true}
_11=this.createAutoChild("expansionRelated",_15);if(this.expansionCanEdit)_11.autoSaveEdits=true;_11.delayCall("fetchRelatedData",[_1,this.dataSource,function(_21,_22){if(_22==null||_22.length==0)_11.setBodyOverflow("visible")}])}else if(_14=="detailRelated"){_15={dataSource:this.dataSource,fields:_10};if(_3){_15=isc.addProperties(_15,{dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy})}
var _17=this.createAutoChild("expansionDetails",_15)
_17.setData(_1);_15={dataSource:this.getRelatedDataSource(_1),height:"100%"};if(_3){_15=isc.addProperties(_15,{dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy,canEdit:false})}
if(_2){if(this.childExpansionMode!=null)_15=isc.addProperties(_15,{canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode});if(this.expansionCanEdit!=null)_15=isc.addProperties(_15,{canEdit:this.expansionCanEdit});_15.isExpansionGrid=true}
var _18=this.createAutoChild("expansionRelated",_15);_15={members:[_17,_18]};if(_3){_15=isc.addProperties(_15,{width:_8,height:_9,hoverAutoDestroy:this.hoverAutoDestroy})}
_11=this.createAutoChild("expansionDetailRelated",_15)}else if(_14=="editor"){_11=isc.VLayout.create({autoDraw:false,width:"100%",height:"100%",creator:this});var _19=this.createAutoChild("expansionEditor",{dataSource:this.dataSource,fields:_10,extraSpace:5,itemChanged:function(){this.saveButton.setDisabled(false)}});_19.editRecord(this.getEditedRecord(_4)||_1);_19.validate();var _20=this.createAutoChild("expansionEditorSaveButton",{title:this.expansionEditorSaveButtonTitle,grid:this,form:_19,record:_1,disabled:true,extraSpace:5});_19.saveButton=_20;_11.formMember=_19;_11.addMembers([_19,_20])}
if(_11){_11.isStockComponent=true;_11.expandedRecord=_1}
return _11},isc.A.selectAllRecords=function isc_ListGrid_selectAllRecords(_1){this.$93s=true;this.selection.selectAll(_1);this.$93s=null;this.$930("select all");if(this.getCurrentCheckboxField()!=null){if(!isc.ResultSet||!isc.isA.ResultSet(this.data)||this.data.allMatchingRowsCached())
{this.$99b(true)}}
this.fireSelectionUpdated()},isc.A.deselectAllRecords=function isc_ListGrid_deselectAllRecords(){this.$93s=true;this.selection.deselectAll();this.$93s=null;this.$930("deselect all");if(this.getCurrentCheckboxField()!=null)this.$99b(false);this.fireSelectionUpdated()},isc.A.userSelectAllRecords=function isc_ListGrid_userSelectAllRecords(){var _1=this.getOriginalData(),_2=_1.getLength();if(isc.ResultSet&&isc.isA.ResultSet(_1)&&!_1.rangeIsLoaded(0,_2)){this.selection.warnSelectionRangeNotLoaded();return}
var _3=(this.isGrouped?this.getAllRecordsFromGroupTree():_1.getRange(0,_2)),_4=[];for(var i=0;i<_3.length;i++){if(!this.canSelectRecord(_3[i]))continue;_4[_4.length]=_3[i]}
this.selection.selectList(_4);this.fireSelectionUpdated()},isc.A.getAllRecordsFromGroupTree=function isc_ListGrid_getAllRecordsFromGroupTree(){var _1;if(this.isGrouped)_1=this.data;if(!_1||!isc.isA.Tree(_1))return;return this.data.getDescendantLeaves(this.data.getRoot())},isc.A.canSelectCell=function isc_ListGrid_canSelectCell(_1,_2){return true},isc.A.canSelectRecord=function isc_ListGrid_canSelectRecord(_1){if(_1&&this.isGrouped&&!this.canSelectGroups&&_1.$17b)return false;return(_1!=null&&_1[this.recordCanSelectProperty]!==false)},isc.A.bodyKeyPress=function isc_ListGrid_bodyKeyPress(_1,_2){if(this.onBodyKeyPress(_1,_2)==false)return false;if(this.$94e){var _3=_1.keyTarget,_4;while(_4==null&&_3!=this&&_3!=null){_4=_3.canvasItem;_3=_3.parentElement}
if(_4!=null&&_4.form==this.getEditForm()){var _5=this.editorKeyPress(_4,isc.EH.getKey(),isc.EH.getKeyEventCharacterValue());return(_5==null?isc.EH.STOP_BUBBLING:_5)}}
if(this.data.getLength()>0){var _6=isc.EventHandler,_7=_1.keyName;var _8=this.editOnKeyPress&&this.isEditable();if(_8&&this.$1027(_1,_2))return false;var _9=this.getFocusCell();if(this.isGrouped){var _10=_7==this.$97z,_11=!_10&&_7==this.$970;if(_10||_11){var _12=_9[0],_13=this.data?this.data.get(_12):null;if(_13&&_13.$17b){if(_10)this.closeFolder(_13);else this.openFolder(_13);return}}}
var _9=this.getFocusCell(),_14=_9[0]!=null?this.getCellRecord(_9[0],_9[1]):null;if(this.canExpandRecords&&this.$957(_14,_9[0])){var _15=this.isExpanded(_14);if(_15&&_7==this.$97z){this.collapseRecord(_14);return}
if(!_15&&_7==this.$970){this.expandRecord(_14);return}}
switch(_7){case this.$61i:return this.$95d(-1,0);case this.$61j:return this.$95d(1,0);case this.$97z:return this.$95d(0,-1);case this.$970:return this.$95d(0,1)}
if(this.shouldNavigateOnTab()&&_7==this.$ry){if(isc.EH.shiftKeyDown())return this.$95d(0,-1,true);else return this.$95d(0,1,true)}
if(_7==this.$47c){var _16=true;if(this.generateClickOnSpace){var _17=this.$373();if(_17==false)return false;else if(_17==true)_16=false}
if(this.generateDoubleClickOnSpace){var _18=this.$1028();if(_18!=null)_16=false}
if(!_16)return false}else if(_7==this.$375){var _16=true;if(this.generateClickOnEnter){var _17=this.$373();if(_17==false)return false;else if(_17==true)_16=false}
if(this.generateDoubleClickOnEnter){var _18=this.$1028();if(_18!=null)_16=false}
if(!_16)return false}else if(_6.modifierKeyDown()&&(_7=="D"||_7=="R"||_7=="C"||_7=="V")){return this.$1029(_7)}else if(_6.modifierKeyDown()&&_7=="A"&&this.canSelectCells&&this.canSelectAll){this.selection.selectAll();this.fireSelectionUpdated();return false}else if(_7==this.$971&&this.editOnF2Keypress&&this.isEditable()&&this.editEvent!="none")
{var _19,_20;if(this.canSelectCells&&this.editByCell){var _21=this.getFocusCell();if(_21[0]>=0)_19=_21[0];if(_21[1]>=0)_20=_21[1]}else{_19=this.getFocusRow();if(_19<0)_19=null}
this.startEditing(_19,_20);return false}}
return true},isc.A.onBodyKeyPress=function isc_ListGrid_onBodyKeyPress(){},isc.A.$95d=function isc_ListGrid__navigateToNextCell(_1,_2,_3,_4,_5){var _6=isc.EH.lastEvent;if(this.body.contains(_6.keyTarget)&&!this.body.hasFocus){this.body.focus()}else if(this.frozenBody&&this.frozenBody.contains(_6.keyTarget)==this.frozenBody&&!this.frozenBody.hasFocus)
{this.frozenBody.focus()}
if(!this.canSelectCells)return this.$372(_1,_4,_5);else if(this.selectionType==isc.Selection.NONE)return true;if(_5==null){_5=_3?this.tabKeyAction:this.getArrowKeyAction()}
if(_5==this.$sw)return true;var _7=isc.EH.shiftKeyDown();if(_5==this.$42w&&_7){this.$103a()}
var _8=this.getFocusCell(_7);var _9=_8[0],_10=_8[1];if(_9!=null&&_10!=null){if(!_4){_9+=_1;_10+=_2}}else{_9=_10=0}
var _11=this.getTotalRows(),_12=this.getTotalCols();var _13="done";if(_3)_13=this.rowEndEditAction||"next";if(_10<0||_10>=_12){if(_13=="same"){if(_2>0)_10=0;else _10=_11-1}else if(_13=="next"){if(_2>0){if(_9<_11-1){_9++;_10=0}else return true}else{if(_9>0){_9--;_10=_12-1}else return true}}else{if(_13=="stop")return false;return true}}
var _14=_5==this.$42w&&isc.EH.modifierKeyDown();if(_14){if(_1>0)_9=this.getTotalRows()-1;else if(_1<0)_9=0;if(_2>0)_10=this.getTotalCols()-1;else if(_2<0)_10=0;_1=-_1;_2=-_2}
while(!this.recordIsEnabled(this.getCellRecord(_9,_10),_9,_10)){if(_1!=0)_9+=_1;if(_2!=0)_10+=_2;if(_9==_8[0]&&_10==_8[1]){return true}
if(_10<0||_10>=_12){if(_13=="same"){if(_2>0)_10=0;else _10=_11-1}else if(_13=="next"){if(_2>0){if(_9<_11-1){_9++;_10=0}else return true}else{if(_9>0){_9--;_10=_12-1}else return true}}else{if(_13=="stop")return false;return true}}else if(_9<0||_9>=_11){return true}}
this.clearLastHilite();this.$103b=_9;this.$103c=_10;this.$945=this.getFieldBody(_10);if(_5==this.$42w){this.$946(_9,_10);if(_3)this.selection.deselectAll()
this.$103d(_9,_10)}
if(_5==this.$974)this.$946(_9,_10);this.$93q=true;this.scrollToCell(_9,_10);this.$93q=false;return false},isc.A.focusInCell=function isc_ListGrid_focusInCell(_1,_2){this.$103b=_1;this.$103c=_2;var _3=this.getFieldBody(_2);this.$945=_3;this.$946(_1,_2);if(!_3.hasFocus())_3.focus()},isc.A.focusInRow=function isc_ListGrid_focusInRow(_1){this.$57o(_1);if(!this.body.isFocused())this.body.focus()},isc.A.$946=function isc_ListGrid__hiliteCell(_1,_2){if(isc.isAn.Object(_1)){_2=_1.$103e;_1=_1.$90o}
if(_1==null||_2==null||_1<0||_2<0||_1>=this.getTotalRows()||_2>=this.getTotalCols())return;var _3=this.$945,_4=_3.selection.firstCol||0;_3.lastOverRow=_1;_3.lastOverCol=_2-_4;_3.setRowStyle(_1,null,_2-_4);this.updateRollOverCanvas(_1,_2)},isc.A.$103f=function isc_ListGrid__getLastMouseOverBody(){if(!this.frozenBody)return this.body;if(this.frozenBody.lastMouseOverRow==null&&this.frozenBody.lastMouseOverCol==null)return this.body;return this.frozenBody},isc.A.$103a=function isc_ListGrid__ensureValidSelectionOrigin(){if(!this.selection.$103g(this)){var _1=this.$103f(),_2=_1.selection.firstCol||0;var _3=_1.lastMouseOverRow||0,_4=_1.lastMouseOverCol||0,_5=this.getCellRecord(_3,_4+_2);if(this.recordIsEnabled(_5,_3,_4+_2)){_1.selectOnMouseDown(_5,_3,_4)}}},isc.A.$1027=function isc_ListGrid__editOnKeyPress(_1,_2){var _3=_2.keyName,_4=isc.EH.getKeyEventCharacter(_1);if(_3!=this.$971&&_3!=this.$972&&_3!=this.$qx&&(_3==this.$ru||isc.EH.$rk[_3]||_4==null||_4==isc.emptyString))
{return false}
var _5=this.getFocusCell(),_6=_5[0]||0,_7=_5[1]||0;if(this.$94e||_6<0||_7<0)return false;var _8;if(_3==this.$375||_3==this.$971)_4=null;var _9;if(_4!=null){if(_3==this.$972||_3==this.$qx){_9=null}else if(this.autoSelectEditors){_9=_4}else{_9=this.getEditedCell(_6,_7)+_4}
this.$103h=true}
return this.handleEditCellEvent(_5[0],_5[1],this.$973,_9)},isc.A.getArrowKeyAction=function isc_ListGrid_getArrowKeyAction(){var _1=this.arrowKeyAction;if(_1==this.$sw)return this.$sw;var _2=this.canSelectCells&&isc.EH.shiftKeyDown();if(isc.EH.modifierKeyDown()&&!_2)return this.$974;if(_1!=null)return _1;return this.selectionAppearance=="checkbox"?this.$974:this.$42w},isc.A.$372=function isc_ListGrid__navigateToNextRecord(_1,_2,_3,_4){var _3=_3==null?this.getArrowKeyAction():_3;if(_3==this.$sw||_1===0)return true;if(_1==null)_1=1;var _5;_5=this.getFocusRow(_1>0);if(_5==null)_5=this.$99v;var _6=_5,_7;if(!isc.isA.Number(_5)){_5=this.body?this.body.$89m()[0]:0;_7=_5}else{_5=_5+(_2?0:_1);_7=_6}
var _8=this.getTotalRows()-1;if(_5<0||_5>_8){if(_8<0)return true;_5=_7}
while(!this.recordIsEnabled(this.getCellRecord(_5,0),_5,0)){_5+=_1;if(_5<0||_5>_8){_5=_7;break}}
if(isc.screenReader){this.body.$90v(_5)}
if(_3==this.$974)this.$57o(_5);else{this.$57o(_5);if(_5==_6){var _9=this.$95a();if(_9>=0){if(this.body.selectionEnabled()&&this.recordIsEnabled(this.getCellRecord(_5,_9),_5,_9))
{this.selection.selectOnMouseDown(this,_5,_9);this.selection.selectOnMouseUp(this,_5,_9);this.fireSelectionUpdated()}}}
else if(_3==this.$42w)this.$103d(_5);else if(_3==this.$975)this.$103i(_5)}
if(!_4){this.$93q=true;this.scrollRecordIntoView(_5)
this.$93q=false}
return false},isc.A.$95a=function isc_ListGrid__getKeyboardClickNum(){var _1=this.keyboardClickField;if(_1!=null){var _2;if(isc.isA.Number(_1)&&_1>0&&_1<this.fields.length){_2=this.fields[_1]}else{_2=this.fields.find(this.fieldIdProperty,_1)}
if(_2&&_2.ignoreKeyboardClicks){this.logWarn("Explicitly specified keyboardClickField:"+this.keyboardClickField+" refers to a field which disallows keyboard click events.");_2=null}
if(_2!=null){return this.fields.indexOf(_2)}}
if(this.getCurrentCheckboxField()!=null){return this.getCheckboxFieldPosition()}
for(var i=0;i<this.fields.length;i++){if(this.fields[i].ignoreKeyboardClicks!=true)return i}
return-1},isc.A.$103d=function isc_ListGrid__generateCellClick(_1,_2,_3){if(!this.canSelectCells&&this.body.lastOverRow!=null&&this.body.lastOverRow!=_1)
{this.clearLastHilite()}
if(isc.isAn.Object(_1))_1=this.getRecordIndex(_1);if(!isc.isA.Number(_1)||_1<0)_1=0;if(_1>=this.data.getLength())_1=this.data.getLength()-1;var _4;if(this.canSelectCells){if(_2==null||_2<0||_2>=this.getTotalCols())return;_4=_3?this.getFieldBody(_2):this.$945}else{_4=this.body;_4.$940=_1;_2=this.$95a();if(_2==-1)return}
var _5=_4.selection.firstCol||0;var _6=this.getCellRecord(_1,_2),_7=this.selectOnGeneratedCellClick(_6,_1,_2,_4);if(_7){_4.selectOnMouseDown(_6,_1,_2-_5,true);_4.selectOnMouseUp(_6,_1,_2-_5,true)}
return this.rowClick(this.getCellRecord(_1,_2),_1,_2,true)},isc.A.selectOnGeneratedCellClick=function isc_ListGrid_selectOnGeneratedCellClick(_1,_2,_3,_4){return(_4.selectionEnabled()&&this.recordIsEnabled(_1,_2,_3))},isc.A.getFocusRow=function isc_ListGrid_getFocusRow(_1){if(this.body.$940!=null&&((this.body.$940==this.body.lastOverRow)||(this.body.$940==this.$99v)))
{return this.body.$940}
delete this.body.$940;var _2=this.getSelection();if(_2.length==0)return null;_2=_2[(_1?_2.length-1:0)]
return this.getRecordIndex(_2)},isc.A.getFocusCell=function isc_ListGrid_getFocusCell(_1){if(!this.canSelectCells){return[this.getFocusRow(),this.$95a()]}
var _2,_3;if(this.$103b!=null&&this.$103c!=null){var _4=this.$945;if(_4!=null){var _5=_4.selection.firstCol||0;if((this.$103b==_4.lastOverRow&&this.$103c==_4.lastOverCol+_5)||(this.$944==_4&&this.$103b==_4.$942&&this.$103c==_4.$943+_5))
{_2=this.$103b;_3=this.$103c}}}
if(_2==null||_3==null){if(_1){_2=this.selection.lastRow;_3=this.selection.lastCol}
var _4=this.$944;if(_4){var _5=_4.selection.firstCol||0;if(_2==null||_3==null){_2=_4.$942;_3=_4.$943+_5}}
if(_2==null||_3==null){var _6=this.getSelection();if(_6.getLength()>0){_2=_6[0].$90o;_3=_6[0].$103e}}}
return[_2,_3]},isc.A.$373=function isc_ListGrid__generateFocusRecordClick(){var _1=this.getFocusCell(),_2=_1[0],_3=_1[1];if(_2!=null&&_3!=null){var _4=this.$103d(_2,_3,true);if(_4==null)_4=true;return _4}
return null},isc.A.$103i=function isc_ListGrid__generateRecordDoubleClick(_1,_2){if(_2==null)_2=this.$95a();if(_2==null||_2==-1)return;return this.rowDoubleClick(this.getCellRecord(_1,_2),_1,_2,true)},isc.A.$1028=function isc_ListGrid__generateFocusRecordDoubleClick(){var _1=this.getFocusCell(),_2=_1[0],_3=_1[1];if(_2!=null&&_3!=null&&_3>=0){var _4=this.$103i(_2,_3);if(_4==null)_4=true;return _4}
return null},isc.A.scrollRecordToTop=function isc_ListGrid_scrollRecordToTop(_1){return this.scrollRecordIntoView(_1,"top")},isc.A.scrollRecordIntoView=function isc_ListGrid_scrollRecordIntoView(_1,_2){return this.scrollToCell(_1,null,null,_2)},isc.A.scrollToColumn=function isc_ListGrid_scrollToColumn(_1,_2){return this.scrollToCell(null,_1,_2)},isc.A.scrollToRow=function isc_ListGrid_scrollToRow(_1,_2){this.scrollToCell(_1,0,null,_2);return this},isc.A.scrollCellCallback=function isc_ListGrid_scrollCellCallback(_1,_2,_3,_4,_5,_6){if(_6==this.$103j){this.$103j=null;this.scrollToCell(_1,_2,_3,_4,_5)}},isc.A.scrollToCell=function isc_ListGrid_scrollToCell(_1,_2,_3,_4,_5){return this.scrollCellIntoView(_1,_2,_3,_4,_5)},isc.A.scrollCellIntoView=function isc_ListGrid_scrollCellIntoView(_1,_2,_3,_4,_5){if(isc.isA.Boolean(_3)&&(typeof _5=='undefined')){isc.logWarn("Center argument had been passed to a scroll method(scrollToCell, scrollCellIntoView, scrollToColumn or scrollRecordIntoView). This is deprecated. See documentation for detailed information about passed arguments.");_5=_4;_4=_3?"center":"top";_3=_3?"center":"left"}
if((isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource)||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())){if(!this.$103j)this.$103j=1;else this.$103j+=1;var _6=this.$103j;isc.Page.waitFor(this,"dataArrived",{method:this.scrollCellCallback,args:[_1,_2,_3,_4,_5,_6],target:this});return}
if(!this.body||!this.body.isDrawn()){this.logInfo("scrollCellIntoView() called before the body has been drawn.  Cell "+_1+","+_2+" will scrolled into view on draw().");this.$910=[_1,_2,_3,_4];return}
if(this.body.$44||this.body.$6o){this.body.adjustOverflow("ScrollCellIntoView requesting size")}
if(_3!="left"&&_3!="center"&&_3!="right"){_3=this.scrollToCellXPosition}
if(_4!="top"&&_4!="center"&&_4!="bottom"){_4=this.scrollToCellYPosition}
var x,y,_9,_10,_11=this.body;if(_1!=null){if(!_11.$89n){y=_11.getRowTop(_1);_10=_11.getRowSize(_1)}else{var _12=_11.$20t==null||_1<_11.$20t||_1>_11.$89v,_13=!_12;if(_13){var _14=_11.getRowTop(_1),_15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight,_16=_11.getScrollTop();if(_16>_14||((_11.getViewportHeight()+_16)<(_14+_15)))
{_13=false}}
if(!_13){_11.$89o=_1;if(_4=="center"){var _15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight;_11.$89p=-1*(_11.getViewportHeight()-_15)/2}else if(_4=="bottom"){var _15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight;_11.$89p=_15-_11.getViewportHeight()}else{_11.$89p=0}
if(_2!=null){var _17=null;if(_3=="left"){_17=this.getColumnLeft(_2)}else if(_3=="right"){_17=this.getColumnLeft(_2)+this.getColumnWidth(_2)-_11.getViewportWidth()}else{_17=this.getColumnLeft(_2)+(this.getColumnWidth(_2)-_11.getViewportWidth())/2}
_11.scrollTo(_17)}
_11.$89q()}
return}}
if(_2!=null){if(this.frozenFields!=null&&_2<this.frozenFields.length){_2=null}else{x=this.getColumnLeft(_2);_9=this.getColumnWidth(_2)}}
if(this.isDirty()||this.body.isDirty()){var _18;if(_1!=null){var _19=_11.getScrollHeight();if(y+_10>_19)_18=true}
if(!_18&&_2!=null){var _20=_11.getScrollWidth();if(x+_9>_20)_18=true}
if(_18)this.redraw("scrollIntoView")}
_11.scrollIntoView(x,y,_9,_10,_3,_4,null,null,_5)},isc.A.bodyScrolled=function isc_ListGrid_bodyScrolled(_1,_2,_3){if(_1==null)_1=_3?this.frozenBody.getScrollLeft():this.body.getScrollLeft();if(_3){this.body.$94d=true;var _4=this.frozenBody;if(_4.$89u){this.body.$89o=_4.$89o;this.body.$89p=_4.$89p;this.body.$89r=_4.$89r;this.body.$89q()}else{this.body.scrollTo(null,_2,"scrollSync")}
delete this.body.$94d
return}
if(this.frozenBody!=null){this.frozenBody.$94d=true;var _5=this.body,_4=this.frozenBody;if(_5.$89u){_4.$89o=_5.$89o;_4.$89p=_5.$89p;_4.$89r=_5.$89r;_4.$89q()}else{_4.scrollTo(null,_2,"bodyScrollSync")}
delete this.frozenBody.$94d}
if(!this.$101c){this.syncHeaderScrolling(_1,_2);this.syncFilterEditorScrolling(_1,_2);this.syncSummaryRowScrolling(_1,_2)}
if(this.$94e&&this.$94u){var _6=this.getEditForm(),_7=this.getEditRow(),_8=this.getEditCol(),_9=_6.getItem(this.getEditorName(_7,_8));if(_9){if(!_9.hasFocus&&(_6.hasFocus||isc.EH.getFocusCanvas()==null))
{this.$94v(_8)}else{delete this.$94u}}}},isc.A.syncHeaderScrolling=function isc_ListGrid_syncHeaderScrolling(_1,_2){if(_1!=null&&this.header){if(!this.isRTL()){if(_1!=this.header.getScrollLeft()){this.header.scrollTo(_1,null,"headerScrollSync")}}else{var _3=this.header,_4=this.body,_5=_3.getScrollWidth()-_3.getViewportWidth(),_6=_5-_3.getScrollLeft(),_7=_4.getScrollWidth()-_4.getViewportWidth(),_8=_7-_1;if(_8!=_6){_3.scrollTo(_5-_8,null,"scrollSync")}}}},isc.A.headerScrolled=function isc_ListGrid_headerScrolled(){if(!this.$103k){this.$103k=this.delayCall("syncBodyScrolling")}},isc.A.syncBodyScrolling=function isc_ListGrid_syncBodyScrolling(){delete this.$103k;var _1=this.header.getScrollLeft();if(this.body){if(!this.isRTL()){if(_1!=this.body.getScrollLeft())this.body.scrollTo(_1,null,"scrollSync")}else{var _2=this.header,_3=this.body,_4=_2.getScrollWidth()-_2.getViewportWidth(),_5=_4-_2.getScrollLeft(),_6=_3.getScrollWidth()-_3.getViewportWidth(),_7=_6-_1;if(_7!=_5){_3.scrollTo(Math.max(0,_6-_5),null,"scrollSync")}}}},isc.A.syncFilterEditorScrolling=function isc_ListGrid_syncFilterEditorScrolling(_1,_2){if(_1==null)return;if(this.filterEditor!=null&&this.filterEditor.body!=null){if(this.isRTL()){var _3=this.body.getViewportWidth()-this.filterEditor.body.getViewportWidth()
_1+=_3}
if(this.filterEditor.body.getScrollLeft()!=_1)
{this.filterEditor.body.scrollTo(_1,null,"scrollSync")}}},isc.A.syncSummaryRowScrolling=function isc_ListGrid_syncSummaryRowScrolling(_1,_2){if(_1==null)return;if(this.summaryRow!=null&&this.showGridSummary&&this.summaryRow.body!=null&&this.summaryRow.body.getScrollLeft()!=_1)
{this.summaryRow.body.scrollTo(_1,null,"scrollSync")}},isc.A.$57o=function isc_ListGrid__hiliteRecord(_1){if(!isc.isA.Number(_1)){_1=this.getRecordIndex(_1)}
if(!isc.isA.Number(_1)||_1<0)_1=0;if(_1>=this.getTotalRows()){_1=this.getTotalRows()-1}
this.clearLastHilite();this.bodies.setProperty("$940",_1);this.bodies.setProperty("lastOverRow",_1);this.bodies.setProperty("lastOverCol",0);this.bodies.map("setRowStyle",_1);this.updateRollOverCanvas(_1)},isc.A.clearLastHilite=function isc_ListGrid_clearLastHilite(_1){var _2=_1?this.frozenBody:this.body;if(!_2)return;var _3=_2.lastOverRow,_4;if(_3<0)return;var _5=false;if(!this.canSelectCells){_5=(_2.$940!=null);_2.$940=null;if(_3==null)return}else{_5=(this.$103b!=null&&this.$103c!=null);if(!_1)this.clearLastHilite(true);this.$103b=null;this.$103c=null;this.$945=null;_4=_2.lastOverCol;if(_3==null||_4==null)return;delete _2.lastOverCol}
delete _2.lastOverRow;if(this.showRollOver||_5)_2.updateRollOver(_3,_4)});isc.evalBoundary;isc.B.push(isc.A.setAccessKey=function isc_ListGrid_setAccessKey(_1){this.Super("setAccessKey",arguments)
if(this.body!=null)this.body.setAccessKey(_1)},isc.A.setFocus=function isc_ListGrid_setFocus(_1){if(this.body!=null){this.body.setFocus(_1)}},isc.A.focusAtEnd=function isc_ListGrid_focusAtEnd(_1){this.$tx(_1)},isc.A.$t4=function isc_ListGrid__canFocus(){if(this.body)return this.body.$t4();return false},isc.A.recordClick=function isc_ListGrid_recordClick(){return true},isc.A.onRecordClick=function isc_ListGrid_onRecordClick(_1,_2,_3,_4,_5,_6,_7){return true},isc.A.recordDoubleClick=function isc_ListGrid_recordDoubleClick(){},isc.A.setShowGridSummary=function isc_ListGrid_setShowGridSummary(_1){if(this.showGridSummary==_1)return;this.showGridSummary=_1;if(this.showGridSummary){this.showSummaryRow()}else{this.clearSummaryRow()}},isc.A.$17m=function isc_ListGrid__getFieldDependencyTable(){if(this.$174==null){this.Super("$17m");var _1=this.fields,_2=this.$174,_3=_1.filter(function(_5){return _5.type=="summary"});for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_5.includeInRecordSummary;if(_6==true||_6!=false&&(_5.type=="integer"||_5.type=="float"))
{if(_2[_5.name]==null){_2[_5.name]={}}
var _7=_5.includeInRecordSummaryFields||_3;for(var j=0;j<_7.length;j++){var _9=_7[j];if(isc.isA.String(_9)){_9=this.getField(_9)}
_2[_5.name][_9.name]=_9}}}}
return this.$174},isc.A.recalculateSummaries=function isc_ListGrid_recalculateSummaries(_1,_2,_3){_3=_3!=null?_3:true;this.calculateRecordSummaries(_1,_2,true,true,_3)},isc.A.$100e=function isc_ListGrid__recalculateSummaries(_1,_2,_3,_4,_5){if(this.isGrouped&&this.showGroupSummary&&_3!=false){this.refreshGroupSummary(_1,_2)}
if(this.summaryRow!=null&&this.showGridSummary&&_4!=false){if(_5&&!this.isDirty())this.markForRedraw();this.summaryRow.$100e(_2)}
if(this.summaryRow&&this.hideEmptySummaryRow){if(this.summaryRow.data&&this.summaryRow.data.length>0){if(!this.summaryRow.isVisible()){this.summaryRow.show()}}else{if(!this.summaryRow.isVisible()){this.summaryRow.show()}}}},isc.A.recalculateGridSummary=function isc_ListGrid_recalculateGridSummary(){if(this.showGridSummary&&this.summaryRow!=null){this.summaryRow.$100e()}},isc.A.shouldShowGridSummary=function isc_ListGrid_shouldShowGridSummary(_1){if(_1.showGridSummary!=null)return _1.showGridSummary;return(_1.getGridSummary!=null||this.getGridSummaryFunction(_1)!=null)},isc.A.getGridSummaryFunction=function isc_ListGrid_getGridSummaryFunction(_1){if(!_1)return;var _2=_1.summaryFunction||isc.SimpleType.getDefaultSummaryFunction(_1.type);return _2},isc.A.getGridSummary=function isc_ListGrid_getGridSummary(_1){if(!_1||!this.data||(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))
return;var _2=this.getOriginalData(),_3=isc.ResultSet&&isc.isA.ResultSet(_2),_4=isc.isA.Tree(_2);if(_4){_2=_2.getDescendants(_2.getRoot());_3=isc.ResultSet&&isc.isA.ResultSet(_2)}
if(_3&&!_2.allMatchingRowsCached()){this.logWarn("Unable to show summary values - dataset not completely loaded");return}
var _5=_3?_2.getRange(0,_2.getLength()):_2;var _6=this.getAllEditRows();if(_6!=null&&_6.length>0){_5=_5.duplicate();for(var i=0;i<_5.length;i++){var _8=_5[i];var _9=this.getEditSessionRowNum(_8);if(_9!=null)_5[i]=this.getEditedRecord(_9,null,true)}}
if(_1.getGridSummary){var _10;if(this.isGrouped&&this.showGroupSummary&&(this.groupTree!=null)){_10=this.assembleGroupSummaries()}
return _1.getGridSummary(_5,_1,_10)}
return this.getSummaryValue(_5,_1)},isc.A.getSummaryRowDataSource=function isc_ListGrid_getSummaryRowDataSource(){return this.summaryRowDataSource},isc.A.getSummaryRowCriteria=function isc_ListGrid_getSummaryRowCriteria(){if(this.summaryRowCriteria!=null)return this.summaryRowCriteria;var _1=this.getOriginalData();if(isc.ResultSet&&isc.isA.ResultSet(_1)){return this.data.getCriteria()}
return this.getInitialCriteria()},isc.A.getSummaryRowFetchRequestConfig=function isc_ListGrid_getSummaryRowFetchRequestConfig(){return isc.addProperties({textMatchStyle:this.autoFetchTextMatchStyle,showPrompt:false,startRow:0,endRow:1},this.summaryRowFetchRequestDefaults,this.summaryRowFetchRequestProperties)},isc.A.summaryRowFetchComplete=function isc_ListGrid_summaryRowFetchComplete(_1,_2,_3){this.updateFieldWidthsForAutoFitValue("gridSummary fetch complete");this.$935()},isc.A.getGridSummaryData=function isc_ListGrid_getGridSummaryData(_1,_2){if(this.$103l&&!_1)return this.$103l;var _3;if(this.$103l&&_2!=null){_3=this.$103l}else{_2=this.skipHiddenGridSummaryFields?this.fields:this.getAllFields();_3=[];if(_2==null)return _3}
for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_2[i].name;if(!this.shouldShowGridSummary(_5)){continue}
var _7=this.getGridSummary(_5),_8=this.getGridSummaryFunction(_5);if(!isc.isAn.Array(_8))_8=[_8];if(!isc.isAn.Array(_7)){_7=[_7]}
for(var _9=0;_9<_7.length;_9++){if(_3[_9]==null){_3[_9]={};_3[_9][this.gridSummaryRecordProperty]=true;_3[_9][this.recordCanSelectProperty]=false;if(_8[_9]=="count"){var _10=_3[_9][this.recordApplyPluralTitleProperty]||[];_10.add(_6);_3[_9][this.recordApplyPluralTitleProperty]=_10}}
_3[_9][_6]=_7[_9]}}
this.$103l=_3;return _3},isc.A.getGroupSummaryData=function isc_ListGrid_getGroupSummaryData(_1,_2,_3){return this.$103m(this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3)},isc.A.$103m=function isc_ListGrid__getGroupSummaryData(_1,_2,_3,_4,_5,_6,_7){if(this.getGroupSummaryData!=isc.ListGrid.getInstanceProperty("getGroupSummaryData")){return this.getGroupSummaryData(_5,_6,_7)}
var _8;if(_6&&_6.$102c&&_7!=null){_8=_6.$102c}else{_7=this.skipHiddenGroupSummaryFields?this.fields:this.getAllFields();_8=[];if(_7==null)return _8}
for(var i=0;i<_7.getLength();i++){var _10=_7[i],_11=_10.name,_12;if(this.shouldShowGroupSummary(_10)){var _13=(_4==null?(_10&&_10.userFormula!=null):_4[i]);_12=this.$103n(_1,_2,_13,_5,_10,_6);if(!isc.isAn.Array(_12))_12=[_12];var _14=this.getGridSummaryFunction(_10);if(!isc.isAn.Array(_14))_14=[_14];for(var _15=0;_15<_12.length;_15++){var _16=_8[_15];if(_16==null){_16=_8[_15]={};_16.customStyle=this.groupSummaryStyle;_16[this.recordEnabledProperty]=false;_16[_1]=false;_16[_3]=true;if(_14[_15]=="count"){var _17=_16[this.recordApplyPluralTitleProperty]||[];_17.add(_11);_16[this.recordApplyPluralTitleProperty]=_17}}
var _18=_12[_15];_16[_11]=_18}}}
if(_6)_6.$102c=_8;return _8},isc.A.assembleGroupSummaries=function isc_ListGrid_assembleGroupSummaries(_1,_2){var _3=this.groupTree;if(!_1)_1=_3.getRoot();if(!_2)_2=[];var _4=_3.getFolders(_1);for(var i=0;i<_4.length;i++){var _6=_4[i];if(this.groupByFieldSummaries==null||this.groupByFieldSummaries.contains(_6.groupName))
{var _7=_3.combineWithEditVals(_3.getRecordsInGroup(_6));var _8=this.getGroupSummaryData(_7,_6);for(var _9=0;_9<_8.length;_9++){var _10=isc.addProperties({},_8[_9]);delete _10.customStyle;delete _10[this.recordEnabledProperty];delete _10[this.includeInSummaryProperty];_10.groupName=_6.groupName;_10.groupValue=_6.groupValue;_2.add(_10)}}
this.assembleGroupSummaries(_4[i],_2)}
return _2},isc.A.getSummaryValue=function isc_ListGrid_getSummaryValue(_1,_2){return this.$103o(this.includeInSummaryProperty,this.applyFormulaAfterSummary,(_2&&_2.userFormula!=null),_1,_2)},isc.A.$103o=function isc_ListGrid__getSummaryValue(_1,_2,_3,_4,_5){if(_4==null)return null;var _6=[];for(var i=0;i<_4.length;i++){var _8=_4[i];if(!_8||(_8[_1]==false))continue;_6[_6.length]=_8}
var _9=this.getGridSummaryFunction(_5);if(_9==null)return null;if(this.$1017(_2,_3,_5))
{return[]}
if(!isc.isAn.Array(_9)){_9=[_9]}
var _10=[];for(var i=0;i<_9.length;i++){var _11=_9[i];if(_11!=null){_10[i]=isc.SimpleType.applySummaryFunction(_6,_5,_11,this,this)}}
return _10},isc.A.shouldShowGroupSummary=function isc_ListGrid_shouldShowGroupSummary(_1){if(_1.showGroupSummary!=null)return _1.showGroupSummary;return(_1.getGroupSummary!=null||this.getGridSummaryFunction(_1)!=null)},isc.A.getGroupSummary=function isc_ListGrid_getGroupSummary(_1,_2,_3){return this.$103n(this.includeInSummaryProperty,this.applyFormulaAfterSummary,(_2&&_2.userFormula!=null),_1,_2,_3)},isc.A.$103n=function isc_ListGrid__getGroupSummary(_1,_2,_3,_4,_5,_6){var _7;if(_5.getGroupSummary!=null){_7=_5.getGroupSummary(_4,_5,_6)}else{_7=this.$103o(_1,_2,_3,_4,_5)}
return _7},isc.A.getRecordSummary=function isc_ListGrid_getRecordSummary(_1,_2){if(!isc.isAn.Object(_2))_2=this.getField(_2);return this.$1016(null,null,_1,_2)},isc.A.$1016=function isc_ListGrid__getRecordSummary(_1,_2,_3,_4){var _5=isc.isAn.Object(_3)?_3:this.getEditedRecord(_3);if(_4.getRecordSummary!=null){return _4.getRecordSummary(_5,_4,this)}
var _6=[],_7=this.fields;for(var i=0;i<_7.length;i++){var _9=_7[i];if(_9.name==_4.name){if(_4.partialSummary)break;continue}
var _10=_9.includeInRecordSummary;var _11=(_1==null?(_9&&_9.userFormula!=null):_1[i]),_12=(_2==null?(_9&&_9.userSummary!=null):_2[i]);if(_10==null&&(_9.type=="integer"||_9.type=="float")&&(!_11&&!_12))
{_10=true}
if(_10&&_9.includeInRecordSummaryFields!=null){if((isc.isA.String(_9.includeInRecordSummaryFields)&&_9.includeInRecordSummaryFields!=_4.name)||(isc.isAn.Array(_9.includeInRecordSummaryFields)&&!_9.includeInRecordSummaryFields.contains(_4.name)))
{_10=false}}
if(_10){_6.add(_9)}}
var _13=_4.recordSummaryFunction||"sum";var _14=isc.DataSource.applyRecordSummaryFunction(_13,_5,_6,_4);return _14},isc.A.shouldApplyRecordSummaryToRecord=function isc_ListGrid_shouldApplyRecordSummaryToRecord(_1){return _1&&(_1.type==this.$97q)&&(_1.summaryFunction!=null||_1.getGroupSummary!=null)},isc.A.shouldApplyUserFormulaBeforeSummary=function isc_ListGrid_shouldApplyUserFormulaBeforeSummary(_1){return _1&&_1.userFormula!=null&&!this.$102b(_1)},isc.A.shouldApplyUserFormulaAfterSummary=function isc_ListGrid_shouldApplyUserFormulaAfterSummary(_1){return this.$1017(this.applyFormulaAfterSummary,(_1&&_1.userFormula!=null),_1)},isc.A.$1017=function isc_ListGrid__shouldApplyUserFormulaAfterSummary(_1,_2,_3){return(_2&&this.$102a(_1,_3))},isc.A.calculateRecordSummaries=function isc_ListGrid_calculateRecordSummaries(_1,_2,_3,_4,_5,_6,_7){var _8=this.skipHiddenUserSummaryFields?this.fields:this.getAllFields();if(_2!=null){var _9=this;if(!isc.isAn.Array(_2))_2=[_2];_2=_2.map(function(_15){return isc.isA.String(_15)?_9.getField(_15):_15});if(this.refreshDependentFieldsForSummaries){_2=this.$172(_2)}
_8=_2}
if(!_7)this.invalidateUserCache(_1,_2);if(!_8)return;if(_1!=null&&!isc.isAn.Array(_1))_1=[_1];var _10=_1==null?this.getOriginalData():_1;if(_10==null||isc.isA.ResultSet(_10)&&!_10.lengthIsKnown())
{return}
var _11=false;if(!_6){var _12=[],_13=[];for(var i=0;i<_8.length;i++){var _15=_8[i];if(this.shouldApplyRecordSummaryToRecord(_15)){_12.add(_15)}else if(this.shouldApplyUserFormulaBeforeSummary(_15)){_13.add(_15)}}
if(_12.length>0||_13.length>0){for(var i=0;i<_10.getLength();i++){var _16=isc.isA.ResultSet(_10)||isc.ResultTree&&isc.isA.ResultTree(_10)?_10.getCachedRow(i):_10.get(i);if(_16==null)continue;var _17=this.getEditValues(_16),_18=!isc.isAn.emptyObject(_17),_19=_18?isc.addProperties({$177:true},_16,_17):_16;if(_16==null)continue;for(var _20=0;_20<_12.length;_20++){var _15=_12[_20];if(!this.shouldShowRecordSummary(_15,_16)){continue}
var _21=_16[_15.name];var _22=this.getRecordSummary(_19,_15);_16[_15.name]=_22;if(!this.fieldValuesAreEqual(_15,_21,_22)){_11=true}}
for(var _20=0;_20<_13.length;_20++){var _15=_13[_20];if(!this.shouldShowUserFormula(_15,_16)){continue}
var _21=_16[_15.name],_23=this.getFormulaFieldValue(_15,_19);if(!this.fieldValuesAreEqual(_15,_21,_23)){if(_18){this.invalidateUserCache(_16,[_15]);_16[_15.name]=_23}
_11=true}}}}}
if((!this.isGrouped||!this.showGroupSummary)&&(this.summaryRow==null||!this.showGridSummary))
{return}
this.$100e(_1,_2,_3!=null?_3:_11,_4!=null?_4:_11,!_5)},isc.A.getSummaryRow=function isc_ListGrid_getSummaryRow(){if(!this.summaryRow){var _1=this.getSummaryRowDataSource();var _2;if(this.completeFields)_2=this.completeFields.duplicate();else if(this.fields)_2=this.fields.duplicate();var _3=this.summaryRowHeight;this.summaryRow=this.createAutoChild("summaryRow",{showEmptyMessage:false,warnOnReusedFields:false,autoDraw:false,width:"100%",height:_3,autoFitData:"vertical",bodyOverflow:"hidden",showHeader:false,getBaseStyle:function(){return this.creator.summaryRowStyle},alternateRecordStyles:false,disabled:this.disabled,applyFormulaAfterSummary:this.applyFormulaAfterSummary,$102s:function(){},$100r:function(_8){return false},dataSource:_1,data:_1==null?this.getGridSummaryData():null,$100e:function(_8){var _4=this.creator,_5=_4.data;if(!_4.fields||(isc.isA.ResultSet(_5)&&!_5.lengthIsKnown()))return;if(this.dataSource!=null){var _6=_4.getSummaryRowCriteria(),_7=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.willFetchData(_6);if(_7)this.invalidateCache();this.fetchData(_6,{target:_4,methodName:"summaryRowFetchComplete"},_4.getSummaryRowFetchRequestConfig())}else{this.setData(_4.getGridSummaryData(true,_8))}},fieldSourceGrid:this,fields:_2,recordApplyPluralTitleProperty:this.recordApplyPluralTitleProperty,gridSummaryRecordProperty:this.gridSummaryRecordProperty,invalidSummaryValue:this.invalidSummaryValue,emptyCellValue:this.emptyCellValue,skipAutoFitWidths:true,getFieldWidths:function(){return this.creator.getFieldWidths()},fieldShouldBeVisible:function(_8,_9){return this.fieldSourceGrid.fieldShouldBeVisible(_8,_9)},canEditCell:function(){return false},$1019:true})}else{this.summaryRow.setDataSource(this.getSummaryRowDataSource(),this.completeFields.duplicate());this.summaryRow.$100e()}
return this.summaryRow},isc.A.showSummaryRow=function isc_ListGrid_showSummaryRow(){var _1=this.gridComponents.indexOf("summaryRow");if(_1==-1){this.logWarn("showGridSummary set to true, but gridComponents array does not include an entry for the summary row - not showing.");return}
this.updateGridComponents()
this.syncSummaryRowScrolling(this.body.getScrollLeft(),this.body.getScrollTop)},isc.A.clearSummaryRow=function isc_ListGrid_clearSummaryRow(){if(this.summaryRow&&this.summaryRow.parentElement==this){this.removeMember(this.summaryRow)}},isc.A.$103p=function isc_ListGrid__isSummaryRecord(_1){return _1[this.gridSummaryRecordProperty]||_1[this.groupSummaryRecordProperty]},isc.A.$18b=function isc_ListGrid__setUserField(_1,_2,_3,_4,_5){var _6=this;this.Super("$18b",[_1,_2,_3,function(_1){if(_4)_6.recalculateSummaries(null,_1);if(_5)_6.markForRedraw()}])},isc.A.$18c=function isc_ListGrid__setUserFieldText(_1,_2,_3,_4,_5){var _6=this;this.Super("$18c",[_1,_2,_3,function(_1){if(_4)_6.recalculateSummaries(null,_1);if(_5)_6.markForRedraw()}])},isc.A.setUserFormula=function isc_ListGrid_setUserFormula(_1,_2,_3,_4){this.$18b(_1,"userFormula",_2,_3,_4)},isc.A.setUserSummary=function isc_ListGrid_setUserSummary(_1,_2,_3,_4){this.$18b(_1,"userSummary",_2,_3,_4)},isc.A.setUserFormulaText=function isc_ListGrid_setUserFormulaText(_1,_2,_3,_4){this.$18c(_1,"userFormula",_2,_3,_4)},isc.A.setUserSummaryText=function isc_ListGrid_setUserSummaryText(_1,_2,_3,_4){this.$18c(_1,"userSummary",_2,_3,_4)},isc.A.setShowFilterEditor=function isc_ListGrid_setShowFilterEditor(_1){if(this.showFilterEditor==_1)return;this.showFilterEditor=_1;if(_1){var _2=this.gridComponents.indexOf("filterEditor");if(_2==-1){_1=false;this.logWarn("setShowFilterEditor(true) called, but gridComponents array does not include the filterEditor. FilterEditor will not be shown.")}}
if(_1){if(this.isDrawn()){var _3=this.getViewState();this.updateGridComponents();this.setViewState(_3)}}else if(this.filterEditor){this.filterEditor.destroy();this.filterEditor=null}
this.layoutChildren()},isc.A.makeFilterEditor=function isc_ListGrid_makeFilterEditor(){var _1=isc.addProperties({autoDraw:false,warnOnReusedFields:false,reverseRTLAlign:this.reverseRTLAlign,dataPath:this.dataPath,setDataPath:function(_2){this.dataPath=_2},dataSource:this.dataSource,saveLocally:true,$102s:function(){},height:this.filterEditorHeight,sourceWidget:this,ID:this.getID()+"$103q",_generated:true,locatorParent:this,bodyConstructor:"FilterEditorBody",fieldShouldBeVisible:function(_2,_3){return this.sourceWidget.fieldShouldBeVisible(_2,_3)},fieldSourceGrid:this,actionType:"filter",actionButtonPrompt:this.filterButtonPrompt,actionButtonProperties:this.filterButtonProperties,fetchDelay:this.fetchDelay,allowFilterExpressions:this.allowFilterExpressions,expressionDataSource:this.getDataSource(),discardEditsOnHideField:false},this.filterEditorDefaults,this.filterEditorProperties);if(_1.bodyDefaults==null)_1.bodyDefaults={};_1.bodyDefaults.focusChanged=function(_2){if(_2&&isc.EH.isKeyEvent()){if(this.parentElement.isA("RecordEditor")){this.parentElement.startEditing()}else{if(this.parentElement.parentElement.isA("RecordEditor")){this.parentElement.parentElement.startEditing()}}}}
this.filterEditor=isc.RecordEditor.create(_1)},isc.A.getFilterEditorValueMap=function isc_ListGrid_getFilterEditorValueMap(_1){return _1.filterEditorValueMap||_1.valueMap||(_1.filterEditorProperties&&_1.filterEditorProperties.valueMap)},isc.A.getFilterEditorType=function isc_ListGrid_getFilterEditorType(_1){if(_1.filterEditorType!=null)return _1.filterEditorType;var _2=this.getDataSource();if(isc.SimpleType.inheritsFrom(_1.type,"date")&&_2&&_2.supportsAdvancedCriteria())
{return"MiniDateRangeItem"}
var _3=_1.type;var _4=(_3==this.$42z||_3==this.$423||_3==this.$43b);if(_4&&_1.editorType==null){if(_1.filenameSuppressed||_2&&_2.getFilenameField(_1.name)==null){return"StaticTextItem"}else{return"TextItem"}}
var _5=isc.addProperties({},_1,{canEdit:_1.canFilter!==false,length:null});if(_5._constructor!=null)delete _5._constructor;if(_1.filterEditorType!=null)_5.editorType=_1.filterEditorType;isc.addProperties(_5,_1.filterEditorProperties);var _3=isc.DynamicForm.getEditorType(_5,this);return _3},isc.A.getFieldFilterEditorProperties=function isc_ListGrid_getFieldFilterEditorProperties(_1){var _2=_1.filterEditorProperties||{};if(_1.filterOperator)_2.operator=_1.filterOperator;var _3=_1.type;var _4=(_3==this.$42z||_3==this.$423||_3==this.$43b);if(_4&&!_1.filenameSuppressed){var _5=this.getDataSource(),_6=_5&&_5.getFilenameField(_1.name);if(_6!=null){_2.criteriaField=_6}}
return _2},isc.A.getFilterEditor=function isc_ListGrid_getFilterEditor(){return this.filterEditor},isc.A.setFilterEditorCriteria=function isc_ListGrid_setFilterEditorCriteria(_1){if(this.filterEditor){var _2=false,_3=[];var _4=this.filterEditor.getEditForm();for(var i=0;i<this.completeFields.length;i++){var _6=this.completeFields[i];if(this.fieldIsVisible(_6,true)){if(!_4||_4.getItem(_6.name)!=null){continue}}
_2=true;_3.add(_6.name)}
this.setFilterValues(_1,_2,_3)}
else if(this.showFilterEditor)this.initialCriteria=_1},isc.A.getFilterEditorCriteria=function isc_ListGrid_getFilterEditorCriteria(_1){if(this.filterEditor){if(!_1||!this.filterEditor.getEditForm()){return this.filterEditor.getValuesAsCriteria(this.autoFetchTextMatchStyle)}else{var _2=this.filterEditor.getEditForm().getItems(),_3=true,_4={},_5={_constructor:"AdvancedCriteria",operator:"and",criteria:[]};for(var i=0;i<_2.length;i++){if(_2[i].hasAdvancedCriteria()){var _7=_2[i].getCriterion();if(_7!=null){_3=false;_5.criteria.add(_7)}}else{var _8=_2[i].getValue();if(_8!=null){_4[_2[i].getCriteriaFieldName()]=_8}}}
if(!_3){_4=isc.DataSource.combineCriteria(_4,_5)}
return _4}}},isc.A.setCriteria=function isc_ListGrid_setCriteria(_1){if(this.filterEditor!=null){this.setFilterValues(_1,true)}
var _2=this.isGrouped?this.getOriginalData():this.data;if(_2){if(_2.setCriteria)_2.setCriteria(_1);else{this.initialCriteria=_1;if(this.filterLocalData)this.filterData(_1)}}else this.initialCriteria=_1;this.dataSetChanged()},isc.A.setFilterValues=function isc_ListGrid_setFilterValues(_1,_2,_3){this.$103r=isc.addProperties({},_1);this.initialCriteria=this.$103r;this.updateFilterEditor(_2,_3)},isc.A.updateFilterEditor=function isc_ListGrid_updateFilterEditor(_1,_2){var _3=this.filterEditor;if(!_3)return;var _4=this.$103s();this.filterEditor.setValuesAsCriteria(_4,true,_1,_2)},isc.A.$103s=function isc_ListGrid__getFilterEditorValues(){var _1=isc.addProperties({},this.$103r);if(this.updateFilterEditorValues!=null){_1=this.updateFilterEditorValues(_1,this.autoFetchTextMatchStyle)}
if(_1==null){_1={};for(var i=0;i<this.completeFields.length;i++){_1[this.completeFields[i].name]=this.completeFields[i].defaultFilterValue}}
return _1},isc.A.clearFilterValues=function isc_ListGrid_clearFilterValues(){this.$103r=null;this.updateFilterEditor(true)},isc.A.handleFilterEditorSubmit=function isc_ListGrid_handleFilterEditorSubmit(_1,_2,_3){if(this.filterEditorSubmit!=null&&this.filterEditorSubmit(_1)==false)return;this.filterData(_1,_3,_2)},isc.A.getInitialCriteria=function isc_ListGrid_getInitialCriteria(){var _1={},_2,_3=this.getFields(),_4;for(var i=0;i<_3.length;i++){if(_3[i].defaultFilterValue!==_4){_2=true;var _6=this.getFieldName(_3[i]);_1[_6]=_3[i].defaultFilterValue}}
if(!_2){_1=this.initialCriteria||this.getCriteria()}else{isc.addProperties(_1,this.initialCriteria||this.getCriteria())}
return _1},isc.A.$12k=function isc_ListGrid__adjustSpecialPeers(_1){if(this.filterEditor!=null)this.filterEditor.setZIndex(_1-1);return this.Super("$12k",arguments)},isc.A.canEditCell=function isc_ListGrid_canEditCell(_1,_2){if(_2<0||_2>=this.fields.length)return false;if(this.allowRowSpanning&&this.rowSpanEditMode=="first"){var _3=this.getCellStartRow(_1,_2);if(_3!=_1){return false}}
var _4=this.getCellRecord(_1,_2);if(_4!=null){if(!this.recordIsEnabled(_4,_1,_2))return false;if(this.$1025==_4)return false}
var _5=this.getField(_2);if(_5&&_5.disabled)return false;if(_5&&_5.type=="summary")return false;if(!this.isEditable()||this.getCellBooleanProperty("canEdit",_1,_2,(_4!=null?this.recordEditProperty:null))==false){return false}
if((_5.userFormula||_5.userSummary)&&_5.canEdit==null)return false;return true},isc.A.isEditable=function isc_ListGrid_isEditable(){if(this.canEdit==false)return false;if(this.canEdit==true||this.canEdit==this.$16c){var _1=this.getFields()||[];for(var i=0;i<_1.length;i++){if(_1[i].canEdit!=false)return true}
return false}else{var _1=this.getFields()||[];for(var i=0;i<_1.length;i++){if(_1[i].canEdit==true)return true}
return false}},isc.A.fieldIsEditable=function isc_ListGrid_fieldIsEditable(_1){var _2=this.getFieldNum(_1);return this.canEditCell(null,_2)},isc.A.setCanEdit=function isc_ListGrid_setCanEdit(_1){if(_1==false){if(this.getEditRow()!=null)this.cancelEditing(isc.ListGrid.PROGRAMMATIC);this.canEdit=false}else{this.canEdit=_1}},isc.A.setFieldCanEdit=function isc_ListGrid_setFieldCanEdit(_1,_2){if(isc.isA.String(_1))_1=this.getField(_1);if(_1==null||!this.completeFields.contains(_1)||_1.canEdit==_2)return;_1.canEdit=_2;if(this.$94e){var _3=this.getEditRow(),_4=_1[this.fieldIdProperty],_5=this.getColNum(_1);if(this.editByCell){if(!_2&&_5==this.getEditCol()){this.cancelEditing(isc.ListGrid.PROGRAMMATIC)}}else if(_5>=0){if(!_2&&_5==this.getEditCol()){var _6=this.$20w.getItem(_4),_7=_6.hasFocus;var _8=this.findNextEditCell(_3,_5,-1,true,false,false,true);if(_8==null||_8[0]!=_3)
_8=this.findNextEditCell(_3,_5,1,true,false,false,true);if(_8==null||_8[0]!=_3){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);return}
this.startEditing(_8[0],_8[1],!_7)}
this.refreshCell(this.getEditRow(),_5)}}},isc.A.handleEditCellEvent=function isc_ListGrid_handleEditCellEvent(_1,_2,_3,_4){if(_3==this.$973)this.$96p=true;else delete this.$96p
if(_1<0||_2<0)return false;if(this.allowRowSpanning){_1=this.getCellStartRow(_1,_2)}
if(this.editByCell){if(!this.canEditCell(_1,_2))return false}else{var _5=this.findNextEditCell(_1,_2,-1,true,true,false,true);if(_5==null||_5[0]!=_1)
_5=this.findNextEditCell(_1,_2,1,true,false,false,true);if(_5==null||_5[0]!=_1)return false;_2=_5[1]}
var _6;if(_4!==_6){this.setEditValue(_1,_2,_4)}
return this.startEditing(_1,_2,null,_3)},isc.A.startEditing=function isc_ListGrid_startEditing(_1,_2,_3,_4,_5){if(this.$x3){this.logInfo("call to startEditing() while keyboard events disabled (may be due to a component-mask blocking this grid). Ignoring","gridEdit");return false}
if(!this.canEdit&&!(this.completeFields||this.fields).getProperty("canEdit").or()){this.canEdit=true}
if(this.completeFields==null)this.setFields(this.fields);var _6=(_1==null),_7=(_2==null);if(_6||_7){var _8=(_6?0:_1),_9=(_7?0:_2);var _10=this.findNextEditCell(_8,_9,1,_7,true);if(_10==null){this.logInfo("startEditing() passed bad cell coordinates:"+[_1,_2],"gridEdit")}else{this.logInfo("startEditing() using derived coordinates:"+_10,"gridEdit");_1=_10[0];_2=_10[1]}}
if(_1==null||_1<0||_1>this.getTotalRows()){if(!_5){this.logWarn("startEditing() passed bad cell coordinates:"+[_1,_2]+", can't edit"+this.getStackTrace(),"gridEdit")}
return false}
if(!this.canEditCell(_1,_2)){this.logInfo("startEditing(): cell "+[_1,_2]+" is non editable. Returning.","gridEdit");return false}
if(this.$94e){this.$103t((_4||isc.ListGrid.PROGRAMMATIC),this.getEditRow(),this.getEditCol(),_1,_2)}else{this.$100w(_1,_2,_3)}
return true},isc.A.isEditingCell=function isc_ListGrid_isEditingCell(_1,_2){return this.$94e&&this.getEditRow()==_1&&this.canEditCell(_1,_2)&&(!this.editByCell||this.getEditCol()==_2)},isc.A.$103t=function isc_ListGrid__changeEditCell(_1,_2,_3,_4,_5){var _6=this.getEditValue(_2,_3);var _7=this.getFieldName(_3),_8=this.$20w,_9=_8?_8.getItem(_7):null,_10=_9?!_9.$96x:true;if(_9){delete _9.$96x;delete _9.$96w;if(this.$103u(_9,_2,_4,_5)){this.$103v(_9,_3)}}
var _11=(_4!=_2),_12=this.$96y(_2,_3);if(_10){var _13=!this.$103w(_1,_2,_3,_6);if(_11&&!_13){_13=!this.$103x(_1,_2,_12)}
if(_13){if(_1==isc.ListGrid.EDIT_FIELD_CHANGE){var _14=this.getFieldName(_5);if(_9&&_8.getItem(_14).hasFocus){_9.focusInItem()}}
return false}}
var _15;if(_6!==_15&&!_11&&_9&&!this.editByCell){var _16=this.$100b(_2,_3);var _17=this.$103y(_16,this.getCellRecord(_2,_3),_2,_3);_9.setValue(_17)}
var _18=(this.autoSaveEdits&&((_11&&this.shouldSaveOnRowExit(_2,_3,_1))||this.shouldSaveOnCellExit(_2,_3,_1)));if(!_18&&this.$103z()){var _19,_20=_11&&this.shouldValidateByRow(_2,_3,_1);if(_20&&!this.usingCellRecords){_19=!this.validateRow(_2)}else{if(_20||this.shouldValidateByCell(_2,_3,_1))
{_19=!this.validateCell(_2,_3)}}
if(this.stopOnErrors&&_19)return false}
if(_18){return this.$1030(_4,_5,_1)}else{this.$100w(_4,_5)}
if(_11&&this.isGrouped&&(!_18||!this.shouldSaveLocally())){this.$1031(_2)}},isc.A.$1031=function isc_ListGrid__updateGroupForEditValueChange(_1){if(!this.isGrouped||!isc.isA.Tree(this.data))return;var _2=this.data.get(_1),_3=_2,_4=false;if(_2==null)return;var _5=this.getGroupByFields();if(!isc.isAn.Array(_5))_5=[_5];var _6=this.getEditedRecord(_1);for(var i=_5.length-1;i>=0;i--){var _8=_5[i],_3=this.data.getParent(_3);if(_3==null||_3.groupName!=_8){this.logWarn("error updating group for edit value change - unexpected group tree structure. Regrouping.");_4=true;break}
var _9=_6[_8],_10=this.getUnderlyingField(_8);_9=this.$995(_9,_6,_10,_8);if(_3.groupValue!=_9){_4=true;break}}
if(_4){this.$985();this.$994(null,_2,_6);this.markForRedraw()}
return _4},isc.A.$103u=function isc_ListGrid__shouldParkFocus(_1,_2,_3,_4){if(!isc.Browser.isIE)return false;var _5=(isc.isA.PopUpTextAreaItem(_1)&&_1.$1032&&_1.$64q.hasFocus)||(_1.hasFocus&&isc.FormItem.$43v(_1));if(!this.editByCell&&_3==_2)return false;var _6=this.getEditorType(this.getField(_4),this.getCellRecord(_3,_4));return!(_6==null||isc.FormItem.$43v(_6,true))});isc.evalBoundary;isc.B.push(isc.A.$100w=function isc_ListGrid__startEditing(_1,_2,_3){if(_1=="delayed"){var _4=this.$1033;if(_4==null)return;_1=_4[0];_2=_4[1];_3=_4[2]}else if(this.isDrawn()&&(!this.body.readyToRedraw()||(this.frozenBody&&!this.frozenBody.readyToRedraw())))
{if(!this.$1033){this.delayCall("$100w",['delayed'],0)}
this.$1033=[_1,_2,_3];return}
delete this.$1033;if(!_3){this.$103b=_1;this.$103c=_2;this.$945=this.getFieldBody(_2);if(this.selectOnEdit&&this.$945!=null){this.$944=this.$945;this.$944.$942=_1;this.$944.$943=_2}}
var _5=this.getEditRow()!=_1;if(!_5&&!_3&&(this.getEditCol()==_2)){this.getEditForm().focusInItem(this.getEditorName(_1,_2));return}
this.logInfo("Starting editing at row "+_1+", colNum "+_2,"gridEdit");if(this.$1025!=null)this.closeRecord();if(this.$94e){if(this.editByCell||_5){this.hideInlineEditor(false,true)}}
var _6=(this.$1034==null)||_5||this.saveByCell;if(_6){this.$1034=this.$1035()}
var _7=this.getCellRecord(_1,_2);if(_7==Array.LOADING){return true}
var _8=this.$94e&&(this.getEditRow()==_1)
this.initializeEditValues(_1,_2,_8,true);if(this.selectOnEdit&&_7!=null)this.selectRecordForEdit(_7,_2);if(this.modalEditing)this.clearLastHilite();if(_7==null&&this.addNewBeforeEditing){this.$92d=_1;this.$96u=_2;var _9=this.shouldWaitForSave();var _10="this.$1036("+_9+","+_3+")";this.saveEdits(isc.ListGrid.PROGRAMMATIC,_10);if(_9)return;else{_1=this.$92d;_2=this.$96u}}
this.showInlineEditor(_1,_2,true,_5,_3);if(_5&&!_3)this.$1037();return true},isc.A.selectRecordForEdit=function isc_ListGrid_selectRecordForEdit(_1,_2){if(!this.editByCell)_1.$17d=true;if(this.canSelectCells){var _3=this.getRecordCellIndex(_1,_2);this.selection.selectSingleCell(_3[0],_3[1]);this.fireSelectionUpdated()}else if(this.selection!=null&&(!this.selection.isSelected(_1)||this.selection.multipleSelected()))
{if(this.selectionType==isc.Selection.NONE){this.logInfo("selectOnEdit is true, but this.selectionType is set to 'none'. Unable to perform a selection on edit.","gridEdit")}else if(this.selectionType==isc.Selection.SIMPLE)this.selection.select(_1);else this.selection.selectSingle(_1);this.fireSelectionUpdated()}
delete _1.$17d},isc.A.$1038=function isc_ListGrid__updateEditorSelection(_1){if(!isc.isA.TextItem(_1)&&!isc.isA.TextAreaItem(_1)&&!(isc.isA.TimeItem(_1)&&_1.useTextField!=false)&&!(isc.isA.DateItem(_1)&&_1.useTextField))return;if(_1.$1039)return;var _2=isc.isA.DateItem(_1)?_1.dateTextField:isc.isA.TimeItem(_1)?_1.textField:_1;var _3=_2.getDataElement();if(!_3)return;if(this.$103h||!this.autoSelectEditors){var _4=_3.value||"";_2.setSelectionRange(_4.length,_4.length);delete this.$103h}else{_2.selectValue()}},isc.A.$1036=function isc_ListGrid__updateNewEditRowValues(_1,_2){var _3=this.$92d,_4=this.$96u,_5=this.getCellRecord(_3,_4);if(_5!=null&&_5!="loading"){var _6=this.getEditValues(_3,_4);for(var i in _5){if(_5[i]!=null&&_6[i]==null){_6[i]=_5[i]}}}
if(_1)this.showInlineEditor(_3,_4,true,true,_2);else this.updateEditRow(_3)},isc.A.editField=function isc_ListGrid_editField(_1,_2){if(this.completeFields==null)this.setFields(this.fields);var _3;if(isc.isA.Number(_1))_3=_1;else _3=this.fields.findIndex(this.fieldIdProperty,_1);if(_2==null){_2=this.getEditRow();if(_2==null){this.logWarn("editField(): unable to determine which row to edit - returning.","gridEdit");return}}
return this.startEditing(_2,_3)},isc.A.showInlineEditor=function isc_ListGrid_showInlineEditor(_1,_2,_3,_4,_5){if(this.$94e){if(_1!=this.getEditRow()||(this.editByCell&&_2!=this.getEditCol())){this.logWarn("Unexpected call to 'showInlineEditor' during another edit - cancelling previous edit","gridEdit");this.cancelEditing();this.startEditing(_1,_2);return}}
if(this.$104a&&this.$104a[_1]==_1&&this.$104a[_2]==_2)
{return}
this.$104a=[_1,_2];var _6=(this.suppressEditScrollIntoView||_5||this.ns.EH.$vc());this.logDebug("showing inline editor at: "+[_1,_2]+", will focus: "+!_5,"gridEdit");var _7=this.body&&(!this.body.shouldShowAllColumns()||!this.body.showAllRows);if(_7&&!_6){var _8=this.body.scrollRedrawDelay;this.body.scrollRedrawDelay=0;this.scrollToCell(_1,_2,"left","top");this.body.scrollRedrawDelay=_8}
var _9=this.currentRollOverCanvas||this.currentRollUnderCanvas;if(_9!=null&&_9.$92j==_1){this.updateRollOverCanvas(_9.$92j,_9.$91x,true)}
var _10;if(!this.$94e){var _11=this.makeEditForm(_1,_2);if(this.$986()&&_11){this.logInfo("Edit Form rebuilt with alwaysShowEditors:true, requires full redraw","inactiveEditorHTML");_10=true}}
var _12=this.$96u!=null&&(_2>this.$96u);this.$92d=_1;this.$96u=_2;this.$99v=_1;this.$104b(_1,_2,_10);this.$104a=null;if(this.body&&!_6){var _13;if(!_7)_13=true;else{var _14=this.body,_15=_14.getRowTop(_1),_16=_14.getRowSize(_1),_17=_14.getScrollTop(),_18=_14.getViewportHeight();_13=(_15<_17)||(_15+_16>_17+_18)}
if(_13){this.scrollToCell(_1,_2,"left","top")}}
if(!this.isDrawn()){return}
this.$104c();var _19=this.getEditorName(_1,_2),_20=this.$20w.getItem(_19);if(_20==null){this.logWarn("ListGrid showing inline editor. Unable to get a pointer to the edit form item for field:"+_19)}else{if(_3)_20.$96x=true;if(_4)_20.$96w=true;if(!_5){if(isc.Browser.isMoz){var _21=this.body.getClipHandle(),_22=_21.scrollTop}
var _23=isc.EH.lastEvent;var _24=false;if(isc.Browser.isIE&&_23.eventType==isc.EH.MOUSE_DOWN){var _25=_23.target;if(_25!=this.$20w){_24=true;var _26=this.$20w.getCanvasItemCanvii();for(var i=0;i<_26.length;i++){if(_26[i]==_25||_26[i].contains(_25)){_24=false;break}}}}
if(isc.Browser.isIE){var _28=isc.ListGrid.$104d;if(_28&&(_28.hasFocus||_28.itemHasFocus()))_24=true}
if(isc.Browser.isSafari&&this.alwaysShowEditors){_24=true}
if(_24){this.$104e=this.$20w.delayCall("focusInItem",[_19,_12])}else{if(isc.Browser.isMoz&&this.body.overflow==isc.Canvas.VISIBLE){this.adjustOverflow()}
this.$20w.focusInItem(_19,_12)}}}},isc.A.$104b=function isc_ListGrid__showEditForm(_1,_2,_3){var _4=this.$94e;this.$94e=true;if(!this.isDrawn()||!this.body)return;var _5=this.isEmpty()||(!_4&&(_1>=this.data.getLength())&&(this.showNewRecordRow||(this.body.getTableElement(_1)==null)));var _6=this.$986();var _7=this.getCellRecord(_1,_2);if(_7&&this.$91v(_7)){}
if(_3||_5||this.body.isDirty()||(this.frozenBody&&this.frozenBody.isDirty())){var _8=this.bodyLayout?this.bodyLayout:this.body;_8.redraw("Showing editor");return}
var _9=isc.RPCManager&&isc.RPCManager.startQueue();if(this.editByCell){var _10=(this.frozenFields!=null)||(this.baseStyle==null);if(_10)this.refreshRow(_1);else this.refreshCell(_1,_2)}else{var _11=this.getDrawnFields();for(var i=0;i<_11.length;i++){if(this.isCheckboxField(_11[i]))continue;var _13=_11[i],_14=_11[i][this.fieldIdProperty],_15=this.$20w.getItem(_14),_2=_15.colNum,_16=!!(_4&&_15.isDrawn()),_17=this.canEditCell(_1,_2);if(_16!=_17)this.refreshCell(_1,_2);else if(this.selectOnEdit||this.lastOverRow){var _8=(_13.frozen&&!this.$989)?this.frozenBody:this.body;_8.$92w(this.getCellRecord(_1,_2),_1,_2)}}}
if(!_9&&isc.RPCManager)isc.RPCManager.sendQueue()},isc.A.$104c=function isc_ListGrid__showEditClickMask(){if(!this.modalEditing){if(this.canHover)this.stopHover();return}
if(!this.$20w.clickMaskUp()){if(!this.$104f)
this.$104f=isc.$bh(this.getID()+".$104g()");var _1=[this.$20w];if(isc.ListGrid.$104d!=null){_1.add(isc.ListGrid.$104d)}
this.$20w.showClickMask(this.$104f,(this.stopOnErrors?isc.EH.SOFT_CANCEL:isc.EH.SOFT),_1)}},isc.A.stopHover=function isc_ListGrid_stopHover(){if(this.$94e&&isc.EH.getTarget()==this.getEditForm())return;return this.Super("stopHover",arguments)},isc.A.shouldWaitForSave=function isc_ListGrid_shouldWaitForSave(){if(this.stopOnErrors&&!this.waitForSave){var _1="Note: ListGrid initialized with 'waitForSave' false, and 'stopOnErrors' true. In this case user input will be be blocked during save, to allow server side  errors to be determined before the editor is hidden. Setting 'waitForSave' to true.";if(this.waitForSave==false)this.logWarn(_1,"gridEdit");else this.logInfo(_1,"gridEdit");this.waitForSave=true}
return!!(this.waitForSave||this.stopOnErrors)},isc.A.hideInlineEditor=function isc_ListGrid_hideInlineEditor(_1,_2,_3){if(_1){if(!this.hasFocus&&!(this.body&&this.body.hasFocus)&&!(isc.ListGrid.$104d&&isc.ListGrid.$104d.hasFocus))
{var _4=this.getEditForm();if(_4==null){_1=false}else if(!_4.hasFocus){var _5=isc.EH.getFocusCanvas();if(!_5||!this.body||!this.body.contains(_5)){_1=false}}}}
if(isc.Browser.isFirefox){var _4=this.getEditForm();if(_4!=null){var _6=_4.getFocusItem();if(_6!=null&&_6.hasFocus){var _7=_6.$499();if(_7&&_7.blur)_7.blur()}}}
if(!this.$94e)return false;this.$94e=null;this.$94u=null;var _8=this.$92d,_9=this.$96u;this.$92d=this.$96u=null;if(!_2)this.$20w.hideClickMask();if(this.getEditValues(_8,_9)!=null&&(!this.$99u||!this.$99u[this.getEditValuesID(_8,_9)])&&!this.recordHasChanges(_8,_9,false)&&!this.hasSubmittedEditValues(_8,_9)&&!this.recordMarkedAsRemoved(_8))
{this.logInfo("hideInlineEditor for row with no edits - dropping edit values","gridEdit");this.$104h(_8,_9)}
if(!_2){this.$1037()}
if(!this.body)return true;var _4=this.$20w;if(_4.hasFocus){_4.blur()}
if(isc.Browser.isIE){var _10=_4.getFocusSubItem(),_11=isc.EH.$vk;if(_4.hasFocus||(_11&&((_11==_4)||(isc.EH.$vk.form==_4))))
{_10.elementBlur();this.$103v(_10,_9)}}
var _12=this.getCellRecord(_8,_9),_13=false;if(_12&&this.$91v(_12)){_13=true}
if(!this.body.isDirty()&&(!this.bodyLayout||!this.bodyLayout.isDirty())&&!this.isDirty())
{if(_13||_8>=this.getTotalRows()){var _14=this.bodyLayout||this.body;_14.markForRedraw("Editor Hidden")}else{if(this.editByCell){var _15=(this.frozenFields!=null)||(this.baseStyle==null);if(_15)this.refreshRow(_8);else this.refreshCell(_8,_9)}
else this.refreshRow(_8);this.refreshGroupSummary(_8)}}
if(_1){if(_3!=null){_3==1?this.body.focusInNextTabElement():this.body.focusInPreviousTabElement()}else{this.$95c=true;this.body.focus()}}
this.$104i(null);return true},isc.A.$103v=function isc_ListGrid__parkFocus(_1,_2){if(isc.isA.TextItem(_1)||isc.isA.TextAreaItem(_1)||isc.isA.PopUpTextAreaItem(_1))
{var _3=isc.ListGrid.$104d;if(!_3){_3=isc.ListGrid.$104d=isc.DynamicForm.create({pointersToThis:[{object:isc.ListGrid,property:"$104d"}],getFocusParkItem:function(){return this.getItem(0)},autoDraw:false,_redrawWithParent:false,ID:"$104j",_generated:true,selectOnFocus:true,tabIndex:-1,numCols:1,items:[{name:"focusPark",type:"text",title:isc.nbsp,handleKeyPress:function(){return false}}],width:1,height:1,overflow:isc.Canvas.HIDDEN,itemHasFocus:function(){var _4=this.getFocusParkItem();if(_4.hasFocus)return true;if(isc.Browser.isIE&&this.isDrawn()&&this.isVisible()&&(this.getActiveElement()==this.getFocusParkItem().getFocusElement()))
return true;return false},redraw:function(){var _5=false;if(this.itemHasFocus())_5=true;this.Super("redraw",arguments);if(_5)this.focusInItem(this.getFocusParkItem())},$vo:true})}
if(_3.isVisible())_3.hide();_3.moveTo(Math.max(this.body.getPageLeft(),this.getColumnPageLeft(_2)),this.getPageTop()+Math.min(((this.showHeader?this.getHeaderHeight():0)+this.getRowTop(this.getEditRow())
-this.body.getScrollTop()),this.getScrollHeight()-1));_3.sendToBack();_3.show();if(this.$20w.clickMaskUp())_3.unmask(this.$20w.getID());_3.getFocusParkItem().focusInItem();_1.form.hasFocus=false}},isc.A.makeEditForm=function isc_ListGrid_makeEditForm(_1,_2){var _3=this.getCellRecord(_1,_2),_4=this.getEditDisplayValues(_1,_2),_5;if(this.updateEditorItemsInPlace&&this.$20w!=null){_5=true;var _6=this.editByCell?[this.getField(_2)]:this.getDrawnFields();if(_6){if(_6.length!=this.$20w.getItems().length){_5=false}else{for(var i=0;i<_6.length;i++){var _8=_6[i],_9=this.getEditorName(_1,_8),_10=this.$20w.getItem(_9);if(_10==null||(this.getEditorType(_8,_4)!=this.$20w.getEditorType(_10)))
{_5=false;break}}}}
if(_5&&_6){var _11=this.getDrawnFieldWidths(_3,_6);for(var i=0;i<_6.length;i++){var _8=_6[i],_12=this.getColNum(_8),_9=this.getEditorName(_1,_8),_10=this.$20w.getItem(_9),_3=this.getRecord(_1),_13=this.getEditedRecord(_1),_14=this.getEditItem(_8,_3,_13,_1,_12,_11[i],true);_10.setProperties(_14);_10.$37h=null;if(_8.frozen){_10.containerWidget=this.frozenBody}else{_10.containerWidget=this.body}}}else{var _15=this.getEditRowItems(_3,_1,_2,this.editByCell);this.$20w.setItems(_15)}
this.$20w.setValues(_4)}else{var _15=this.getEditRowItems(_3,_1,_2,this.editByCell);var _16=isc.addProperties({},this.editFormDefaults,{grid:this,dataPath:this.dataPath,locatorParent:this,showErrorIcons:this.showErrorIcons,tabIndex:this.getTabIndex(),dataSource:this.dataSource,suppressAllDSFields:true,autoComplete:this.autoComplete,uniqueMatch:this.uniqueMatch,autoFocus:false,$18d:function(_19){if(!this.Super("$18d",arguments))return false;var _17=_19!=null?this.grid.getSpecifiedField(_19.name):null;if(_17&&_17.displayValueFromRecord===false)return false;return true},setFocusItem:function(_19){this.Super("setFocusItem",arguments);this.grid.$104i(this.isFocused()?_19:null)},clearFocusItem:function(){this.Super("clearFocusItem",arguments);this.grid.$104i(null)},alwaysManageFocusNavigation:true,$tx:function(_19,_20){this.logDebug("focusInNextTabElement() invoked on a ListGrid editForm.  This will fire 'cellEditEnd()' with an appropriate editEvent","syntheticTabIndex");var _18=_19?isc.ListGrid.TAB_KEYPRESS:isc.ListGrid.SHIFT_TAB_KEYPRESS;if(isc.EH.clickMaskUp()){isc.EH.setMaskedFocusCanvas(null,isc.EH.clickMaskRegistry.last())}
this.grid.cellEditEnd(_18)},items:_15,values:_4},this.editFormProperties);if(this.dateFormatter!=null&&_16.dateFormatter==null){_16.dateFormatter=this.dateFormatter}
if(this.datetimeFormatter!=null&&_16.datetimeFormatter==null){_16.datetimeFormatter=this.datetimeFormatter}
if(this.timeFormatter!=null&&_16.timeFormatter==null){_16.timeFormatter=this.timeFormatter}
this.$20w=isc.DynamicForm.create(_16)}
if(this.logIsDebugEnabled("gridEdit")){this.logDebug("editRowForm created with values: "+this.echo(this.$20w.getValues()),"gridEdit")}
return!_5},isc.A.getEditForm=function isc_ListGrid_getEditForm(){return this.$94e?this.$20w:null},isc.A.getEditFormItem=function isc_ListGrid_getEditFormItem(_1){var _2=this.getEditForm();if(!_2)return null;var _3=this.getEditorName(this.getEditRow(),_1),_4=_2.getItem(_3);if(!isc.isA.Number(_1)||(_4&&_4.colNum==_1))return _4},isc.A.getEditFormValue=function isc_ListGrid_getEditFormValue(_1){var _2=this.getEditFormItem(_1);return(_2?_2.getValue():null)},isc.A.$104k=function isc_ListGrid__updateEditItemValues(){if(!this.$20w)return;var _1=this.getEditRow(),_2=this.getEditCol(),_3=this.getEditDisplayValues(_1,_2);this.$20w.setValues(_3)},isc.A.getEditDisplayValues=function isc_ListGrid_getEditDisplayValues(_1,_2,_3){var _4=_3?this.$96y(_1,_2):this.getEditValues(_1,_2),_5=this.getCellRecord(_1,_2),_6={};for(var _7 in _5){_6[_7]=_5[_7]}
for(var _7 in _4){_6[_7]=_4[_7]}
for(var _7 in _6){var _8=this.getFieldNum(_7);if(_8>=0&&this.$103y!=null){_6[_7]=this.$103y(_6[_7],_5,_1,_8)}}
return _6},isc.A.getEditFormItemFieldWidths=function isc_ListGrid_getEditFormItemFieldWidths(_1){var _2=[];for(var i=0;i<this.fields.length;i++){var _4=this.getLocalFieldNum(i),_5=this.fields[i],_6=(!this.$989&&_5.frozen)?this.frozenBody:this.body;_2[i]=_6.getInnerColumnWidth(_4)}
return _2},isc.A.getEditorValueMap=function isc_ListGrid_getEditorValueMap(_1,_2){if(_1.getEditorValueMap!=null){isc.Func.replaceWithMethod(_1,"getEditorValueMap","values,field,grid");return _1.getEditorValueMap(_2,_1,this)}
if(_1.editorValueMap!=null){return _1.editorValueMap}
if(_1.editorProperties&&_1.editorProperties.valueMap){return _1.editorProperties.valueMap}
return _1.valueMap},isc.A.getEditorValueIcons=function isc_ListGrid_getEditorValueIcons(_1,_2){return _1.editorValueIcons||_1.valueIcons},isc.A.getEditorValueIconWidth=function isc_ListGrid_getEditorValueIconWidth(_1){if(_1.editorValueIconWidth!=null)return _1.editorValueIconWidth;return(_1.valueIconWidth!=null?_1.valueIconWidth:_1.valueIconSize)},isc.A.getEditorValueIconHeight=function isc_ListGrid_getEditorValueIconHeight(_1){if(_1.editorValueIconHeight!=null)return _1.editorValueIconHeight;return _1.valueIconHeight!=null?_1.valueIconHeight:_1.valueIconSize},isc.A.setEditorValueMap=function isc_ListGrid_setEditorValueMap(_1,_2){var _3=this.getColNum(_1),_4=this.getField(_1),_5=_4[this.fieldIdProperty];_4.editorValueMap=_2;if(this.$94e){var _6=this.getEditRow(),_7=this.getEditedRecord(_6,_3);this.$20w.setValueMap(_5,this.getEditorValueMap(_4,_7))}},isc.A.getEditorType=function isc_ListGrid_getEditorType(_1,_2){var _3=isc.addProperties({},_1,_1.editorProperties);return isc.DynamicForm.getEditorType(_3,this)},isc.A.getEditorProperties=function isc_ListGrid_getEditorProperties(_1,_2,_3){return isc.addProperties({},this.editorProperties,_1.editorProperties)},isc.A.getEditRowItems=function isc_ListGrid_getEditRowItems(_1,_2,_3,_4){var _5=this.body;if(_5==null)return[];var _6,_7,_8=[],_9=[];var _10=this.getEditedRecord(_2,_3);var _11;if(_4)_11=[this.getField(_3)]
else _11=this.getDrawnFields();_8=this.getDrawnFieldWidths(_1,_11);if(_11!=null){for(var i=0;i<_11.length;i++){var _13=this.getColNum(_11[i]);var _14=this.getEditItem(_11[i],_1,_10,_2,_13,_8[i])
if(_14==null)continue;_9[_9.length]=_14}}
return _9},isc.A.getDrawnFields=function isc_ListGrid_getDrawnFields(){if(!this.body)return null;var _1=[],_2=this.body;var _3=this.frozenFields,_4=this.freezeStart();if(_3&&_4){_1.addList(_3)}
var _5,_6;if((_2.$20u==null)||!_2.isDrawn()||_2.isDirty()||_2.$94k){var _7=_2.getDrawArea();_5=_7[2];_6=_7[3]}else{_5=_2.$20u;_6=_2.$896}
if(_3&&_4){_5+=_3.length;_6+=_3.length}
for(var i=_5;i<=_6;i++){_1.add(this.fields[i])}
if(_3&&!_4){_1.addList(_3)}
return _1},isc.A.getDrawnFieldWidths=function isc_ListGrid_getDrawnFieldWidths(_1,_2){if(!_2)_2=this.getDrawnFields();if(!_2)return null;var _3=this.getEditFormItemFieldWidths(_1),_4=[];for(var i=0;i<_2.length;i++){_4[i]=_3[_2[i].masterIndex]}
return _4},isc.A.$104l=function isc_ListGrid__popUpTextAreaItemKeyPress(_1,_2,_3){return this.grid.editorKeyPress(this,_2,_3)},isc.A.$104m=function isc_ListGrid__popUpTextAreaItemKeyDown(_1,_2,_3){return this.grid.editorKeyDown(this,_2,_3)},isc.A.$104n=function isc_ListGrid__popUpTextAreaItemFocus(){var _1=this.form,_2=this.grid,_3,_4,_5,_6;if(_2.$94e){_3=_2.$92d;if(!_2.editByCell){_3=_2.$92d;_5=this.getFieldName(),_4=_2.fields.findIndex(_2.fieldIdProperty,_5);_6=(_2.$96u!=_4);if(_6){_2.setNewEditCell(_3,_4);_2.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}}},isc.A.$104o=function isc_ListGrid__getPopUpTextAreaTop(){var _1=this.grid,_2=this.getFieldName(),_3=_1.getEditRow(),_4=_1.getCellStyle(_1.getRecord(_3),_3,_1.getColNum(_2)),_5=_1.getRowPageTop(_3)+isc.Element.$0c(_4)+isc.Element.$0j(_4);return _5},isc.A.$104p=function isc_ListGrid__checkboxClick(_1,_2,_3,_4){if(!this.hasFocus){var _5=this.grid;_5.setNewEditCell(this.rowNum,this.colNum);_5.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE);this.$96x=true}
return this.invokeSuper("CheckboxItem","handleClick",_1,_2,_3,_4)},isc.A.handleEditorChanged=function isc_ListGrid_handleEditorChanged(_1){if(this.$104q==_1)return;var _2=_1.getFieldName(),_3=this.getField(_2),_4;if(_3&&_3.validateOnChange!=null)_4=_3.validateOnChange;else _4=this.validateOnChange;var _5=this.getEditRow();if(_5==null||_5!=_1.rowNum)return;if(_4){this.validateCell(_5,_2,false,true)}else if(!_1.hasFocus&&!this.editByCell){if(_1.isDrawn()&&_1.isVisible()){this.storeUpdatedEditorValue(false,_1.colNum);if(this.saveByCell&&this.autoSaveEdits){var _6=isc.ListGrid.EDIT_FIELD_CHANGE;this.saveEdits(_6,null,_5,_1.colNum)}else if(this.validateByCell)this.validateCell(_5,_2)}}else{var _7={};_7[_2]=_1.getValue();this.$1037(_7)}},isc.A.$104r=function isc_ListGrid__editorHandleChangedOverride(_1,_2,_3,_4){this.invokeSuper(this.getClassName(),"handleChanged",_1,_2,_3,_4);if(!this.destroyed)this.grid.handleEditorChanged(this)},isc.A.$104s=function isc_ListGrid__editorGetAutoComplete(){var _1=this.grid;if(!_1)return null;var _2=_1.getField(this.getFieldName());if(_2.autoComplete!=null)return _2.autoComplete;if(_1.autoComplete!=null)return _1.autoComplete;return this.Super("$40g",arguments)},isc.A.getEditItem=function isc_ListGrid_getEditItem(_1,_2,_3,_4,_5,_6,_7){var _8={};_8.width=_6;_8.record=_2;_8.rowNum=_4;_8.colNum=_5;_8.getGlobalTabIndex=function(){if(!this.containerWidget)return this.Super("getGlobalTabIndex",arguments);return this.containerWidget.getTabIndex()};var _9=this.getEditorName(_4,_1);_8[this.fieldIdProperty]=_9;var _10=this.getEditorName(_4,_1,true);if(_10&&_10!=_9){_8.dataPath=_10}
if(_1.title!=null)_8.title=_1.title;_8.valueMap=this.getEditorValueMap(_1,_3);if(_1.multiple!=null)_8.multiple=_1.multiple;if(_1.canEdit!=null)_8.canEdit=this.canEditCell(_4,_5);if(_1.disabled!=null)_8.disabled=_1.disabled;if(_1.valueField!=null)_8.valueField=_1.valueField
if(_1.displayField!=null)_8.displayField=_1.displayField
if(_1.optionDataSource)_8.optionDataSource=_1.optionDataSource
if(_1.optionFilterContext)_8.optionFilterContext=_1.optionFilterContext
if(_1.optionCriteria)_8.optionCriteria=_1.optionCriteria
if(_1.optionOperationId!=null)_8.optionOperationId=_1.optionOperationId;_8.valueIcons=this.getEditorValueIcons(_1,_3);var _11=this.getEditorValueIconWidth(_1),_12=this.getEditorValueIconHeight(_1);if(_11)_8.valueIconWidth=_11;if(_12)_8.valueIconHeight=_12;if(_1.valueIconClick!=null){_8.valueIconClick=this.$104t}
_8.imageURLPrefix=(_1.editorImageURLPrefix||_1.imageURLPrefix);_8.imageURLSuffix=(_1.editorimageURLSuffix||_1.imageURLSuffix);_8.baseURL=_1.baseURL;_8.imgDir=_1.imgDir;var _13;if(_1.icons!==_13)_8.icons=_1.icons;if(_1.showPickerIcon!==_13)_8.showPickerIcon=_1.showPickerIcon;if(_1.pickerIconSrc!==_13)_8.pickerIconSrc=_1.pickerIconSrc;if(_1.pickerIconWidth!==_13)_8.pickerIconWidth=_1.pickerIconWidth;if(_1.pickerIconHeight!==_13)_8.pickerIconHeight=_1.pickerIconHeight;if(_1.defaultIconSrc!==_13)_8.defaultIconSrc=_1.defaultIconSrc;var _14=(_1.editorIconHeight||_1.iconHeight);if(_14!==_13)_8.iconHeight=_14
var _15=(_1.editorIconWidth||_1.iconWidth);if(_15!==_13)_8.iconWidth=_15;if(_1.iconPrompt!==_13)_8.iconPrompt=_1.iconPrompt;if(_1.iconHSpace!==_13)_8.iconHSpace=_1.iconHSpace;if(_1.iconVAlign!==_13)_8.iconVAlign=_1.iconVAlign;if(this.showValueIconOnly(_1)){if(_1.editorProperties==null)_1.editorProperties={};_1.editorProperties.showValueIconOnly=true}
if(_1.pickListWidth!=null)_8.pickListWidth=_1.pickListWidth;if(_1.pickListFields!=null)_8.pickListFields=_1.pickListFields;_8.textAlign=this.getFieldCellAlign(_1,this.isRTL())
if(_1.editorProperties!=null){for(var i=0;i<this.$98b.length;i++){var _17=this.$98b[i],_18=_1.editorProperties[_17];if(_18!=null&&!isc.isA.Function(_18)){var _19=isc.FormItem._stringMethodRegistry;_1.editorProperties[_17]=_18=isc.Func.expressionToFunction(_19[_17],_18)}
if(_18!=null)_1.editorProperties[_17]=_18}}
for(var i=0;i<this.$98a.length;i++){var _17=this.$98a[i];if(_1.editorProperties&&_1.editorProperties[_17]!=null){continue}
var _18=_1[_17];if(_18!=null){if(_1.editorProperties==null)_1.editorProperties={};if(!isc.isA.Function(_18)){var _19=isc.FormItem._stringMethodRegistry;_18=isc.Func.expressionToFunction(_19[_17],_18)}
_1.editorProperties[_17]=_18}}
_8.valueIconLeftPadding=this.getValueIconLeftPadding(_1);_8.valueIconRightPadding=this.getValueIconRightPadding(_1);if(!_7){_8.$40g=this.$104s;_8.autoCompleteCandidates=_1.autoCompleteCandidates;_8.uniqueMatch=_1.uniqueMatch;_8.containerWidget=(!this.$989&&_1.frozen)?this.frozenBody:this.body;_8.grid=this;_8.handleChanged=this.$104r;_8.keyDown=function(_8,_28,_29){if(this.form==null)return;return this.form.grid.editorKeyDown(_8,_29)}
_8.inactiveEditorMouseDown=function(_28,_29){if(_28&&(_28.grid==this.form.grid.getID())&&_28.rowNum!=null&&_28.colNum!=null)
{if(this.form==null)return;this.form.grid.startEditing(_28.rowNum,_28.colNum)}}
_8.handleMouseDown=function(){var _20=this.Super("handleMouseDown",arguments);var _21=this.$96r();this.$96s(_21[0],_21[1]);return _20}
_8.type=_1.type;_8.editorType=this.getEditorType(_1,_2);var _22=_8.editorType;_8.browserAutoCorrect=false;if(_1.dateFormatter!=null)_8.dateFormatter=_1.dateFormatter;if(_1.timeFormatter!=null)_8.timeFormatter=_1.timeFormatter;if(_1.displayFormat!=null)_8.displayFormat=_1.displayFormat;var _23=this.$96g(_1);if(_23)_8.inputFormat=_23;if(this.$158[_22]==true||this.$977[_22]==true||(_1.type==this.$nz&&_22==null))
{_8.editorType=(this.$977[_22]==true?this.$nx:this.$nz);_8.useTextField=true;_8.cellPadding=0;_8.itemCellStyle=null;_8.pickerIconHSpace=0}
if(this.$976[_22]==true){_8.editorType=this.$n0;var _24=this.getDataSource();if(_24&&_24.allowAdvancedCriteria==false)_8.allowExpressions=false}
if(this.popUpTextAreaEditorTypes[_22]==true){_8.getTextBoxStyle=function(){var _25=this.grid,_2=_25.getCellRecord(this.rowNum,this.colNum);this.textBoxStyle=_25.getCellStyle(_2,this.rowNum,this.colNum);return this.Super("getTextBoxStyle",arguments)}
_8.gridCellStyleChanged=function(_2,_4,_5,_28){var _26=this.$20l();if(_26){_26.className=this.textBoxStyle=_28}}
_8.textBoxCellCSS=isc.Canvas.$05
_8.textAreaKeyDown=this.$104m;_8.textAreaKeyPress=this.$104l;_8.getTextAreaTop=this.$104o;if(_8.popUpOnEnter==null)_8.popUpOnEnter=true;_8.textAreaFocus=this.$104n}
if(this.$978[_22]==true||(_1.type==this.$nv&&_22==null)){if(_8.showLabel==null)_8.showLabel=false;if(_8.handleClick==null){_8.handleClick=this.$104p}}
if(_22=="RichTextItem"||_22=="richText"){if(_8.overflow==null)_8.overflow="auto"}
_8.elementFocus=this.$96q;_8.$96r=this.$96t;_8.$96s=this.$96v;_8.canTabToIcons=false;_8.focusInItem=this.$104u;_8.$496=this.$104v}
var _27=this.getEditorProperties(_1,_2,_4);isc.addProperties(_8,_27);return _8},isc.A.$104t=function isc_ListGrid__editorValueIconClickFunction(_1,_2,_3){var _4=this.grid.getField(this.name);var _5=this.grid.getEditRow(),_6=this.grid.getEditCol();var _7=this.grid.getCellRecord(_5,_6);isc.Func.replaceWithMethod(_4,"valueIconClick","viewer,record,recordNum,field,rawValue,editor");var _8=_4.valueIconClick(this.grid,_7,_5,_4,_3,this);if(_8==false)return false;return this.Super("valueIconClick",arguments)},isc.A.$104u=function isc_ListGrid__editFormItem_focusInItem(){this.Super("focusInItem",arguments);this.grid.$1038(this)},isc.A.$104v=function isc_ListGrid__editFormItem_refocusAfterRedraw(){this.$1039=true;this.Super("$496",arguments);this.$1039=false},isc.A.getEditorName=function isc_ListGrid_getEditorName(_1,_2,_3){_2=this.getField(_2);if(!_2)return null;if(_3&&_2.dataPath){return _2.dataPath}
return _2[this.fieldIdProperty]},isc.A.getTrimmedFieldDataPath=function isc_ListGrid_getTrimmedFieldDataPath(_1){var _2=this.getField(_1);if(_2==null)return _1;if(_2.dataPath){return this.$nd(_2.dataPath)}else{return _1.name}},isc.A.refreshCell=function isc_ListGrid_refreshCell(_1,_2,_3,_4){if(_1==null){this.logInfo("ListGrid.refreshCell(): first parameter rowNum not present, returning");return}
if(!this.isDrawn()||!this.body)return;var _5=this.getFieldBody(_2);if(_5.isDirty()){this.logDebug("refresh cell redrawing body","gridEdit");_5.redraw("refresh cell");return false}
if(this.$986(this.getField(_2),true)){this.$94l(_1,_2)}
var _6=this.getLocalFieldNum(_2);_5.refreshCellStyle(_1,_6);if(!_5.shouldRefreshCellHTML()){this.refreshCellValue(_1,_2,_3,_4)}});isc.evalBoundary;isc.B.push(isc.A.markCellForRefresh=function isc_ListGrid_markCellForRefresh(_1,_2){if(_1==null){this.logInfo("ListGrid.refreshCell(): first parameter rowNum not present, returning");return}
if(!this.isDrawn()||!this.body)return;var _3=this.getFieldBody(_2);if(_3.isDirty())return;var _4=this;if(!this.$104w)this.$104w=[];var _5=this.$104w;var _6=false;for(var i=0;i<_5.length;i++){var _8=_5[i];if(_8[0]==_1&&_8[1]==_2){_6=true;break}}
if(!_6)_5.add([_1,_2]);if(this.$94j)return;this.$94j=isc.Timer.setTimeout(function(){delete this.$94j;delete this.$104w;if(_3.isDirty())return;var _9=_3.getDrawArea();if(isc.isAn.Array(_9)){var _10=(_9[1]-_9[0]+1)*
(_9[3]-_9[2]+1);if(_5.length>_10*_4.$98e){return _3.redraw("markCellForRefresh")}}
for(var i=0;i<_5.length;i++){var _8=_5[i];_4.refreshCell(_8[0],_8[1])}},this.$98d)},isc.A.cancelPendingCellRefresh=function isc_ListGrid_cancelPendingCellRefresh(){isc.Timer.clear(this.$94j);delete this.$94j;delete this.$104w},isc.A.refreshCellValue=function isc_ListGrid_refreshCellValue(_1,_2,_3,_4){if(!this.isDrawn()||!this.body)return;var _5=this.getFieldBody(_2),_6=this.getLocalFieldNum(_2);if(!_5.$920(_1,_6)){this.delayCall("refreshCellValue",[_1,_2,_3,_4]);return}
var _7=this.getEditorName(_1,_2),_8=this.getFieldName(_2),_9=this.$20w,_10,_11=false,_12,_13;if(_9){var _10=_9.getItem(_7),_14=(this.$94e&&_1==this.getEditRow());if(_10&&_10.colNum!=_2)_10=null;if(_14){_12=(_10&&_10.isDrawn());_13=this.canEditCell(_1,_2);if(_10!=null&&_9.hasFocus){var _15=_9.getFocusSubItem();_11=(_15==_10||(_10.items&&_10.items.contains(_15)))}}else if(_10&&_10.rowNum==_1){_13=false;_12=_10.isDrawn()}}
if(!_4&&(_11&&_12&&_13))
{return}
if(_12){this.getUpdatedEditorValue();if(_10!=null){if(_11){if(_13){_9.$402()}
else _10.blurItem()}
if(_13)_10.redrawing();else _10.clearing(true)}}else{if(_10!=null&&_13){_10.drawing(true)}}
delete _5.$94r;_5.refreshCellValue(_1,_6);if(_10&&(_12||_13)){if(_13)this.$104q=_10;this.$94t(_10,null,_5);if(_13){_10.setValue(this.getEditDisplayValue(_1,_2));delete this.$104q;if(_11){_10.$1039=true;_9.$41w(_10);_10.$1039=false}}}},isc.A.refreshRow=function isc_ListGrid_refreshRow(_1){if(!this.body||!this.isDrawn())return;var _2=this.frozenFields&&this.frozenFields.length>0;if(_2&&!this.frozenBody)_2=false;var _3=false;if(this.body.isDirty())_3=true;if(_2&&!_3){if(this.frozenBody.isDirty()||this.bodyLayout.isDirty())_3=true}
if(_3){var _4=_2?this.bodyLayout:this.body;return _4.redraw("refresh row")}
if(this.$94e&&this.$20w!=null){this.logInfo("refresh row: "+_1,"gridEdit")}
if(_2){for(var i=0;i<this.frozenFields.length;i++){this.refreshCell(_1,this.getFieldNum(this.frozenFields[i]),true)}}
var _6=this.body.$20u,_7=this.body.$896;for(var i=_6;i<=_7;i++){var _8=this.getFieldNumFromLocal(i,this.body);this.refreshCell(_1,_8,true)}},isc.A.startEditingNew=function isc_ListGrid_startEditingNew(_1,_2){if(!this.canEdit&&!(this.completeFields||this.fields).getProperty("canEdit").or()){this.canEdit=true}
if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource&&!this.shouldSaveLocally())
{this.fetchData(null,null,{$165:true});this.data.setFullLength(0)}
var _3=this.body?this.body.getTotalRows():this.getTotalRows();if(this.showNewRecordRow)_3-=1;if(!this.useCellRecords&&_1!=null){this.setEditValues(_3,isc.addProperties({},_1),true)}
var _4=this.findNextEditCell(_3,0,1,true,true,true);if(_4==null){this.logInfo("startEditingNew() failed to find any editable fields in this grid.","gridEdit");return}
if(this.useCellRecords&&_1!=null){this.setEditValues(_4,isc.addProperties({},_1),true)}
this.startEditing(_4[0],_4[1],_2)},isc.A.updateEditRow=function isc_ListGrid_updateEditRow(_1){if(this.$92d!=_1||!this.$20w){return}
this.$20w.setItemValues();delete this.$20w.$21r;this.$20w.$104x=false},isc.A.shouldFixRowHeight=function isc_ListGrid_shouldFixRowHeight(_1,_2){if(this.canEdit!=false&&this.$94e&&_2==this.$92d){return false}
return this.fixedRecordHeights},isc.A.$1035=function isc_ListGrid__getNextEditFlowID(){if(this.$104y==null)this.$104y=isc.timeStamp();return this.$104y++},isc.A.$104g=function isc_ListGrid__handleClickOutsideEditor(){if(this.modalEditing){var _1=isc.EH.getTarget();if(_1==this.body||_1==this.frozenBody){var _2=_1.getEventRow(),_3=_1.getEventColumn();_1.$947=[_2,_3]}}
this.cellEditEnd(isc.ListGrid.CLICK_OUTSIDE)},isc.A.getEditDisplayValue=function isc_ListGrid_getEditDisplayValue(_1,_2,_3){var _4;if(_3===_4)_3=this.getCellRecord(_1,_2);var _5=this.$100b(_1,_2);if(_5===_4){if(_3!=null){_5=this.getRawCellValue(_3,_1,_2)}}
_5=this.$103y(_5,_3,_1,_2);return _5},isc.A.$103y=function isc_ListGrid__formatEditorValue(_1,_2,_3,_4){if(_2==null)_2=this.$96y(_3,_4);var _5=this.fields[_4];if(_5&&_5.formatEditorValue!=null){isc.Func.replaceWithMethod(_5,"formatEditorValue","value,record,rowNum,colNum,grid");_1=_5.formatEditorValue(_1,_2,_3,_4,this)}else if(this.formatEditorValue!=null){_1=this.formatEditorValue(_1,_2,_3,_4)}
return _1},isc.A.getEditValuesID=function isc_ListGrid_getEditValuesID(_1){if(_1==null||this.$1001==null)return null;if(isc.isA.String(_1)&&this.$1001[_1]!=null)return _1;if(isc.isA.Number(_1)){return this.$1014[_1]}
for(var i in this.$1001){var _3=this.$1001[i];if(_3==_1)return i;var _4=_3.$104z;if(_4&&this.comparePrimaryKeys(_4,_1)){return i}}
return null},isc.A.getEditSession=function isc_ListGrid_getEditSession(_1,_2){if(this.$1001==null)return null;if(!isc.isA.String(_1))_1=this.getEditValuesID(_1,_2);return this.$1001[_1]},isc.A.getEditSessionRowNum=function isc_ListGrid_getEditSessionRowNum(_1){_1=this.getEditSession(_1);return(_1!=null?_1.$90o:null)},isc.A.getEditSessionColNum=function isc_ListGrid_getEditSessionColNum(_1){_1=this.getEditSession(_1);return(_1!=null?_1.$103e:null)},isc.A.getAllEditRows=function isc_ListGrid_getAllEditRows(_1){return this.getAllEditCells(_1,true)},isc.A.getAllEditCells=function isc_ListGrid_getAllEditCells(_1,_2){var _3=this.$1001,_4=[];if(!_3)return _4;if(_1)return isc.getKeys(this.$1001);for(var i in _3){var _6=_3[i].$90o;_6=parseInt(_6);if(_6==null||_6<0||isNaN(_6))continue;if(_2)_4[_4.length]=_6
else{var _7=_3[i].$103e;if(_7==null){_7=this.$94e&&(_6==this.getEditRow())?this.getEditCol():this.getRowEditColNum(_6)}
if(_7!=null&&!isc.isA.Number(_7))_7=parseInt(_7);_4[_4.length]=[_6,_7]}}
return _4},isc.A.getEditValues=function isc_ListGrid_getEditValues(_1,_2){if(_1==null){return this.logWarn("getEditValues() called with no valuesID. "+(this.logIsDebugEnabled("gridEdit")?this.getStackTrace():""))}
if(this.$1040)return{};if(_2==null&&isc.isA.Array(_1)){_2=_1[1];_1=_1[0]}
var _3=(isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1));if(this.$94e&&(this.getEditRow()==_3)){this.storeUpdatedEditorValue()}
var _4={};this.combineRecords(_4,this.$96y(_1,_2));if(_4!=null){delete _4[this.recordRemovedProperty]}
return _4},isc.A.$96y=function isc_ListGrid__getEditValues(_1,_2){var _3=this.getEditSession(_1,_2);return _3!=null?_3.$1002:null},isc.A.getEditedRecord=function isc_ListGrid_getEditedRecord(_1,_2,_3){if(_1==null)return this.logWarn("getEditedRecord() called with no valuesID");if(!isc.isA.Number(_1)){_1=this.getEditSessionRowNum(_1);_2=this.getEditSessionColNum(_1)}
var _4=this.getCellRecord(_1,_2),_5=_3?this.$96y(_1,_2):this.getEditValues(_1,_2);if(_5!=null){}
var _6={},_7={};isc.DynamicForm.$151(this.getEditForm(),_4,_7);this.combineRecords(_6,_7);this.combineRecords(_6,_5);if(_6.__ref)_6.__ref=null;return _6},isc.A.getEditedCell=function isc_ListGrid_getEditedCell(_1,_2){if(_1==null||_2==null)
return this.logWarn("getEditedCell() called with no record / field parameter");var _3=this.getEditValues(_1,_2),_4=isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1),_5=isc.isA.Number(_2)?_2:this.getFieldNum(_2),_1=this.getCellRecord(_4,_5);var _6=this.getEditorName(_4,this.getField(_5))
var _7;if(_3&&_3[_6]!==_7)return _3[_6];return _1?_1[_6]:null},isc.A.rememberSubmittedEditValues=function isc_ListGrid_rememberSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1);if(_3!=null){_3.$1041=isc.addProperties({},_3.$1002)}},isc.A.getSubmittedEditValues=function isc_ListGrid_getSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1,_2);return _3!=null?_3.$1041:null},isc.A.hasSubmittedEditValues=function isc_ListGrid_hasSubmittedEditValues(_1,_2){var _3=this.getSubmittedEditValues(_1,_2);return _3!=null&&!isc.isA.emptyObject(_3)},isc.A.clearSubmittedEditValues=function isc_ListGrid_clearSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1);if(_3==null)return;var _4=_3.$1041;if(!_4)return;for(var _5 in _2){if(_4[_5]==_2[_5])delete _4[_5]}
if(isc.isA.emptyObject(_4))_3.$1041=null},isc.A.createEditValues=function isc_ListGrid_createEditValues(_1){var _2=this.body.getTotalRows();this.setEditValues(_2,_1);return this.getEditValuesID(_2)},isc.A.initializeEditValues=function isc_ListGrid_initializeEditValues(_1,_2,_3,_4){if(this.$96y(_1,_2)==null){this.$1040=true;var _5={};if(this.getCellRecord(_1,_2)==null){var _6=this.getAllFields();for(var i=0;i<_6.length;i++){if(_6[i]&&_6[i].initialValue!=null){isc.Canvas.$13e(_6[i].dataPath||_6[i].name,null,_6[i].initialValue,_5,this,true)}}}
this.setEditValues([_1,_2],_5,!_3,!_4);delete this.$1040}},isc.A.setEditValues=function isc_ListGrid_setEditValues(_1,_2,_3,_4){var _5;if(isc.isAn.Array(_1)){_5=_1[1];_1=_1[0]}
if(!isc.isA.Number(_1)){this.logWarn("setEditValues() called with bad rowNum: "+this.echo(_1));return}
if(_2==null)_2={};var _6,_7,_8=true;if(!_3){var _9=this.getCellRecord(_1,_5);if(_9==null)_9={};else _8=false;_6=this.getEditValues(_1,_5);if(_6!=null)_8=false;_7=isc.addProperties({},_6);for(var i in _7){_7[i]=_9[i]}
isc.addProperties(_7,_2)}
if(this.logIsInfoEnabled("gridEdit")){_6=_6||this.getEditValues(_1,_5);if(!_6){this.logInfo("establishing new edit session at row: "+_1+(_5!=null?", col:"+_5:"")+(this.logIsDebugEnabled("gridEdit")?" with values: "+this.echo(_2):""),"gridEdit")}}
var _11=this.recordMarkedAsRemoved(_1);if(_11)_2[this.recordRemovedProperty]=true;this.$1042(_1,_5,_2);var _12=_7!=null&&!isc.isAn.emptyObject(_7);if(_3||!this.isDrawn()||!this.body){if(_12&&!_4){if(this.summaryRow&&this.showGridSummary)this.summaryRow.$100e()}
return}
if(_12&&_1<this.data.getLength()){var _13=this.data.get(_1);this.calculateRecordSummaries(_13,null,true,true,true)}
var _14=(_8||this.body.isDirty());if(_14){var _15=this.isEditingRecord(_1,_5)&&this.$20w!=null
if(_15)this.$104k();this.body.markForRedraw();if(_12&&this.summaryRow&&this.showGridSummary){this.summaryRow.markForRedraw()}}else{this.$100c(_1,_5,_7)}},isc.A.$100c=function isc_ListGrid__displayNewEditValues(_1,_2,_3,_4){if(!_3||isc.isAn.emptyObject(_3)){return}
var _5=this.isEditingRecord(_1,_2)&&this.$20w!=null
var _6=false;for(var _7 in _3){var _8=this.getColNum(_7);var _9;if(_5){var _10=this.$20w.getItem(_7);_9=(_8>=0&&_10&&this.canEditCell(_1,_8));var _11=_10?this.$103y(_3[_7],this.getCellRecord(_1,_2),_1,_8):_3[_7];this.$20w.setValue(_7,_11)}
if(_8==-1)continue;_6=true;if(!_9){this.refreshCell(_1,_8)}else if(_4&&_4[_7]){this.showCellErrors(_1,_8)}}
if(_6&&this.summaryRow&&this.showGridSummary){this.summaryRow.$100e();this.refreshGroupSummary(_1)}},isc.A.$1042=function isc_ListGrid__storeEditValues(_1,_2,_3,_4){var _5=this.getCellRecord(_1,_2);var _6=this.getEditSession(_1,_2)||this.createEditSession(_1,_2,_5,_4);if(this.dataSource!=null){if(_5=="loading"){_6.$1043=true}else if(_5!=null){var _7=this.getDataSource(),_8=_7.getPrimaryKeyFieldNames();for(var i=0;i<_8.length;i++){_3[_8[i]]=_5[_8[i]]}}}
if(_5==null){_6.$1043=true;var _10=this.completeFields||this.fields||[],_11;for(var i=0;i<_10.length;i++){var _12=_10[i],_13=_12[this.fieldIdProperty];if(_3[_13]===_11){var _14=this.getDefaultEditValue(_13,_12);if(_14!=null){_3[_13]=_14}}}}
for(var i in _6.$1002){delete _6.$1002[i]}
for(var i in _3){_6.$1002[i]=_3[i]}
if(this.$1044==null||_1>=this.$1044){this.$1044=_1}
if(this.$94e&&this.getEditRow()==_1){this.$1037(_3)}},isc.A.getDefaultEditValue=function isc_ListGrid_getDefaultEditValue(_1,_2){var _3=_2.defaultValue;if(_3==null&&this.enumCriteriaAsInitialValues&&_2.type=="enum"&&this.$103r!=null&&this.$103r[_1]!=null)
{_3=this.$103r[_1]}
return _3},isc.A.createEditSession=function isc_ListGrid_createEditSession(_1,_2,_3,_4){var _5={};if(_3!=null&&_3!=Array.LOADING){_5.$104z=this.getPrimaryKeys(_3)}
_5.$90o=_1;if(this.useCellRecords){_5.$103e=_2;if(this.getCellFacetValues)_5.$1045=this.getCellFacetValues(_1,_2)}
_5.$1002={};if(this.$1001==null)this.$1001={};if(_4==null){if(this.$1046==null)this.$1046=0;_4="_"+this.$1046++}
this.$1001[_4]=_5;if(this.$1014==null)this.$1014={};this.$1014[_1]=_4;return _5},isc.A.setEditValue=function isc_ListGrid_setEditValue(_1,_2,_3,_4,_5,_6,_7){if(isc.isA.String(_1)){this.logWarn("Warning: first parameter rowNum is a string, expecting a number");return false}
var _8=isc.isA.String(_2)?_2:this.getEditorName(_1,_2,true);_8=this.$nd(_8);if(isc.isA.String(_2))_2=this.getFieldNum(_2);var _9=this.$1047(_1,_2,_8,_3,isc.CubeGrid&&isc.isA.CubeGrid(this)?true:_4,_5,_6,_7);if(!_9){return false}
if(_7)_3=this.$100b(_1,_2,true);var _10=this.getField(_8);if(_10&&this.$18d(_10)){var _11=false,_12;var _13=this.getEditForm(),_14=_13?_13.getItem(_8):null;if(_14&&this.getEditRow()==_1&&this.fieldValuesAreEqual(_10,_13.getValue(_8),_3))
{_11=true;_12=_14.mapValueToDisplay(_3)}
if(!_11&&(_10.valueField==null||_10.valueField==_10.name)&&(!_10.optionDataSource||isc.DS.get(_10.optionDataSource)==this.getDataSource()))
{var _15=this.data;if(isc.ResultSet&&isc.isA.ResultSet(_15))_15=_15.localData;if(_15){var _16=_15.find(_8,_3);if(_16){_11=true;_12=_16[_10.displayField]}}}
if(_11){if(this.$20w&&this.getEditRow()==_1){if(_14&&_12==_14.emptyDisplayValue)_12=null;this.$20w.setValue(_10.displayField,_12)}
this.setEditValue(_1,_10.displayField,_12,_4,true)}else{if(this.warnOnUnmappedValueFieldChange){this.logWarn("Edit value updated for field:"+_8+". This field has 'displayField' attribute specified as '"+_10.displayField+((_10.optionDataSource==null||isc.DataSource.get(_10.optionDataSource)==this.getDataSource())?"', and no unique optionDataSource, ":"', ")+"so display value is derived from the current record. In order to ensure the display value is updated to reflect the new edit-value for this field, developers can explicitly update the edit value for the display-field on this record. To avoid seeing this method set listGrid.warnOnUnmappedValueFieldChange to false.")}}}
if(_4){if(!_6){this.calculateRecordSummaries(this.data.get(_1),null,true,true,true)}
return true}
this.setRowEditFieldName(_1,_8);if(!isc.isA.Number(_1)){_2=this.getEditSessionColNum(_1);_1=this.getEditSessionRowNum(_1)}else if(!isc.isA.Number(_2)){_2=this.getFieldNum(_2)}
var _17={};_17[_8]=_3;this.$100c(_1,_2,_17);return true},isc.A.$1047=function isc_ListGrid__storeEditValue(_1,_2,_3,_4,_5,_6,_7,_8){var _9=true,_10=false,_11,_12,_13,_14;var _15=_3;if(_15.contains(isc.Canvas.$15u)){_15=this.$nd(_15)}
_11=this.getEditSession(_1,_2)
if(_11!=null){_12=_11.$1002;_13=isc.Canvas.$n2(_15,null,_12,this,true,"edit")}else{this.logInfo("creating new edit values for row: "+_1,"gridEdit");this.initializeEditValues(_1,_2,!_5,!_7);_11=this.getEditSession(_1,_2);_12=_11.$1002}
if(_13===_14){var _16=this.getCellRecord(_1,_2);_13=_16?isc.Canvas.$n2(_15,null,_16,this,true,"edit"):null}else _10=true;var _17=_13,_18=_4;var _19=this.getField(_3);if(_19&&_19.type){var _20=isc.SimpleType.getType(_19.type);if(_20&&_20.getAtomicValue!=null){_17=_20.getAtomicValue(_13,"compare");if(!_8)_18=_20.getAtomicValue(_4,"compare")}}
if(this.fieldValuesAreEqual(_19,_17,_18))_9=false;if(_4===_14){isc.Canvas.$13f(_3,_12,this,true)}else if(_10||_9){isc.Canvas.$13e(_15,(_8?_19:null),_4,_12,this,true);if(_8){_4=isc.Canvas.$n2(_15,null,_16,this,true)}}
if(_9&&!_6){this.$1048(_1,_2,_4,_13)}
if(_9&&this.$94e&&this.getEditRow()==_1){var _21={};_21[_3]=_4;this.$1037(_21)}
return _9},isc.A.setRowEditFieldName=function isc_ListGrid_setRowEditFieldName(_1,_2){var _3=this.getEditSession(_1);if(!_3){var _4=this.getColNum(_2);this.setEditValues([_1,_4],null,true);_3=this.getEditSession(_1)}
if(isc.isA.Number(_2))_2=this.getFieldName(_2);_3.$1049=_2},isc.A.getRowEditFieldName=function isc_ListGrid_getRowEditFieldName(_1){var _2=this.getEditSession(_1);return(_2?_2.$1049:null)},isc.A.getRowEditColNum=function isc_ListGrid_getRowEditColNum(_1){var _2=this.getRowEditFieldName(_1);return _2?this.getColNum(_2):null},isc.A.getEditValue=function isc_ListGrid_getEditValue(_1,_2){var _3=_2
if(isc.isA.String(_2))_2=this.getColNum(_2);if(this.$94e&&(this.getEditRow()==_1)&&(this.getEditCol()==_2))
{this.storeUpdatedEditorValue()}
return this.$100b(_1,_3,true)},isc.A.$100b=function isc_ListGrid__getEditValue(_1,_2,_3){var _4=this.$96y(_1,_2);if(_4==null)return;var _5=this.getField(_2);if(_5&&!_3){return isc.Canvas.$n2(null,_5,_4,this,true,"edit")}else{var _6=this.getTrimmedFieldDataPath(_5||_2);return isc.Canvas.$n2(_6,null,_4,this,true,"edit")}},isc.A.clearEditValue=function isc_ListGrid_clearEditValue(_1,_2,_3,_4){var _5=(isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1));var _6=_2;if(isc.isA.Number(_6))_6=this.getEditorName(_5,_6);else _2=this.getColNum(_6);if(this.$94e){if(this.getEditRow()==_5&&this.getEditFieldName()==_6){this.storeUpdatedEditorValue(true)}}
var _7=this.getEditSession(_1,_2);if(_7==null)return;var _8=_7.$1002,_9=false,_10=_7.$1041,_11=_7.$105a,_12=_11&&_11[_6],_5=_7.$90o;if(_8!=null){var _13=this.getRecord(_5);_9=isc.propertyDefined(_8,_6)&&((_5==null||_13==null)||!this.fieldValuesAreEqual(this.getField(_6),_8[_6],_13[_6]));delete _8[_6];if(_10)delete _10[_6];if(_11!=null)delete _11[_6];if(!_4&&isc.isAn.emptyObject(_8)){this.logDebug("no edit values left for row, discarding editSession","gridEdit");return this.$104h(_1,_2,_3)}}
var _14=this.getField(_6);if(_14&&this.$18d(_14)&&(_14.displayField!=_6)){this.clearEditValue(_1,_14.displayField,_3,_4)}
if(_3||_5==null)return;if(_9){var _15;if(this.$94e&&this.getEditRow()==_5){var _16=_13?_13[_6]:null;this.$20w.setValue(_6,_16);_15=_2>=0&&this.canEditCell(_5,_2)&&this.$20w.getItem(_6)}
if(_2>=0&&!_15)this.refreshCell(_5,_2)}else if(_12&&_2>=0){if(_12)this.showCellErrors(_5,_2)}},isc.A.$104h=function isc_ListGrid__clearEditValues(_1,_2,_3){if(_1==null){return}
if(!isc.isA.String(_1))_1=this.getEditValuesID(_1,_2);var _4=this.getEditSession(_1);if(_4==null)return;var _5=_4.$90o;if(_5!=null)delete this.$1014[_5];if(_2==null)_2=_4.$103e;var _6=this.$1001[_1];delete this.$1001[_1];var _7=this.$105b();delete this.$1044;if(_5!=null&&_4.$1043){var _8=this.getEditRow();for(var i=_5+1;i<=_7;i++){var _10=this.getEditSession(i);var _11=_10.$90o;_10.$90o=i-1;this.$1014[i-1]=this.$1014[i];delete this.$1014[i]}
if(_8!=null&&_8>_5)this.$92d-=1;if(!_3){if(this.$94e){if(_5==_8)this.hideInlineEditor();else{if(_5<_8)this.$105c(_8-1,null,"Earlier temp edit row removed")}}
if(this.body){var _12=this.frozenBody!=null?this.bodyLayout:this.body;_12.markForRedraw("clear edit values, remove row")}}}else if(_5!=null&&!_3){var _13={},_14=this.data.get(_5);for(var _15 in _6.$1002){_13[_15]=_14?_14[_15]:null}
this.$100c(_5,_2,_13,_6.$105a)}},isc.A.newRecordForEditValues=function isc_ListGrid_newRecordForEditValues(_1,_2){var _3=this.getEditSession(_1),_4=_3.$1002;_3.$104z=this.getPrimaryKeys(_2);var _5=this.getDataSource().getPrimaryKeyFieldNames();for(var i=0;i<_5.length;i++){var _7=_5[i];_4[_7]=_2[_7]}
delete _3.$1043},isc.A.$985=function isc_ListGrid__remapEditRows(_1){delete this.$1044;delete this.$105d;if(this.$1001==null)return false;var _2=false;var _3=this.getEditRow(),_4=this.getEditCol(),_5=false;var _6=this.data.getLength(),_7={};var _8=isc.getKeys(this.$1001);for(var i=0;i<_8.length;i++){var _10=_8[i],_11=this.$1001[_10];var _12=_11.$90o;var _13=this.$105e(_11,_6);if(_11.$104z==null)_6++;if(_13==null)continue;var _14=_13[0],_15=_13[1];if(_14!=null&&_14>=0){if(_14!=_12)_2=true;if(_3!=null&&_3==_11.$90o&&(!this.useCellRecords||(_4==_11.$103e)))
{_5=true;if(!_1)this.$105c(_14,_15,"remapEditRows")}
_7[_14]=_10;_11.$90o=_14;if(this.useCellRecords)_11.$103e=_15}else{if(_12!=null&&_12>=0)_2=true;var _16=this.getOriginalData();var _17=!this.dataSource||this.shouldSaveLocally()||(isc.ResultSet&&isc.isA.ResultSet(_16)&&_16.allRowsCached());if(_17&&!isc.isA.Tree(this.data)&&(!this.isGrouped||!this.data.find(_11.$104z)))
{this.logWarn("Record:"+this.echo(_11.$104z)+", is no longer present in this List.<br>Clearing edit values for this record.","gridEdit");delete this.$1001[this.getEditValuesID(_10)]}else{this.logInfo("Record:"+this.echo(_11.$104z)+(_17?", hidden in grouped tree data. ":", lost from local cache in paged result set. ")+"Pending edits for this record will be maintained.","gridEdit");delete _11.$90o;delete _11.$103e;this.$105d=true}}}
this.$1014=_7;if(_3!=null&&!_5&&!_1){this.hideInlineEditor(true)}
return _2},isc.A.$100d=function isc_ListGrid__remapEmbeddedComponents(){if(!this.body||this.body.$90x==null)return;if(this.showRecordComponents&&this.recordComponentPoolingMode!="data"){this.$105f();return}
var _1=this.body.$90x,_2=[];this.$958=0;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.embeddedRecord,_6=this.getPrimaryKeys(_5),_7=_4.$92j,_8=_7!=null?this.data.get(_7):null,_9=false;if(!(_8===_5)){_7=this.findRowNum(_6);_9=true}
if(_7>=0){if(_9)_8=this.data.get(_7);if(_8&&!this.$91v(_8)||!this.$91w(_8).contains(_4))
{_4.$92j=_7;_4.embeddedRecord=_8;this.$92k(_8,_4);if(_4.isExpansionComponent){if(this.maxExpandedRecords==null||(this.$958<this.maxExpandedRecords))
{this.$958++;this.$966(_8,true);this.$967(_8,true);if(!this.canExpandMultipleRecords)this.$965=_8}else{this.$966(_8,false);this.$967(_8,false);this.removeEmbeddedComponent(_8,_4,true);_2.add(_4);continue}}else{this.$97g(_8,_4.$92p,_4)}}}else{if(isc.isA.Tree(this.data)){var _10;if(isc.ResultTree&&isc.isA.ResultTree(this.data)){var _11=this.data.getDataSource().getPrimaryKeyFieldNames();_10=isc.applyMask(_5,_11)}else{_10=_5}
_8=this.data.find(_10)}
if(_8==null)_8=_5;if(this.$105g==false||(this.showRecordComponents&&this.recordComponentPoolingMode=="data")||(_4.isExpansionComponent)){if(_8!=null){var _12=_8[this.$96b+this.ID];if(_12!=null&&_12.length>0){_12.remove(_4.getID())}
if(_12.length==0){_8[this.$96b+this.ID]=null}
if(_4.isExpansionComponent){this.$966(_8,false);this.$967(_8,false)}}
_2.add(_4)}}}
if(_2.length>0){for(var i=0;i<_2.length;i++){var _13=_2[i];if(this.canExpandRecords){if(this.$965&&this.$965==_13.embeddedRecord)
delete this.$965}
this.body.$90x.remove(_13);if(this.shouldDestroyOnUnembed(_13,this.$97k)){_13.markForDestroy()}else{_13.deparent()}}}},isc.A.$105f=function isc_ListGrid__remapVisibleEmbeddedComponents(){var _1=this.logIsDebugEnabled("recordComponents");if(!this.body||this.body.$90x==null)return;var _2=this.body.$90x,_3=[],_4=this.getDrawArea(),_5=[_4[0],_4[1]];if(_5[0]==null&&_5[1]==null)return;this.$958=0;var _6=0,_7=0;if(_1){this.logDebug("START $105f - rowRange is: "+_5)}
for(var i=_5[0];i<=_5[1];i++){var _9=this.data.get(i),_10=_9?this.$97f(_9):null,_11=_10?isc.getValues(_10):null;if(_11){for(var j=0;j<_11.length;j++){var _13=_11[j];if(!_13||_13.isNullMarker)continue;if(_13.$92j==i){if(_1){this.logDebug(_13.ID+" remains at rowNum "+i+": no action")}
_13.$105h=true;_7++;continue}
_13.$92j=i;this.$92k(_9,_13);_13.$105h=true;_6++;if(_13.isExpansionComponent){if(this.maxExpandedRecords==null||(this.$958<this.maxExpandedRecords))
{if(_1){this.logDebug("ExpansionComponent "+_13.ID+" added at row "+i)}
this.$958++;this.$966(_9,true);this.$967(_9,true);if(!this.canExpandMultipleRecords)this.$965=_9}else{if(_1){this.logDebug("Removed expansionComponent "+_13.ID+" from row "+i+": too many expanded records")}
this.$966(_9,false);this.$967(_9,false);this.removeEmbeddedComponent(_9,_13,true);_3.add(_13);continue}}else{if(_1){this.logDebug("recordComponent "+_13.ID+" added at row "+i)}}}}}
if(this.recordComponentPoolingMode!="data"){for(var i=0;i<_2.length;i++){var c=_2[i];if(c.$105h)delete c.$105h;else{if(c==this.currentRollOverCanvas||c==this.currentRollUnderCanvas)continue;if(c.isBackgroundComponent||c.isExpansionComponent){var r=this.getRecordIndex(c.embeddedRecord);if(r>=0){if(c.isExpansionComponent)this.$958++}else{if(c.isExpansionComponent&&c.embeddedRecord){this.$966(c.embeddedRecord,false);this.$967(c.embeddedRecord,false)}
_3.add(c)}}else if(c.isRecordComponent){_3.add(c)}}}}
if(_3.length>0){for(var i=0;i<_3.length;i++){var _16=_3[i];if(this.canExpandRecords){if(this.$965&&this.$965==_16.embeddedRecord)
delete this.$965}
this.body.$90x.remove(_16);if(this.shouldDestroyOnUnembed(_16,this.$97k)){_16.markForDestroy()}else{_16.deparent()}}}
if(_1){this.logDebug("END $105i:\n\tremappedCount = "+_6+"\n\tinPlaceCount = "+_7)}},isc.A.$100t=function isc_ListGrid__remapEmbeddedComponentColumns(_1){if(_1.$90x==null)return;var _2=_1.$90x,_3={},_4=false;for(var i=0;i<_1.fields.length;i++){_3[_1.fields[i].name]=i}
var _6=[];for(var i=0;i<_2.length;i++){var _7=_2[i].$92p;if(_7==null){continue}
var _8=_3[_7];if(_8==null){_6[_6.length]=_2[i]}else{if(_2[i].$91x!=_8){_4=true;_2[i].$91x=_8}}}
if(_6.length>0){for(var i=0;i<_6.length;i++){var _9=_6[i];if(_9.removeOnHideField){_1.removeEmbeddedComponent(_9.embeddedRecord,_9);if(this.shouldDestroyOnUnembed(_9,this.$98f)){_9.markForDestroy()}}else{_4=true}}}
if(_4){_1.$92s()}});isc.evalBoundary;isc.B.push(isc.A.$105e=function isc_ListGrid__calculateEditCell(_1,_2){var _3,_4,_5=_1.$104z;if(_5==null){_3=_2}else{var _6=_1.$1002,_7=false,_8;if(_1.$105a!=null&&!isc.isA.emptyObject(_1._validationErrors_))
{_7=true}else{for(var _9 in _6){if(_6[_9]!=_5[_9]||_5[_9]===_8){_7=true;break}}}
if(!_7&&_1.$90o!=null&&!this.isEditingRecord(_1.$90o,_1.$103e))
{this.logInfo("dropping empty editSession","gridEdit");delete this.$1001[this.getEditValuesID(_1)];return null}
_3=this.findRowNum(_5,_1);_4=this.findColNum(_5,_1)}
return[_3,_4]},isc.A.$162=function isc_ListGrid__filter(_1,_2,_3,_4,_5){if(!_5&&(this.confirmDiscardEdits||this.autoConfirmSaveEdits)&&this.dataSource!=null)
{var _6=this.getOriginalData();if(this.hasChanges()&&!(isc.ResultSet&&isc.isA.ResultSet(_6)&&_6.compareCriteria(_2,_6.getCriteria())==0))
{this.showLostEditsConfirmation({target:this,methodName:"$105j"},{target:this,methodName:"$105k"});this.$105l={type:_1,criteria:_2,callback:_3,requestProperties:_4}
return}}
var _7=_2
if(isc.isA.Class(_7)){_7=isc.DynamicForm.getFilterCriteria(_7)}
_7=isc.DS.compressNestedCriteria(_7);this.setFilterValues(_7,true);this.dataSetChanged();return this.Super("$162",[_1,_2,_3,_4],arguments)},isc.A.$105j=function isc_ListGrid__continueFilter(){var _1=this.$105l,_2=_1.type,_3=_1.criteria,_4=_1.callback,_5=_1.requestProperties;delete this.$105l;this.$162(_2,_3,_4,_5,true)},isc.A.$105k=function isc_ListGrid__cancelFilter(){delete this.$105l},isc.A.showLostEditsConfirmation=function isc_ListGrid_showLostEditsConfirmation(_1,_2){this.$105m=_1;this.$105n=_2;if(this.autoConfirmSaveEdits){this.lostEditsCallback("save",null)}else{isc.confirm(this.confirmDiscardEditsMessage,"if(window[this.targetGridID])window[this.targetGridID].lostEditsCallback(value, this);",{targetGridID:this.getID(),buttons:[isc.Dialog.OK,{title:this.discardEditsSaveButtonTitle,width:75,click:"this.hide();this.topElement.returnValue('save');"},isc.Dialog.CANCEL]})}},isc.A.lostEditsCallback=function isc_ListGrid_lostEditsCallback(_1,_2){var _3=this.$105m,_4=this.$105n;delete this.$105m;delete this.$105n;if(_1==null){this.fireCallback(_4)}else if(_1==true){this.discardAllEdits();this.fireCallback(_3)}else if(_1=="save"){this.saveAllEdits(null,_3)}
if(_2)_2.targetGrid=null},isc.A.findRowNum=function isc_ListGrid_findRowNum(_1){var _2=this.getDataSource(),_3=isc.isA.Array(this.data);if(_2&&_3){var _4=_2.getPrimaryKeyFields(),_5=false;for(var i=0;i<_4.length;i++){if(_1[_4[i]]==null){_5=false;break}
_5=true}
if(!_5){if(!this.shouldSaveLocally()){this.logWarn("findRowNum(): Attempt to find row number on dataBound grid. Target record has no primary keys. Typically this is only supported where listGrid.saveLocally is true. Specified primaryKeys are :"+this.echo(_1))}
return this.data.indexOf(_1)}else{return _2.findByKeys(_1,this.data)}}
return this.data.indexOf(_1)},isc.A.findColNum=function isc_ListGrid_findColNum(_1){return-1},isc.A.$105c=function isc_ListGrid__moveEditor(_1,_2,_3){if(!this.$94e||_1==this.$92d){return}
var _4=this.$92d;this.logInfo(_3+": editSession: "+this.getEditValuesID(_1)+" with values: "+this.echo(this.$96y(_1,_2))+" was being edited at row: "+_4+", will now edit at row: "+_1,"gridEdit");this.$92d=_1;var _5=this.$20w,_6=_5?_5.getItems():null;if(_6){for(var i=0;i<_6.length;i++){_6[i].rowNum=_1}}},isc.A.rowEditNotComplete=function isc_ListGrid_rowEditNotComplete(_1){return(this.$1014!=null&&this.$1014[_1]!=null)},isc.A.$1048=function isc_ListGrid__editorChange(_1,_2,_3,_4){var _5=this.getCellRecord(_1,_2);if(this.editorChange!=null)this.editorChange(_5,_3,_4,_1,_2);var _6=this.getFieldName(_2);if(this.editValueChanged!=null)
this.editValueChanged(_1,_6,_3,_4);if(this.$94e&&this.isEditingRecord(_1,_2)&&this.fields!=null){_5=isc.addProperties({},this.$96y(_1,_2),_5);var _7=!this.editByCell?this.fields:[this.getEditField()];for(var i=0;i<_7.length;i++){var _9=_7[i],_10=this.$20w.getItem(_9[this.fieldIdProperty]);if(_10==null)continue;var _11=this.getEditorValueMap(_9,this.getEditedRecord(_1,_2,true));if(_10.valueMap!=_11){var _12=true;if(isc.isAn.Array(_11)&&isc.isAn.Array(_10.valueMap)){_12=!_11.equals(_10.valueMap)}else if(isc.isAn.Object(_11)&&isc.isAn.Object(_10.valueMap)){if(isc.getKeys(_11).equals(isc.getKeys(_10.valueMap))){_12=false;for(var _13 in _11){if(_11[_13]!=_10.valueMap[_13]){_12=true;break}}}}
if(_12)_10.setValueMap(_11)}}}},isc.A.getEditRow=function isc_ListGrid_getEditRow(){return this.$92d},isc.A.getEditCol=function isc_ListGrid_getEditCol(){return this.$96u},isc.A.getEditField=function isc_ListGrid_getEditField(){return this.getField(this.getEditCol())},isc.A.getEditFieldName=function isc_ListGrid_getEditFieldName(){return this.getFieldName(this.getEditCol())},isc.A.getEditRecord=function isc_ListGrid_getEditRecord(){return this.getCellRecord(this.getEditRow(),this.getEditCol())},isc.A.cancelEditing=function isc_ListGrid_cancelEditing(_1){if(!this.$94e)return;this.discardEdits(this.getEditRow(),this.getEditCol(),false,_1)},isc.A.cellEditEnd=function isc_ListGrid_cellEditEnd(_1,_2){if(this.$96p&&_1!=isc.ListGrid.TAB_KEYPRESS&&_1!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&_1!=isc.ListGrid.UP_ARROW_KEYPRESS&&_1!=isc.ListGrid.DOWN_ARROW_KEYPRESS&&_1!=isc.ListGrid.LEFT_ARROW_KEYPRESS&&_1!=isc.ListGrid.RIGHT_ARROW_KEYPRESS)delete this.$96p
var _3=this.getEditRow(),_4=this.getEditCol();if(_3==null&&_4==null)return;if(arguments.length>=2){this.setEditValue(_3,_4,_2)}
var _5=this.getFieldName(_4),_6=this.shouldCancelEdit(_3,_4,_1);if(_6)return this.cancelEditing(_1);var _7=this.getNextEditCell(_3,_4,_1);this.clearNewEditCell();if(_7==null){this.logInfo("cellEditEnd: ending editing, completion event: "+_1,"gridEdit");this.$105o(_1);return}
if(Array.isLoading(this.getCellRecord(_7[0],_7[1]))){return false}
this.$103t(_1,_3,_4,_7[0],_7[1])},isc.A.getUpdatedEditorValue=function isc_ListGrid_getUpdatedEditorValue(){if(!this.$94e)return;var _1=this.$20w.getItem(this.getEditFieldName()),_2=this.getEditField(),_3;if(_1){if(_1.$40f())_1.updateValue();_3=_1.getValue();return this.$105p(_3,_2,this.getEditRow(),this.getEditCol())}else{return this.getEditDisplayValue(this.getEditRow(),this.getEditCol())}},isc.A.storeUpdatedEditorValue=function isc_ListGrid_storeUpdatedEditorValue(_1,_2){if(!this.isDrawn()||!this.$94e)return;var _3=this.getEditRow();if(_2==null)_2=this.getEditCol();var _4=this.getField(_2),_5=this.$20w,_6=this.getEditFormItem(_2),_7;if(_6){if(_6.$40f())_6.updateValue();var _8=_6.getValue();_7=this.$105p(_8,_4,_3,_2);var _9;if(_7===_9)_7=null;var _10=this.$100b(_3,_2),_9;if(_10===_9||!this.fieldValuesAreEqual(_4,_10,_7)){var _11=isc.SimpleType.getType(_4.type);if(_11&&_11.getAtomicValue!=null){var _12=_5.getValue(_6.name);if(_8!=_7&&_11.updateAtomicValue!=null){_11.updateAtomicValue(_7,_12)}
_7=_12}
this.setEditValue(_3,_2,_7,true,_1)}}
if(this.allowEditFormValueManipulation){var _13=false,_14=_5.getChangedValues(),_15=this.getEditDisplayValues(_3,_2,true),_16=isc.getKeys(_14);if(isc.isA.Tree(this.data)){_14=this.data.getCleanNodeData(_14,false)}
var _17={};this.getAllFields().map(function(_19){_17[_19.name]=_19});var _9;for(var _18 in _15){_16.remove(_18);if(_4&&_18==_4.name)continue;var _19=this.getSpecifiedField(_18),_20=_14[_18];if(_20===_9)continue;if(_5.getItem(_18)!=null&&_19){_20=this.$105p(_20,_19,_3,this.getFieldNum(_18))}
if(_19&&(_19.userFormula||_19.userSummary||_19.type==this.$97q))
{continue}
if(this.fieldValuesAreEqual(this.getSpecifiedField(_18),_20,_15[_18]))
{continue}
if(_17[_18]==null&&_20===_9){continue}
_13|=this.setEditValue(_3,_18,_20,true,true,true)!=false}
for(var i=0;i<_16.length;i++){var _18=_16[i];if(_18==null||_18=="_cache_"+this.ID)continue;var _7=_14[_18];if(this.fieldValuesAreEqual(this.getSpecifiedField(_18),_7,_15[_18]))
{continue}
if(_17[_18]==null&&_7===_9)continue;_13|=this.setEditValue(_3,_18,_7,true,true,true)!=false}
if(_13){this.calculateRecordSummaries(this.data.get(_3),null,true,true,true)}}},isc.A.$103w=function isc_ListGrid__handleEditorExit(_1,_2,_3,_4){var _5=this.getCellRecord(_2,_3),_6=this.getField(_3),_7=this.getEditorName(_2,_6),_8=true;var _9=this.$20w.getItem(_7);if(isc.isA.PopUpTextAreaItem(_9))_9.hidePopUp();if(isc.CubeGrid&&isc.isA.CubeGrid(this)&&this.selection&&this.selection.anySelected())this.selection.deselectAll();if(_6&&_6.editorExit!=null){isc.Func.replaceWithMethod(_6,"editorExit","editCompletionEvent,record,newValue,rowNum,colNum,grid");_8=(_6.editorExit(_1,_5,_4,_2,_3,this)
!=false)}
if(_8&&this.editorExit!=null)
_8=this.editorExit(_1,_5,_4,_2,_3)!=false;return _8},isc.A.$103x=function isc_ListGrid__handleRowEditorExit(_1,_2,_3){var _4=this.getRecord(_2);if(this.rowEditorExit!=null)
return(this.rowEditorExit(_1,_4,_3,_2)!=false);return true},isc.A.$96z=function isc_ListGrid__handleEditorEnter(_1,_2,_3,_4){var _5=this.getCellRecord(_2,_3),_6=this.getFieldName(_3),_7=this.getField(_3),_8=true;if(isc.isA.PopUpTextAreaItem(_1)&&_1.popUpOnEnter){_1.showPopUp(true)}
if(_7&&_7.editorEnter!=null){isc.Func.replaceWithMethod(_7,"editorEnter","record,value,rowNum,colNum,grid");_8=_7.editorEnter(_5,_4,_2,_3,this)!=false}
if(_8&&this.editorEnter!=null)
_8=this.editorEnter(_5,_4,_2,_3)!=false;return _8},isc.A.$960=function isc_ListGrid__handleRowEditorEnter(_1,_2,_3){var _4=this.getRecord(_2);if(this.rowEditorEnter!=null)
return this.rowEditorEnter(_4,_3,_2)!=false;return true},isc.A.$103z=function isc_ListGrid__validationEnabled(){if(!isc.DS)return false;var _1=isc.DS.get(this.dataSource);return!this.neverValidate&&!(_1&&_1.useLocalValidators!=null&&_1.useLocalValidators==false)},isc.A.shouldSaveOnCellExit=function isc_ListGrid_shouldSaveOnCellExit(_1,_2){if(this.getCellRecord(_1,_2)==null)return false;return(this.saveByCell!=null?this.saveByCell:this.editByCell)},isc.A.shouldSaveOnRowExit=function isc_ListGrid_shouldSaveOnRowExit(_1,_2,_3){return true},isc.A.shouldValidateByCell=function isc_ListGrid_shouldValidateByCell(_1,_2,_3){var _4=this.getField(_2);if(_4&&_4.validateByCell!=null)return _4.validateByCell;return(this.validateByCell!=null?this.validateByCell:this.editByCell)},isc.A.shouldValidateByRow=function isc_ListGrid_shouldValidateByRow(_1,_2,_3){return this.autoValidate},isc.A.shouldCancelEdit=function isc_ListGrid_shouldCancelEdit(_1,_2,_3){if(_3==isc.ListGrid.ESCAPE_KEYPRESS){var _4=this.getField(_2),_5=_4.escapeKeyEditAction||this.escapeKeyEditAction;if(_5=="cancel")return true}
return false},isc.A.$105q=function isc_ListGrid__killEdit(_1,_2,_3){if(this.$1034!=_1)return;if(this.confirmCancelEditing){if(_3==null){var _4=this.getID()+".$105q('"+_1+"','"+_2+"',value);";isc.ask(this.cancelEditingConfirmationMessage,_4);var _5=isc.Dialog.Warn.toolbar.getButton(0);if(_5.isDrawn())_5.focus()
else isc.Timer.setTimeout({target:_5,methodName:"focus"},0);return}else if(_3==false)return}
var _6=this.getEditRow(),_7=this.getEditCol(),_8=this.getUpdatedEditorValue(),_9=this.getEditValues(_6,_7);if(!this.$103w(_2,_6,_7,_8)||!this.$103x(_2,_6,_9))
{return}
var _10,_11=[],_12=this.$92d,_13=this.getEditValues(_12,_7),_14=this.body?this.body.getDrawArea():[null,null,1,0],_15=_14[2],_16=_14[3],_17;if(_13!=null){if(this.isNewEditRecord(_12,_7)){if(this.isDrawn())this.body.markForRedraw("clearing extra edit row");_10=true}else{for(var i=_15;i<=_16;i++){if(_13[this.getFieldName(i)]!==_17&&((this.editByCell&&this.$96u!=i)||!this.canEditCell(_12,i)))
{_11.add(i)}}}
this.$104h(this.$92d,_7,true);if(this.isGrouped&&this.$1031(_12)){_10=true}}
if(this.body){this.hideInlineEditor(true);if(this.isDrawn()){if(!_10){for(var i=0;i<_11.length;i++){this.refreshCell(_12,_11[i])}}}}
this.$1037()},isc.A.isNewEditRecord=function isc_ListGrid_isNewEditRecord(_1){var _2=this.getEditSession(_1);return _2&&_2.$1043},isc.A.endEditing=function isc_ListGrid_endEditing(){if(this.getEditRow()!=null)this.$105o(isc.ListGrid.PROGRAMMATIC)},isc.A.$105o=function isc_ListGrid__saveAndHideEditor(_1){if(this.$986()){this.saveEdits(_1);return}
if(_1==isc.ListGrid.ESCAPE_KEYPRESS&&this.escapeKeyEditAction=="ignore")
{return}
var _2=(_1==isc.ListGrid.TAB_KEYPRESS)?1:(_1==isc.ListGrid.SHIFT_TAB_KEYPRESS)?-1:null;var _3=this.getEditRow(),_4=this.getEditCol(),_5=this.getEditValue(_3,_4),_6=this.getEditValues(_3,_4);if(!this.$103w(_1,_3,_4,_5)||!this.$103x(_1,_3,_6))return;var _7=(this.autoSaveEdits&&this.shouldWaitForSave()),_8=(this.autoSaveEdits&&this.stopOnErrors),_9;if(_7)_9="if((success||!this.stopOnErrors)&&(this.$1034=="+this.$1034+"))this.hideInlineEditor(true, null, "+_2+");";var _10=(_1==isc.ListGrid.ESCAPE_KEYPRESS&&this.escapeKeyEditAction=="exit"),_11=this.autoSaveEdits&&!_10;if(_11){this.saveEdits(_1,_9)}else{var _12=this.getFieldName(_4);var _13=!_10&&this.$103z()&&(this.shouldValidateByCell(_3,_4,_1)||this.shouldValidateByRow(_3,_4,_1));if(_13){var _14;if(this.useCellRecords){_14=!this.validateCell(_3,_4)}else{_14=!this.validateRow(_3)}
if(this.stopOnErrors&&_14)return false}
if(!this.recordHasChanges(_3,_4,false)&&!this.hasSubmittedEditValues(_3,_4))
{this.logInfo("editor hiding at "+[_3,_4]+", no actual changes, dropping editSession","gridEdit");this.$104h(_3,_4)}}
if(!_7)this.hideInlineEditor(true,null,_2);if(this.isGrouped&&(!_11||!this.shouldSaveLocally())){this.$1031(_3)}},isc.A.saveAndEditNewCell=function isc_ListGrid_saveAndEditNewCell(_1,_2,_3){if(_3==null)_3=isc.ListGrid.PROGRAMMATIC;this.$1030(_1,_2,_3)},isc.A.$1030=function isc_ListGrid__saveAndStartEditing(_1,_2,_3){var _4=this.shouldWaitForSave(),_5;if(_4){_5="if((success||!this.stopOnErrors)&&(this.$1034=="+this.$1034+"))this.$100w("+_1+","+_2+");"}
this.saveEdits(_3,_5);if(!_4){this.$100w(_1,_2)}},isc.A.$105r=function isc_ListGrid__saveAndEditNextCell(_1,_2){var _3=this.getEditRow(),_4=this.getEditCol(),_5=isc.ListGrid.PROGRAMMATIC,_6=this.findNextEditCell(_3,_4,_1,_2,false);this.$1030(_6[0],_6[1],_5)},isc.A.saveAndEditNextCell=function isc_ListGrid_saveAndEditNextCell(){this.$105r(1,true)},isc.A.saveAndEditPreviousCell=function isc_ListGrid_saveAndEditPreviousCell(){this.$105r(-1,true)},isc.A.saveAndEditNextRow=function isc_ListGrid_saveAndEditNextRow(){this.$105r(1,false)},isc.A.saveAndEditPreviousRow=function isc_ListGrid_saveAndEditPreviousRow(){this.$105r(-1,false)},isc.A.getNextEditCell=function isc_ListGrid_getNextEditCell(_1,_2,_3){switch(_3){case isc.ListGrid.CLICK_OUTSIDE:case isc.ListGrid.ESCAPE_KEYPRESS:return null;case isc.ListGrid.ENTER_KEYPRESS:var _4=this.getField(_2),_5=_4.enterKeyEditAction||this.enterKeyEditAction;if(_5=="done")return null;else if(_5=="nextCell")
return this.findNextEditCell(_1,_2,1,true,false);else if(_5=="nextRow")
return this.findNextEditCell(_1,_2,1,false,false);else if(_5=="nextRowStart"){var _6=this.listEndEditAction||"done";if(_1+1<this.getTotalRows()||_6=="next"){return this.findNextEditCell(_1+1,0,1,true,true)}else{if(_6=="stop")return[_1,_2];return null}}
case isc.ListGrid.EDIT_FIELD_CHANGE:case isc.ListGrid.PROGRAMMATIC:return this.getNewEditCell();case isc.ListGrid.UP_ARROW_KEYPRESS:return this.findNextEditCell(_1,_2,-1,false,false);case isc.ListGrid.DOWN_ARROW_KEYPRESS:return this.findNextEditCell(_1,_2,1,false,false);case isc.ListGrid.TAB_KEYPRESS:case isc.ListGrid.RIGHT_ARROW_KEYPRESS:var _4=this.getField(_2);if(_4.nextTabColNum!=null){return this.findNextEditCell(_1+1,_4.nextTabColNum,1,true,true)}else{return this.findNextEditCell(_1,_2,1,true,false)}
case isc.ListGrid.SHIFT_TAB_KEYPRESS:case isc.ListGrid.LEFT_ARROW_KEYPRESS:var _4=this.getField(_2)
if(_4.previousTabColNum!=null){return this.findNextEditCell(_1-1,_4.previousTabColNum,-1,true,true)}else
return this.findNextEditCell(_1,_2,-1,true,false)}
this.logWarn("getNextEditCell(): Passed unrecognized editCompletionEvent type:"+_3+", returning null");return null},isc.A.findNextEditCell=function isc_ListGrid_findNextEditCell(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_1,_10=_2,_11,_12=this.getFields().length;if(_12==0)return;_11=(_7?_9:(this.listEndEditAction=="next"||_6)?this.getTotalRows():this.getTotalRows()-1);if(_9>this.getTotalRows())_11=_9;if((_5!=false||_3==0)&&_9<=_11&&_9>=0&&_10<_12&&_10>=0&&this.canEditCell(_9,_10)&&(_8||this.$100v(_9,_10)))
{return[_9,_10]}
if(_3==0)return null;var _13=this.canEditCell(_9,_10)&&this.$100v(_9,_10),_14=_7?_9:0;if(_4){var _15=this.rowEndEditAction||"next";while(_9<(_11+1)&&_9>=_14){if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(_9<this.data.getLength()&&!this.data.rowIsLoaded(_9))return null}
_10+=_3;if(_15=="same"&&_2==_10){return _13?[_1,_2]:null}
if(_10<0||_10>=_12){if(_15=="done"||isc.isA.RecordEditor(this))return null;if(_15=="stop")return(_13?[_1,_2]:null)
else{_10=(_3>0?-1:_12);if(_15=="next")_9+=_3}}else if(this.canEditCell(_9,_10)&&(_8||this.$100v(_9,_10)))
{return[_9,_10]}}
if(this.listEndEditAction=="stop"||(this.listEndEditAction=="next"&&_9<_14))
{if(_13)return[_1,_2];else return null}else{return null}}else{_9+=_3
while(_9>=_14&&_9<=_11){if(this.canEditCell(_9,_10)&&(_8||this.$100v(_9,_10))){return[_9,_10]}
_9+=_3}
if(this.listEndEditAction=="stop"||(this.listEndEditAction=="next"&&_9<_14))
{return _13?[_1,_2]:null}
return null}},isc.A.$100v=function isc_ListGrid__canFocusInEditor(_1,_2){var _3=this.getFieldName(_2),_4=this.getEditForm();if(_4==null){this.makeEditForm(_1,_2);_4=this.$20w}
var _5=_4?_4.getItem(_3):null;if(_5)return _5.$t4();var _6=this.getField(_3);if(_6.canFocus!=null)return _6.canFocus;var _7=this.getEditorType(_6,this.getEditedRecord(_1));_7=isc.FormItemFactory.getItemClassName(_6,_7,null,true);var _8=_7=isc.FormItemFactory.getItemClass(_7);if(_8){var _9=_8.getPrototype(),_10=_9.canFocus;if(_10!=null)return _10;if(isc.isA.CanvasItem(_8)){return true}
if(_9.$t4)return _9.$t4()}
return false},isc.A.setNewEditCell=function isc_ListGrid_setNewEditCell(_1,_2){this.$105s=[_1,_2]},isc.A.getNewEditCell=function isc_ListGrid_getNewEditCell(){if(this.canEditCell(this.$105s[0],this.$105s[1]))return this.$105s;return null},isc.A.clearNewEditCell=function isc_ListGrid_clearNewEditCell(){this.$105s=null},isc.A.discardAllEdits=function isc_ListGrid_discardAllEdits(_1,_2){if(_1==null)_1=this.getAllEditRows(true);else{for(var i=0;i<_1.length;i++){if(isc.isA.Array(_1[i]))_1[i]=this.getEditValuesID(_1[i][0],_1[i][1]);if(isc.isA.Number(_1[i]))_1[i]=this.getEditValuesID(_1[i])}}
if(_1==null)return;for(var i=0;i<_1.length;i++)this.discardEdits(_1[i],null,_2)},isc.A.discardEdits=function isc_ListGrid_discardEdits(_1,_2,_3,_4){if(_1==null)return;var _5;if(isc.isA.Number(_1)){_5=this.getEditValuesID(_1,_2)}else{_5=_1;_1=this.getEditSessionRowNum(_5,_2)}
var _6=this.recordMarkedAsRemoved(_1);if(!_3&&this.$986()&&(!(this.getTotalRows()==1&&_1==0)))
{this.logInfo("Refusing to hide editor on 'discardEdits' [editCompletionEvent:"+_4+"] due to alwaysShowEditors settings","inactiveEditorHTML");_3=true}
if(!_3&&this.$94e&&this.getEditRow()==_1){if(_4==null)_4=isc.ListGrid.PROGRAMMATIC;this.$105q(this.$1034,_4)}else{if(this.$94e&&this.getEditRow()==_1){this.storeUpdatedEditorValue(true)}
this.$104h(_5,_2);this.$1037();if(_6)this.refreshRow(_1)}
this.calculateRecordSummaries(this.data.get(_1),null,true,true,true)},isc.A.saveEdits=function isc_ListGrid_saveEdits(_1,_2,_3,_4,_5,_6){if(_1==null)_1=isc.ListGrid.PROGRAMMATIC;if(_3==null){_3=this.getEditRow()
_4=this.getEditCol()}else if(_4==null){_4=(_3==this.getEditRow()?this.getEditCol():this.getRowEditColNum(_3))}
if(_3==null)return false;if(this.recordMarkedAsRemoved(_3)){if(_5){return true}
var _7=this.isNewEditRecord(_3,_4);if(_7){this.discardEdits(_3);this.$105t(_2,_3,_4,_1,true);return}else{var _8=this;var _9=function(_18,_19,_20){_8.fireCallback(_2,"rowNum,colNum,editCompletionEvent,success",[_3,_4,_1,true])};this.removeData(this.getCellRecord(_3,_4),_9,null,true);return}}
var _10=this.getEditValues(_3,_4),_11=this.getCellRecord(_3,_4),_12=this.getEditValuesID(_3,_4);var _13;if(_11!=null&&!Array.isLoading(_11)){if(isc.isA.Tree(this.data)){_13=this.data.getCleanNodeData(_11,false)}else{_13=isc.addProperties({},_11)}
if(_13&&this.selection)delete _13[this.selection.selectionProperty]}
var _14={rowNum:_3,colNum:_4,oldValues:_13,editValuesID:_12,values:_10,editCompletionEvent:_1,newRecord:(_3>this.data.getLength())};if(this.logIsDebugEnabled("gridEdit")){this.logDebug("change detection: newValues: "+this.echo(_10)+", oldValues: "+this.echo(_13),"gridEdit")}
var _15=this.recordHasChanges(_3,_4,false);if(_15&&!_6&&this.$103z()){this.$105u=(_5||_15);var _16;if(this.useCellRecords){_16=!this.validateCell(_3,_4)}else{_16=!this.validateRow(_3)}
this.$105u=null;if(_16){if(!_5)this.$105v(_14,_2);return false}}
if(_5)return true;if(!_15){this.logInfo("saveEdits: no actual change, not saving","gridEdit");if(!this.hasSubmittedEditValues(_12,_4)){this.$104h(_12,_4)}
this.$105t(_2,_3,_4,_1,true);return}
_10=this.$96y(_3,_4);this.logInfo("Saving newValues '"+isc.echoAll(_10)+"'","gridEdit");this.rememberSubmittedEditValues(_3,_4);_10=isc.addProperties({},_10);var _17=this.saveEditedValues(_3,_4,_10,_13,_12,_1,_2);if(_17===false){this.$105v(_14,_2);return false}
return true},isc.A.rowHasChanges=function isc_ListGrid_rowHasChanges(_1,_2){return this.recordHasChanges(_1,null,_2)},isc.A.recordHasChanges=function isc_ListGrid_recordHasChanges(_1,_2,_3){if(_3==null)_3=true;var _4=false,_5=(_3?this.getEditValues(_1,_2):this.$96y(_1,_2)),_6=this.getCellRecord(_1,_2);if(!_6)return true;var _7=isc.addProperties({},_6,this.getSubmittedEditValues(_1,_2));for(var _8 in _5){if(_8==this.removeRecordProperty)continue;var _9=_7[_8],_10=_5[_8];if(!this.fieldValuesAreEqual(this.getField(_8),_9,_10)){_4=true;break}}
return _4},isc.A.hasChanges=function isc_ListGrid_hasChanges(_1){var _2=this.getAllEditRows();if(_2!=null){for(var i=0;i<_2.length;i++){if(this.recordMarkedAsRemoved(_2[i]))return true;if(this.rowHasChanges(_2[i],_1))return true}}
return false},isc.A.cellHasChanges=function isc_ListGrid_cellHasChanges(_1,_2,_3){return this.$1011(_1,_2,_3,false)},isc.A.$1011=function isc_ListGrid__cellHasChanges(_1,_2,_3,_4){if(_1==null||_2==null)return false;var _5=(_3?this.getEditValues(_1,_2):this.$96y(_1,_2));if(!_5)return false;var _6=this.getCellRecord(_1,_2);if(!_6)return true;var _7=this.getField(_2);if(_7==null)return false;var _8=!_7.dataPath&&isc.CubeGrid&&isc.isA.CubeGrid(this)?this.getValueProperty(_1,_2):null;var _9=isc.Canvas.$n2(_8,_7,_5,this,true,"compare");var _10;if(_9===_10)return false;var _11=_4?null:this.getSubmittedEditValues(_1,_2),_12;if(_11){_12=isc.Canvas.$n2(_8,_7,_11,this,true,"compare")}
if(_12==null){_12=isc.Canvas.$n2(_8,_7,_6,this,true,"compare")}
if(_12==null){_12=isc.Canvas.$n2(_8,_7,_11,this,true,"compare")}
return!this.fieldValuesAreEqual(_7,_12,_9)},isc.A.saveAllEdits=function isc_ListGrid_saveAllEdits(_1,_2){this.$105w=this.$105w||{};this.$105x=this.$105x||{};this.$105y=this.$105y||{};if(_1==null)_1=this.getAllEditCells();if(_1==null)return false;if(!isc.isAn.Array(_1))_1=[_1];if(this.$103z()){for(var i=0;i<_1.length;i++){var _4=isc.isAn.Array(_1[i])?_1[i][0]:_1[i],_5=isc.isAn.Array(_1[i])?_1[i][1]:null;var _6=this.recordMarkedAsRemoved(_4)||this.saveEdits(null,null,_4,_5,true);if(!_6){if(this.stopOnErrors)return false;else{_1[i]=null;_2=null}}}}
var _7=(this.dataSource!=null&&!this.shouldSaveLocally()),_8=false;if(_7)_8=!isc.RPCManager.startQueue();var _9=this.$98g++,_10=this.$105w[_9]=[],_11=this.$105x[_9]=[];this.$105y[_9]=_2;var _12=false;var _13=["this.$105z('",,"',rowNum,"+_9+",colNum,editCompletionEvent,success)"];var _14=[];for(var i=0;i<_1.length;i++){if(_1[i]==null)continue;var _4=_1[i],_5;if(isc.isAn.Array(_4)){_5=_4[1];_4=_4[0]}
var _15=0;if(_14&&_14.length>0){for(var k=_14.length;k--;){if(_4>_14[k]){++_15}}}
_4-=_15;var _17=this.isNewEditRecord(_4,_5);var _18=this.recordMarkedAsRemoved(_4);if((!_7||_17)&&_18){_14.push(_4)}
if(!this.recordHasChanges(_4,_5)&&!_18){continue}
_12=true;var _19=this.getEditValuesID(_4,_5);_13[1]=_19;if(_18){_11[_11.length]=_19}else{_10[_10.length]=_19}
this.saveEdits(null,_13.join(""),_4,_5,false,true)}
if(_8){isc.RPCManager.sendQueue(null,null,null,true)}
return _12},isc.A.$105z=function isc_ListGrid__saveAllEditsRowCallback(_1,_2,_3,_4,_5,_6){if(!_6){delete this.$105y[_3];delete this.$105w[_3];delete this.$105x[_3];return}
var _7=this.$105w[_3],_8=this.$105x[_3];if(_7==null&&_8==null)return;var _9,_10,_11;for(_9=0;_9<_7.length;_9++){var _12=_7[_9];if(_12==_1){_10=true;break}}
if(!_10){for(_9=0;_9<_8.length;_9++){var _12=_8[_9];if(_12==_1){_10=true;break}}
if(_10)_11=true}
if(_11){_8.removeAt(_9)}else{_7.removeAt(_9)}
if(_7.length==0&&_8.length==0){this.$105t(this.$105y[_3],_2,_4,_5);delete this.$105y[_3];delete this.$105w[_3];delete this.$105x[_3]}},isc.A.$105p=function isc_ListGrid__parseEditorValue(_1,_2,_3,_4,_5){var _6;if(_5===_6)_5=this.getCellRecord(_3,_4);if(_2&&_2.parseEditorValue!=null){isc.Func.replaceWithMethod(_2,"parseEditorValue","value,record,rowNum,colNum,grid");_1=_2.parseEditorValue(_1,_5,_3,_4,this)}else if(this.parseEditorValue!=null){_1=this.parseEditorValue(_1,_5,_3,_4)}
return _1},isc.A.saveEditedValues=function isc_ListGrid_saveEditedValues(_1,_2,_3,_4,_5,_6,_7){var _8={editValuesID:_5,rowNum:_1,colNum:_2,values:_3,oldValues:_4,editCompletionEvent:_6};if(this.shouldSaveLocally()){if(this.useRemoteValidators==true){var _9=false,_10=this.getDataSource(),_11=_10?_10.getFieldNames():null;if(_11!=null){for(var i=0;i<_11.length;i++){var _13=_10.getField(_11[i]),_14=_13.validators;if(_14==null)continue;if(!isc.isAn.Array(_14))_14=[_14];for(var _15=0;_15<_14.length;_15++){if(isc.Validator.isServerValidator(_14[_15])){_9=true;break}}
if(_9)break}}
if(_9){var _16={validationMode:"partial",prompt:isc.RPCManager.validateDataPrompt,showPrompt:this.shouldWaitForSave(),internalClientContext:{editInfo:_8,saveCallback:_7},componentID:this.ID};_10.validateData(_8.values,{target:this,methodName:"remoteValidationForLocalSaveComplete"},_16);if(this.$99u==null)this.$99u={};this.$99u[_8.editValuesID]=true;return}}
return this.$1050(_8,_7)}
if(isc.Offline&&isc.Offline.isOffline()&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return false}
var _17=this.getID()+".$1051(dsResponse, dsRequest)",_18={operationId:(_4==null?this.addOperation:this.updateOperation)||this.saveOperation,application:this.application,willHandleError:true,showPrompt:this.shouldWaitForSave(),oldValues:_4,$1052:this.getRecord(_1,_2),internalClientContext:{saveCallback:_7,newValues:_3,editInfo:_8},componentId:this.ID};var _19=this.getAllFields();if(_19!=null){for(var i=0;i<_19.length;i++){if(_19[i].includeFrom!=null&&this.getDataSource().getField(_19[i].name)==null)
{if(_18.additionalOutputs==null)_18.additionalOutputs="";else _18.additionalOutputs+=",";_18.additionalOutputs+=[_19[i].name,_19[i].includeFrom].join("!")}}}
if(this.saveRequestProperties){isc.addProperties(_18,this.saveRequestProperties)}
this.$1053(_3,_4);if(this.$99u==null)this.$99u={};this.$99u[_8.editValuesID]=true;var _10=isc.DS.get(this.dataSource);if(_4==null){var _20=isc.addProperties({},_4,_3);_10.addData(_20,_17,_18)}else{var _21=isc.DS.get(this.dataSource).filterPrimaryKeyFields(_4),_22=isc.addProperties({},_21,_3);_10.updateData(_22,_17,_18)}});isc.evalBoundary;isc.B.push(isc.A.$1050=function isc_ListGrid__saveLocally(_1,_2){var _3=_1.rowNum,_4=_1.colNum,_5=_1.oldValues,_6=_1.values;var _7=this.getCellRecord(_3,_4),_8=(_7==null);if(_8){var _9=this.getOriginalData();var _10=this.getEditSession(_3);_10.$104z=this.getPrimaryKeys(_6);delete _10.$1043;if(isc.ResultSet&&isc.isA.ResultSet(_9)){if(_9.allRows!=null){_9.allRows.add(isc.addProperties({},_6));_9.filterLocalData()}else{this.logWarn("Unable to add data to resultSet - allRows is not set")}}else{_9.add(_6);_9.dataChanged()}}else{var _11,_12;var _13={};for(var i=0;i<this.completeFields.length;i++){var _15=this.completeFields[i],_16=this.getEditorName(_3,_15,true);_11=isc.Canvas.$n2(null,_15,_6,this,true,"edit");if(_11!==_12){var _17=this.fields.indexOf(_15);if(_17!=-1){this.setRawCellValue(_7,_3,_17,_11)}else{isc.Canvas.$13e(null,_15,_11,_7,this,true)}}
var _18=_16;if(_16.indexOf("/")>=0){_18=isc.DynamicForm.$nd(_16,this)}
_13[_18]=true}
this.combineValuesRecursively(_7,_6,_13)}
this.$1053(_6,_5);this.$1054(_1,_2);if(this.valuesManager!=null){this.valuesManager.$18o(_3,null,_7,this)}},isc.A.combineValuesRecursively=function isc_ListGrid_combineValuesRecursively(_1,_2,_3,_4,_5){if(_4==null)_4="";if(_5==null)_5=[];if(isc.isAn.Object(_1)&&!isc.isA.Date(_1)){if(_5.contains(_1))return;_5.add(_1)}
if(_3[_4]){return}
if(isc.isAn.Array(_2)){for(var i=0;i<_2.length;i++){var _7=_4==""?""+i:_4+"/"+i;if(isc.isAn.Object(_2[i])&&!isc.isA.Date(_2[i])){if(_1[i]==null)_1[i]=isc.isAn.Array(_2[i])?[]:{};this.combineValuesRecursively(_1[i],_2[i],_3,_7,_5)}else{_1[i]=_2[i]}}}else if(isc.isAn.Object(_2)&&!isc.isA.Date(_2)){for(var _8 in _2){var _7=_4==""?_8:_4+"/"+_8;if(isc.isAn.Object(_2[_8])&&!isc.isA.Date(_2[_8])){if(_1[_8]==null)_1[_8]=isc.isAn.Array(_2[_8])?[]:{};this.combineValuesRecursively(_1[_8],_2[_8],_3,_7,_5)}else{if(_3[_7]){}else{_1[_8]=_2[_8]}}}}},isc.A.remoteValidationForLocalSaveComplete=function isc_ListGrid_remoteValidationForLocalSaveComplete(_1,_2,_3){var _4=_1.internalClientContext,_5=_4.editInfo;if(this.$99u&&this.$99u[_5.editValuesID]){delete this.$99u[_5.editValuesID];if(isc.isAn.emptyObject(this.$99u))delete this.$99u}
if(_1.status<0&&_1.status!=isc.RPCResponse.STATUS_VALIDATION_ERROR){this.logWarn("Server-side validation failed: "+_1.data);isc.RPCManager.handleError(_1,_3);return}
var _6=this.$96y(_5.editValuesID);if(_1.errors){var _7=isc.DynamicForm.getSimpleErrors(_1.errors),_8=false;for(var _9 in _7){_8=true;if(_6==null){this.logWarn("Asynchronous remote validation failed for attempted save of edits for row:"+_5.rowNum+" but edit values have subsequently been discarded. Ignoring validation failure.  Validation failure details:\n"+this.echoFull(_7));break}
var _10=_7[_9],_11=this.getField(_9);if(_10!=null&&_11!=null){var _12=_5.values[_9],_13=_6[_9];if(_12!=_13&&!(isc.isA.Date(_13)&&isc.isA.Date(_12)&&(_13.getTime()==_12.getTime())))
{this.logWarn("Asynchronous remote validation failed for attempted save of edits for row:"+_5.rowNum+". Submitted value for field "+_9+" was "+_12+", but the edit value has subsequently been modified and is now:"+_13+". Not showing the following validation error[s] for this field:\n"+this.echoAll(_10));continue}
if(!isc.isAn.Array(_10))_10=[_10];_10=_10.getProperty("errorMessage");this.setFieldError(_5.rowNum,_9,_10,false)}}
if(_8)return}
this.$1050(_5,_4.saveCallback)},isc.A.$1053=function isc_ListGrid__unsortOnChange(_1,_2){if(this.logIsInfoEnabled("sorting")){this.logInfo("unsort on change: sortFieldNum: "+this.sortFieldNum+", newValues: "+this.echo(_1)+", oldValues: "+this.echo(_2))}
var _3=this.$95z();if(_3==null)return;var _4=this.fields[_3];if(_4==null)return;var _5=_4[this.fieldIdProperty];var _6;if(_5!=null&&_1[_5]!==_6&&(_2==null||_1[_5]!=_2[_5]))
{this.unsort();if(this.logIsInfoEnabled("sorting")){this.logInfo("called unsort, sortProp is: "+this.data.$1055+" - oldValue is "+_2[_5]+", newValue is "+_1[_5])}}},isc.A.$1051=function isc_ListGrid__updateRecordReply(_1,_2){var _3=_1.data,_4=_1.internalClientContext,_5=_4.editInfo,_6=_5.colNum,_7=this.fields[_6];if(this.$99u&&this.$99u[_5.editValuesID]){delete this.$99u[_5.editValuesID];if(isc.isAn.emptyObject(this.$99u))delete this.$99u}
var _8=this.getEditSession(_5.editValuesID);if(_8!=null){_5.rowNum=_8.$90o}else{if(_3&&_3[0]){_5.rowNum=this.findRowNum(_3[0]);if(this.useCellRecords)_5.colNum=this.findColNum(_3[0])}
else _5.rowNum=-1}
var _9=_5.rowNum,_6=_5.colNum;if(_1.status<0){var _10=this.parseServerErrors(_1.errors);this.logInfo("error on save, status: "+_1.status+", errors: "+this.echo(_1.errors),"gridEdit");if(isc.isAn.Array(_10)){if(_10.length!=1)
this.logWarn("Server reports validation errors for multiple records - only displaying errors for the first record.","gridEdit");_10=_10[0]}
if(this.useCellRecords)this.setCellErrors(_9,_6,_10[this.getEditorName(_9,_6)]);else this.setRowErrors(_9,_10);this.$105v(_5,_4.saveCallback,_1,_2);return false}
this.$1054(_5,_4.saveCallback,_1,_2)},isc.A.parseServerErrors=function isc_ListGrid_parseServerErrors(_1){if(isc.isAn.Array(_1)){if(_1.length>1){this.logWarn("server returned errors for multiple records - dropping all but the first record returned")}
_1=_1[0]}
if(_1&&_1.recordPath)delete _1.recordPath;for(var _2 in _1){var _3=_1[_2];if(_3==null)_3="Unspecified error";if(isc.isAn.Array(_3)){for(var i=0;i<_3.length;i++){_3[i]=_3[i].errorMessage}}else if(_3.errorMessage){_1[_2]=[_3.errorMessage]}else{_1[_2]=[_3]}}
return _1},isc.A.$1054=function isc_ListGrid__editCompleteCallback(_1,_2,_3,_4){if(this.$94e&&this.getEditForm().hasFocus)this.storeUpdatedEditorValue(true);var _5=_1.rowNum,_6=_1.colNum,_7=_1.editValuesID,_8=this.getEditSession(_7),_9=this.isNewEditRecord(_7);var _10;if(_3!=null){var _11=isc.DataSource.getUpdatedData(_4,_3,true),_10=isc.isAn.Array(_11)?_11[0]:_11;if(_10==null){return}
if(_8&&_8.$104z==null){this.newRecordForEditValues(_7,_10)}}else{_10=this.getCellRecord(_5,_6)}
var _12=_1.values,_13=this.$96y(_7),_14=this.isEditingRecord(_5,_6),_15=this.dataSource?isc.DS.get(this.dataSource).getPrimaryKeyFieldNames():null;var _16=false;for(var _17 in _13){var _18=_15&&_15.contains(_17);if(this.fieldValuesAreEqual(this.getField(_17),_13[_17],_12[_17]))
{if(!(_14&&_18))this.clearEditValue(_7,_17,true,true)}else{if(!_18)_16=true}}
if(!_14&&!_16){this.$104h(_7,_6)}
if(_3!=null||_9){if(_3!=null&&this.isGrouped){var _19=false;if(!_9){_19=true;var _20=this.getGroupByFields(),_21=_3.context&&_3.context.params?_3.context.params:{};for(var i=0;i<_20.length;i++){var _23=_20[i];if(_21[_23]!=null){_19=false;break}}}
if(_19)this.$996=true}
this.displayUpdatedDSRecord(_5,_6,_10)}
var _24=_1.values,_25=_1.oldValues,_26=_1.editCompletionEvent;if(_5==-1)_5=_1.rowNum;if(this.convertToMethod("editComplete")){this.editComplete(_5,_6,_24,_25,_26,_3)}
this.$1056(_10,_5,_6,_24,_25,_4);if(_2)this.$105t(_2,_5,_6,_26,true)},isc.A.displayUpdatedDSRecord=function isc_ListGrid_displayUpdatedDSRecord(_1,_2,_3){if(this.$985()){this.suppressEditRowRemap=true;this.dataChanged();this.suppressEditRowRemap=false}else if(this.isGrouped){if(this.$996&&!this.$993){delete this.$996;return}
this.regroup()}},isc.A.isEditingRecord=function isc_ListGrid_isEditingRecord(_1,_2){return this.getEditRow()==_1},isc.A.$105t=function isc_ListGrid__fireSaveCallback(_1,_2,_3,_4,_5){if(_1!=null){this.fireCallback(_1,this.$98h,[_2,_3,_4,_5])}},isc.A.$1056=function isc_ListGrid__fireCellChanged(_1,_2,_3,_4,_5,_6){var _7,_8;for(var i in _4){var _10=(_5==null?null:_5[i]);if(_4[i]==_10)continue;var _11=this.fields.find(this.fieldIdProperty,i);if(!_11)continue;if(this.isGrouped&&_11){var _12=this.getGroupByFields();if(_12.contains(_11.name))_7=true}
if(this.shouldAutoFitField(_11)){_8=true}
this.$1057(_1,_11,_4[i],_10,_2,this.fields.indexOf(_11))}
if(_8){if(this.shouldSaveLocally()){this.updateFieldWidthsForAutoFitValue("Local edit")}}
if(_7){if(this.shouldSaveLocally()){this.$994(_1,_1,_4)}
this.$95i=false;this.$99s()}},isc.A.$1057=function isc_ListGrid__cellChanged(_1,_2,_3,_4,_5,_6){if(_2&&_2.cellChanged){if(!isc.isA.Function(_2.cellChanged)){isc.Func.replaceWithMethod(_2,"cellChanged","record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum")}
_2.cellChanged.call(this,_1,_3,_4,_5,_6,this,_5,_6)}else if(this.cellChanged){this.cellChanged(_1,_3,_4,_5,_6,this,_5,_6)}},isc.A.$105v=function isc_ListGrid__editFailedCallback(_1,_2,_3,_4){var _5=_1.rowNum,_6=_1.colNum,_7=_1.values,_8=_1.oldValues,_9=_1.editCompletionEvent;var _10=this.getRecord(_5);if(_10!=null&&this.canExpandRecord(_10,_5)&&this.expansionMode=="editor")
{var _11=isc.isAn.Array(_3.errors)?_3.errors[0]:_3.errors,_10=this.getRecord(_5),_12=false;if(isc.isAn.Object(_11)){for(var _13 in _11){var _14=this.getField(_13);if(!_14||!this.fieldIsVisible(_14)){_12=true;break}}}
if(_12){this.expandRecord(_10)}}
if(this.convertToMethod("editFailed")){this.editFailed(_5,_6,_7,_8,_9,_3,_4)}
if(_2!=null)this.$105t(_2,_5,_6,_9,false);this.clearSubmittedEditValues(_1.editValuesID,_7)},isc.A.editFailed=function isc_ListGrid_editFailed(_1,_2,_3,_4,_5,_6,_7){if(_6!=null&&_6.errors==null){isc.RPCManager.$bw(_6,_7)}},isc.A.validateRow=function isc_ListGrid_validateRow(_1,_2){return this.validateRecord(_1,_2)},isc.A.validateRecord=function isc_ListGrid_validateRecord(_1,_2){var _3,_4;if(isc.isAn.Array(_1)){_3=_1[0];_4=_1[1]}else{_3=_1}
var _5=this.getEditValues(_3,_4);if(_5==null)return true;var _6=this.getCellRecord(_3,_4),_7=this.getFields().getProperty(this.fieldIdProperty);var _8=isc.rpc.startQueue();if(this.$105u!=true){this.$1058=true;this.$1059=[]}
var _9=this.validateRowValues(_5,_6,_3,_7);if(this.$1058&&this.$1059.length>0){var _10={rowNum:_3}
this.validateFieldsOnServer(this.$1059,this.getEditedRecord(_3,null,true),_10)}
this.$1058=null;if(!_8)isc.rpc.sendQueue();this.setRowErrors(_3,_9,_2);return(_9==null)},isc.A.validateRowValues=function isc_ListGrid_validateRowValues(_1,_2,_3,_4){var _5=true,_6={};if(!isc.isAn.Array(_4))_4=[_4];var _7=false;if(_2==null){_7=true;_2={}}
for(var i=0;i<_4.length;i++){if(_4[i]==null)continue;var _9,_10;if(isc.isA.Number(_4[i])){_10=_4[i];_9=_4[i]=this.getFieldName(_10)}else{_9=_4[i];_10=this.getFields().findIndex(this.fieldIdProperty,_9)}
if(_10<0)continue;var _11=((_7&&this.canEditCell(_3,_10))||isc.propertyDefined(_1,_9));var _12,_13;var _14=this.getField(_9),_15=_14?_14.dataPath:null,_16;if(_15!=null){_15=this.$nd(_15)}else{_15=_14.name}
_12=isc.Canvas.$n2(_15,_14,_1,this,true,"validate");_13=isc.Canvas.$n2(_15,_14,_2,this,true,"validate");if(!_11){_11=(_12!==_16||_13===_16||_13==null)}
if(!_11)continue;var _17=this.validateCellValue(_3,_10,_12,_13);if(_17!=null){_5=false;_6[_9]=_17}}
if(!_5)return _6;return null},isc.A.validateCell=function isc_ListGrid_validateCell(_1,_2,_3,_4){var _5;if(isc.isA.String(_2))_5=this.getColNum(_2);else{_5=_2;_2=this.getEditorName(_1,_5)}
if(this.$94e&&(this.getEditRow()==_1)&&this.getEditForm().getItem(_2)!=null)
{this.storeUpdatedEditorValue(null,_5)}
var _6=this.getEditValues(_1,_5),_7=this.cellHasErrors(_1,_2),_8=_6?_6[_2]:null,_9=this.getCellRecord(_1,_5),_10=_9?_9[_2]:null;if(_9!=null&&(!_6||!isc.propertyDefined(_6,_2))){return true}
var _11=this.validateCellValue(_1,_5,_8,_10,_4);if(_11!=null){this.setFieldError(_1,_2,_11);return false}
if(_7){this.setFieldError(_1,_2,null)}
return true},isc.A.validateCellValue=function isc_ListGrid_validateCellValue(_1,_2,_3,_4,_5){var _6=this.getCellRecord(_1,_2);var _7=this.getField(_2);return this.validateFieldValue(_3,_4,_6,_7,_1,_2,_5)},isc.A.getRequiredFieldMessage=function isc_ListGrid_getRequiredFieldMessage(_1,_2){return isc.Validator.requiredField},isc.A.validateFieldValue=function isc_ListGrid_validateFieldValue(_1,_2,_3,_4,_5,_6,_7){var _8=[],_9=true;var _10=this.cellIsRequired(_5,_6);if(_10&&(_1==null||isc.isAn.emptyString(_1))){var _11=this.getRequiredFieldMessage(_4,_3);_8.add(_11);_9=false}
var _12=this.getCellValidators(_5,_6);if(_12){if(this.logIsDebugEnabled("gridEdit")){this.logDebug((this.useCellRecords?"At col:"+_6:"At field: "+_4.name)+" applying validators: "+this.echoAll(_12)+" to value:"+_1,"gridEdit")}
var _13,_14=this.getEditedRecord(_5,_6),_15=null,_16={rowNum:_5};if(this.$105u==true){_16.skipServerValidation=true}else if(this.$1058==true){_16.deferServerValidation=true}
if(_7){_13=this.validateFieldAndDependencies(_4,_12,_1,_14,_16)}else{_13=this.validateField(_4,_12,_1,_14,_16)}
if(_13!=null){if(_13.needsServerValidation){this.$1059.add(_4)}
if(_13.valid!=true){_9=false;if(_7)
_8=_13.errors[_4.name]||[];else
_8=_13.errors||[]}else{if(_13.resultingValue!=null){this.setEditValue(_5,_6,_13.resultingValue,null,null,null,true);_1=_13.resultingValue}}
_15=_13.errors;if(this.logIsInfoEnabled("gridEdit")){this.logInfo("validateFieldValue, newValue: "+this.echo(_1)+", passed validation: "+_9+", resultingValue: "+this.echo(_13.resultingValue),"gridEdit")}}}
if(_7){for(var _17 in _15){if(_17!=_4.name){this.setFieldError(_5,_17,_15[_17],true)}}}
if(_9)return null
else return _8},isc.A.cellIsRequired=function isc_ListGrid_cellIsRequired(_1,_2){var _3=this.getField(_2);return _3&&(_3.required||this.isXMLRequired(_3))},isc.A.getCellValidators=function isc_ListGrid_getCellValidators(_1,_2){var _3=this.getField(_2);if(_3&&_3.validators)return _3.validators;return null},isc.A.getFieldEditorValidators=function isc_ListGrid_getFieldEditorValidators(_1){if(!_1)return[];var _2=[];var _3=_1.editorType?isc[_1.editorType]:null;if(_3&&_3.getPrototype&&_3.getPrototype().validators){_2.addList(isc.shallowClone(_3.getPrototype().validators))}
var _4=_1.editorProperties
if(_4&&_4.validators){_2.addList(isc.shallowClone(_4.validators))}
return _2.length>0?_2:null},isc.A.hasErrors=function isc_ListGrid_hasErrors(){var _1=this.getAllEditRows(true);for(var i=0;i<_1.length;i++){if(this.rowHasErrors(_1[i]))return true}
return false},isc.A.rowHasErrors=function isc_ListGrid_rowHasErrors(_1,_2){var _3=this.getEditSession(_1,_2);return(_3&&_3.$105a&&!isc.isA.emptyObject(_3.$105a))},isc.A.cellHasErrors=function isc_ListGrid_cellHasErrors(_1,_2){var _3=this.getEditorName(_1,_2),_4=this.getEditSession(_1,_2),_5=_4?_4.$105a:null;return(_5!=null&&_5[_3]!=null)},isc.A.getRowValidationErrors=function isc_ListGrid_getRowValidationErrors(_1){return this.getRowErrors(_1)},isc.A.getRowErrors=function isc_ListGrid_getRowErrors(_1,_2){var _3=this.getEditSession(_1,_2);return(_3!=null?_3.$105a:null)},isc.A.getCellErrors=function isc_ListGrid_getCellErrors(_1,_2){var _3=this.getEditSession(_1,_2);if(_3==null)return null;if(isc.isA.Number(_2))_2=this.getEditorName(_1,_2);var _4=_3.$105a;return(_4==null?null:_4[_2])},isc.A.setCellErrors=function isc_ListGrid_setCellErrors(_1,_2,_3,_4){return this.setFieldError(_1,_2,_3,_4)},isc.A.setFieldError=function isc_ListGrid_setFieldError(_1,_2,_3,_4){var _5=_2;if(isc.isA.Number(_5))_5=this.getEditorName(_1,_5);if(_3==null||(isc.isAn.Array(_3)&&_3.length==0)){if(!this.cellHasErrors(_1,_2))return;this.logDebug("setFieldError() passed empty errors- clearing the errors for row:"+_1+", field:"+_2,"gridEdit");var _6=this.getEditSession(_1,_2);delete _6.$105a[_5];if(isc.isAn.emptyObject(_6.$105a))delete _6.$105a}else{if(_5==null){this.logWarn("setFieldError() passed field identifier '"+_2+"'. Unable to find corresponding field in this grid - not setting error.");return}
var _7=this.getFields().getProperty(this.fieldIdProperty);if(!_7.contains(_5))
{this.logWarn("setFieldError() passed field identifier '"+_2+"'. This is not a visible field in the grid - error may not be visible to user.")}
var _8;if(isc.isAn.Array(_3))_8=_3
else _8=[_3];var _6=this.getEditSession(_1,_2);if(_6==null){var _9=this.getColNum(_2),_10=this.getCellRecord(_1,_9);_6=this.createEditSession(_1,_9,_10)}
this.logDebug("setFieldError() setting errors for row:"+_1+", field:"+_2+" to:"+this.echo(_8),"gridEdit");if(_6.$105a==null)_6.$105a={};_6.$105a[_5]=_8}
if(!_4){if(this.useCellRecords)this.showCellErrors(_1,_2)
else this.showErrors(_1,[_5])}},isc.A.addFieldErrors=function isc_ListGrid_addFieldErrors(_1,_2,_3,_4){this.setFieldError(_4,_1,_2)},isc.A.setRowErrors=function isc_ListGrid_setRowErrors(_1,_2,_3){if(_1==null||_1==-1)return;var _4=this.getRowErrors(_1);if(!_2&&!_4)return;var _5=this.getEditSession(_1);if(_5==null)_5=this.createEditSession(_1,null,this.getRecord(_1));if(_2){var _6=this.getFields().getProperty(this.fieldIdProperty);for(var _7 in _2){if(!_3&&!_6.contains(_7)){this.logWarn("setRowErrors() passed error for non-visible field: '"+_7+"'")}
if(!isc.isAn.Array(_2[_7]))_2[_7]=[_2[_7]]}}
this.logDebug("setRowErrors() setting errors for row "+_1+" to "+this.echo(_2),"gridEdit");_5.$105a=_2;if(!_3){var _8=_2?isc.getKeys(_2):[];for(var _7 in _4){var _9=this.getColNum(_7);if(!_8.contains(_7))_8.add(_7)}
this.showErrors(_1,_8)}},isc.A.clearFieldError=function isc_ListGrid_clearFieldError(_1,_2,_3){return this.setFieldError(_1,_2,null,_3)},isc.A.clearRowErrors=function isc_ListGrid_clearRowErrors(_1,_2){this.setRowErrors(_1,null,_2)},isc.A.showErrors=function isc_ListGrid_showErrors(_1,_2){if(_2==null)_2=this.getFields().getProperty(this.fieldIdProperty);var _3=this.getRowErrors(_1);if(_3==null)_3={};var _4;for(var i=0;i<_2.length;i++){var _6=_2[i];this.showCellErrors(_1,_6);if(_4==null&&_3[_6])_4=_6}
var _7=this.assembleErrorMessage(_3,_2);if(_7){this.displayRowErrorMessages(_7)}
if(this.stopOnErrors&&_4!=null){var _8=this.getColNum(_4);if(_8!=-1){this.showInlineEditor(_1,_8);return}
for(var _6 in _3){if(this.fieldIsVisible(_6)&&_3[_6]){this.showInlineEditor(_1,this.getColNum(_6))}}}},isc.A.showCellErrors=function isc_ListGrid_showCellErrors(_1,_2){var _3;if(isc.isA.Number(_2)){this.getEditorName(_1,_2)}else{_3=_2;_2=this.getColNum(_3)}
if(_2==-1)return;if(this.showErrorIcons){this.refreshCell(_1,_2,null,true)}else{this.body.$92w(null,_1,_2)}},isc.A.assembleErrorMessage=function isc_ListGrid_assembleErrorMessage(_1,_2){var _3=false,_4="Validation Errors occurred:\r\n";for(var _5 in _1){if(_2&&!_2.contains(_1))continue;var _6=this.$106a(_5,_1[_5]);if(_6!=null){_3=true;_4+=_6}}
return(_3?_4:null)},isc.A.$106a=function isc_ListGrid__createFieldErrorString(_1,_2){var _3,_4,_5=this.getField(_1),_6=_5&&_5.title?_5.title:_1;for(var i=0;i<_2.length;i++){var _8=_2[i];if(_8!=null){if(_4==null){_4="<br>Field '"+_6+"':"}
_4+="<br>* "+_8}}
return _4},isc.A.displayRowErrorMessages=function isc_ListGrid_displayRowErrorMessages(_1){if(this.stopOnErrors)isc.warn(_1,"var LG="+this.getID()+";if(LG.$20w)LG.$20w.focus()")},isc.A.removeData=function isc_ListGrid_removeData(_1,_2,_3,_4){_3=isc.addProperties({},_3);_3.internalClientContext={removeDataCallback:_2};var _5={fromUserAction:_4,rowNum:this.findRowNum(_1),colNum:null,values:_1,editCompletionEvent:isc.ListGrid.PROGRAMMATIC};_3.internalClientContext.editInfo=_5;if(this.getDataSource()!=null&&!this.shouldSaveLocally()){return this.Super("removeData",[_1,{target:this,methodName:"removeDataComplete"},_3],arguments)}
if(this.data){var _6=this.getEditValuesID(_1);if(_6!=null)this.discardEdits(_6);if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.shouldSaveLocally()){if(this.data.allRows!=null){this.data.allRows.remove(_1);this.data.filterLocalData()}else{this.logWarn("Unable to remove data from resultSet - allRows is not set")}}else{var _7=this.getOriginalData();_7.remove(_1)}
this.updateFieldWidthsForAutoFitValue("removeData");this.regroup()}
this.fireCallback({target:this,methodName:"removeDataComplete"},"dsResponse,data,dsRequest",[null,_1,_3])},isc.A.removeDataComplete=function isc_ListGrid_removeDataComplete(_1,_2,_3){var _4=_3.internalClientContext,_5=_4.editInfo,_6=_5.fromUserAction,_7=_5.rowNum,_8=_5.colNum,_9=_5.oldValues||_5.values,_10=_5.editCompletionEvent;var _11=_1==null||_1.status>=0;if(_11){if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){var _13=this.getEditValuesID(_2[i]);if(_13!=null){this.discardEdits(_13)}}
var _14=_5.values||_5.oldValues,_7=_5.rowNum;if(_6&&this.convertToMethod("editComplete")){this.editComplete(_7,_8,_9,_9,_10,_1)}}else{if(_6&&this.convertToMethod("editFailed")){this.editFailed(_7,_8,_9,_9,_10,_1,_3)}}
if(_4.removeDataCallback){this.fireCallback(_4.removeDataCallback,"dsResponse,data,dsRequest",[_1,_2,_3])}},isc.A.removeRecordClick=function isc_ListGrid_removeRecordClick(_1,_2){var _3=this.getRecord(_1);if(this.recordCanRemoveProperty&&_3!=null&&_3[this.recordCanRemoveProperty]==false)
{return}
if(this.onRemoveRecordClick(_1)==false)return;var _4=this.warnOnRemoval,_5=this.shouldDeferRemoval();if(_4&&_5&&this.recordMarkedAsRemoved(_1))_4=false;if(_4){isc.ask(this.warnOnRemovalMessage,this.getID()+".completeRemoveRecordClick(value, "+_1+","+_2+")")}else{this.completeRemoveRecordClick(true,_1,_2)}},isc.A.onRemoveRecordClick=function isc_ListGrid_onRemoveRecordClick(_1){return true},isc.A.completeRemoveRecordClick=function isc_ListGrid_completeRemoveRecordClick(_1,_2,_3){if(!_1)return;if(this.shouldDeferRemoval()){if(this.recordMarkedAsRemoved(_2)){this.unmarkRecordRemoved(_2)}else{this.markRecordRemoved(_2)}}else{var _4=this.getAllEditRows(),_5=_4.contains(_2);if(_5)this.discardEdits(_2,_3);var _6=this.getCellRecord(_2,_3);if(_6==null)return;this.delayCall("removeRecord",[_2,_6])}},isc.A.removeRecord=function isc_ListGrid_removeRecord(_1,_2){if(_2==null)_2=this.data.get(_1);else _1=(this.data?this.data.indexOf(_2):null)
if(_2==null||_1==null||_1==-1||!this.data)return;if(isc.Offline&&isc.Offline.isOffline()&&this.dataSource&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return}
var _3=this.animateRemoveRecord&&this.isDrawn()&&this.isVisible()&&this.body&&_1>=this.body.$20t&&_1<=this.body.$89v;if(this.$91v(_2)){_3=false}
if(_3){this.$99w=true;var _4=1;if(isc.isA.Tree(this.data)&&this.data.isFolder(_2)&&this.data.isOpen(_2)){var _5=this.data.getChildren(_2);if(_5&&(!isc.isA.ResultSet(_5)||_5.lengthIsKnown())){_4+=_5.getLength()}}
this.$106b=_4;this.body.$90f(false,_1,_1+_4)}
var _6=this.getDataSource(),_7=(_6==null||this.shouldSaveLocally());if(!_7){if(!_6.getPrimaryKeyField()){this.logWarn("DataSource:"+_6+" has no primary key field - unable to remove records");return}}
var _8;if(_3){_8=this.getID()+".showRemoveCompleteAnimation("+_1+", data,dsResponse);"}
this.removeData(_2,_8,{showPrompt:false},true)},isc.A.showRemoveCompleteAnimation=function isc_ListGrid_showRemoveCompleteAnimation(_1,_2,_3){if(_3&&_3.status<0){this.logWarn("Removal of record failed");_2=null}
if(!_2){delete this.$99w;if(this.body){delete this.body.$90g;delete this.body.$90i;delete this.body.$90l;delete this.body.$90m}
this.markForRedraw()}else{this.startRowAnimation(false,_1,_1+this.$106b,{target:this,methodName:"$106c"},this.animateRemoveSpeed,this.animateRemoveTime);delete this.$106b}},isc.A.$106c=function isc_ListGrid__removeDataAnimationComplete(){delete this.$99w;this.redraw()},isc.A.startRowAnimation=function isc_ListGrid_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9){if(!this.body)return;this.finishRowAnimation();this.$704=_4;if(this.frozenBody){this.frozenBody.startRowAnimation(_1,_2,_3,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.frozenBody,true]},_5,_6,_7,_8,true,_9)}
this.body.startRowAnimation(_1,_2,_3,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.body,(this.frozenBody!=null)]},_5,_6,_7,_8,true,_9)},isc.A.rowAnimationComplete=function isc_ListGrid_rowAnimationComplete(_1,_2){var _3=!_2||this.$106d;if(!_3){this.$106d=true}else{delete this.$106d;var _4=this.$704;delete this.$704;if(_4!=null)this.fireCallback(_4)}},isc.A.finishRowAnimation=function isc_ListGrid_finishRowAnimation(){if(this.body)this.body.finishRowAnimation();if(this.frozenBody)this.frozenBody.finishRowAnimation()},isc.A.animateRowHeight=function isc_ListGrid_animateRowHeight(_1,_2,_3,_4,_5,_6,_7){if(!this.body)return;return this.body.animateRowHeight(_1,_2,_3,_4,_5,_6,_7,true)},isc.A.setCellHeight=function isc_ListGrid_setCellHeight(_1){var _2=this.cellHeight;this.cellHeight=_1;if(this.body)this.body.cellHeight=_1;if(_2!=_1&&this.isDrawn()){this.body.markForRedraw("Cell height changed");if(this.frozenBody)this.frozenBody.markForRedraw("Cell height changed")}},isc.A.setRowHeight=function isc_ListGrid_setRowHeight(_1,_2){if(!this.body)return;if(this.frozenBody!=null)this.frozenBody.setRowHeight(_1,_2);return this.body.setRowHeight(_1,_2)},isc.A.getDragTrackerIcon=function isc_ListGrid_getDragTrackerIcon(_1){var _2=_1?_1[0]:null,_3;if(_2){var _4=this.getTitleField();_3=this.getValueIcon(this.getField(_4),_2[_4],_2)}
if(_3==null)_3=this.trackerImage;return _3},isc.A.getDragTrackerTitle=function isc_ListGrid_getDragTrackerTitle(_1,_2){var _3,_4=this.getTitleField(),_5=this.getFormattedValue(_1,_4,_1?_1[_4]:_3);return"<nobr>"+_5+"</nobr>"},isc.A.dragStart=function isc_ListGrid_dragStart(){if(this.canDragSelect)return true;var _1=this.selection.getSelection();if(_1.length==0)return false;for(var i=0;i<_1.length;i++){if(!_1[i].$17b&&_1[i].canDrag==false)return false}
this.$170=_1;return true},isc.A.dragMove=function isc_ListGrid_dragMove(){var _1=isc.EH.dropTarget;if(!this.canDragRecordsOut&&_1!=null&&_1!=this&&!this.contains(_1))
{return false}},isc.A.dropMove=function isc_ListGrid_dropMove(){var _1=this.willAcceptDrop();if(_1){if(this.canReorderRecords)this.showDragLineForRecord();this.body.clearNoDropIndicator();return false}else if(_1==null){return true}else{this.body.setNoDropIndicator();if(this.canReorderRecords)this.showDragLineForRecord();return false}},isc.A.dropOver=function isc_ListGrid_dropOver(){return this.dropMove()},isc.A.dropOut=function isc_ListGrid_dropOut(){this.body.clearNoDropIndicator();this.hideDragLine()},isc.A.dragStop=function isc_ListGrid_dragStop(){this.body.clearNoDropIndicator();this.hideDragLine();this.$170=null},isc.A.willAcceptDrop=function isc_ListGrid_willAcceptDrop(){var _1=this.ns.EH;var _2=this.Super("willAcceptDrop",arguments);if(!_2&&_1.dragTarget!=this.body)return _2;if(_1.dragTarget==this){if(!this.$106e())return false}else{if(!this.canAcceptDroppedRecords)return null}
if(!_1.nativeDragging&&!_1.wasNativeDragging&&!isc.isAn.Object(_1.dragTarget.getDragData()))
{return null}
isc.$wa=true;var _3=this.getEventRecordNum(),_4=this.getEventFieldNum();var _5=this.getRecordDropPosition(_3);if(_3!=-2&&_5==isc.ListGrid.AFTER)_3+=1;isc.$wa=false;if(_3<-1){if(this.canDropInEmptyArea==false)return false;return true}
if(_3==-1)return false;var _6=this.getRecord(_3,_4);if(!this.recordIsEnabled(_6,_3,_4)||(_6!=null&&_6.canAcceptDrop==false))return false;return true});isc.evalBoundary;isc.B.push(isc.A.$106e=function isc_ListGrid__canDragRecordsToSelf(){return this.canReorderRecords},isc.A.drop=function isc_ListGrid_drop(){if(this.willAcceptDrop()==false)return false;var _1=this.ns.EH.dragTarget;var _2=this.getDropIndex();var _3=_1.cloneDragData();var _4=(_2!=-2&&this.getTotalRows()>_2?this.data.get(_2):null);var _5=this.getRecordDropPosition(this.getEventRecordNum());if(this.onRecordDrop!=null&&(this.onRecordDrop(_3,_4,_2,_5,_1)==false))
{return false}
return this.recordDrop(_3,_4,_2,_1)},isc.A.recordDrop=function isc_ListGrid_recordDrop(_1,_2,_3,_4){this.transferRecords(_1,_2,(this.canReorderRecords?_3:null),_4);if(this.recordsDropped)this.recordsDropped(_1,_3,this,_4);return false},isc.A.viewRow=function isc_ListGrid_viewRow(_1){this.getDataSource().viewFile(this.getRecord(_1))},isc.A.downloadRow=function isc_ListGrid_downloadRow(_1){this.getDataSource().downloadFile(this.getRecord(_1))},isc.A.viewCell=function isc_ListGrid_viewCell(_1,_2){this.getDataSource().viewFile(this.getRecord(_1),_2)},isc.A.downloadCell=function isc_ListGrid_downloadCell(_1,_2){this.getDataSource().downloadFile(this.getRecord(_1),_2)},isc.A.autoSizeColumn=function isc_ListGrid_autoSizeColumn(_1){var _2=this.body,_3=this.fieldIsFrozen(_1),_4=this.getLocalFieldNum(_1);if(_3&&this.frozenBody){_2=this.frozenBody}
if(!_2)return;var _5=_2.getColumnAutoSize(_4);if(this.includeGridSummaryInAutoFitWidth&&this.showGridSummary&&this.summaryRow!=null){var _6=_3?this.summaryRow.frozenBody:this.summaryRow.body;if(_6!=null){var _7=_6.getColumnAutoSize(_4);if(_7>_5)_5=_7}}
if(_5!=null)this.resizeField(_1,_5)},isc.A.getRecord=function isc_ListGrid_getRecord(_1,_2){return this.getCellRecord(_1,_2)},isc.A.getCellRecord=function isc_ListGrid_getCellRecord(_1,_2){if(!isc.isA.Number(_1)){this.logWarn("getCellRecord called with bad rowNum: "+this.echo(_1));return}
if(!this.data||0>_1||_1>=this.data.getLength())return null;var _3=this.data.get(_1);if(this.$105d)this.$106f(_3,_1);return _3},isc.A.$94p=function isc_ListGrid__getCachedCellRecord(_1,_2){if(!isc.isA.Number(_1)){this.logWarn("getCellRecord called with bad rowNum: "+this.echo(_1));return}
if(!this.data||0>_1||(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())||_1>=this.data.getLength())
{return null}
var _3=this.data.getCachedRow(_1);if(this.$105d)this.$106f(_3,_1);return _3},isc.A.$106f=function isc_ListGrid__testRowEditData(_1,_2){if(_1==null||_1[this.editValuesTestedProperty])return;if(this.$1014==null)this.$1014={};var _3=true;for(var i in this.$1001){var _5=this.$1001[i];if(_5!=null&&_5.$90o==null){if(this.comparePrimaryKeys(_1,_5.$104z)){_5.$90o=_2;this.$1014[_2]=i}else{_3=false}}}
if(_3)delete this.$105d;_1[this.editValuesTestedProperty]=true},isc.A.comparePrimaryKeys=function isc_ListGrid_comparePrimaryKeys(_1,_2){var _3=this.getPrimaryKeys(_1);if(!this.dataSource||this.shouldSaveLocally())return(_3==_2);for(var _4 in _3){if(_3[_4]!=_2[_4])return false}
return true},isc.A.getPrimaryKeys=function isc_ListGrid_getPrimaryKeys(_1){if(isc.isA.Number(_1))_1=this.getRecord(_1);if(this.shouldSaveLocally())return _1;var _2=this.getDataSource(),_3=_2.getPrimaryKeyFieldNames(),_4={};if(!isc.isAn.Array(_3))_3=[_3];for(var i=0;i<_3.length;i++){_4[_3[i]]=_1[_3[i]]}
return _4},isc.A.getTotalRows=function isc_ListGrid_getTotalRows(){if(this.data==null)return 0;if(this.data.getLength==null){this.logWarn("GetTotalRows: ListGrid has invalid data object:"+this.echo(this.data));return 0}
var _1=this.data.getLength(),_2=this.$105b();if(_2!=null&&_2+1>_1)_1=_2+1;if(this.showNewRecordRow)_1+=1;return _1},isc.A.getTotalCols=function isc_ListGrid_getTotalCols(){return this.fields.length},isc.A.$105b=function isc_ListGrid__getLastEditRow(){if(this.$1044==null){var _1=-1,_2=(this.$1014?isc.getKeys(this.$1014):[]);for(var i=0;i<_2.length;i++){var _4=parseInt(_2[i]);if(_4>_1)_1=_4}
this.$1044=_1}
return this.$1044},isc.A.recordIsEnabled=function isc_ListGrid_recordIsEnabled(_1,_2,_3){if(_1==null)return true;if(this.recordMarkedAsRemoved(_2))return false;return(_1[this.recordEnabledProperty]!=false&&_1[this.isSeparatorProperty]!=true)},isc.A.cellIsEnabled=function isc_ListGrid_cellIsEnabled(_1,_2,_3){return this.recordIsEnabled(_1,_2,_3)},isc.A.getCellField=function isc_ListGrid_getCellField(_1,_2){return this.getField(_2)},isc.A.getFields=function isc_ListGrid_getFields(){return this.fields},isc.A.getAllFields=function isc_ListGrid_getAllFields(){return this.completeFields||this.fields},isc.A.getSpecifiedField=function isc_ListGrid_getSpecifiedField(_1){var _2=this.completeFields;if(_2==null)_2=this.fields;if(_2==null)return;var _3=null;if(isc.isAn.Object(_1)){if(_2.contains(_1))_3=_1;if(isc.isA.RecordEditor(this)&&this.isAFilterEditor()){_3=this.getSpecifiedField(_1[this.fieldIdProperty])}}else if(isc.isA.String(_1))_3=_2.find(this.fieldIdProperty,_1);else _3=_2[_1];if(_3)this.$106g(_3);return _3},isc.A.$106g=function isc_ListGrid__setFieldGridID(_1){if(_1&&!_1.$100p)_1.$100p=this.ID},isc.A.getFieldName=function isc_ListGrid_getFieldName(_1){var _2=this.getField(_1);return _2?_2[this.fieldIdProperty]:null},isc.A.getFieldByName=function isc_ListGrid_getFieldByName(_1){return this.getSpecifiedField(_1)},isc.A.getField=function isc_ListGrid_getField(_1){if(this.fields==null||_1==null)return null;var _2;if(this.$1005){_2=this.fields[_1];if(_2!=null)return _2}else{if(isc.isA.Number(_1))return this.fields[_1]}
if(_1.$71y||isc.isAn.Object(_1))return _1;if(isc.isA.String(_1)){var _3=_1.contains(isc.Canvas.$15u);if(!_3){return this.fields.find(this.fieldIdProperty,_1)}else{var _4,_5,_6,_7=_1.trim(isc.Canvas.$15u),_8,_9,_10,_11;if(_1.startsWith(isc.Canvas.$15u)){_5=_1.substring(1);if(_1.endsWith(isc.Canvas.$15u)){_6=_1.substring(0,_1.length)}else{_4=_1+"/"}}else{if(_1.endsWith(isc.Canvas.$15u)){_6=_1.substring(0,_1.length);_4="/"+_1}else{_4="/"+_1+"/"}
_8="/"+_1}
var _12=_7.lastIndexOf(isc.Canvas.$15u);if(_12!=-1){_9=_7.substring(_12+1);_10=_9+"/"}
for(var i=0;i<this.fields.length;i++){var _14=this.fields[i].dataPath;if(!_14)continue;if(_14==_1||(_5&&_14==_5)||(_6&&_14==_6)||(_7&&_14==_7)||(_8&&_14==_8)||(_4&&_14==_4)||(_9&&_14==_9)||(_10&&_14==_10))
{return this.fields[i]}}}}
return null},isc.A.getColNum=function isc_ListGrid_getColNum(_1){return this.getFieldNum(_1)},isc.A.getFieldTitle=function isc_ListGrid_getFieldTitle(_1){var _2=this.getUnderlyingField(_1);if(!_2)return"Unknown field";if(_2.getFieldTitle){isc.Func.replaceWithMethod(_2,"getFieldTitle","viewer,fieldNum");return _2.getFieldTitle(this,this.getFieldNum(_2))}
return _2.title||_2.name},isc.A.getSummaryTitle=function isc_ListGrid_getSummaryTitle(_1){var _2;if(_1.getSummaryTitle!=null){isc.Func.replaceWithMethod(_1,"getSummaryTitle","viewer,field");_2=_1.getSummaryTitle(this,_1)}else if(_1.summaryTitle!=null){_2=_1.summaryTitle}else{_2=this.getFieldTitle(_1)}
return _2},isc.A.setValueMap=function isc_ListGrid_setValueMap(_1,_2){this.setFieldValueMap(_1,_2);if(this.$94e){var _3,_4;var _5=this.getColNum(_1);if(_5!=-1&&_5<this.fields.length){var _4=this.getField(_1),_3=_4[this.fieldIdProperty];this.$20w.setValueMap(_3,this.getEditorValueMap(_4,this.getEditedRecord(this.getEditRow(),_5)))}}
if(this.summaryRow){this.summaryRow.setValueMap(_1,_2)}
if(this.isDrawn()&&this.isVisible()){this.$930("setValueMap")}},isc.A.getDisplayValue=function isc_ListGrid_getDisplayValue(_1,_2,_3){var _4=this.getField(_1),_5=_4?_4.valueMap:null;return this.$106h(_4,_5,_4&&_4.displayField,_2,_3)},isc.A.$106h=function isc_ListGrid__getDisplayValue(_1,_2,_3,_4,_5){if(this.getDisplayValue!=isc.ListGrid.getInstanceProperty("getDisplayValue")){return this.getDisplayValue(_1,_4,_5)}
if(_1){if(isc.isAn.Object(_2)&&!isc.isAn.Array(_2)&&isc.propertyDefined(_2,_4))
{return _2[_4]}else if(_5&&_3){_4=_5[_3]}}
return _4},isc.A.getData=function isc_ListGrid_getData(){return this.data},isc.A.getRecordIndex=function isc_ListGrid_getRecordIndex(_1){var _2=-1;if(this.body&&this.body.isDrawn()){_2=this.data.indexOf(_1,this.body.$20t,this.body.$89v)}
if(_2==-1)_2=this.data.indexOf(_1);return _2},isc.A.getRowNum=function isc_ListGrid_getRowNum(_1){return this.getRecordIndex.apply(this,arguments)},isc.A.getRecordCellIndex=function isc_ListGrid_getRecordCellIndex(_1,_2){var _3=this.getRecordIndex(_1);return _3>=0?[_3,_2]:[-1,-1]},isc.A.getEventRow=function isc_ListGrid_getEventRow(_1){if(this.header&&this.header.containsPoint(this.ns.EH.getX(),this.ns.EH.getY())){return-1}
return this.body.getEventRow(_1)},isc.A.getEventColumn=function isc_ListGrid_getEventColumn(_1){var _2=(_1!=null?_1:this.getOffsetX()),_3=0,_4=0;if(this.frozenBody)_4=this.frozenFields.length;if(_4>0&&_2<this.frozenBody.getVisibleWidth()){_3=this.frozenBody.getEventColumn(_1)}else{_3=this.body.getEventColumn(_1)+_4}
return _3},isc.A.getEventRecordNum=function isc_ListGrid_getEventRecordNum(_1){return this.getEventRow(_1)},isc.A.getEventFieldNum=function isc_ListGrid_getEventFieldNum(_1){return this.getEventColumn(_1)},isc.A.$106i=function isc_ListGrid__getRecordDropPosition(_1,_2,_3){if(!_3)_3=this.recordDropAppearance;var _4=_2-this.body.getRowTop(_1),_5=this.body.getRowSize(_1);if(_3==isc.ListGrid.BETWEEN){if(_4>Math.round(_5/2)){return isc.ListGrid.AFTER}else{return isc.ListGrid.BEFORE}}else if(_3==isc.ListGrid.BOTH){if(_4<Math.round(_5/4)){return isc.ListGrid.BEFORE}else if(_4>Math.round(3*_5/4)){return isc.ListGrid.AFTER}else{return isc.ListGrid.OVER}}},isc.A.getRecordDropPosition=function isc_ListGrid_getRecordDropPosition(_1,_2,_3){if(this.recordDropAppearance==isc.ListGrid.OVER)return isc.ListGrid.OVER;if(this.recordDropAppearance==isc.ListGrid.BODY)return null;if(_2==null)_2=this.body.getOffsetY();if(_1==null)_1=this.getEventRow(_2);if(_1==-2)return isc.ListGrid.AFTER;if(_1>=this.getTotalRows())return isc.ListGrid.BEFORE;return this.$106i(_1,_2,_3)},isc.A.getDropIndex=function isc_ListGrid_getDropIndex(_1,_2){if(this.data.getLength()==0){return 0}
if(_1==null)_1=this.getEventRow();if(_2==null)_2=this.getRecordDropPosition(_1);if(this.canReorderRecords){if(_1==-2)_1=this.data.getLength()-1;if(_2==isc.ListGrid.AFTER)_1++}
return _1},isc.A.cellSelectionChanged=function isc_ListGrid_cellSelectionChanged(){},isc.A.selectionChanged=function isc_ListGrid_selectionChanged(){},isc.A.getSerializeableFields=function isc_ListGrid_getSerializeableFields(_1,_2){_1=_1||[];_1.addList(["header","selection"]);return this.Super("getSerializeableFields",[_1,_2],arguments)},isc.A.deriveFrozenFields=function isc_ListGrid_deriveFrozenFields(){var _1=this.frozenFields=this.fields.findAll("frozen",true),_2=this.fields.findAll("autoFreeze",true),_3=this.fields.findAll("$106j",true);if(_1&&_3&&_1.length==_3.length){for(var i=0;i<_3.length;i++){var _5=_3[i];_5.frozen=false;delete _5.$106j}
_1=this.frozenFields=null}
var _6=this.completeFields.findAll("frozen",true);if(_1&&_1.length==this.fields.length){_1=this.frozenFields=null;this.$989=true}else this.$989=false;if(_1){if(_2){for(var i=0;i<_2.length;i++){var _5=_2[i];if(!_5.frozen){_5.frozen=true;_5.$106j=true;var _7=_5.getAutoFreezePosition?_5.getAutoFreezePosition():this.freezeStart()?0:this.fields.length,_8=_5.getAutoFreezePosition?_5.getAutoFreezePosition():this.freezeStart()?0:this.completeFields.length;_1.addAt(_5,_7);_6.addAt(_5,_8)}}}
this.fields.slideList(_1,this.freezeStart()?0:this.fields.length);this.completeFields.slideList(_6,this.freezeStart()?0:this.completeFields.length);this.resizeFieldsInRealTime=false}
for(var i=0;i<this.fields.length;i++){var _5=this.fields[i];_5.masterIndex=i}
if(_1){var _9=this.normalFields=[];for(var i=0;i<this.fields.length;i++){var _5=this.fields[i];if(!_5.frozen)_9.add(_5)}}else this.normalFields=null},isc.A.rebuildForFreeze=function isc_ListGrid_rebuildForFreeze(_1){if(!this.body)return;if(this.filterEditor){this.filterEditor.deriveVisibleFields();this.filterEditor.updateBody(_1);this.filterEditor.remapEditFieldsForFreeze();this.filterEditor.layoutChildren(this.$98i)}
this.endEditing();this.deriveVisibleFields();this.updateHeader();this.updateBody(_1);this.layoutChildren(this.$98i);if(this.frozenBody){this.frozenBody.markForRedraw("Recalculating draw area from initial sizing of body")}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate());this.summaryRow.rebuildForFreeze(_1);this.summaryRow.$100e()}
if(this.showRecordComponents&&this.recordComponentPoolingMode=="data"){if(this.$1010){var _2=isc.getValues(this.$1010),_3=_2.length;for(var i=_3-1;i>=0;i--){var _5=_2[i];if(!this.data.contains(_5.embeddedRecord))continue;this.addEmbeddedComponent(_5,_5.embeddedRecord);delete this.$1010[_5.ID]}}}},isc.A.setCanFreezeFields=function isc_ListGrid_setCanFreezeFields(_1){this.canFreezeFields=_1;delete this.$99h},isc.A.refreshMasterIndex=function isc_ListGrid_refreshMasterIndex(){if(this.fields)this.$106k(this.fields);if(!this.body)return;if(this.header)this.$106k(this.header.getMembers());if(this.body)this.$106k(this.body.fields||[]);if(!this.frozenFields)return;if(this.frozenHeader)this.$106k(this.frozenHeader.getMembers());if(this.frozenBody)this.$106k(this.frozenBody.fields)},isc.A.$106k=function isc_ListGrid__refreshMasterIndexForFields(_1){for(var i=0;i<_1.length;i++){_1[i].masterIndex=this.fields.findIndex("name",_1[i].name)}},isc.A.getFreezeOn=function isc_ListGrid_getFreezeOn(){return(this.freezeOn!=null?this.freezeOn:(this.isRTL()?"right":"left"))},isc.A.freezeLeft=function isc_ListGrid_freezeLeft(){return this.getFreezeOn()=="left"},isc.A.freezeStart=function isc_ListGrid_freezeStart(){if(this.isRTL()){return this.getFreezeOn()=="right"}else{return this.getFreezeOn()=="left"}},isc.A.getLeftBody=function isc_ListGrid_getLeftBody(){var _1=this.freezeLeft()
return this.frozenFields&&_1?this.frozenBody:this.body},isc.A.getRightBody=function isc_ListGrid_getRightBody(){var _1=this.freezeLeft();return this.frozenFields&&!_1?this.frozenBody:this.body},isc.A.setFreezeOn=function isc_ListGrid_setFreezeOn(_1){var _2=this.get
this.freezeOn=_1;if(_1!=_2)this.rebuildForFreeze(true)},isc.A.getFrozenSlots=function isc_ListGrid_getFrozenSlots(_1){var _2=this.frozenFields;if(!_2)return _1;return this.freezeStart()?_1.slice(0,_2.length):_1.slice(_1.length-_2.length)},isc.A.getUnfrozenSlots=function isc_ListGrid_getUnfrozenSlots(_1){var _2=this.frozenFields;if(!_2)return _1;return this.freezeStart()?_1.slice(_2.length):_1.slice(0,_1.length-_2.length)},isc.A.fieldIsFrozen=function isc_ListGrid_fieldIsFrozen(_1){if(!this.frozenFields)return false;var _2=this.getField(_1);return _2&&!!_2.frozen},isc.A.getFieldBody=function isc_ListGrid_getFieldBody(_1){if(!this.frozenFields)return this.body;return this.fieldIsFrozen(_1)?this.frozenBody:this.body},isc.A.getFieldHeader=function isc_ListGrid_getFieldHeader(_1){if(!this.frozenFields)return this.header;return this.fieldIsFrozen(_1)?this.frozenHeader:this.header},isc.A.getFieldHeaderButton=function isc_ListGrid_getFieldHeaderButton(_1){var _2=this.getFieldHeader(_1);return _2?_2.getMember(this.getLocalFieldNum(_1)):null},isc.A.getLocalFieldNum=function isc_ListGrid_getLocalFieldNum(_1){if(_1==null)return null;if(this.body&&this.body.isPrinting){var _2=this.fields[_1];if(!this.$989&&_2.frozen&&this.frozenBody){return this.frozenBody.fields.indexOf(_2)}else{return this.body.fields.indexOf(_2)}}
if(!this.frozenFields)return _1;var _3;_3=this.frozenFields.length;if(!this.fieldIsFrozen(_1))return _1-_3;return this.freezeStart()?_1:_1-(this.fields.length-this.frozenFields.length)},isc.A.getFieldNumFromLocal=function isc_ListGrid_getFieldNumFromLocal(_1,_2){if(_1==null)return null;if(this.isPrinting){var _3=this.frozenFields!=null?(_2==this.frozenBody?this.frozenFields:this.unfrozenFields):this.fields;var _4=_2.fields[_1];for(var i=0;i<_3.length;i++){if(_3[i].name==_4.name)break;if(_3[i].shouldPrint==false)_1++}}
if(!this.frozenFields)return _1;if(_2==this.frozenBody){if(this.freezeStart())return _1;else{var _6=this.fields.length-this.frozenFields.length;return _1+_6}}else{var _7=this.freezeStart()?this.frozenFields.length:0;return _1+_7}},isc.A.getColumnLeft=function isc_ListGrid_getColumnLeft(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnLeft(this.getLocalFieldNum(_1))},isc.A.getColumnPageLeft=function isc_ListGrid_getColumnPageLeft(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnPageLeft(this.getLocalFieldNum(_1))},isc.A.getColumnWidth=function isc_ListGrid_getColumnWidth(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnWidth(this.getLocalFieldNum(_1))},isc.A.getCellPageRect=function isc_ListGrid_getCellPageRect(_1,_2){var _3=this.getFieldBody(_2);if(!_3)return null;return _3.getCellPageRect(_1,this.getLocalFieldNum(_2))},isc.A.refreshCellStyle=function isc_ListGrid_refreshCellStyle(_1,_2,_3){var _4=this.getFieldBody(_2);return _4.refreshCellStyle(_1,this.getLocalFieldNum(_2),_3)},isc.A.freezeField=function isc_ListGrid_freezeField(_1){return this.toggleFrozen(_1,true)},isc.A.unfreezeField=function isc_ListGrid_unfreezeField(_1){return this.toggleFrozen(_1,false)},isc.A.toggleFrozen=function isc_ListGrid_toggleFrozen(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=false;for(var i=0;i<_1.length;i++){var _5=this.getField(_1[i]);if(!_5||!this.fieldIsVisible(_5)||this.isCheckboxField(_5))
{continue}
var _6=_2;if(_6==null)_6=!_5.frozen;if(_5.frozen==_2)continue;_3=true;_5.frozen=_6}
if(!_3)return false;this.rebuildForFreeze();this.selectSortFieldHeaderButton();this.handleFieldStateChanged(true);return true},isc.A.updateBody=function isc_ListGrid_updateBody(_1){if(_1||(this.frozenFields&&!this.frozenBody)||(this.frozenBody&&!this.frozenFields))
{_1=true;this.dropRecordComponents();if(this.body){this.$106l()}
if(this.bodyLayout)this.bodyLayout.destroy();else if(this.body)this.body.destroy();this.body=this.bodyLayout=this.frozenBody=null;this.createBodies()}
if(this.isDrawn()){this.updateGridComponents()}
if(this.body){this.body.fields=this.normalFields||this.fields;if(!_1)this.$100t(this.body);this.body.markForRedraw("fields change")}
if(this.frozenBody){this.frozenBody.fields=this.frozenFields;if(!_1)this.$100t(this.frozenBody);this.frozenBody.markForRedraw("fields change");if(this.canSelectCells)this.$106m()}},isc.A.shouldDestroyOnUnembed=function isc_ListGrid_shouldDestroyOnUnembed(_1,_2){if(_1.dontAutoDestroy)return false;if(_1.isBackgroundComponent){if(_2==this.$97k&&_1.creator==this)return true;return false}
if(_1.isRecordComponent){if(_2==this.$97k)return true;return false}
if(_1.destroyOnUnembed!=null)return _1.destroyOnUnembed;if(_2==this.$98f)return false;return true},isc.A.$106l=function isc_ListGrid__destroyEmbeddedComponentsForRebuild(){var _1=this.body.$90x;if(this.frozenBody){var _2=[];if(_1==null)_1=_2;else _1=_2.addList(_1);_1.addList(this.frozenBody.$90x||[])}
if(_1&&_1.length>0){for(var i=0;i<_1.length;i++){var _4=_1[i].embeddedRecord,_5=false,_6=this.$91w(_4);if(_6){for(var j=0;j<_6.length;j++){var _8=_6[j];_5=_5||_8.isExpansionComponent;if(this.shouldDestroyOnUnembed(_8,this.$98j)){_8.markForDestroy()}else{_8.deparent()}}
this.$97c(_4,null);if(_5)this.$966(_4,false);this.$97d(_4)}}}},isc.A.createBodies=function isc_ListGrid_createBodies(){if(this.body!=null)return;this.$102h();this.body=this.createBody(this.ID+"_body",this.normalFields||this.fields);if(this.sorter!=null){this.sorter.setWidth(this.$89f(true))}
this.body.resizeTo("100%","100%");this.bodies=[this.body];this.dragScrollTarget=this.body;var _1=this.frozenFields;if(_1==null||_1.length==0){return this.body}
this.body.addProperties({$89m:function(){var _2=[0,0];if(!this.frozen&&this.grid&&this.grid.frozenBody){_2=this.grid.frozenBody.$89m()}
var _3=this.Super("$89m",arguments);if(_2[1]>_3[1])_3[1]++;return _3}});this.frozenBody=this.createBody(this.ID+"$106n",_1,true);this.frozenBody.useNativeDrag=false;this.frozenBody.drawAllMaxCells=0;if(this.body.hscrollOn&&!this.shrinkForFreeze){this.frozenBody.setEndSpace(this.body.getScrollbarSize())}
if(this.freezeStart()){this.bodies.unshift(this.frozenBody)}else{this.bodies.add(this.frozenBody)}
this.bodyLayout=this.createAutoChild("bodyLayout",{width:"100%",height:"100%",autoDraw:false,members:this.bodies},isc.HLayout);this.$99g()},isc.A.getBody=function isc_ListGrid_getBody(){return this.body},isc.A.$99g=function isc_ListGrid__separateDependentSelections(){if(this.canSelectCells){var _1=this.freezeStart(),_2=this.body.fields.length,_3=this.frozenBody?this.frozenBody.fields.length:0;this.body.$948(this.selection,_1?_3:0);this.frozenBody.$948(this.selection,_1?0:_2)}},isc.A.$106m=function isc_ListGrid__updateDependentSelections(){if(!isc.isA.DependentCellSelection(this.body.selection)||!isc.isA.DependentCellSelection(this.frozenBody.selection)){return}
var _1=this.freezeStart(),_2=this.body.fields.length,_3=this.frozenBody.fields.length;this.body.selection.$949(_1?_3:0,_2);this.frozenBody.selection.$949(_1?0:_2,_3)},isc.A.bodyOverflowed=function isc_ListGrid_bodyOverflowed(){if(this.summaryRow!=null&&this.summaryRow.body){this.summaryRow.body.setRightSpace(this.body.vscrollOn?this.body.getScrollbarSize():0)}
if(!this.frozenBody)return;this.frozenBody.setEndSpace(this.body.hscrollOn&&!this.shrinkForFreeze?this.body.getScrollbarSize():0)},isc.A.createBody=function isc_ListGrid_createBody(_1,_2,_3){var _4=isc.ClassFactory.getClass(this.bodyConstructor,true).createRaw();_4.ID=_1;_4.autoDraw=false;_4.creator=this;_4.grid=this;_4.fields=_2;_4.frozen=_3;_4.overflow=_3?"hidden":this.bodyOverflow;if(this.scrollbarConstructor!=null)_4.scrollbarConstructor=this.scrollbarConstructor;if(this.showCustomScrollbars!=null)_4.showCustomScrollbars=this.showCustomScrollbars;if(this.alwaysShowScrollbars!=null)_4.alwaysShowScrollbars=this.alwaysShowScrollbars;if(this.useTouchScrolling!=null)_4.useTouchScrolling=this.useTouchScrolling;if(this.scrollbarSize!=null)_4.scrollbarSize=this.scrollbarSize;_4.backgroundColor=this.bodyBackgroundColor;var _5=this.bodyStyleName;if(this.alternateBodyStyleName!=null&&this.alternateRecordStyles){_5=this.alternateBodyStyleName}
_4.styleName=_5;_4.allowContentAndChildren=true;_4.fixedRowHeights=this.fixedRecordHeights;_4.fixedColumnWidths=this.fixedFieldWidths;_4.alternateRowStyles=this.alternateRecordStyles;_4.alternateRowFrequency=this.alternateRecordFrequency;_4.alternateColumnStyles=this.alternateFieldStyles;_4.alternateColumnFrequency=this.alternateFieldFrequency;_4.canSelectText=this.canDragSelectText;_4.showAllRows=this.showAllRecords;if(this.virtualScrolling!=null)_4.virtualScrolling=this.virtualScrolling;_4.dragTarget=this.canDragSelect?null:this;_4.dragAppearance=isc.EventHandler.NONE;_4.screenReaderCellSeparator=this.screenReaderCellSeparator;_4.screenReaderRowSeparator=this.screenReaderRowSeparator;_4.locatorParent=this;_4.selectionAppearance=this.selectionAppearance;var _6=isc.ListGrid.$95j;for(var i=0;i<_6.length;i++){var _8=_6[i],_9=this[_8];if(_9!=null)_4[_8]=_9}
if(this.$101h!=null){_4._useNativeTabIndex=this.$101h}
isc.addProperties(_4,this.bodyDefaults,this.bodyProperties);if(_3)_4.showEmptyMessage=false;_4.completeCreation();_4=isc.SGWTFactory.extractFromConfigBlock(_4);this.$106o(_4);return _4},isc.A.getRowHeight=function isc_ListGrid_getRowHeight(_1,_2,_3){var _4;if(this.allowRowSpanning&&this.getRowSpan){if(!this.allowIncreasingRowSpanning){if(_3){_4=this.cellHeight
*this.frozenBody.$91q(_1,_2,this.frozenFields.length-1)}else{_4=this.cellHeight}}else{var _5,_6=_3?this.frozenBody:this.body,_7=_3?0:(this.frozenFields?this.frozenFields.length:0),_8=_3?this.frozenFields.length:this.fields.length;for(var i=_7;i<_8;i++){if(_5==null){_5=_6.$91q(_1,_2,i)}else{_5=Math.min(_5,_6.$91q(_1,_2,i))}
if(_5==1)break}
_4=this.cellHeight*_5}}else{_4=this.cellHeight}
if(this.frozenFields&&this.getEditRow()==_2){var _10=this.getEditForm(),_11=_10?_10.getItems():[];for(var i=0;i<_11.length;i++){var _12=(_11[i].getHeight()+2*this.cellPadding);if(_12>_4)_4=_12}}
return this.body.updateHeightForEmbeddedComponents(_1,_2,_4)},isc.A.makeSelectionCanvas=function isc_ListGrid_makeSelectionCanvas(_1){return this.selectionCanvas=this.createAutoChild("selectionCanvas",{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false})},isc.A.makeSelectionUnderCanvas=function isc_ListGrid_makeSelectionUnderCanvas(_1){return this.selectionUnderCanvas=this.createAutoChild("selectionUnderCanvas",{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false})},isc.A.getSelectionCanvas=function isc_ListGrid_getSelectionCanvas(){var _1=this.selectionCanvas;if(_1==null||_1.destroyed){_1=this.makeSelectionCanvas()}
return _1},isc.A.getSelectionUnderCanvas=function isc_ListGrid_getSelectionUnderCanvas(){var _1=this.selectionUnderCanvas;if(_1==null||_1.destroyed){_1=this.makeSelectionUnderCanvas()}
return _1},isc.A.updateSelectionCanvas=function isc_ListGrid_updateSelectionCanvas(){var _1=this.selection,_2,_3,_4;if(isc.isA.CellSelection(_1)){var _5=_1.getSelectedCells()[0];_2=_5?_5[0]:-1,_3=_5?_5[1]:-1;_4=_5?this.getCellRecord(_2,_3):null}else{_4=this.getSelectedRecord();_2=this.data?this.data.indexOf(_4):-1}
var _6=this.selectionCanvas,_7=this.selectionUnderCanvas,_8=_6||_7,_9,_10,_11;if(_8!=null){_9=_8.embeddedRecord;_10=_8.$92j;_11=_8.$91x}else{_9=null;_10=-1;_11=-1}
var _12=this.showSelectionCanvas||this.showSelectionUnderCanvas;if(_8==null){if(_4==null||!_12)return}else if(_12&&_9==_4&&_10==_2&&_11==_3)
{return}
if(_12&&this.selectionType!=isc.Selection.SINGLE&&this.selectionType!=isc.Selection.NONE)
{this.logWarn((this.showSelectionCanvas?(this.showSelectionUnderCanvas?"showSelectionCanvas and showSelectionUnderCanvas are":"showSelectionCanvas is"):"showSelectionUnderCanvas is")+" set to true, but this is not supported for selectionType "+this.selectionType);this.showSelectionCanvas=false;this.showSelectionUnderCanvas=false;_12=false}
if(!_4||_2==-1||!_12){if(_6!=null){this.removeEmbeddedComponent(_9,_6)}
if(_7!=null){this.removeEmbeddedComponent(_9,_7)}
return}
if(this.showSelectionCanvas){_6=this.getSelectionCanvas();_6.record=_4;_6.removeOnHideField=true;this.addEmbeddedComponent(_6,_4,_2,_3,"within")}
if((this.showSelectionCanvas&&this.showSelectionUnderCanvas==null)||this.showSelectionUnderCanvas)
{_7=this.getSelectionUnderCanvas();_7.record=_4;_7.removeOnHideField=true;this.addEmbeddedComponent(_7,_4,_2,_3,"within")}},isc.A.makeRollOverCanvas=function isc_ListGrid_makeRollOverCanvas(){return this.rollOverCanvas=this.createAutoChild("rollOverCanvas",{eventProxy:this.body,percentSource:this,percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false})},isc.A.makeRollUnderCanvas=function isc_ListGrid_makeRollUnderCanvas(){return this.rollUnderCanvas=this.createAutoChild("rollUnderCanvas",{eventProxy:this.body,percentSource:this,percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false})},isc.A.getRollOverCanvas=function isc_ListGrid_getRollOverCanvas(_1,_2){var _3=this.rollOverCanvas;if(_3==null||_3.destroyed){_3=this.makeRollOverCanvas()}
return _3},isc.A.getRollUnderCanvas=function isc_ListGrid_getRollUnderCanvas(_1,_2){var _3=this.rollUnderCanvas;if(_3==null||_3.destroyed){_3=this.makeRollUnderCanvas()}
return _3},isc.A.updateRollOverCanvas=function isc_ListGrid_updateRollOverCanvas(_1,_2,_3){var _4=false;var _5;if(_3||(!this.showRollOverCanvas&&!this.showRollUnderCanvas)||_1==-1){_4=true}else{_5=this.getCellRecord(_1,_2);if(_5==null||Array.isLoading(_5)){_4=true}}
if(_4){if(this.currentRollOverCanvas&&!this.currentRollOverCanvas.destroying&&!this.currentRollOverCanvas.destroyed){this.removeEmbeddedComponent(this.currentRollOverCanvas.embeddedRecord,this.currentRollOverCanvas)}
if(this.currentRollUnderCanvas&&!this.currentRollUnderCanvas.destroying&&!this.currentRollUnderCanvas.destroyed){this.removeEmbeddedComponent(this.currentRollUnderCanvas.embeddedRecord,this.currentRollUnderCanvas)}
return}
if(!this.useCellRollOvers){_2=null}
var _6=this.currentRollOverCanvas,_7=this.currentRollUnderCanvas;var _8;if(this.showRollOverCanvas){_8=this.getRollOverCanvas(_1,_2)}else{_8=null}
this.currentRollOverCanvas=_8;var _9;if((this.showRollOverCanvas&&this.showRollUnderCanvas==null)||this.showRollUnderCanvas)
{_9=this.getRollUnderCanvas(_1,_2)}else{_9=null}
this.currentRollUnderCanvas=_9;if(_8!=null){_8.grid=this;_8.record=_5;_8.removeOnHideField=true;this.addEmbeddedComponent(_8,_5,_1,_2,"within")}else if(_6!=null&&!_6.destroying){this.removeEmbeddedComponent(_6.embeddedRecord,_6)}
if(_9!=null){_9.grid=this;_9.record=_5;_9.removeOnHideField=true;this.addEmbeddedComponent(_9,_5,_1,_2,"within")}else if(_7!=null&&!_7.destroying){this.removeEmbeddedComponent(_7.embeddedRecord,_7)}});isc.evalBoundary;isc.B.push(isc.A.updateEmbeddedComponentZIndex=function isc_ListGrid_updateEmbeddedComponentZIndex(_1){if(!_1)return;if(this.selectionCanvas==_1){var _2=this.body.getTableZIndex();this.selectionCanvas.setZIndex(_2+50)}
if(this.selectionUnderCanvas==_1){var _2=this.body.getTableZIndex();this.selectionUnderCanvas.setZIndex(_2-100)}
if(this.currentRollOverCanvas==_1){var _2=this.body.getTableZIndex();_1.setZIndex(_2+100)}
if(this.currentRollUnderCanvas==_1){var _2=this.body.getTableZIndex();_1.setZIndex(_2-50)}},isc.A.$92m=function isc_ListGrid__handleEmbeddedComponentResize(_1,_2,_3,_4){if(_2!=null&&_2.$92p&&_2.embeddedPosition==this.$88z&&_3!=null&&_3!=0)
{var _5=_2.$92p,_6=this.getField(_5);var _7=_2._percent_width;if(_6&&(_7==null||!_7.endsWith("%")))
{var _8=_2.getVisibleWidth(),_9=_8-_3;var _10=_6.$99o;if(_10!=null){if(_8>_10){this.$94g(_5,_8)}else if(_9==_10){this.$94g(_5)}}}}
if(this.frozenBody!=null&&_4!=null&&_4!=0){var _11=(_1==this.frozenBody)?this.body:this.frozenBody;_11.markForRedraw("Embedded component requires row resizing")}},isc.A.getButtonProperties=function isc_ListGrid_getButtonProperties(){var _1={align:null};if(this.headerTitleStyle!=null)_1.titleStyle=this.headerTitleStyle;if(this.headerBaseStyle!=null)_1.baseStyle=this.headerBaseStyle;if(this.headerButtonSrc!=null)_1.src=this.headerButtonSrc;if(this.frozenHeaderBaseStyle!=null)
_1.frozenBaseStyle=this.frozenHeaderBaseStyle;if(this.frozenHeaderTitleStyle!=null)
_1.frozenTitleStyle=this.frozenHeaderTitleStyle;if(this.frozenHeaderButtonSrc!=null)
_1.frozenSrc=this.frozenHeaderButtonSrc;var _2=isc.addProperties({},this.headerButtonDefaults,_1,this.headerButtonProperties);return _2},isc.A.getHeaderButtonProperties=function isc_ListGrid_getHeaderButtonProperties(_1){var _2=this.getButtonProperties();if(this.buttonTitleFunction==null){this.buttonTitleFunction=function(){return this.parentElement.grid.getHeaderButtonTitle(this)}}
isc.addProperties(_2,{$24r:true,minNonEdgeSize:isc.Browser.isTouch?10:5,defaultRadioGroup:this.getID()+"$106p",getActionType:function(_13,_14,_15,_16){var _3=this.parentElement,_4;if(_3)_4=_3.grid;if(_4&&isc.isA.ListGrid(_4)){var _5=_4.fields[_3.getButtonNumber(this)];var _6=(_4.canSort!=false);if(_6&&_5!=null)_6=(_4.$95y(_5)!=false);if(_6&&_4.selectHeaderOnSort)return isc.Button.RADIO}
return this.invokeSuper(this.getClassName(),"getActionType",_13,_14,_15,_16)},getTitle:this.buttonTitleFunction,layoutAlign:"bottom",handleMouseOver:function(_13){var _4=this.parentElement.grid;if(_4.shouldShowHeaderMenuButton(this,null,true)){var _7=_4.$100u(this);if(_13){var _8=_7.getPageRect();if(_8[0]<=_13.x&&_8[1]<=_13.y&&_13.x<=(_8[0]+_8[2])&&_13.y<=(_8[1]+_8[3]))
{this.$106q=this.$e0("handleMouseOver",arguments,null,50);return}}}
return this.Super("handleMouseOver",arguments)},handleMouseOut:function(){if(this.$106q!=null){isc.Timer.clear(this.$106q);delete this.$106q}
var _9=this.ns.EH;if(!isc.Browser.isTouch&&!this.containsPoint(_9.getX(),_9.getY()))
{var _4=this.parentElement.grid,_10=_4.headerMenuButton;if(isc.EH.getTarget()!=_10){_4.$98m(this)}}
return this.Super("handleMouseOut",arguments)},handleHover:function(){var _3=this.parentElement,_4=_3.grid,_11=this.masterIndex;if(_4.headerHover!=null)_4.headerHover(_11);var _12=_4.defaultHeaderHoverHTML(_11);if(_4.headerHoverHTML)_12=_4.headerHoverHTML(_11,_12);_4.$106r(_11,_12)}},_1);return _2},isc.A.makeHeader=function isc_ListGrid_makeHeader(){if(this.header!=null)return;var _1=this.header=this.makeHeaderForFields(this.normalFields||this.fields||[]);_1.locatorParent=this;if(this.sorter==null){this.makeCornerSortButton()}
this.headers=[_1];if(this.frozenFields){var _2=this.frozenHeader=this.makeHeaderForFields(this.frozenFields,"visible",this.getID()+"$106s");if(this.freezeStart()){this.headers.unshift(this.frozenHeader)}else{this.headers.add(this.frozenHeader)}
var _3=this.headers.duplicate();this.headerLayout=this.createAutoChild("headerLayout",{autoDraw:false,overflow:"hidden",height:this.getHeaderHeight(),members:_3},isc.HLayout)}
var _4=this.headerLayout||this.header;_4.inherentWidth=true;this.observe(_4,"moved",function(){this.updateSorter()});this.observe(_4,"resized",function(){this.updateSorter()})},isc.A.updateSorter=function isc_ListGrid_updateSorter(){if(this.destroying||this.destroyed)return;if(!this.sorter||this.sorter.destroying||this.sorter.destroyed)return;if(this.$6o||this.$44){this.delayCall("updateSorter");return}
var _1=(this.header||this.headerLayout)&&this.$89e();if(_1){this.sorter.moveTo(this.getSorterLeft(),this.getSorterTop());this.sorter.setHeight(this.getHeaderHeight())}else{this.sorter.moveTo(0,0)}
this.sorter.setVisibility(_1?isc.Canvas.INHERIT:isc.Canvas.HIDDEN);if(_1){if(this.isDrawn()&&!this.sorter.isDrawn())this.sorter.draw();else this.sorter.moveAbove(this.headerLayout||this.header)}
if(this.sortByGroupFirst){this.setSort(this.getSort())}},isc.A.makeHeaderForFields=function isc_ListGrid_makeHeaderForFields(_1,_2,_3){var _4=this.createHeader({ID:_3,grid:this,buttons:_1.duplicate(),reorderOnDrop:false,height:null,minMemberSize:this.minFieldWidth,tabWithinToolbar:false,overflow:_2||"hidden",_redrawWithParent:!this.fixedFieldWidths})
this.observe(_4,"scrollTo",function(){this.headerScrolled()});return _4},isc.A.setFieldButtonProperties=function isc_ListGrid_setFieldButtonProperties(_1,_2){var _3=this.getField(_1)
if(_3!=null){var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){_4.setProperties(_2)}}else{_3=this.completeFields.find("name",_1)}
if(_3==null){this.logWarn("setFieldButtonProperties() Unable to find specified field: "+_1);return}
var _5=isc.addProperties({},_2);var _6={titleStyle:"headerTitleStyle",baseStyle:"headerBaseStyle"}
for(var _7 in _6){if(_5[_7]!=null){_5[_6[_7]]=_5[_7];delete _5[_7]}}
isc.addProperties(_3,_5)},isc.A.getHeaderSpanConfig=function isc_ListGrid_getHeaderSpanConfig(_1,_2){if(_2==null)_2=this.headerSpans;if(_2==null)return;var _3=_2.find("name",_1);if(_3!=null)return _3;for(var i=0;i<_2.length;i++){var _5=_2[i];if(_5.spans!=null){_3=this.getHeaderSpanConfig(_1,_5.spans);if(_3!=null)return _3}}},isc.A.setHeaderSpanButtonProperties=function isc_ListGrid_setHeaderSpanButtonProperties(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanButtonProperties() - unable to locate span named: "+_1+this.getStackTrace());return}
if(_3.liveObject){_3.liveObject.setProperties(_2)}
var _4=isc.addProperties({},_2);var _5={titleStyle:"headerTitleStyle",baseStyle:"headerBaseStyle"}
for(var _6 in _5){if(_4[_6]!=null){_4[_5[_6]]=_4[_6];delete _4[_6]}}
isc.addProperties(_3,_4)},isc.A.getNestedSpanDepth=function isc_ListGrid_getNestedSpanDepth(_1){if(_1.$106t!=null)return _1.$106t;if(_1.spans){var _2=0;for(var i=0;i<_1.spans.length;i++){_2=Math.max(_2,this.getNestedSpanDepth(_1.spans[i]))}
_1.$106t=(1+_2);return _1.$106t}
return 1},isc.A.createHeader=function isc_ListGrid_createHeader(_1){var _2=this;var _3=this.canTabToHeader||(this.canTabToHeader==null&&isc.screenReader);var _4=isc.addProperties({shouldDragScroll:function(){return _2&&_2.body&&_2.body.hscrollOn},makeButton:function(_14,_48,_49,_50,_51){_14=isc.addProperties({},_14);_14.ignoreRTL=true;if(_2.clipHeaderTitles){_14.clipTitle=false;_14.showClippedTitleOnHover=false}
_14.$24t=true;_14.$24s=function(){if(this.masterIndex!=null){var _2=this.grid,_5=_2.getField(this.masterIndex),_6=(this.isRTL()&&!_2.reverseRTLAlign?isc.Canvas.RIGHT:isc.Canvas.LEFT);if(_5!=null&&_2.shouldLeaveHeaderMenuButtonSpace(_5)&&_2.shouldShowHeaderMenuButton(this)&&(this.wrap||_2.$106u(this.masterIndex))&&(_5.align!=_6||(_2.headerMenuButton&&_2.headerMenuButton.isVisible()&&_2.headerMenuButton.masterElement==this)))
{return _2.headerMenuButtonWidth+1}}
return null};if(_14.headerTitleStyle)_14.titleStyle=_14.headerTitleStyle;else if(_14.frozen&&this.buttonProperties.frozenTitleStyle)
_14.titleStyle=_14.frozenTitleStyle;if(_14.frozen&&this.buttonProperties.frozenSrc)
_14.src=this.buttonProperties.frozenSrc;_14.showIf=null;_14.grid=_2;var _7=_2.shouldAutoFitField(_14),_8,_9,_10;if(_7){_8=_2.getAutoFitWidthApproach(_14);if(_8=="both"){_9=true;_10=true}else if(_8=="title"){_9=true;_10=false}else{_9=false;_10=true}}
if(_7&&_9){_14.overflow="visible";_14.wrap=false;_14.resized=function(){if(this.isDrawn()&&this.grid){this.grid.headerButtonResized(this)}}}else{if(_14.wrap==null){_14.wrap=_2.wrapHeaderTitles}}
if(_14.$99j){if(_14.width==null||_14.width<_14.$99j){_14.width=_14.$99j}}else if(_14.width==null&&_9){_14.width=this.minFieldWidth||1}
_14.sizeImageToFitOverflow=true;if(_2.reverseRTLAlign&&_2.isRTL()){if(_14.align==isc.Canvas.LEFT)_14.align=isc.Canvas.RIGHT;else if(_14.align==isc.Canvas.RIGHT)_14.align=isc.Canvas.LEFT}
if(_14.masterIndex!=null){_14.ariaRole="rowheader";var _11=_2.shouldShowHeaderMenuButton(_14,null,true),_12=_14.$106v||[],_13=_14.showDefaultContextMenu!=false&&_12.length>0;if(_13){_14.ariaState=isc.addProperties({haspopup:true},_14.ariaState)}}
var _14=this.Super("makeButton",[_14,_48,_49,_50,_51]);if(_14.headerBaseStyle){_14.setBaseStyle(_14.headerBaseStyle)}else{if(_14.frozen&&this.buttonProperties.frozenBaseStyle)
_14.setBaseStyle(this.buttonProperties.frozenBaseStyle);else if(this.buttonProperties.baseStyle!=null)
_14.setBaseStyle(this.buttonProperties.baseStyle)}
return _14},buttonProperties:this.getHeaderButtonProperties(),border:this.headerBorder,styleName:this.headerBarStyle,backgroundColor:this.headerBackgroundColor,backgroundImage:this.headerBackgroundImage,canResizeItems:(this.canResizeFields||(this.editingOn&&this.editProxy&&this.editProxy.canResizeFields)),canReorderItems:(this.canReorderFields||(this.editingOn&&this.editProxy&&this.editProxy.canReorderFields)),dontObserve:false,childVisibilityChanged:function(){this.Super("childVisibilityChanged",arguments);this.$99m()},$26s:function(){this.Super("$26s",arguments);this.$99m()},addSpan:function(_39){if(!this.$106w)this.$106w=[];this.$106w.add(_39);if(this.isDrawn()){this.$106x(_39);this.addChild(_39)}},$99m:function(){if(!this.$106w||!this.isDrawn())return;if(this.$106y)return;var _15=this.instantRelayout;this.instantRelayout=false;for(var i=0;i<this.$106w.length;i++)this.$106x(this.$106w[i]);this.instantRelayout=_15;delete this.$106z},$1060:function(_39){if(_39.$1061!=null){return _39.$1061}
var _17=_2.getSpannedFields(_39);var _18=[],_19=_17.length,_20=true;for(var i=0;i<this.members.length;i++){if(_39.$1062[this.members[i].name]==true){_20=false;_18[_18.length]=this.members[i];_19--}
if(_19==0)break}
_39.$1061=_18;return _20?null:_18},getNestedSpanDepth:function(_39){return _2.getNestedSpanDepth(_39)},$106x:function(_39){if(!this.isDrawn()){return}
if(_39.$101s){if(_2.autoFitHeaderHeights){_39.setHeight(Math.max(_2.getHeaderButtonDefaultHeight(_39.spanConfig),_2.getHeaderButtonMinHeight(_39.spanConfig)))}else{var _21=_39,_22=_2.headerHeight;while(_21.parentSpan!=null&&_21.parentSpan.liveObject)
{var _23=_21.parentSpan.liveObject;_22-=_23.getVisibleHeight();_21=_23}
var _24=this.getNestedSpanDepth(_39);var _25=Math.floor(_22/(_24+1));if(_25<=0)_25=1;_39.setHeight(_25)}}
if(_39.parentSpan!=null&&_39.parentSpan.liveObject!=null){_39.setTop(_39.parentSpan.liveObject.getBottom())}
var _26=_2.autoSizeHeaderSpans;var _27=this.$1060(_39);var _28=_27==null||_27.length==0;if(_28){if(this.isVisible()){_39.hide()}
return}
var _29,_30=0,_31=0;for(var i=0;i<_27.length;i++){var _32=_27[i];_32.canReorder=false;if(_32.visibility!=isc.Canvas.HIDDEN){_30++;_31+=_32.getVisibleWidth();if(!_29||this.isRTL())_29=_32}}
if(_29){_39.setVisibility(isc.Canvas.INHERIT);_39.setLeft(_29.getLeft());var _33=_39.getWidth();_39.setWidth(_31);if(_26&&_39.isDrawn()){if(_39.isDirty())_39.redraw();_39.setOverflow(isc.Canvas.VISIBLE);var _34=_39.getVisibleWidth();if(_34>_31){_39.setWidth(_34);var _35=_34-_31;for(var i=0;i<_27.length;i++){var _32=_27[i];if(_32.visibility!=isc.Canvas.HIDDEN){var _36=Math.ceil(_35/_30);_35-=_36;_30-=1;_32.resizeBy(_36)}}
if(_34!=_33){_2.$935("autoSizeHeaderSpans: Caused fields to expand",true)}}
_39.setOverflow(isc.Canvas.HIDDEN)}}},$101n:function(_48){if(!this.$106w)return;var _37=this.$1063;this.$1063=true;if(!_48)this.$99m();var _38=this.getVisibleHeight();this.$106y=true;var _15=this.instantRelayout;this.instantRelayout=false;for(var i=0;i<this.$106w.length;i++){var _39=this.$106w[i];if(!this.resizeFieldsOnly)this.addChild(_39);var _27=this.$1060(_39);if(!_27)continue;for(var j=0;j<_27.length;j++){var _41=_27[j],_42=_41.getVisibleHeight();var _23=_2.spanMap[_41.name],_43=0;do{if(_23.liveObject==null)break;_43+=_23.liveObject.getVisibleHeight();_23=_23.parentSpan}while(_23!=null)
_41.setHeight(_38-_43);if(_41.isDirty()){_41.redraw()}}
_39.bringToFront()}
this.instantRelayout=_15;if(!_37){delete this.$106y;delete this.$1063}},removeButtons:function(_48){if(_2.headerSpans)_2.$1064(_48,this);this.Super("removeButtons",arguments)},addButtons:function(_48,_49){this.Super("addButtons",arguments);if(_2.headerSpans)_2.$1065(_48,this);this.$101n()},draw:function(){if(this.$106w&&_2.unspannedHeaderVAlign){for(var i=0;i<this.buttons.length;i++){var _14=this.buttons[i],_44=_2.spanMap[_14.name]!=null;if(!_44){_14.valign=_2.unspannedHeaderVAlign}}}
this.Super("draw",arguments);this.$101n()},getStandardChildLocator:function(_48){var _45=_48.masterIndex,_2=this.grid;if(_45!=null&&_2!=null){var _46=_2.getFieldName(_45);return isc.AutoTest.createLocatorFallbackPath("headerButton",{fieldName:_46})}
return this.Super("getStandardChildLocator",_48)},getChildFromLocatorSubstring:function(_48,_49,_50,_51){if(isc.isA.Canvas(this[_48]))return this[_48];var _47=isc.AutoTest.parseLocatorFallbackPath(_48);if(this.grid&&_47&&_47.name=="headerButton"){var _46=_47.config.fieldName,_45=this.grid.getFieldNum(_46),_41=this.grid.getFieldHeader(_45);if(_45==-1||_41==null){this.logWarn("fieldName:"+_46+", gave fieldNum:"+_45+" unable to find header button for this field.");return}
if(_41!=this){this.logWarn("AutoTest locator string specified this header for field "+_46+" but that header button is contained in header "+_41+". This can happen if headers have been frozen / unfrozen since the locator string was created. Redirecting to that widget.");return _41.getChildFromLocatorSubstring(_48)}
if(_51&&_51.attribute==isc.Canvas.$193){var _5=this.grid.fields[_45];if(_45==this.grid.getCheckboxFieldPosition()){_51.value=!!_5.$1066}else _51.value=_5.sortDirection}
return this.members[this.grid.getLocalFieldNum(_45)]}
return this.Super("getChildFromLocatorSubstring",arguments)}},_1);if(!_3){_4.tabIndex=-1}
if(this.headerButtonConstructor!=null)
_4.buttonConstructor=this.headerButtonConstructor;var _41=this.createAutoChild("header",_4,isc.Toolbar);if(_41.canReorderItems&&!_41.dontObserve){this.observe(_41,"itemDragReordered",function(_48,_49){this.headerDragReordered(_48,_49,_41)})}
if(_41.canResizeItems&&!_41.dontObserve)this.$1067(_41);if(this.headerSpans)this.$1065(_1.buttons,_41);return _41},isc.A.headerButtonResized=function isc_ListGrid_headerButtonResized(_1){if(this.$100s)return;if(this.$101c)return;if(this.$99i!=null&&this.$99i==this.getField(_1.name)){return}
this.$935("header button resized")},isc.A.reorderFieldsForHeaderSpans=function isc_ListGrid_reorderFieldsForHeaderSpans(_1){if(_1==null)_1=this.headerSpans;if(_1==null)return;var _2=false;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=this.getSpannedFields(_4);if(_5==null||_5.length==0||_5.length==1)continue;var _6=this.fields,_7=_5.length,_8=[],_9=null;for(var _10=0;_10<_7;_10++){var _11=this.completeFields.findIndex("name",_5[_10]);if(_11==-1)continue;if(_9==null){_9=!!(this.completeFields[_11].frozen)}else{if(_9!=!!(this.completeFields[_11].frozen)){this.logWarn("HeaderSpan with title:"+_4.title+" has both frozen and unfrozen fields specified. This is not supported.")}}
_8.add({field:_5[_10],pos:this.completeFields.findIndex("name",_5[_10])})}
_8.sortByProperty("pos",Array.ASCENDING);if(_8.length>0&&(_8.last().pos-_8.first().pos)>(_8.length-1))
{this.logWarn("HeaderSpan with title "+_4.title+" spans fields that are not adjacent in the specified fields array. Reordering fields such that they are adjacent and can be spanned.");var _12=_8.first().pos;for(var _10=0;_10<_7;_10++){var _13=_5[_10],_14=this.completeFields.findIndex("name",_13);if(_14==-1)continue;if(_12!=_14){_2=true;this.completeFields.slide(_14,_12)}
_12+=1}}else if(_4.spans){_2=this.reorderFieldsForHeaderSpans(_4.spans)}}
return _2},isc.A.buildSpanMap=function isc_ListGrid_buildSpanMap(_1,_2,_3,_4){if(_4==null)_4={};if(_1==null)_1=this.headerSpans;for(var i=0;i<_1.length;i++){var _6=_1[i];if(_2)_6.parentSpan=_2;if(_6.spans){this.buildSpanMap(_6.spans,_6,_3,_4)}else if(_6.fields){if(_3==true){_6=isc.addProperties({},_6);_6.fields=_6.fields.duplicate();for(var j=0;j<_6.fields.length;){var _8=_6.fields[j];var _9=this.getField(_8);if(_9==null||_9.shouldPrint==false){_6.fields.removeAt(j)}else{++j}}
_6.fields.removeAll(_6.fields.findAll("shouldPrint",false))}
for(var j=0;j<_6.fields.length;j++){_4[_6.fields[j]]=_6}}else{this.logWarn("ListGrid passed unexpected header span object with neither fields nor spans specified:"+this.echo(_6))}}
return _4},isc.A.getSpannedFields=function isc_ListGrid_getSpannedFields(_1,_2){if(_1==null)return[];if(_1.fields){var _3=_1.fields;if(_2){var _4=[];for(var i=0;i<_1.fields.length;i++){var _6=(this.completeFields||this.fields).find("name",_1.fields[i]);if(!_6||_6.canHide==false){continue}
_4.add(_1.fields[i])}
_3=_4}
return _3}
var _3=[];if(_1.spans){for(var i=0;i<_1.spans.length;i++){_3.addList(this.getSpannedFields(_1.spans[i],_2))}}
return _3},isc.A.$101r=function isc_ListGrid__headerSpanVisible(_1,_2){if(_2.spans){for(var i=0;i<_2.spans.length;i++){if(this.$101r(_1,_2.spans[i]))return true}
return false}else{return(_1.intersect(_2.fields).length>0)}},isc.A.$1065=function isc_ListGrid__addHeaderSpans(_1,_2,_3,_4){if(_3==null)_3=this.headerSpans;var _5=_1.getProperty(this.fieldIdProperty);for(var i=0;i<_3.length;i++){var _7=_3[i];if(_7.fields!=null&&_7.spans!=null){this.logWarn("ListGrid specified with headerSpan config object containing both spans and fields. This is not supported - spanned fields must be all frozen or all not frozen. Span Configuration:\n"+this.echo(_7));_7.fields=null}
if(!this.$101r(_5,_3[i]))continue;var _8=this,_9=this.createHeaderSpan(_2,_7);_2.addSpan(_9);if(_9.spans){this.$1065(_1,_2,_9.spans,_9)}}},isc.A.createHeaderSpan=function isc_ListGrid_createHeaderSpan(_1,_2){var _3=this,_4=_2.liveObject;if(_4==null||_4.destroyed||_4.destroying||_4.$6w){var _5=_2,_6=isc.addProperties(this.getButtonProperties(),{_constructor:_1.buttonConstructor,height:this.headerSpanHeight,align:"center",valign:this.headerSpanVAlign,showRollOver:false,showContextMenu:function(){return _3.headerSpanContextClick(this)},shouldClipTitle:function(_4){if(_3.autoSizeHeaderSpans)return false;return this.Super("shouldClipTitle",arguments)}},_5);if(_5.headerTitleStyle){_6.titleStyle=_5.headerTitleStyle}
if(_5.headerBaseStyle!=null){_6.baseStyle=_5.headerBaseStyle}
if(_5.headerTitle!=null)_6.title=_5.headerTitle;_4=_5.liveObject=this.createAutoChild("headerSpan",_6);var _7=_5.height||(this.headerSpanProperties?this.headerSpanProperties.height:null)||(this.headerSpanDefaults?this.headerSpanDefaults.height:null)||this.headerSpanHeight;_4.$101s=(_7==null)}
_4.$1062={};var _8=this.getSpannedFields(_2);for(var _9=0;_9<_8.length;_9++){_4.$1062[_8[_9]]=true}
_4.$1061=null;_4.spanConfig=_2;return _4},isc.A.$1064=function isc_ListGrid__removeHeaderSpans(_1,_2){var _3=[],_4=_1.getProperty(this.fieldIdProperty);for(var i=0;i<_4.length;i++){var _6=this.spanMap[_4[i]];while(_6!=null&&_6.liveObject!=null){_6.liveObject.$1061=null;_6=_6.parentSpan}}},isc.A.getHiliteCriteriaFields=function isc_ListGrid_getHiliteCriteriaFields(){var _1=this.Super("getAllFields",arguments);if(!_1)return;_1=_1.duplicate();if(this.showHeaderSpanTitlesInHiliteEditor&&this.headerSpans!=null){for(var i=0;i<_1.length;i++){var _3=this.spanMap[_1[i].name],_4=false,_5=[{title:this.getFieldTitle(_1[i])}];while(_3!=null){_4=true;_5.addAt(_3,0);_3=_3.parentSpan}
if(_4){var _6=_5.getProperty("title").join(this.hiliteEditorSpanTitleSeparator);_1[i]=isc.addProperties({},_1[i],{title:_6})}}}
return _1},isc.A.dirtyHeader=function isc_ListGrid_dirtyHeader(){if(this.header)this.header.markForRedraw()},isc.A.updateHeader=function isc_ListGrid_updateHeader(){var _1=this.frozenHeader?this.headerLayout:this.header;if(_1){_1.markForDestroy();_1.clear();if(this.showHeader){var _2=[this.frozenHeader,this.header];for(var i=0;i<_2.length;i++){if(_2[i]==null)continue;if(_2[i].$106w!=null){for(var _4=0;_4<_2[i].$106w.length;_4++){var _5=_2[i].$106w[_4];if(_5){_5.deparent();if(this.$1068)_5.destroy()}}}}
delete this.$1068}
_1.clearIDs();this.headerMenuButton=null}
this.header=this.frozenHeader=this.headerLayout=null;var _6=this.showHeader,_7;if(_6){_7=this.gridComponents.indexOf(this.$97p);if(_7==-1){_6=false;this.logWarn("showHeader set to true, but header not included in grid header components. The header will not be shown.")}}
if(_6){if(this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights()}
this.makeHeader();this.updateGridComponents()}else if(this.sorter){this.sorter.hide()}},isc.A.setHeaderHeight=function isc_ListGrid_setHeaderHeight(_1){var _2=this.headerHeight;if(_2==_1)return;this.headerHeight=_1;this.$99l(_2==0)},isc.A.$99l=function isc_ListGrid__updateHeaderHeight(_1){if(this.showHeader==false)return;if(!this.header&&this.getHeaderHeight()>0){var _2=this.gridComponents.indexOf("header");if(_2==-1){return}
if(this.isDrawn()){this.updateGridComponents()}}else{if(_1)this.updateHeader();this.layoutChildren(this.$98k)}
this.updateSorter();if(this.headerSpans){this.header.$101n(true)}},isc.A.setShowHeader=function isc_ListGrid_setShowHeader(_1){if(_1==this.showHeader)return;this.showHeader=_1;this.updateHeader();this.layoutChildren(this.$98l)},isc.A.shouldShowHeaderMenuButton=function isc_ListGrid_shouldShowHeaderMenuButton(_1,_2,_3){if(!_2&&this.ns.EH.$vc())return false;var _4;if(_1.showDefaultContextMenu==false){_4=false}
else if(_1.showHeaderContextMenuButton!=null){_4=_1.showHeaderContextMenuButton}else{_4=this.showHeaderMenuButton}
if(this.showHeaderContextMenu&&_4&&_1.masterIndex!=null){if(_3){_1.$106v=this.getHeaderContextMenuItems(_1.masterIndex)||[]}
return(_1.$106v&&_1.$106v.length>0)}
return false},isc.A.getHeaderMenuButton=function isc_ListGrid_getHeaderMenuButton(_1){if(!this.headerMenuButton||this.headerMenuButton.destroyed){var _2={snapTo:(this.isRTL()?"L":"R"),resizeFrom:(this.isRTL()?"L":"R")};if(this.headerMenuButtonHeight)_2.height=this.headerMenuButtonHeight;if(this.headerMenuButtonWidth)_2.width=this.headerMenuButtonWidth;if(this.headerMenuButtonIcon)_2.icon=this.headerMenuButtonIcon;if(this.headerMenuButtonIconHeight){_2.iconHeight=this.headerMenuButtonIconHeight}
if(this.headerMenuButtonIconWidth){_2.iconWidth=this.headerMenuButtonIconWidth}
if(this.headerMenuButtonBaseStyle){_2.baseStyle=this.headerMenuButtonBaseStyle}
if(this.headerMenuButtonTitleStyle){_2.titleStyle=this.headerMenuButtonTitleStyle}
if(this.headerMenuButtonSrc)_2.src=this.headerMenuButtonSrc;this.createAutoChild("headerMenuButton",_2,"Button",true)}
this.headerMenuButton.masterIndex=_1.masterIndex;var _3=0,_4=this.fieldIsFrozen(_1.masterIndex);if(!_4&&this.body!=null){var _5=this.body.getViewportWidth(),_6=_1.getScrollWidth();if(this.isRTL()){}else{var _7=_1.getLeft(),_8=_7-this.body.getScrollLeft(),_9=_8+_6-_5;if(this.$89e())_9+=this.$89f();if(this.body.vscrollOn)_9-=this.body.getScrollbarSize();if(_9>0){_3=-_9}}}else if(_4&&this.frozenBody!=null){var _5=this.getViewportWidth(),_6=_1.getScrollWidth();if(this.isRTL()){}else{var _9;if(this.sorter!=null&&this.$89e()){_9=_1.getPageLeft()+_6-this.sorter.getPageLeft()}else{_9=_1.getLeft()+_6-_5;if(this.frozenBody.vscrollOn)_9-=this.frozenBody.getScrollbarSize()}
if(_9>0){_3=-_9}}}
this.headerMenuButton.setSnapOffsetLeft(_3);this.headerMenuButton.canDragResize=(_1.canDragResize!=null?_1.canDragResize&&this.canResizeFields:this.canResizeFields);return this.headerMenuButton});isc.evalBoundary;isc.B.push(isc.A.headerMenuButtonClick=function isc_ListGrid_headerMenuButtonClick(){var _1=this.header,_2=_1.containsEvent()?_1.getMouseOverButtonIndex():-1;if(_2<0&&this.frozenHeader){_1=this.frozenHeader;_2=_1.getMouseOverButtonIndex()}
if(_2==-1||!this.headerMenuButton)return;var _3=_1.getMember(_2),_4=_3.getPageBottom(),_5=this.$61p?this.$61p.getVisibleWidth():isc.Menu.getPrototype().defaultWidth,_6=_3.getPageLeft(),_7=this.headerMenuButton.getPageRight(),_8=this.isRTL()?Math.min(_6,_7-_5):Math.max(_6,_7-_5);this.displayHeaderContextMenu(this.headerMenuButton,[_8,_4]);this.headerMenuButton.bringToFront()},isc.A.headerMenuButtonDoubleClick=function isc_ListGrid_headerMenuButtonDoubleClick(){var _1=this.header,_2=_1.getMouseOverButtonIndex();if(_2==-1&&this.frozenHeader){_1=this.frozenHeader;_2=_1.getMouseOverButtonIndex()}
if(_2==-1)return;if(this.frozenFields&&_1==this.header){_2+=this.frozenFields.length}
isc.Menu.hideAllMenus();return this.headerDoubleClick(_2,_1)},isc.A.$100u=function isc_ListGrid__showHeaderMenuButton(_1){var _2=this.getHeaderMenuButton(_1);if(_2.masterElement!=null)_2.masterElement.markForRedraw();_1.addPeer(_2);_2.enable();_2.addProperties({dragTarget:_1});if(_1.zIndex>_2.zIndex)_2.bringToFront();if(!_2.isVisible()){_2.show()}
_1.markForRedraw();return _2},isc.A.$98m=function isc_ListGrid__hideHeaderMenuButton(_1){var _2=this.headerMenuButton;if(_2!=null&&_2.isVisible()){var _3=_2.masterElement;if(_1==null)_1=_3;if(_3==_1){_2.hide();if(_3!=null)_3.markForRedraw()}}},isc.A.shouldWrapHeaderTitle=function isc_ListGrid_shouldWrapHeaderTitle(_1){var _2=this.shouldAutoFitField(_1);if(_2){var _3=this.getAutoFitWidthApproach(_1);if(_3=="title"||_3=="both"){return false}}
if(_1.wrap!=null)return _1.wrap;return this.wrapHeaderTitles},isc.A.$106u=function isc_ListGrid__shouldClipHeaderTitle(_1){var _2=this.fields[_1];if(this.autoFitHeaderHeights)return false;if(_2.wrap==true)return false;if(_2.wrap==null&&this.wrapHeaderTitles)return false;var _3=this.shouldAutoFitField(_2);if(_3){var _4=this.getAutoFitWidthApproach(_2);if(_4=="title"||_4=="both"){return false}}
return true},isc.A.$1069=function isc_ListGrid__getHeaderTitleClipperID(_1){if(!_1||!_1.name)return null;return this.$4b(_1.name+this.$27m)},isc.A.headerTitleClipped=function isc_ListGrid_headerTitleClipped(_1){var _2=this.fields[_1],_3=this.$1069(_2);if(_3==null)return false;var _4=isc.Element.get(_3);if(_4==null)return false;if(isc.Browser.isChrome||(isc.Browser.isMoz&&isc.Browser.version>=7))
{var _5=this.getDocument().createRange();_5.selectNodeContents(_4);var _6=_5.getBoundingClientRect();var _7=_4.getBoundingClientRect();return _7.width<_6.width}else{return isc.Element.getClientWidth(_4)<_4.scrollWidth}},isc.A.getHeaderButtonTitle=function isc_ListGrid_getHeaderButtonTitle(_1,_2){var _3=_1;if(isc.isA.Object(_1))_3=_1.masterIndex;else{_1=this.getFieldHeaderButton(_3)}
var _4=this.fields[_3];if(!_4)return"";var _5=_4[this.fieldIdProperty],_6=this.isSortField(_5),_7=(_6)&&(!this.showSortArrow||this.showSortArrow==isc.ListGrid.FIELD||this.showSortArrow==isc.ListGrid.BOTH),_8=(this.showSortNumerals==false?false:_6&&this.getSortFieldCount()>1);var _9;if(_8){var _10=this.getSortSpecifier(_5);_9=_10.sortIndex}
var _11=_4.showTitle==false?"":(_4.headerTitle!=null?_4.headerTitle:this.getFieldTitle(_3)),_12=isc.StringBuffer.create(),_13=this.isRTL(),_14=this.getFieldCellAlign(_3,_13);if(_2==null)_2=this.$106u(_3);if(_4.wrap||(_4.wrap==null&&this.wrapHeaderTitles)){if(_8){_12.append("<a style='display:inline-block;",(_13?"float:left;margin-right:":"float:right;margin-left:"),"4px'>",this.getSortNumeralHTML(_5,_9),"</a>")}
if(_7){_12.append(this.getSortArrowImage(_3,false,false,true))}
_12.append(_11)}else if(!_2||!this.clipHeaderTitles){_12.append(_11);if(_7)_12.append(isc.nbsp,this.getSortArrowImage(_3));if(_8){_12.append(isc.nbsp,this.getSortNumeralHTML(_5,_9))}
if(!_2&&_1&&this.shouldLeaveHeaderMenuButtonSpace(_4)&&this.shouldShowHeaderMenuButton(_1))
{_12.append(isc.Canvas.spacerHTML(this.headerMenuButtonWidth,1))}}else{_12.append("<div style='display:inline-block;max-width:100%;text-align:",_14,";vertical-align:middle'>");var _15=0;if(_8){var _16=(_9>=9?12:6);_15+=4+_16;_12.append("<a style='",(_13?"float:left;margin-right:":"float:right;margin-left:"),"4px;width:",_16,"px;overflow:hidden'>",this.getSortNumeralHTML(_5,_9),"</a>")}
if(_7){var _17=this.getSortArrowImage(_3,true,_2);if(_17!=null){_15+=4+_17.width;_12.append(this.getSortArrowImage(_3,false,_2))}}
_12.append("<div");var _18=this.$1069(_4);if(_18!=null){_12.append(" id='",_18,"'")}
_12.append(" style='overflow:hidden;",isc.Browser.$s,":ellipsis;white-space:nowrap");if(isc.Browser.isMoz)_12.append(_13?";margin-left:":";margin-right:",_15,"px");_12.append("'>",_11,"</div>","</div>")}
return _12.release(false)},isc.A.shouldLeaveHeaderMenuButtonSpace=function isc_ListGrid_shouldLeaveHeaderMenuButtonSpace(_1){if(_1.leaveHeaderMenuButtonSpace!=null)return _1.leaveHeaderMenuButtonSpace;if(this.leaveHeaderMenuButtonSpace!=null)return this.leaveHeaderMenuButtonSpace;return _1.align!="center"},isc.A.$99b=function isc_ListGrid__setCheckboxHeaderState(_1){var _2=this.getCheckboxFieldPosition(),_3=this.fields[_2];if(!this.isCheckboxField(_3))return;var _4=(this.canSelectAll==false||this.selectionType=="single")?isc.nbsp:this.$100j(_1,false,true,false,_3);this.setFieldTitle(_2,_4);_3.$1066=_1},isc.A.updateCheckboxHeaderState=function isc_ListGrid_updateCheckboxHeaderState(){var _1=this.getOriginalData();var _2=(isc.isAn.Array(_1)||(isc.isA.ResultSet(_1)&&_1.allMatchingRowsCached()));if(_2){var _3=this.isGrouped?this.getAllRecordsFromGroupTree():_1;var _4=true;for(var i=0,_6=_3.getLength();i<_6;++i){var _7=_3.get(i);if(this.selection.$88o(_7)&&!this.selection.isSelected(_7))
{_4=false;break}}
this.$99b(_4)}},isc.A.defaultHeaderHoverHTML=function isc_ListGrid_defaultHeaderHoverHTML(_1){var _2=this.fields[_1];if(_2==null)return null;if(_2.prompt!=null)return _2.prompt;var _3=this.clipHeaderTitles&&this.showClippedHeaderTitlesOnHover&&this.headerTitleClipped(_1);if(_3){return _2.headerTitle!=null?_2.headerTitle:this.getFieldTitle(_1)}
return null},isc.A.headerHoverHTML=function isc_ListGrid_headerHoverHTML(_1,_2){return _2},isc.A.$106r=function isc_ListGrid__showHeaderHover(_1,_2){var _3=this.fields[_1];if(_2&&!isc.is.emptyString(_2)){var _4=this.$107a(_3);isc.Hover.show(_2,_4,(_3.hoverRect||this.headerHoverRect))}else isc.Hover.clear()},isc.A.$107a=function isc_ListGrid__getHeaderHoverProperties(_1){var _2={};if(_1){_2=isc.addProperties({},{align:(_1.hoverAlign!=null?_1.hoverAlign:this.headerHoverAlign),baseStyle:(_1.hoverStyle!=null?_1.hoverStyle:this.headerHoverStyle),height:(_1.hoverHeight!=null?_1.hoverHeight:this.headerHoverHeight),hoverDelay:(_1.headerHoverDelay!=null?_1.headerHoverDelay:_1.hoverDelay!=null?_1.hoverDelay:this.headerHoverDelay),moveWithMouse:(_1.hoverMoveWithMouse!=null?_1.hoverMoveWithMouse:this.headerHoverMoveWithMouse),opacity:(_1.hoverOpacity!=null?_1.hoverOpacity:this.headerHoverOpacity),valign:(_1.hoverVAlign!=null?_1.hoverVAlign:this.headerHoverVAlign),width:(_1.hoverWidth!=null?_1.hoverWidth:this.headerHoverWidth),wrap:(_1.hoverWrap!=null?_1.hoverWrap:this.headerHoverWrap)})}else{_2=isc.addProperties({},{align:this.headerHoverAlign,baseStyle:this.headerHoverStyle,height:this.headerHoverHeight,hoverDelay:this.headerHoverDelay,moveWithMouse:this.headerHoverMoveWithMouse,opacity:this.headerHoverOpacity,valign:this.headerHoverVAlign,width:this.headerHoverWidth,wrap:this.headerHoverWrap})}
return _2},isc.A.$95w=function isc_ListGrid__headerClick(_1,_2){var _3=_2.getMember(_1).masterIndex;return this.headerClick(_3,_2)},isc.A.headerClick=function isc_ListGrid_headerClick(_1,_2){if(this.editingOn&&this.editProxy&&this.editProxy.headerClick){this.editProxy.headerClick(_1,_2);return}
if(this.onHeaderClick&&(this.onHeaderClick(_1,_2)==false)){return}
var _3=this.fields[_1];if(this.isCheckboxField(_3)&&this.selectionType!="single"&&this.canSelectAll!=false){if(_3.$1066){this.deselectAllRecords();this.$99b(false)}else{this.userSelectAllRecords();this.updateCheckboxHeaderState()}
return false}
if(_3&&this.canAutoFitField(_3)&&this.headerAutoFitEvent=="click"){this.autoFitField(_1)}
if(!this.$95y(_3))return false;var _4=_3[this.fieldIdProperty],_5=this.isSortField(_4)?this.getSortSpecifier(_4):null,_6=isc.EventHandler,_7=_6.getKey(),_8=_6.shiftKeyDown(),_9=this.$98w,_10=_3.sortDirection;if(_8&&this.$99d()&&this.$99c(_3)){if(this.isSortField(_4)){if(_10==_9||this.canUnsort==false){this.toggleSort(_4)}else{this.toggleSort(_4,"unsort")}}else{this.$107b(_3)}}else{if(this.isSortField(_4)&&this.getSortFieldCount()==1){if(_10==_9||this.canUnsort==false){this.toggleSort(_4)}else{this.toggleSort(_4,"unsort")}}else{var _11=this.$99f(_3);this.setSort([{property:_4,direction:_11}])}}
return false},isc.A.$95x=function isc_ListGrid__headerDoubleClick(_1,_2){if(this.data&&this.data.lengthIsKnown&&!this.data.lengthIsKnown()){this.$100k=true;this.$100l=_1;this.$100m=_2;return}
return this.headerMenuButtonDoubleClick()},isc.A.headerDoubleClick=function isc_ListGrid_headerDoubleClick(_1,_2){var _3=this.fields[_1];if(this.isCheckboxField(_3))return;if(_3&&this.canAutoFitField(_3)&&this.headerAutoFitEvent=="doubleClick"){this.autoFitField(_1)}
return false},isc.A.fieldDragResizeStart=function isc_ListGrid_fieldDragResizeStart(){this.$101c=true;this.autoFitFieldsFillViewport=false;this.makeDragLine();this._dragLine.resizeTo(2,this.getVisibleHeight()-(this.body.hscrollOn?this.body.getScrollbarSize():0));var _1=this.ns.EH.dragTarget;var _2=this.getField(_1.masterIndex);if(_2){_2.autoFitWidth=false;var _3=_2.wrap;if(_3==null)_3=this.wrapHeaderTitles;if(_3!=_1.wrap){_1.setWrap(_3)}}
_1.setWidth(_1.getVisibleWidth());_1.setOverflow("hidden")},isc.A.fieldDragResizeMove=function isc_ListGrid_fieldDragResizeMove(){var _1=this.ns.EH,_2=_1.dragTarget;if(this.autoSizeHeaderSpans!=null){this.$107c=this.autoSizeHeaderSpans;this.autoSizeHeaderSpans=false}
var _3=this.header.$30n;this.showDragLineForField(_3);if(this.resizeFieldsInRealTime){this.realtimeFieldResize(_3)}
if(this.headerMenuButton&&this.headerMenuButton.snapOffsetLeft!=0){this.headerMenuButton.setSnapOffsetLeft(0)}},isc.A.realtimeFieldResize=function isc_ListGrid_realtimeFieldResize(_1){var _2=isc.EH,_3=_2.dragResizeWidth,_4=this.getMinFieldWidth(this.fields[_1],true);if(_3<_4)_3=_4;this.$72y[_1]=_3;if(this.$103k){this.syncBodyScrolling()}
this.$101m=true;this.setBodyFieldWidths(this.$72y);this.body.useQuickDrawAheadRatio=true;this.body.redraw("fieldDragResize");delete this.body.useQuickDrawAheadRatio;delete this.$101m;if(!this.isRTL()){var _5=this.body.getScrollLeft();if(_5>0){this.header.scrollTo(_5,null,"headerResize")}}else{if(this.header.getScrollLeft()<this.header.getLeft()){this.header.scrollTo(this.header.getLeft())}}},isc.A.fieldDragResizeStop=function isc_ListGrid_fieldDragResizeStop(){if(this.$107c!=null){this.autoSizeHeaderSpans=this.$107c;delete this.$107c}
this.hideDragLine()},isc.A.headerDragReordered=function isc_ListGrid_headerDragReordered(_1,_2,_3){var _4=_3.getMember(_1).masterIndex,_5=_3.getMember(_2).masterIndex;this.reorderField(_4,_5)},isc.A.reorderField=function isc_ListGrid_reorderField(_1,_2){this.reorderFields(_1,_1+1,_2-_1)},isc.A.reorderFields=function isc_ListGrid_reorderFields(_1,_2,_3){if(this.showFilterEditor&&this.filterEditor!=null){this.filterEditor.reorderFields(_1,_2,_3)}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.reorderFields(_1,_2,_3)}
var _4=this.fields[_1],_5=this.fields[_2-1],_6=_1+_3,_7=this.fields[_6];var _8=this.$95z(),_9=this.fields[_8];if(this.$72y!=null)this.$72y.slideRange(_1,_2,_1+_3);if(this.completeFields==null)this.setFields(this.fields);if(this.completeFields.contains(_7)){var _10=this.completeFields.indexOf(_4),_11=this.completeFields.indexOf(_5)+1,_12=this.completeFields.indexOf(_7);this.completeFields.slideRange(_10,_11,_12)}
this.deriveVisibleFields();if(_8!=null){_8=this.fields.indexOf(_9);if(_8==-1)_8=null;this.$100i(_8)}
var _13;if(!this.frozenFields){_13=this.getFieldHeader(_1);if(_13){_13.reorderItems(this.getLocalFieldNum(_1),this.getLocalFieldNum(_2),this.getLocalFieldNum(_1+_3))}}else{_13=this.getFieldHeader(_1);this.rebuildForFreeze();this.syncHeaderScrolling(this.body.getScrollLeft())}
if(_8!=null&&_13&&this.selectHeaderOnSort){this.selectSortFieldHeaderButton()}
var _14=this.$94e;if(_14){var _15=this.$20w,_16=this.getEditRow(),_17=this.getEditField(),_18=[]
for(var i=0;i<_15.items.length;i++){var _20=_15.items[i];_20.colNum=this.fields.findIndex(this.fieldIdProperty,_20.getFieldName());for(var j=0;j<=_18.length;j++){if(_18[j]==null||_18[j].colNum>_20.colNum){_18.addAt(_20,j);break}}}
_15.items.setArray(_18);this.$96u=this.fields.indexOf(_17)}
var _22=this.body;if(this.frozenFields&&_1<this.frozenFields.length){_22=this.frozenBody}
if(_22){this.body.fields=this.normalFields||this.fields;if(this.frozenBody)this.frozenBody.fields=this.frozenFields;this.setBodyFieldWidths(this.$72y);if(_22.$90x!=null){this.$100t(_22)}
if(!_22.isDirty())this.$930("reorderFields")}
this.handleFieldStateChanged()},isc.A.remapEditFieldsForFreeze=function isc_ListGrid_remapEditFieldsForFreeze(){if(this.$94e){var _1=this.getEditForm(),_2=_1.getItems();for(var i=0;i<_2.length;i++){var _4=_2[i];_4.colNum=this.fields.findIndex(this.fieldIdProperty,_4.getFieldName());var _5=this.fields[_4.colNum];if(!this.$989&&_5.frozen)_4.containerWidget=this.frozenBody;else _4.containerWidget=this.body}}},isc.A.headerDragResized=function isc_ListGrid_headerDragResized(_1,_2,_3){var _4=_3.getMember(_1).masterIndex;for(var i=0;i<this.fields.length;i++){if(i==_4)continue;this.fields[i].$107d=this.fields[i].width;this.fields[i].$107e=this.fields[i].autoFitWidth
this.fields[i].width=this.getFieldWidth(i);this.fields[i].autoFitWidth=false;var _6=this.getFieldHeaderButton(i);if(_6){_6.$107f=_6.$3t;_6.$3t=this.fields[i].width}}
this.resizeField(_4,_2,true);for(var i=0;i<this.fields.length;i++){if(i==_4)continue;this.fields[i].width=this.fields[i].$107d;delete this.fields[i].$107d;this.fields[i].autoFitWidth=this.fields[i].$107e
delete this.fields[i].$107e;var _6=this.getFieldHeaderButton(i);if(_6){_6.$3t=_6.$107f;delete _6.$107f}}
this.$101c=false;var _7=this.body.getScrollLeft();this.syncHeaderScrolling(_7,top);this.syncFilterEditorScrolling(_7,top);this.syncSummaryRowScrolling(_7,top)},isc.A.setCanResizeFields=function isc_ListGrid_setCanResizeFields(_1){if(this.canResizeFields==_1)return;this.canResizeFields=_1;if(_1==false)this.canAutoFitFields=false;if(this.header)this.header.setCanResizeItems(_1);if(this.frozenHeader)this.frozenHeader.setCanResizeItems(_1);if(this.headerMenuButton)this.headerMenuButton.canDragResize=_1;if(_1){if(this.header&&!this.header.dontObserve)this.$1067(this.header);if(this.frozenHeader&&!this.frozenHeader.dontObserve)
this.$1067(this.frozenHeader)}else{if(this.header)this.$107g(this.header);if(this.frozenHeader)this.$107g(this.frozenHeader)}},isc.A.$1067=function isc_ListGrid__observeHeaderResize(_1){this.observe(_1,"itemDragResized",function(_2,_3){this.headerDragResized(_2,_3,_1)});this.observe(_1,"dragResizeMemberStart",function(){this.fieldDragResizeStart()});this.observe(_1,"dragResizeMemberMove",function(){this.fieldDragResizeMove()});this.observe(_1,"dragResizeMemberStop",function(){this.fieldDragResizeStop()})},isc.A.$107g=function isc_ListGrid__ignoreHeaderResize(_1){if(this.isObserving(_1,"itemDragResized"))
this.ignore(_1,"itemDragResized");if(this.isObserving(_1,"dragResizeMemberStart"))
this.ignore(_1,"dragResizeMemberStart");if(this.isObserving(_1,"dragResizeMemberMove"))
this.ignore(_1,"dragResizeMemberMove");if(this.isObserving(_1,"dragResizeMemberStop"))
this.ignore(_1,"dragResizeMemberStop")},isc.A.resizeField=function isc_ListGrid_resizeField(_1,_2,_3){this.$99k([_1],[_2],[_3])},isc.A.$99k=function isc_ListGrid__resizeFields(_1,_2,_3){for(var i=0;i<_1.length;i++){var _5=_1[i];if(!isc.isA.Number(_5))_5=this.getFieldNum(_5);if(_5==-1){_1.removeAt(i);_2.removeAt(i);_3.removeAt(i);i--}else{_1[i]=_5;var _6=this.getMinFieldWidth(this.fields[_5],true);if(_6>_2[i]){_2[i]=_6}}}
if(_1.length==0)return;var _7=this.header&&this.header.isDrawn();if(_7){var _8=this.header.instantRelayout,_9=this.frozenHeader?this.frozenHeader.instantRelayout:null;this.header.instantRelayout=false;if(this.frozenHeader)this.frozenHeader.instantRelayout=false}
for(var i=0;i<_1.length;i++){var _5=_1[i],_10=_2[i];if(_7){var _11=this.getFieldHeader(_5),_12=this.getLocalFieldNum(_5);_11.getMember(_12).setOverflow("hidden");_11.getMember(_12).setWidth(_10)}
var _13=_3[i];if(_13==null||_13){this.fields[_5].width=_10;this.fields[_5].autoFitWidth=false}
if(this.$72y!=null){this.$72y[_5]=_10}}
if(_7){this.header.instantRelayout=_8;this.header.reflowNow("resized headers");if(this.frozenHeader){this.frozenHeader.instantRelayout=_9;this.frozenHeader.reflowNow("resized headers")}}
if(!this.isDrawn())return;this.$101m=true;this.setBodyFieldWidths(this.$72y);if(this.body.isDirty()){this.body.redraw("setting body field widths")}
delete this.$101m;if(!this.$94h&&this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$99l()}
if(this.isRTL()&&this.header!=null){this.syncBodyScrolling()}
if(this.showFilterEditor&&this.filterEditor){this.filterEditor.$99k(_1,_2,_3)}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.$99k(_1,_2,_3)}
this.handleFieldStateChanged(true)},isc.A.$89e=function isc_ListGrid__showSortButton(){var _1=this.showSortArrow;if(_1!=null){return(_1==isc.ListGrid.CORNER||_1==isc.ListGrid.BOTH)}
return this.$924()},isc.A.$924=function isc_ListGrid__shouldLeaveScrollbarGap(_1){var _2=(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH);if(this.leaveScrollbarGap&&!_2)return true;if(!this.body||this.isEmpty())return false;if(_1==null)_1=this.body.vscrollOn;if(_1)return true;var _3=this.body,_4=this.getHeaderHeight(),_5=this.getInnerHeight()-this.body.getVMarginBorder()-
(this.showHeader?_4:0);if(_2){_5=(this.getTotalRows()*this.cellHeight);var _6=this.getAutoFitMaxBodyHeight();if(_6&&_6<_5){_5=_6}
if(this.autoFitMaxRows&&(this.autoFitMaxRows*this.cellHeight)>_5){_5=(this.autoFitMaxRows*this.cellHeight)}}
if(_5<=0)return false;return this.predictScrollbarGap&&this.bodyOverflow==isc.Canvas.AUTO&&(this.getTotalRows()*this.cellHeight>_5)},isc.A.getSorterTop=function isc_ListGrid_getSorterTop(){return(this.headerLayout||this.header).getTop()},isc.A.getSorterLeft=function isc_ListGrid_getSorterLeft(){if(this.isRTL()){return this.getLeftMargin()+this.getLeftBorderSize()+this.getLeftPadding();}else{var _1=(this.headerLayout||this.header);var _2=_1.getWidth()+_1.getLeft()-this.$89f();if(this.$924()){_2+=this.body!=null?this.body.getScrollbarSize():this.getScrollbarSize()}
return _2}},isc.A.$89f=function isc_ListGrid__getSorterWidth(_1){var _2=this.sorter;if(_1||_2==null){var _3=this.body!=null?this.body.getScrollbarSize():this.getScrollbarSize(),_4;if(_3<=0)_4=16;else _4=Math.max(5,_3);return _4}else{return _2.getWidth()}},isc.A.makeCornerSortButton=function isc_ListGrid_makeCornerSortButton(){this.sorter=this.createAutoChild("sorter",isc.addProperties(this.getButtonProperties(),this.sorterDefaults,{ID:this.getID()+"_sorter",width:this.$89f(),height:this.getHeaderHeight(),backgroundColor:this.headerBackgroundColor,imgDir:this.widgetImgDir,visibility:(this.$89e()?isc.Canvas.INHERIT:isc.Canvas.HIDDEN),ariaState:{label:this.sorterButtonTitle}}));this.addChild(this.sorter,"sorter",false)},isc.A.$951=function isc_ListGrid__sorterContextClick(){if(this.sorterContextClick&&!this.sorterContextClick())return false;var _1=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)_1=this.showCornerContextMenu;if(_1)return this.displayHeaderContextMenu(this.sorter)},isc.A.headerBarContextClick=function isc_ListGrid_headerBarContextClick(_1){var _2=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)_2=this.showCornerContextMenu;if(_2&&(isc.EH.isKeyEvent()||_1.containsEvent())){var _3=isc.EH.isKeyEvent()?_1.getFocusButtonIndex():_1.getMouseOverButtonIndex();return this.displayHeaderContextMenu(_1.getMember(_3))}},isc.A.headerSpanContextClick=function isc_ListGrid_headerSpanContextClick(_1){var _2=this.getHeaderSpanContextMenuItems(_1);if(!_2||_2.length==0)return false;if(!this.spanContextMenu){this.spanContextMenu=this.createAutoChild("spanContextMenu",{items:_2,autoFitFieldWidths:true},this.getMenuConstructor())}else{this.spanContextMenu.setItems(_2)}
this.spanContextMenu.showContextMenu();return false},isc.A.displayHeaderContextMenu=function isc_ListGrid_displayHeaderContextMenu(_1,_2){if(!_1)return;var _3=this.fields[_1.masterIndex];if(_3&&_3.showDefaultContextMenu==false)return false;var _4=this.getHeaderContextMenuItems(_1.masterIndex);if(_4.length==0)return;if(!this.$61p)this.$61p=this.getHeaderContextMenu(_1);this.$61p.setData(_4);this.$618=true;if(_2!=null&&_2.length>0){var _5=this.$61p;_5.target=_1;_5=_5.$107h||_5.$107i||_5;_5.setVisibility("hidden");if(_5!==this.$61p){if(!_5.isDrawn())_5.draw()}else{_5.moveTo(0,0);if(!_5.isDrawn()){_5.draw()}else{_5.redraw()}
_5.placeNear(_2[0],_2[1])}
this.$61p.show();return false}else{return this.$61p.showContextMenu(_1)}},isc.A.getToggleFreezeText=function isc_ListGrid_getToggleFreezeText(_1,_2){var _3={viewer:this,title:_2?_2.title:this.getSummaryTitle(_1)};return(!this.$989&&_1.frozen)?this.unfreezeFieldText.evalDynamicString(this,_3):this.freezeFieldText.evalDynamicString(this,_3)},isc.A.getGroupByText=function isc_ListGrid_getGroupByText(_1){var _2={field:_1,title:this.getSummaryTitle(_1),viewer:this}
return this.groupByText.evalDynamicString(this,_2)},isc.A.$107j=function isc_ListGrid__shouldGroupByField(_1){var _1=this.getField(_1);return!!(_1&&this.$107k(_1)&&this.data.getLength()<=this.groupByMaxRecords)},isc.A.$107k=function isc_ListGrid__canGroupByField(_1){var _1=this.getField(_1);return!!(_1&&((this.canGroupBy==true&&_1.canGroupBy!=false)||(this.canGroupBy!=false&&_1.canGroupBy==true)||(this.editingOn&&this.editProxy&&this.editProxy.canGroupBy)))},isc.A.getHeaderSpanContextMenuItems=function isc_ListGrid_getHeaderSpanContextMenuItems(_1){if(!this.showTreeColumnPicker&&!this.showHeaderSpanContextMenu)return false;var _2=[];if(this.canPickFields){_2[0]={title:this.fieldVisibilitySubmenuTitle,submenu:this.getColumnPickerItems(),icon:"[SKINIMG]actions/column_preferences.png"}}
var _3=this,_4=this.getSpannedFields(_1),_5;if(_4){for(var i=0;i<_4.length;i++){var _7=_4[i],_8=this.getField(_7);if(_8&&!this.$989&&_8.frozen){_5=true;break}}}
if(this.canFreezeFields&&this.fields.length>1&&!_1.parentSpan){if(_5||this.frozenFields==null||this.normalFields.length>_4.length){if(_2.length>0)_2.add({isSeparator:true});_2.add({title:this.getToggleFreezeText(this.completeFields.find(this.fieldIdProperty,_4[0]),_1),grid:this,spanFields:_4,frozen:_5,icon:(_5?"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png"),click:function(){var _9=this.spanFields;for(var i=0;i<_9.length;i++){_3.completeFields.find(_3.fieldIdProperty,_9[i]).frozen=!this.frozen}
_3.rebuildForFreeze()}})}}
return _2},isc.A.shouldShowColumnPicker=function isc_ListGrid_shouldShowColumnPicker(_1){if(_1.treeField||_1.canHide===false)return false;var _2=this.getSummaryTitle(_1);if(_2==null||isc.isAn.emptyString(_2))return false;return true},isc.A.getColumnPickerItems=function isc_ListGrid_getColumnPickerItems(){var _1=[],_2=this;for(var i=0;i<this.completeFields.length;i++){var _4=this.completeFields[i];if(!this.shouldShowColumnPicker(_4))continue;var _5=this.getSummaryTitle(_4);var _6=this.spanMap?this.spanMap[_4.name]:null;if(this.showTreeColumnPicker&&_6){var _7=[_6],_8=_6.parentSpan;while(_8!=null){_7.add(_8);_8=_8.parentSpan}
var _9="";for(var _10=_7.length-1;_10>=0;_10--){var _11=_7[_10];if(!_1.find("spanConfig",_11)){_1.add({title:_9+_11.title,autoDismiss:false,spanConfig:_11,click:function spanMenu_click(_23,_14,_24){var _12=_2.getSpannedFields(_14.spanConfig,true);var _13=_14.anySpannedFieldsVisible(true);if(_13)_2.hideFields(_12.duplicate())
else _2.showFields(_12.duplicate());_24.body.delayCall("markForRedraw")},anySpannedFieldsVisible:function spanMenu_anySpannedFieldsVisible(_23){var _12=_2.getSpannedFields(this.spanConfig,_23);for(var i=0;i<_12.length;i++){if(_2.fieldIsVisible(_12[i]))return true}
return false},enableIf:function spanMenu_enableIf(_23,_24,_14){var _11=_14.spanConfig;var _12=_2.getSpannedFields(_11);for(var i=0;i<_24.data.length;i++){var _14=_24.data[i];if(_14.fieldName&&_2.fieldIsVisible(_14.fieldName)&&!_12.contains(_14.fieldName))return true}
return false},checkIf:function(_23,_24,_14){return _14.anySpannedFieldsVisible()}})}
_9+="&nbsp;&nbsp;&nbsp;&nbsp;"}
_5=_9+_5}
_1.add({title:_5,fieldName:_4.name,prompt:_4.prompt,autoDismiss:false,checkIf:function(_23,_24,_14){return _2.fieldIsVisible(_14.fieldName)},enableIf:function(_23,_24,_14){var _15=0;for(var i=0;i<_2.fields.length;i++){var _16=_2.fields[i];if(_2.fieldIsVisible(_16)&&_16.$71y){_15++}}
return!(_15===1&&_2.fieldIsVisible(_14.fieldName))},click:function(_23,_14,_24){var _17=_24.$200,_18=_17?_17.data.findIndex("groupItem",true):null,_19=_17?_17.data[_18]:null,_20=(_19&&_19.fieldName==_14.fieldName);if(_2.fieldIsVisible(_14.fieldName)){var _21=_2.fields.length;if(_2.getCurrentCheckboxField()!=null)_21-=1;if(_21>1){_2.hideField(_14.fieldName)}
if(_21==1){var _22=_24.data.find("fieldName",_2.fields[0].name);_24.setItemEnabled(_22,false);this.$107l=_22}}else{_2.showField(_14.fieldName);if(this.$107l){_24.setItemEnabled(this.$107l,true);this.$107l=null}}
if(_20){_17.setItemEnabled(_18,_2.$107j(_19.fieldName))}
_24.body.delayCall("markForRedraw")}})}
return _1},isc.A.getColumnPickerMenu=function isc_ListGrid_getColumnPickerMenu(_1){var _2={canHover:true,showIcons:true,showHover:true,cellHoverHTML:function(_3){return _3.prompt},items:_1};return{title:this.fieldVisibilitySubmenuTitle,submenu:_2,icon:"[SKINIMG]actions/column_preferences.png"}},isc.A.getHeaderContextMenuItems=function isc_ListGrid_getHeaderContextMenuItems(_1){var _2=this.getField(_1);var _3=[],_4=false;var _5=this.$95y(_2);if(_5||!_2){if(_2){var _6=_1!=null?_1:this.$95z();_3[0]={title:this.sortFieldAscendingText,icon:"[SKINIMG]actions/sort_ascending.png",click:"menu.doSort("+_6+", 'ascending')"};_3[1]={title:this.sortFieldDescendingText,icon:"[SKINIMG]actions/sort_descending.png",click:"menu.doSort("+_6+", 'descending')"};_4=true}
if(this.$99d()){_3.add({title:this.configureSortText,field:_2,click:function(_22,_23,_24){_24.grid.askForSort(this.field==null?null:this.field[_24.grid.fieldIdProperty])}});_4=true;if(!_2||this.isSortField(_2[this.fieldIdProperty])){_3.add({title:_2?this.clearSortFieldText:this.clearAllSortingText,field:_2,enableIf:function(_22,_23,_24){return(_2||(!_2&&_23.grid.getSortFieldCount()>0))},click:_2?"menu.doSort("+_6+", 'unsort')":"menu.grid.clearSort();"});_4=true}}}
var _7=(_2&&this.canAutoFitField(_2));if(_7){if(this.canAutoFitFields){_3.add({title:this.autoFitAllText,click:"menu.grid.autoFitFields()"})}
_3.add({title:this.autoFitFieldText,click:"menu.grid.autoFitField("+_1+",true);"})}
if(!_2&&this.showFilterEditor){if(_4)_3.add({isSeparator:true});_3.add({title:this.clearFilterText,click:"menu.grid.clearFilterItemClick();"});_4=true}
if(this.canPickFields&&this.completeFields.length>1){if(this.useAdvancedFieldPicker&&this.completeFields.length>=this.advancedFieldPickerThreshold)
{_3.add(this.createFieldPickerWindowMenuItem(this.fieldVisibilitySubmenuTitle+"..."))}else{var _8=this.getColumnPickerItems();if(_8.length>0){var _9=_8.length>1;if(!_9){var _10=_8[0].fieldName;for(var i=0;i<this.fields.length;i++){if(this.fields[i].name!=_10){_9=true;break}}}
if(_9){if(_4)_3.add({isSeparator:true});_3.add(this.getColumnPickerMenu(_8));_4=true}}}}
var _12=_2&&this.$107k(_2),_13=(this.canGroupBy!=false)&&_2&&_2.canGroupBy!=false&&this.isGrouped;if(_4&&(_13||_12)){_3.add({isSeparator:true})}
if(_12){var _14=_2.groupingModes?_2.groupingModes:(!_2.getGroupValue?(_2.$31u?(_2.$31u.getGroupingModes?_2.$31u.getGroupingModes():_2.$31u.groupingModes):false):false);var _15=null;if(_14){_15=[];var _16=function(_22,_23){if(!_23)_23=_22;_15.add({title:_23,groupType:_22,targetField:_2,fieldName:_2.name,prompt:_2.prompt,checked:_2.groupingMode==_22,click:function(_24,_25,_26){_26.$200.groupField(_25)}})}
if(isc.isAn.Array(_14)){for(var i=0;i<_14.length;i++){_16(_14[i])}}else if(isc.isAn.Object(_14)){for(var _17 in _14){_16(_17,_14[_17])}}}
_3.add({groupItem:true,title:this.getGroupByText(_2),fieldName:_2.name,targetField:_2,prompt:_2.prompt,icon:"[SKINIMG]actions/groupby.png",click:function(_22,_23,_24){_24.groupField(_23)},enabled:this.$107j(_2),canSelectParent:true,submenu:_15});if(this.canMultiGroup){var _18=this;_3.add({title:this.configureGroupingText,icon:"[SKINIMG]actions/groupby.png",targetField:_2,click:function(_22,_23,_24){_18.configureGrouping(this.targetField)},enabled:this.$107j(_2)})}
_4=true}
if(_13){_3.add({title:this.ungroupText,click:"menu.ungroup()",icon:"[SKINIMG]actions/ungroup.png"});_4=true}
if(_2){if(this.canFreezeFields&&this.fields.length>1&&(_2.frozen||(this.frozenFields==null||this.normalFields.length>1))&&!(this.spanMap&&this.spanMap[_2.name])&&_2.canFreeze!=false)
{if(_4)_3.add({isSeparator:true});_3.add({title:this.getToggleFreezeText(_2),grid:this,field:_2,icon:(_2.frozen?"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png"),click:"item.grid.toggleFrozen(this.field,!this.field.frozen)"});_4=true}}
var _19=(this.canAddFormulaFields||(this.editingOn&&this.editProxy&&this.editProxy.canAddFormulaFields));if(_19){if(_4)_3.add({isSeparator:true});if(_2&&_2.userFormula&&_2.canEditFormula!=false){_3.add({title:this.editFormulaFieldText,grid:this,field:_2,click:"item.grid.editFormulaField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add({title:this.removeFormulaFieldText,grid:this,field:_2,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}
_3.add({title:this.addFormulaFieldText,grid:this,click:"item.grid.addFormulaField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_4=true}
var _20=(this.canAddSummaryFields||(this.editingOn&&this.editProxy&&this.editProxy.canAddSummaryFields));if(_20){if(_4)_3.add({isSeparator:true});if(_2&&_2.userSummary&&_2.canEditSummary!=false){_3.add({title:this.editSummaryFieldText,grid:this,field:_2,click:"item.grid.editSummaryField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add({title:this.removeSummaryFieldText,grid:this,field:_2,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}
_3.add({title:this.addSummaryFieldText,grid:this,click:"item.grid.addSummaryField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_4=true}
var _21=(this.canEditHilites||(this.editingOn&&this.editProxy&&this.editProxy.canEditHilites));if(_21){if(_4)_3.add({isSeparator:true});_3.add({title:this.editHilitesText,grid:this,click:"item.grid.editHilites()"})}
return _3});isc.evalBoundary;isc.B.push(isc.A.canAutoFitField=function isc_ListGrid_canAutoFitField(_1){if(_1.canDragResize==false)return false;if(this.canResizeFields==false)return false;if(_1.canAutoFitWidth!=null)return _1.canAutoFitWidth;return!!this.canAutoFitFields},isc.A.clearFilterItemClick=function isc_ListGrid_clearFilterItemClick(){this.setFilterEditorCriteria(null);this.filterByEditor()},isc.A.getHeaderContextMenu=function isc_ListGrid_getHeaderContextMenu(){return this.createAutoChild("headerContextMenu",{ID:this.getID()+"$61p",grid:this},this.getMenuConstructor())},isc.A.getSortArrowImage=function isc_ListGrid_getSortArrowImage(_1,_2,_3,_4){if(_1==null)_1=this.$95z();var _5=null;if(this.showSortArrow!=false&&_1!=null){var _6=this.getField(_1);var _7=_6&&_6.sortDirection;if(_7==null)_7=this.sortDirection;_5=Array.shouldSortAscending(_7)?this.sortAscendingImage:this.sortDescendingImage}
if(_2)return _5;if(_5!=null){return this.imgHTML(isc.addProperties({imgDir:this.widgetImgDir,extraCSSText:(_3&&this.clipHeaderTitles)||_4?(this.isRTL()?"float:left;margin-right:4px":"float:right;margin-left:4px"):null},_5))}else{return isc.Canvas.spacerHTML(1,1)}},isc.A.$950=function isc_ListGrid__sorterClick(){if(this.sorterClick&&!this.sorterClick())return;var _1=this.$95z();if(!this.$95y(_1))return false;if(_1!=null){var _2=this.getField(_1),_3=_2[this.fieldIdProperty],_4=this.$98w,_5=this.$99f(_2);if(this.isSortField(_3)){if(_4==_5||this.canUnsort==false){this.toggleSort(_3)}else{this.toggleSort(_3,"unsort")}}else{this.setSort([{property:_3,direction:_4}])}}else{this.sort(_1,(_1!=null?!Array.shouldSortAscending(this.getField(_1).sortDirection):null))}},isc.A.shouldShowDragLineForRecord=function isc_ListGrid_shouldShowDragLineForRecord(_1){return this.canReorderRecords&&this.showDropLines!=false},isc.A.showDragLineForRecord=function isc_ListGrid_showDragLineForRecord(_1,_2){if(!this.shouldShowDragLineForRecord(_1))return;var _3=this.body;if(_1==null)_1=this.getEventRecordNum();if(_1==-1){if(this._dragLine)this._dragLine.hide();return}
var _4=_3.getVisibleRows()[1];if(_1==-2)_1=_4;if(this._dragLine&&_1!=_4){var _5=this.getCellRecord(_1);if(!this.recordIsEnabled(_5,_1)){return this._dragLine.hide()}}
if(_2==null)_2=this.getRecordDropPosition(_1);var _6=this.getLeftBody();var _7=_6.getPageLeft()+(this.isRTL()&&_6.vscrollOn?_6.getScrollbarSize():0);if(_2==isc.ListGrid.BEFORE){this.showHDragLine(_7,_3.getRowPageTop(_1));this._dragLine.afterRow=_1-1}else if(_2==isc.ListGrid.AFTER){this.showHDragLine(_7,(_3.getRowPageTop(_1)+_3.getRowSize(_1)));this._dragLine.afterRow=_1}else{return this._dragLine.hide()}
if(this.recordDropMove){this.fireCallback("recordDropMove","viewer,recordNum,record,position",[this,_1,this.getRecord(_1),_2])}},isc.A.showHDragLine=function isc_ListGrid_showHDragLine(_1,_2){this.makeDragLine();this._dragLine.resizeTo(this.getViewportWidth()-(this.body.vscrollOn?this.body.getScrollbarSize():0),2);var _3=this.body.getPageTop(),_4=_3+this.body.getVisibleHeight();if(_2<_3)_2=_3;else if(_2>_4)_2=_4;this._dragLine.setPageRect(_1,_2);this._dragLine.show();this._dragLine.bringToFront()},isc.A.showDragLineForField=function isc_ListGrid_showDragLineForField(_1,_2){this.makeDragLine();if(_2==true||!this.body){this._dragLine.resizeTo(2,this.getHeaderHeight())}else{this._dragLine.resizeTo(2,this.getHeaderHeight()+this.body.getVisibleHeight())}
if(_1==null)_1=this.getEventFieldNum();if(_1<0){this._dragLine.hide();return}
var _3=this.ns.EH.dragTarget,_4=(!this.isRTL()?_3.getPageLeft()+this.ns.EH.dragResizeWidth:_3.getPageRight()-this.ns.EH.dragResizeWidth)-1;this._dragLine.setPageRect(_4,this.getPageTop()+(this.showFilterEditor?this.filterEditorHeight:0));this._dragLine.bringToFront();this._dragLine.show()},isc.A.unsort=function isc_ListGrid_unsort(){this.setSort(null)},isc.A.resort=function isc_ListGrid_resort(){this.$998=true;if(this.$166)return this.setSort(isc.shallowClone(this.$166));var _1=this.$95z();if(_1!=null){var _2=this.getField(_1),_3=this.$99f(_2);this.sort(_1,_3)}},isc.A.sort=function isc_ListGrid_sort(_1,_2){var _3,_4;if(isc.isA.String(_1)){_3=_1;_1=this.getFieldNum(_3);if(_1<0){_4=this.getUnderlyingField(_3)}}
if(!_4){var _5=this.$95z(),_6=(_5!=null?Array.shouldSortAscending(this.getField(_5).sortDirection):null);if(_1==null){if(_5!=null){_1=_5}else{for(var i=0;i<this.fields.length;i++){if(this.$99c(this.fields[i])!=false){_1=i;break}}}}
if(_1==null)return false;_4=this.getField(_1)}
if(_4==null){return}
if(_2==null){_2=this.$99f(_4)}
if(_5==_1&&_2==_4.sortDirection)return;var _8={property:_4[this.fieldIdProperty],direction:Array.shouldSortAscending(_2)?"ascending":"descending"};return this.setSort([_8])},isc.A.$95z=function isc_ListGrid__getSortFieldNum(){if(this.sortFieldNum!=null)return this.sortFieldNum;if(this.sortField!=null){var _1=this.getFieldNum(this.sortField);if(_1==-1)_1=null;this.sortFieldNum=_1;var _2=this.getFieldName(this.sortFieldNum);if(_2)this.sortField=_2;return _1}
return null},isc.A.$100i=function isc_ListGrid__setSortFieldNum(_1){this.sortFieldNum=_1;var _2=this.getFieldName(_1);this.sortField=_2},isc.A.getSortField=function isc_ListGrid_getSortField(){return this.sortField},isc.A.toggleSort=function isc_ListGrid_toggleSort(_1,_2){var _3=this.getSpecifiedField(_1),_4=this.$166?isc.shallowClone(this.$166):[],_5=_4.find("property",_1);if(!_5&&_3.displayField){_5=_4.find("property",_3.displayField);if(!_5)return}
if(!_2)
_2=Array.shouldSortAscending(_5.direction)?"descending":"ascending";if(_2=="unsort")_4.remove(_5);else _5.direction=_2;this.setSort(_4)},isc.A.$107b=function isc_ListGrid__addSort(_1,_2){if(!isc.isAn.Object(_1)){_1=this.getSpecifiedField(_1)}
var _3=_2||this.$99f(_1);this.addSort({property:_1[this.fieldIdProperty],direction:Array.shouldSortAscending(_3)?"ascending":"descending"})},isc.A.addSort=function isc_ListGrid_addSort(_1){var _2=this.$166?isc.shallowClone(this.$166):[];_2.add(_1);this.setSort(_2)},isc.A.getSort=function isc_ListGrid_getSort(){if(this.$166){return this.removeSortSpecifierMarkers(isc.shallowClone(this.$166))}else if(this.initialSort){return isc.shallowClone(this.initialSort)}else if(this.sortState){var _1=this.evalViewState(this.sortState,"sortState")||{};return _1.sortSpecifiers||_1}else{var _2;if(this.sortFieldNum!=null)_2=this.getField(this.sortFieldNum);if(!_2&&this.sortField!=null){_2=this.getUnderlyingField(this.sortField)}
if(_2){var _3=this.$99f(_2);return[{property:_2[this.fieldIdProperty],direction:_3}]}}},isc.A.getSortSpecifier=function isc_ListGrid_getSortSpecifier(_1){var _2=null;if(this.$166&&this.$166.length>0){_2=this.$166.find("property",_1);if(!_2){var _3=this.getSpecifiedField(_1);if(_3&&_3.displayField&&!_3.optionDataSource){_2=this.$166.find("property",_3.displayField)}}}
return _2},isc.A.getSortFieldCount=function isc_ListGrid_getSortFieldCount(){return this.$166?this.$166.length:0},isc.A.isSortField=function isc_ListGrid_isSortField(_1){var _2=this.getSortSpecifier(_1)?true:false;if(!_2){var _3=this.getSpecifiedField(_1);if(_3&&_3.displayField&&!_3.optionDataSource){_2=this.getSortSpecifier(_3.displayField)?true:false}}
return _2},isc.A.getSortNumeralHTML=function isc_ListGrid_getSortNumeralHTML(_1,_2){var _3=this.$98o;_3[1]=this.sortNumeralStyle;isc.$cj(_3,(_2+1),3,3);return _3.join(isc.emptyString)},isc.A.clearSort=function isc_ListGrid_clearSort(){this.setSort(null)},isc.A.$107m=function isc_ListGrid__addImplicitSort(_1,_2){if(!_2)_2=this.$992||this.getGroupByFields()||[];var _3=false,_4=isc.shallowClone(_1);if(this.sortByGroupFirst&&!_2.isEmpty()){this.logInfo("Evaluating implicit sort for grouping "+isc.echoAll(_2),"sorting");var _5=_1.isEmpty()?"ascending":null;if(!_1.isEmpty()&&!this.groupSortDirection){for(var i=0;i<_1.length;i++){var _7=_1[i];if(!_7.sortedImplicitly){if(_7.direction!=null)_5=_7.direction;break}}}
this.$107n=this.groupSortDirection||_5;for(var i=0;i<_2.length;i++){var _8=_2[i];if(_1.find("property",_8)){this.logInfo("Existing sort specifier found for property '"+_8+"'.  Skipping.","sorting");continue}
var _9=this.getUnderlyingField(_8);if(_9==null)continue;var _10={sortedImplicitly:true,context:this,normalizer:this.$107o(_9)||"text",property:_8,direction:this.$107n}
_4.addAt(_10,i);_3=true}}
if(_3){this.logInfo("Returning augmented sort specifiers"+isc.echoAll(_4),"sorting")}else{this.logInfo("Returning unmodified sort specifiers"+isc.echoAll(_4),"sorting")}
return _4},isc.A.getSortByGroupFirst=function isc_ListGrid_getSortByGroupFirst(){return this.sortByGroupFirst},isc.A.setSortByGroupFirst=function isc_ListGrid_setSortByGroupFirst(_1){this.sortByGroupFirst=_1},isc.A.$107o=function isc_ListGrid__getSortNormalizerForField(_1){if(_1.sortNormalizer){return _1.sortNormalizer}
var _2=this;if(_1.userFormula)return function(_3,_1){if(_3.$17b)return _3.groupValue;return _2.getFormulaFieldValue(_1,_3)};if(_1.userSummary)return function(_3,_1){if(_3.$17b)return _3.groupValue;return _2.getSummaryFieldValue(_1,_3)};if(_1.valueMap&&(_1.sortByMappedValue==null||_1.sortByMappedValue==true)){return isc.isA.String(_1.valueMap)?this.getGlobalReference(_1.valueMap):_1.valueMap}
if(_1.type!=null){return _1.type}},isc.A.setSort=function isc_ListGrid_setSort(_1){if(this.logIsInfoEnabled("sorting"))this.logInfo("Entering setSort","sorting");if(!this.$107p)this.$107q();if(_1&&!isc.isAn.Array(_1))_1=[_1];if(!this.fields&&!this.getDataSource()){this.initialSort=_1;if(this.logIsInfoEnabled("sorting")){this.logInfo("setSort() not performing sort - no fields","sorting")}
return false}
if(this.confirmDiscardEdits&&this.dataSource!=null){if(this.hasChanges()&&isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached())
{this.showLostEditsConfirmation({target:this,methodName:"$107r"},{target:this,methodName:"$107s"});this.$107t=_1
return}}
var _1=_1||[],_2=[],_3;if(this.$166){for(var i=0;i<this.$166.length;i++){var _5=this.$166[i],_6=_1.find("property",_5.property);if(!_6){_2.add(isc.shallowClone(_5));if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - marking field "+_5.property+" for removal","sorting")}}}}
if(!_1||_1.length==0){if(this.logIsInfoEnabled("sorting")){this.logInfo("null or zero-length sortSpecifiers - unsorting only","sorting")}}
var _7=[];_1.removeEmpty();for(var i=0;i<_1.length;i++){if(!_1[i])continue;var _8=_1[i],_9=this.getUnderlyingField(_8.property),_10=this.getField(_8.property),_11=null;if(_9&&_9.sortByField){_8.sortByProperty=_9.sortByField;_9=this.getUnderlyingField(_8.sortByProperty)}
if(!_9){var _12=this.getAllFields();_9=!_12?null:_12.find("displayField",_8.sortByProperty?_8.sortByProperty:_8.property)}
if(_9){if(!this.$99c(_9)){this.logWarn("Removing field '"+_9[this.fieldIdProperty]+"' from the sortSpecifier array because it specifies canSortClientOnly: true and all data is not yet client-side.","sorting");continue}
if(_10){if(!_3)_3=_10}
if(!_8.normalizer){_8.normalizer=this.$107o(_9)}
if(_8.direction==null){_8.direction=this.$99f(_9)}
if(_3&&_3==_10){_8.primarySort=true}
if(_8.primarySort){this.sortDirection=Array.shouldSortAscending(_8.direction)}
if(!_8.context)_8.context=this;_8.sortIndex=i;_7.add(_8)}}
this.$107u=this.$166?isc.shallowClone(this.$166):[];this.sortSpecifiers=this.$166=_7;this.$107v=this.$107m(this.$166),this.$107w=(this.$107v.length==this.$107u.length);this.$107x=_2;if(this.$107w&&this.$107u.length>0){for(var i=0;i<this.$107v.length;i++){var _8=this.$107v[i];var _13={property:_8.property,direction:_8.direction};var _14=this.data.getDefaultNormalizer?this.data.getDefaultNormalizer(_8.property):null;if(_8.normalizer!=null&&_8.normalizer!=_14){_13.normalizer=_8.normalizer}
var _15=this.$107u.findIndex(_13);if(_15==null||_15<0){this.$107w=false;break}}}
if(this.setSortHandler&&this.setSortHandler(_1)===false){this.logInfo("User-written setSortHandler() method returned false","sorting");return false}
this.displaySort(_1);this.applySortToData(_1);return true},isc.A.displaySort=function isc_ListGrid_displaySort(_1){if(this.logIsInfoEnabled("sorting"))this.logInfo("Entering displaySort","sorting");var _2=this.$166[0],_3=_2?_2.property:null,_4=_3?this.getFieldNum(_3):null,_5=_3?this.getUnderlyingField(_3):null,_6=_2?Array.shouldSortAscending(_2.direction):null;if(!_5){if(_2)this.logWarn("sort: field does not exist: "+_2.property)}
if(_4>=0){this.$100i(_4)}else{this.$100i(null)}
if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort - ready to change visible sort state for specifiers:\n"+isc.echoAll(this.$166),"sorting")}
var _7=this.$107v,_8=this.$107u,_9=(_7.length==_8.length),_10=this.$107x;var _11=(this.header&&isc.isA.Toolbar(this.header));if(_10){if(_10.length>0){if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort - Removing sort-media from now unsorted fields:\n"+isc.echoAll(_10),"sorting")}}
for(var i=0;i<_10.length;i++){var _13=_10[i],_14=this.getSpecifiedField(_13.property),_15=[];if(_14){_15.add(_14);if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort, removing sort-media for fieldName '"+_14.name+"'","sorting")}}
var _16=this.getFields();if(_16){var _17=_16.findAll("displayField",_13.property);if(_17){_17.removeUnless("optionDataSource",null);if(_17.length>0){_15.addList(_17);if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort, removing sort-media for fields with displayField '"+_14.name+"' - these are: "+isc.echoFull(_17.getProperty("name").join(", ")),"sorting")}}}}
for(var j=0;j<_15.length;j++){var _19=_15[j],_20=this.getFieldNum(_19.name);if(_19){_19.sortDirection=_19.originalSortDirection}
if(_20>=0&&_11){var _21=this.getFieldHeaderButton(_20);if(_21&&_21.setTitle)_21.setTitle(_21.getTitle())}}}}
if(this.$166&&this.$166.length>0){this.logInfo("In displaySort - Setting sort-media for sorted fields:\n"+isc.echoAll(this.$166),"sorting");var _22=false;for(var i=0;i<this.$166.length;i++){var _13=this.$166[i],_14=this.getSpecifiedField(_13.property),_15=[];if(_14){_15.add(_14);if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort, adding sort-media for fieldName '"+_14.name+"'","sorting")}}
var _16=this.getFields();if(_16){var _17=_16.findAll("displayField",_13.property);if(_17){_15.addList(_17);if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort, adding sort-media for fields with displayField '"+_14.name+"' - these are: "+isc.echoFull(_17.getProperty("name").join(", ")),"sorting")}}}
for(var j=0;j<_15.length;j++){var _19=_15[j],_20=this.getFieldNum(_19.name);if(_19){if(_19.sortDirection&&!_19.originalSortDirection){_19.originalSortDirection=_19.sortDirection}
_19.sortDirection=_13.direction}
if(_11&&_20>=0){var _23=this.getFieldHeader(_20),_21=this.getFieldHeaderButton(_20);if(_21){if(!_22&&this.selectHeaderOnSort){_23.selectButton(_21);if(isc.Browser.isTouch&&this.shouldShowHeaderMenuButton(_21,true)){this.$100u(_21)}
_22=true}
if(_21.setTitle)_21.setTitle(this.getHeaderButtonTitle(_21))}}}}}else if(_11&&this.selectHeaderOnSort){var _24;if(this.header){_24=this.header.getSelectedButton();if(_24){_24.deselect();this.$98m(_24)}}
if(this.frozenHeader){_24=this.frozenHeader.getSelectedButton();if(_24)_24.deselect()}}
if(_4>=0){if(this.logIsInfoEnabled("sorting")){this.logInfo("In displaySort - $100i called with fieldNum: "+_4+" - sortField is now: "+this.sortField+"\ngetSortState() now returns: "+isc.echoAll(this.getSortState()),"sorting")}}
if(this.sorter&&this.sorter.setTitle){this.sorter.setTitle(this.sorter.getTitle())}
if(this.logIsInfoEnabled("sorting"))this.logInfo("Leaving displaySort","sorting");return true},isc.A.applySortToData=function isc_ListGrid_applySortToData(_1){if(this.logIsInfoEnabled("sorting"))this.logInfo("Entering applySortToData","sorting");var _2=this.$166[0],_3=this.$107v;if(_3&&_3.length>0){if(this.$107y&&this.data&&this.data.resort&&this.data.$166){this.data.resort()}else if(this.data&&(this.data.setSort||this.data.length>0||isc.isA.ResultTree(this.data)||isc.isA.Tree(this.data)))
{if(this.data.setSort){if(this.logIsInfoEnabled("sorting")){this.logInfo("In applySortToData -  Calling data.setSort with specifiers:\n"+isc.echoAll(_3),"sorting")}
this.data.setSort(_3)}else if(this.data.sortByProperty){if(this.logIsInfoEnabled("sorting")){this.logInfo("In applySortToData - Calling data.sortByProperty with specifier:\n"+isc.echoAll(_2),"sorting")}
this.data.sortByProperty(_2.sortByProperty?_2.sortByProperty:_2.property,Array.shouldSortAscending(_2.direction),_2.normalizer,_2.context)}}else{if(this.logIsInfoEnabled("sorting")){this.logInfo("In applySortToData - not sorting:\nthis.data is "+this.echoAll(this.data),"sorting")}}}else{if(this.data){if(this.data.setSort!=null)this.data.setSort([]);else if(this.data.unsort)this.data.unsort()}
if(this.invalidateCacheOnUnsort){this.invalidateCache()}}
if(this.body&&this.showRecordComponents)delete this.body.$94o;this.$930(this.$98p);if(!this.$107w&&!this.$98s&&!this.$101w){this.handleSortChanged(this.$166)}
if(this.logIsInfoEnabled("sorting"))this.logInfo("Leaving applySortToData","sorting");return true},isc.A.$107q=function isc_ListGrid__storeResortingFlag(){this.$107y=this.$998;delete this.$998;this.$107p=true;return this.$107y},isc.A.handleSortChanged=function isc_ListGrid_handleSortChanged(_1){this.sortChanged(this.removeSortSpecifierMarkers(isc.shallowClone(_1)));this.handleFieldStateChanged(true)},isc.A.sortChanged=function isc_ListGrid_sortChanged(_1){},isc.A.$107r=function isc_ListGrid__continueSort(){var _1=this.$107t;delete this.$107t;this.displaySort(_1);this.applySortToData(_1)},isc.A.$107s=function isc_ListGrid__cancelSort(){var _1;var _1=this.$107t?this.$107t[0]:null;delete this.$107t;if(_1!=null){var _2=this.getFieldNum(_1.property);if(_2!=-1&&this.sortFieldNum!=_2){this.header.deselectButton(_2)}}},isc.A.sortData=function isc_ListGrid_sortData(){if(!this.data||!this.fields)return;var _1=this.fields[this.$95z()],_2=null;if(_1==null){this.$100i(0);_1=this.fields[0]}
if(_1.sortNormalizer){_2=_1.sortNormalizer}else if(_1.valueMap){_2=_1.valueMap;if(isc.isA.String(_1.valueMap))_2=this.getGlobalReference(_1.valueMap)}else if(_1.type!=null){_2=_1.type}
this.data.sortByProperty(_1[this.fieldIdProperty],_1.sortDirection,_2,this)},isc.A.getEmbeddedComponentCount=function isc_ListGrid_getEmbeddedComponentCount(_1){var _2=this.body?this.body.$90x:null;if(this.frozenBody&&this.frozenBody.$90x!=null){_2=(_2?_2.duplicate():[]).addList(this.frozenBody.$90x)}
if(!_2)return 0;if(_1=="recordComponent"){_2=_2.findAll("isRecordComponent",true)}else if(_1=="backgroundComponent"){_2=_2.findAll("isBackgroundComponent",true)}
return _2==null?0:_2.length},isc.A.addEmbeddedComponent=function isc_ListGrid_addEmbeddedComponent(_1,_2,_3,_4,_5){if(_4==null&&_1.$92p!=null){_4=this.getFieldNum(_1.$92p)}
var _6=this.getFieldBody(_4);_4=this.getLocalFieldNum(_4);_5=_5||_1.embeddedPosition
if(_3==null)_3=this.getRecordIndex(_2);_6.addEmbeddedComponent(_1,_2,_3,_4,_5);if(this.frozenBody!=null){var _7=_6==this.frozenBody?this.body:this.frozenBody;var _8=_7==this.frozenBody?1:0;if(_3>=0&&_7.isDrawn()&&!_7.isDirty()){var _9=_7.getRowHeight(_2,_3,_8);if(_9!=_6.getRowSize(_3)){_7.markForRedraw()}}}},isc.A.removeEmbeddedComponent=function isc_ListGrid_removeEmbeddedComponent(_1,_2,_3){var _4;if(isc.isA.Canvas(_1)){_2=_1;_1=_2.embeddedRecord}
if(isc.isA.Number(_2)){_4=this.getFieldBody(_2);_2=this.getLocalFieldNum(_2)}else{if(!_2){if(!this.$91v(_1))return;_2=this.$91w(_1)[0]}
_4=isc.Canvas.getById(_2.$92l)}
if(_4==null){return}
_4.removeEmbeddedComponent(_1,_2,_3)},isc.A.getEmbeddedComponent=function isc_ListGrid_getEmbeddedComponent(_1,_2){var _3;if(isc.isA.Number(_2)){_3=this.getFieldBody(_2);_2=this.getLocalFieldNum(_2)}else if(_2==null){_3=this.body}else{_3=isc.Canvas.getById(_2.$92l)}
return _3.getEmbeddedComponent(_1,_2)},isc.A.getRecordComponent=function isc_ListGrid_getRecordComponent(_1,_2){var _3=this.getRecord(_1);return this.getEmbeddedComponent(_3,_2)},isc.A.getRecordDataSource=function isc_ListGrid_getRecordDataSource(_1){return this.dataSource},isc.A.openRecordEditor=function isc_ListGrid_openRecordEditor(_1){if(this.$1025!=null)this.closeRecord();var _2=isc.addProperties({},_1);var _3=this.ns.DynamicForm.create(this.recordEditorProperties,{autoDraw:false,dataSource:this.getRecordDataSource(_1),numCols:4,values:_2,$107z:_1});var _4=this.ns.VStack.create({autoDraw:false,width:this.getAvailableFieldWidth()-this.embeddedComponentIndent,left:this.isRTL()?0:this.embeddedComponentIndent,destroyOnUnEmbed:true,members:[_3,this.ns.Toolbar.create({autoDraw:false,width:200,buttons:[{title:this.recordEditorSaveButtonTitle,click:this.getID()+".embeddedSaveRecord("+_3.getID()+")",extraSpace:10},{title:this.recordEditorCancelButtonTitle,record:_1,grid:this,click:function(){var _5=this.parentElement.parentElement;this.grid.closeRecord(this.record,_5)}}]})]});_4.removeOnHideField=true;this.addEmbeddedComponent(_4,_1,this.data.indexOf(_1));this.$1025=_1;this.$1070=_4},isc.A.embeddedSaveRecord=function isc_ListGrid_embeddedSaveRecord(_1){_1.saveData({target:this,methodName:"embeddedEditComplete"},{$107z:_1.$107z,$1071:_1})},isc.A.embeddedEditComplete=function isc_ListGrid_embeddedEditComplete(_1,_2,_3){if(_1.status==0){this.removeEmbeddedComponent(_3.$107z,_3.$1071)}},isc.A.closeRecord=function isc_ListGrid_closeRecord(_1,_2){if(!_1)_1=this.$1025;if(!_2)_2=this.$1070;this.removeEmbeddedComponent(_1,_2);this.$1025=null;this.$1070=null},isc.A.openRecordDetailGrid=function isc_ListGrid_openRecordDetailGrid(_1,_2){if(this.$1025!=null)this.closeRecord();var _3=this.getRecordDetailGrid(_1,_2);var _4=isc.VLayout.create({autoDraw:false,destroyOnUnEmbed:true,height:this.cellHeight,left:this.isRTL()?0:this.embeddedComponentIndent,width:this.getAvailableFieldWidth()-this.embeddedComponentIndent,resizeBarSize:4,members:[_3],removeOnHideField:true});this.addEmbeddedComponent(_4,_1,this.data.indexOf(_1));var _2=isc.DataSource.getDataSource(_3.dataSource);_3.fetchRelatedData(_1,this.getRecordDataSource(_1));this.$1025=_1;this.$1070=_4},isc.A.getRecordDetailGrid=function isc_ListGrid_getRecordDetailGrid(_1,_2){_2=isc.DataSource.getDataSource(_2);var _3=isc.ListGrid.create(this.recordDetailGridProperties,{autoDraw:false,dataSource:_2,showResizeBar:true,showCellContextMenus:this.showCellContextMenus},this.nestedGridDefaults);return _3},isc.A.chartData=function isc_ListGrid_chartData(_1,_2,_3,_4,_5){this.checkChartConstructor();if(_1)_1=this.getField(_1);if(_2)_2=this.map("getField",_2);else{_2=this.fields.duplicate();_2.remove(_1)}
if(!_3){if(!isc.ResultSet||!isc.isA.ResultSet(this.data)){_3=this.data}else if(this.data.allMatchingRowsCached()){_3=this.data.getAllRows()}else{var _6=this.getVisibleRows();_3=this.data.getRange(_6[0],_6[1])}}
var _7,_8;if(_2.length>=1){for(var i=0;i<_2.length;i++){var _10=_2[i];_2[i]={id:_10.name,title:this.htmlUnescapeExportFieldValue(_10.title),type:_10.type}}
_8={id:"columnFacet",title:this.valueTitle,values:_2,inlinedValues:true}}
if(_3.length>=1&&_1){_7={id:_1.name}}
var _11=[_8,_7];_11.removeAll([null]);if(_5)_11.reverse();var _12=isc.addProperties({data:_3,facets:_11,title:this.chartTitle,chartType:this.chartType},_4);if(_7&&!_8)_12.valueProperty=_2[0].name;return this.createAutoChild("chart",_12,this.chartConstructor)});isc.evalBoundary;isc.B.push(isc.A.checkChartConstructor=function isc_ListGrid_checkChartConstructor(){var _1=this.chartConstructor;if(isc.isA.String(_1)){_1=window.isc[this.chartConstructor]}
if(_1==null){this.logWarn('Component chartConstructor attribute set to "'+this.chartConstructor+'" - this cannot be resolved to a valid SmartClient class. Verify that all appropriate modules are loaded and that this class exists.')}else if(_1.invalidClass){var _2='Component chartConstructor attribute set to "'+this.chartConstructor+'". ';if(_1.invalidErrorMessage)_2+=_1.invalidErrorMessage;else _2+=".This class is invalid - verify all appropriate modules are loaded.";this.logWarn(_2)}},isc.A.chartRow=function isc_ListGrid_chartRow(_1,_2,_3){return this.chartData(null,_2,[this.getRecord(_1)],_3)},isc.A.chartColumn=function isc_ListGrid_chartColumn(_1,_2,_3){return this.chartData(_2,[_1],null,_3)},isc.A.regroup=function isc_ListGrid_regroup(_1){var _2=this.$21z,_3;var _4=this.$982||this.isGrouped,_5=_4&&(this.$992||this.getGroupByFields()),_6=false;if(!_4||_5==null||_5.length==0||this.inhibitRegroup||!(this.originalData||this.data)||!this.data)
{_3=null}else{if(this.data.isGroupedOutput&&this.originalData){_3=this.originalData}else{_3=this.data;_6=true}}
if(_3!=null){var _7=_3.getLength();if(isc.ResultSet&&isc.isA.ResultSet(_3)&&(!_3.lengthIsKnown()||(_7<=this.groupByMaxRecords&&!_3.rangeIsLoaded(0,_7-1))))
{_3.getRange(0,_7);this.$997(true,false,true,false,false,_5);this.logInfo("postponing grouping until data is loaded","grouping");if(_6){this.originalData=_3}
this.$99w=true;return}else if(_7>this.groupByMaxRecords){this.logInfo("Results too numerous - disabling grouping.","grouping");if(_2){delete this.$21z;delete this.$100a;isc.Timer.clear(this.$1072);delete this.$1072;isc.clearPrompt();this.setGroupByFieldSummaries(this.$1073);this.setShowGroupSummary(this.$1074)}
this.clearGroupBy();if(_6){this.originalData=_3}
if(!this.selection||(this.data!=this.selection.data)){this.createSelectionModel()}
if(this.groupByComplete!=null)this.groupByComplete([]);return}}else{if(_2){delete this.$21z;delete this.$100a;isc.Timer.clear(this.$1072);delete this.$1072;isc.clearPrompt();this.setGroupByFieldSummaries(this.$1073);this.setShowGroupSummary(this.$1074)}
return}
this.$997(false,false,true,false,false);var _8=this.$100g;delete this.$99w;var _9=(_3.getLength()>this.groupByAsyncThreshold);if(_2&&_9){isc.Timer.clear(this.$1072);delete this.$100a;delete this.$1072}else if(_2&&!_9){delete this.$21z;delete this.$100a;isc.Timer.clear(this.$1072);delete this.$1072;isc.clearPrompt();this.setGroupByFieldSummaries(this.$1073);this.setShowGroupSummary(this.$1074)}else if(!_2&&_9){if(this.showAsynchGroupingPrompt!=false)isc.showPrompt(this.asynchGroupingPrompt);this.$21z=true;this.$1074=this.showGroupSummary;this.$1073=this.groupByFieldSummaries}
var _10=this.groupByField,_11=null;if(_8!=null){_10=[];_11=[];for(var i=0;i<_8.length;i++){if(this.isCheckboxField(_8[i]))continue;var _13=_8[i].property,_14,_15;if(_13){_14=_8[i].property;_15=this.getUnderlyingField(_14)}else{_14=_8[i];_15=this.getUnderlyingField(_14)}
if(_15&&_15.displayField!=null&&_15.optionDataSource==null){var _16=this.getField(_15.displayField);if(_16){_15=_16;_14=_15.displayField}}
_10.add(_14);var _17;if(_15&&this.$1075){_17=this.$1075.find("property",_8[i]);if(_17){_15.groupingMode=_17.grouping;_15.groupGranularity=_17.granularity;_15.groupPrecision=_17.precision}}
var _18=(_13?_8[i].grouping:null);if(_15){if(!_13){_18=_15.groupingMode}
var _19=_15.groupingModes||(_15.$31u?(_15.$31u.getGroupingModes?_15.$31u.getGroupingModes():_15.$31u.groupingModes):null);if(_18==null&&_19!=null){var _20=_15.defaultGroupingMode||(_15.$31u&&_15.$31u.defaultGroupingMode);if(isc.isAn.Array(_19)){if(_19.contains(_20))_18=_20;else if(_19.length>0)_18=_19[0]}else if(isc.isAn.Object(_19)){if(_19[_20]!=null)_18=_20}}}
_11.push(_18)}}
var _21=(_10!=null&&!isc.isAn.Array(_10)?[_10]:_10),_18=null;if(_21!=null){for(var i=0;i<_21.length;i++){var _15=this.getUnderlyingField(_21[i]),_22=((_11!=null&&_11[i]!=null)?_11[i]:_15.groupingMode);if(_22&&(!isc.isAn.Array(_10)?_15.name==_10:_10.contains(_15.name)))
{_18=_22}}}
var _23={applyFormulaAfterSummary:this.applyFormulaAfterSummary,emptyCellValue:this.emptyCellValue,gridSummaryRecordProperty:this.gridSummaryRecordProperty,groupByFieldSummaries:(isc.isAn.Array(this.groupByFieldSummaries)?this.groupByFieldSummaries.duplicate():null),groupNodeBaseStyle:this.groupNodeBaseStyle,groupNodeStyle:this.groupNodeStyle,groupStartOpen:(isc.isAn.Array(this.groupStartOpen)?this.groupStartOpen.duplicate():this.groupStartOpen),groupSummaryRecordProperty:this.groupSummaryRecordProperty,includeInSummaryProperty:this.includeInSummaryProperty,nullGroupTitle:this.nullGroupTitle,recordBaseStyleProperty:this.recordBaseStyleProperty,recordCustomStyleProperty:this.recordCustomStyleProperty,recordEditProperty:this.recordEditProperty,showCollapsedGroupSummary:this.showCollapsedGroupSummary,showGroupSummary:this.showGroupSummary,showGroupSummaryInHeader:this.showGroupSummaryInHeader,singleCellValueProperty:this.singleCellValueProperty,groupByField:_10,groupByFields:_21,groupByFieldGroupingModes:_11,groupingMode:_18,currData:_3,setOriginalDataToCurrData:_6,sortSpecifiers:isc.isAn.Array(this.$166)?this.$107m(this.$166.duplicate(),_21):null};this.$100a=_23;var _24=new Array(this.fields.getLength()),_25=new Array(this.fields.getLength());for(var i=_24.length;i--;){var _15=this.fields[i];_24[i]=_15&&_15.userFormula!=null;_25[i]=_15&&_15.userSummary!=null}
_23.fieldsHaveUserFormulas=_24;_23.fieldsHaveUserSummaries=_25;var _26=new Array(_21.length),_27=new Array(_21.length),_28=new Array(_21.length),_29=new Array(_21.length);for(var i=_21.length;i--;){var _15=this.getUnderlyingField(_21[i]);if(_15){_26[i]=isc.clone(_15.userFormula);_27[i]=isc.clone(_15.userSummary);_28[i]=_15.displayField;var _30=_15.valueMap;if(isc.isAn.Array(_30)){_29[i]=_30.duplicate()}else{_29[i]=isc.shallowClone(_30)}}}
_23.groupByFieldUserFormulas=_26;_23.groupByFieldUserSummaries=_27;_23.groupByFieldDisplayFields=_28;_23.groupByFieldValueMaps=_29;this.$1076(_9,_23,_1)},isc.A.$1076=function isc_ListGrid__regroupRestoreOpenFolders(_1,_2,_3){var _4;if(this.groupTree){var _5=this.groupTree.$87b,_6=(_5==_2.groupByField);if(isc.isAn.Array(_5)){var _7=_2.groupByField.duplicate(),_8=_5.duplicate();if(_7.length!=_8.length)_6=false;else{_7.removeList(_8);_6=(_7.length==0)}}
if(!_3&&this.canCollapseGroup&&this.retainOpenStateOnRegroup&&(this.groupTree.getLength()>0)&&(_6))
{if(this.groupTree.$1077==_2.groupingMode){_4=[];var _9=this.groupTree,_10=_9.getRoot();if(_9.isOpen(_10)&&_9.isLoaded(_10)){var _11=[[_9.getFolders(_10)],[0]];if(_1){this.$1072=this.delayCall("$1078",[_1,_2,_11,_9,_4],0)}else{this.$1078(_1,_2,_11,_9,_4)}
return}}}}
this.$1079(_1,_2,_2.currData,_4)},isc.A.$1078=function isc_ListGrid__regroupAddNodeToOpenState(_1,_2,_3,_4,_5){var _6=_3[0],_7=_3[1],_8=_6.length,_9=0;while(_8>0){var _10=_6.pop(),i=_7.pop();--_8;for(var _12=_10.length;i<_12;++i,++_9){if(_1&&_9>this.groupByAsyncThreshold){_6.push(_10);_7.push(i);this.$1072=this.delayCall("$1078",[_1,_2,_3,_4,_5],0);return}
var _13=_10[i];if(_4.isOpen(_13)&&_4.isLoaded(_13)){var _14={};_14[_13.groupName]=_13.groupValue;_5.add(_14);var _15=_4.getFolders(_13);if(_15!=null){_6.push(_10);_7.push(i+1);++_8;_10=_15;i=-1;_12=_10.length}}}}
if(_1){this.$1072=this.delayCall("$1079",[_1,_2,_2.currData,_5],0)}else{this.$1079(_1,_2,_2.currData,_5)}},isc.A.$1079=function isc_ListGrid__regroupCreateGroupTree(_1,_2,_3,_4){var _5=this.createAutoChild("groupTree",{idField:this.groupIdField,parentIdField:this.groupParentIdField,titleProperty:"groupValue",childrenProperty:"groupMembers",parentProperty:"_groupTree_"+this.ID,showRoot:false,isGroupedOutput:true,nameProperty:"$cb",alwaysSortGroupHeaders:(_2.showGroupSummary&&_2.showGroupSummaryInHeader),$87b:_2.groupByField,$992:_2.groupByFields,$1077:_2.groupingMode,separateFolders:true,$87c:"$87c",$87d:"$87d",$166:_2.sortSpecifiers,getCriteria:function(){var _6=this.creator.originalData;if(_6&&_6.getCriteria)return _6.getCriteria();return null},getRecordsInGroup:function(_37){var _7=this.$992,_8=_37.groupName,_9=this.getChildren(_37),_10=[];if(_8==_7[_7.length-1]){if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var i=_9.getLength();i--;){var _12=_9.getCachedRow(i);if(_12!=null&&_12[this.$87c]!==true){_10.add(_12)}}}}else if(_9!=null){if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var i=0,_13=_9.getLength();i<_13;++i){var _12=_9.getCachedRow(i);if(_12!=null){var _14=this.getRecordsInGroup(_12);if(_14!=null&&_14.length>0){_10.addList(_14)}}}}}
return _10},combineWithEditVals:function(_9){var _15=this.creator,_16=[];_16.addList(_9);var _17=_15.getAllEditRows();if(_17.length>0){var _18;for(var i=0;i<_16.length;i++){var _19=_15.getEditSession(_16[i]);if(_19){var _20=isc.addProperties({},_16[i],_19.$1002);_16[i]=_20}}}
return _16},primaryKeyFields:this.dataSource?this.getDataSource().getPrimaryKeyFieldNames():null,indexOf:function(_37,_40,_41){var _21=this.$87z(),_22,_23,_24=-1;if(this.primaryKeyFields!=null){var _25=this.primaryKeyFields;_22={};for(var i=0;i<_25.length;i++){var _26=_25[i];if(_37[_26]==null){_23=false;break}else{_23=true;_22[_26]=_37[_26]}}}
if(_23){_24=_21.findNextIndex(_40,_22,null,_41)}else{_24=_21.indexOf(_37,_40,_41)}
return _24},$108a:function(_37,_40,_41,_42){if(!_37)_37=this.root;var _27=function(_43,i){if(i==null){i=0}
for(var j=0,_13=_43.length;j<_41&&i<_13;++i,++j){if(!this.isOpen(_43[i])){this.changeDataVisibility(_43[i],true)}}
if(i<_13){_27.apply(this,[_43,i])}else{this.changeDataVisibility(_37,true);_40.apply(this,[])}};this.$108b(_37,isc.Tree.FOLDERS_ONLY,null,_27,_41,_42)},$108b:function(_37,_40,_41,_42,_43,_44,_45,_46){var _29,_30;if(_45==null){if(!_37)_37=this.root;_45=[];if(!_41)_41=function(){return true};if(this.isLeaf(_37)){_42.apply(this,[_45]);return}
var _9=this.getChildren(_37);if(!_9){_42.apply(this,[_45]);return}
_29=[_9];_30=[0];_46={childrenStack:_29,indexStack:_30}}else{_29=_46.childrenStack;_30=_46.indexStack}
var _31=_29.length,_32=0;while(_31>0){var _9=_29.pop(),i=_30.pop();--_31;if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var _13=_9.getLength();i<_13;++i,++_32){if(_32>_43){_29.push(_9);_30.push(i);this.creator[_44]=this.delayCall("$108b",[_37,_40,_41,_42,_43,_44,_45,_46],0);return}
var _12=_9.getCachedRow(i);if(_12!=null){if(this.isFolder(_12)){if(_40!=isc.Tree.LEAVES_ONLY&&_41(_12))
_45[_45.length]=_12;var _33=this.getChildren(_12);if(_33){_29.push(_9);_30.push(i+1);++_31;_9=_33;i=-1;_13=_9.getLength()}}else{if(_40!=isc.Tree.FOLDERS_ONLY&&_41(_12)){_45[_45.length]=_12}}}}}}
_42.apply(this,[_45])},addBeforeSummaries:function(_40,_41){var _9=this.getChildren(_41);var _34=_9?_9.length:null;while(_34>0&&_9&&_9[_34-1][this.$87c])
{_34--}
this.add(_40,_41,_34)},$108c:function(_40,_41,_42){if(!isc.isAn.Array(_40))_40=[_40];for(var i=0;i<_40.length;i++){var _35=_40[i];if(_35!=null&&!_35.$17b){_35=this.getParent(_35)}
if(!_35||!_35.$17b)continue;var _36=this.getParents(_35);_36.unshift(_35);for(var j=_36.length-2;j>=0;j--){var _37=_36[j];if(_37.$108d==null){_37.$108d=true;if(_41){var _38=_36[j+1];if(!_38.$108e)_38.$108e=[];_38.$108e.add(_37)}else if(_42){_42.add(_37)}}}}
if(_42)return _42},$108f:function(_37){var _39=_37.$108e;if(!_39)return[];delete _37.$108e;return _39}},isc.Tree);this.logInfo("Adding "+_3.getLength()+" records to groups","grouping");if(_1){this.$1072=this.delayCall("$108g",[_1,_2,_5,_3,0,_3.getLength(),_4],0)}else{this.$108g(_1,_2,_5,_3,0,_3.getLength(),_4)}},isc.A.$108g=function isc_ListGrid__regroupAddRecordsToGroup(_1,_2,_3,_4,_5,_6,_7){var _8=_6;if(_1){_6=Math.min(_5+this.groupByAsyncThreshold,_8)}
var _9=(isc.ResultSet&&isc.isA.ResultSet(_4)?isc.ResultSet.getLoadingMarker():null);var _10;if(this.groupTree==this.data){_10=this.data.$87z()}
for(var i=_5;i<_6;++i){var _12=_4.get(i);if(_12!=null&&_12!=_9){this.$108h(_2.groupByFields,this.data,_2.emptyCellValue,_2.groupSummaryRecordProperty,_2.gridSummaryRecordProperty,_2.fieldsHaveUserFormulas,_2.fieldsHaveUserSummaries,_2.applyFormulaAfterSummary,_2.groupByFieldUserFormulas,_2.groupByFieldUserSummaries,_2.groupByFieldDisplayFields,_2.groupByFieldValueMaps,_2.nullGroupTitle,_2.showGroupSummary,_2.showGroupSummaryInHeader,_2.recordBaseStyleProperty,_2.groupNodeBaseStyle,_2.recordCustomStyleProperty,_2.groupNodeStyle,_2.recordEditProperty,_2.singleCellValueProperty,_3,_12,false,_7,_10)}}
if(_1&&_6<_8){this.$1072=this.delayCall("$108g",[_1,_2,_3,_4,_6,_8,_7],0)}else if(_1){this.$1072=this.delayCall("$108i",[_1,_2,_3],0)}else{this.$108i(_1,_2,_3)}},isc.A.$108i=function isc_ListGrid__regroupAddSummaryChildren(_1,_2,_3){this.$108j(_2.showGroupSummaryInHeader,_2.groupByFields,_2.showCollapsedGroupSummary,_2.includeInSummaryProperty,_2.applyFormulaAfterSummary,_2.groupSummaryRecordProperty,_2.fieldsHaveUserFormulas,_3,null,_2.showGroupSummary,[],_2.groupByFieldSummaries);if(_1){this.$1072=this.delayCall("$108k",[_1,_2,_3],0)}else{this.$108k(_1,_2,_3)}},isc.A.$108l=function isc_ListGrid__updateSummaryRows(_1,_2,_3,_4,_5,_6,_7,_8){return this.$108j(this.showGroupSummaryInHeader,this.getGroupByFields(),this.showCollapsedGroupSummary,this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3,_4,_5,_6,_7,_8)},isc.A.$108j=function isc_ListGrid___updateSummaryRows(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15){if(_1){return}
if(!isc.isAn.Array(_11)){_11=_2}
if(!isc.isAn.Array(_12)){_12=_2}
var _16,_17,_18;if(!(_9||_10)){return}else if(_9&&!_10){_17=_11}else if(!_9&&_10){_16=_12}else{_17=[];if(_12){for(var i=_11.length;i--;){var _20=_11[i];if(!_12.contains(_20)){_17.push(_20)}}}
_16=[];_18=[];for(var i=_12.length;i--;){var _20=_12[i];if(!_11.contains(_20)){_16.push(_20)}else if(_13){_18.push(_20)}}}
if(!(_16&&_16.length>0)&&!(_17&&_17.length>0)&&!(_18&&_18.length>0))
{return}
var _21=_3,_22=_14!=null&&!_21;if(_14!=null)_8.$108c(_14,_22);var _23=_8.getRoot(),_24=null;if(_23&&_8.isFolder(_23)){_24=_22?_8.$108f(_23):_8.getChildren(_23)}
if(!(_23&&_24&&!_24.isEmpty())){return}
var _25=_8.$87c,_26=_8.$87d,_27=Array.excludeFromSortProperty,_28=[_23],_29=[_24],_30=[0];var _31=false;_8.$87m=true;while(_30.length>0){var _32=_28.pop(),_33=_29.pop(),i=_30.pop();if(isc.isA.ResultSet(_33)&&!_33.lengthIsKnown())continue;var _34=_33.getLength();for(;i<_34;++i){var _35=_33.getCachedRow(i);if(!_35){continue}
if(_14!=null){if(_35.$108d)delete _35.$108d;else continue}
var _36=_35.groupName,_37=_16&&_16.contains(_36),_38=_17&&_17.contains(_36),_39=_8.getChildren(_35);if(_18&&!_37&&!_38){_37=_18.contains(_36);_38=_18.contains(_36)}
if(_38){if(!_21){if(!isc.isA.ResultSet(_39)||_39.lengthIsKnown()){var _40=[];for(var j=_39.getLength();j-->0;){var _42=_39.getCachedRow(j);if(_42[_25]===true){_40.push(_42)}else{break}}
_31|=_8.removeList(_40)}}else{var _43=[],j=0;for(;;){var s=_33.getCachedRow(i+j+1);if(s&&s[_25]==true){_43.add(s);++j}else{break}}
_31|=_8.removeList(_43);_34-=_43.length}}
if(_37){var _40=_8.getRecordsInGroup(_35);_40=_8.combineWithEditVals(_40);var _45=this.$103m(_4,_5,_6,_7,_40,_35,_15);if(_45!=null){if(!isc.isAn.Array(_45)){_45[_25]=true;_45[_27]=true;if(!_21){_31|=_8.add(_45,_35)!=null}else{_31|=_8.add(_45,_32,i)!=null;i+=1;_34+=1}}else{for(var k=_45.length;k--;){_45[k][_25]=true;_45[k][_27]=true;if(_21){_45[k][_26]=_35}}
if(!_21){_31|=_8.addList(_45,_35)!=null}else{_31|=_8.addList(_45,_32,i+1)!=null;i+=_45.length;_34+=_45.length}}}}
if(_22)_39=_8.$108f(_35);var _47=(_39&&!_39.isEmpty()&&_8.isFolder(_39.first()));if(_47){_28.push(_32);_29.push(_33);_30.push(i+1);_32=_35;_33=_39;_34=_33.getLength();i=-1}}}
delete _8.$87m;if(_31){_8.$860(true);_8.dataChanged()}},isc.A.$108k=function isc_ListGrid__regroupProcessGroupHeaderNode(_1,_2,_3,_4){if(_4==null){_4={i:0,children:_3.getChildren(_3.getRoot()),groupsVisited:0,indexStack:[],childrenStack:[]}}
var _5=_2.groupByFields||[],i=_4.i,_7=_4.children||[],_8=_4.groupsVisited==null?0:_4.groupsVisited,_9=_4.indexStack||[],_10=_4.childrenStack||[],_11=0;if(_5.length>0){for(;;){if(!isc.isA.ResultSet(_7)||_7.lengthIsKnown()){for(;i<_7.getLength();++i,++_11){if(_1&&_11>this.groupByAsyncThreshold){_4.i=i;_4.children=_7;_4.groupsVisited=_8;this.$1072=this.delayCall("$108k",[_1,_2,_3,_4],0);return}
var _12=_7.getCachedRow(i);if(_12!=null){var _13=this.getUnderlyingField(_5[_8]),_14=this.$108m(_3,_2.groupByFields,_2.groupByFieldValueMaps,_2.singleCellValueProperty,_12,_13);if(!this.$96e(_2.showGroupSummary,_2.showGroupSummaryInHeader))
{_12.groupTitle=_14}else _12[_2.singleCellValueProperty]=_14;if(_2.showGroupSummary&&_2.showGroupSummaryInHeader){_11+=this.$108n(_2.groupByFieldSummaries,_2.includeInSummaryProperty,_2.applyFormulaAfterSummary,_2.groupSummaryRecordProperty,_2.fieldsHaveUserFormulas,_3,_12)}
if(_8+1<_5.length){++_8;_9.push(i+1);_10.push(_7);i=-1;_7=_3.getChildren(_12)||[]}}}}
if(_9.length>0){--_8;i=_9.pop();_7=_10.pop()}else{break}}}
if(_1){this.$1072=this.delayCall("$108o",[_1,_2,_3,_2.restoreOpenFolders],0)}else{this.$108o(_1,_2,_3,_2.restoreOpenFolders)}},isc.A.$108o=function isc_ListGrid__regroupOpenInitialGroups(_1,_2,_3,_4){if(!_4){var _5=_2.groupStartOpen;if(!_1){this.$108p(_5,_3)}else{var _6=function(){this.creator.$108q(_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3)};var _7=250;if(isc.isAn.Array(_5)){var _8=_3.getChildren(_3.getRoot());for(var i=0;i<_5.length;i++){var _10=_5[i];var _11=_8.find("groupValue",_10);if(_11)_3.openFolder(_11)}}else if(_5=="all"){_3.$108a(null,_6,_7,"$1072");return}else if(_5=="first"){_3.$108a(_3.getChildren(_3.getRoot()).first(),_6,_7,"$1072");return}}}
if(_1){this.$1072=this.delayCall("$108q",[_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3],0)}else{this.$108q(_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3)}},isc.A.$108q=function isc_ListGrid__regroupCreateSelectionModel(_1,_2,_3,_4,_5){if(_4){this.originalData=_3}
if(this.groupTree){this.ignore(this.groupTree,"changeDataVisibility");this.groupTree.destroy()}
this.groupTree=_5;this.data=_5;this.$99x(this.data);this.createSelectionModel();if(_1){this.$1072=this.delayCall("$108r",[_1,_2],0)}else{this.$108s(_1,_2)}},isc.A.$108r=function isc_ListGrid__regroupGetGroupTreeLength(_1,_2){var _3=4000;this.data.$872(this,"$1072",_3,function(_4){this.$1072=this.delayCall("$108t",[_1,_2],0)})},isc.A.$108t=function isc_ListGrid__regroupCacheSelectionModel(_1,_2){var _3=function(){this.$1072=this.delayCall("$108s",[_1,_2],0)};if(isc.isA.Selection(this.selection)){var _4=4000;this.selection.$88m(this,"$1072",_4,_3)}else if(isc.isA.CellSelection(this.selection)){this.selection.getSelectedCells();this.$1072=this.delayCall("$108s",[_1,_2],0)}},isc.A.$108s=function isc_ListGrid__regroupFinish(_1,_2){delete this.$100a;var _3=_2.groupByFields;this.groupByField=_3;if(_2.groupByFieldGroupingModes!=null){for(var i=_3.length;i--;){var _5=_2.groupByFieldGroupingModes[i];if(_5!=null){var _6=this.fields.find(this.fieldIdProperty,_3[i]);if(_6)_6.groupingMode=_5}}}
this.isGrouped=true;this.handleGroupStateChanged();if(this.$987){this.setSelectedState(this.$987);delete this.$987}
if(this.fields.find("$96d",true)!=null){this.updateFieldWidthsForAutoFitValue("regroup with group title column showing")}
this.markForRedraw("regroup");if(_1){delete this.$21z;delete this.$1072;isc.clearPrompt();this.setGroupByFieldSummaries(this.$1073);this.setShowGroupSummary(this.$1074)}
var _7=this.$100g,_8;if(this.groupByComplete!=null&&_7!==_8){this.groupByComplete(_7)}},isc.A.$994=function isc_ListGrid__incrementalRegroup(_1,_2,_3){var _4=this.$95i;this.$95i=true;var _5=false;if(this.$987==null){_5=true;this.$987=this.getSelectedState(true)}
var _6=_2?this.data.getParents(_2):[],_7=_2?this.data.remove(_2):false,_8=null;for(var i=0;i<_6.length-1;i++){var _10=_6[i],_11=_10.groupMembers,_12=this.showGroupSummary&&!this.showCollapsedGroupSummary;if(_12?!_11.find("isGroupSummary",null):_11.getLength()==0)
{this.data.remove(_10)}else{var _13=(this.completeFields||this.fields).find(this.fieldIdProperty,_10);if(this.singleCellGroupHeaders()){_10[this.singleCellValueProperty]=this.getGroupTitle(_10,_13)}else{_10.groupTitle=this.getGroupTitle(_10,_13)}
if(!_8)_8=_10}}
if(!(_2&&!_7)&&(_1||_3)){this.$17t(this.groupTree,_1||_3,true,true)}
this.$95i=_4;if(this.showGroupSummary){var _14=[_1||_3];if(_8)_14.add(_8);this.refreshGroupSummary(_14)}
if(_5){if(_7){this.setSelectedState(this.$987)}
delete this.$987}},isc.A.$108p=function isc_ListGrid__openInitialGroups(_1,_2){if(isc.isAn.Array(_1)){var _3=_2.getChildren(_2.getRoot());for(var i=0;i<_1.length;i++){var _5=_1[i];var _6=_3.find("groupValue",_5);if(_6)_2.openFolder(_6)}}else if(_1=="all"){_2.openAll()}else if(_1=="first"){_2.openAll(_2.getChildren(_2.getRoot()).first())}},isc.A.getGroupSpecifiers=function isc_ListGrid_getGroupSpecifiers(){if(this.$1075)return isc.shallowClone(this.$1075)},isc.A.setGroupSpecifiers=function isc_ListGrid_setGroupSpecifiers(_1){if(_1){if(!isc.isAn.Array(_1))_1=[_1];if(isc.isA.String(_1[0])){var _2=[];for(var i=0;i<_1.length;i++){var _4=this.makeGroupSpecifier(_1[i]);if(_4)_2.add(_4)}
_1=_2}
this.$1075=isc.shallowClone(_1);this.groupBy(this.$1075)}else{delete this.$1075;this.$987=this.getSelectedState(true);this.groupBy([])}},isc.A.makeGroupSpecifier=function isc_ListGrid_makeGroupSpecifier(_1,_2,_3,_4){var _5=this.getFieldByName(_1);var _6={property:_1};if(_5){var _2=_2||_5.groupingMode||_5.defaultGroupingMode||(_5.$31u&&_5.$31u.defaultGroupingMode);if(_2!=null)_6.grouping=_2;_3=_3||_5.groupGranularity;if(_3!=null)_6.granularity=_3;_4=_4||_5.groupPrecision;if(_4!=null)_6.precision=_4}
return _6});isc.evalBoundary;isc.B.push(isc.A.clearGroupSpecifiers=function isc_ListGrid_clearGroupSpecifiers(){this.setGroupSpecifiers(null)},isc.A.groupBy=function isc_ListGrid_groupBy(_1){var _2=[];if(isc.isAn.Array(_1)){_2=isc.shallowClone(_1)}else{for(var i=0;i<arguments.length;i++){_2[i]=arguments[i]}}
if(_2.length>0){if(isc.isA.String(_2[0])){this.setGroupSpecifiers(_2);return}else if(isc.isAn.Object(_2[0])){_2=_2.getProperty("property")}}
if(!this.fields){this.groupState=_2.join(",");this.$993=true;return}
for(var i=0;i<_2.length;i++){if(_2[i]!=null&&!this.getUnderlyingField(_2[i])){this.logWarn("groupBy() passed field:"+_2[i]+" - this is not a valid field within this grid - ignoring","grouping");return}}
if(_2.length>0&&_2[0]==null){_2=[]}
if(this.handleGroupBy!=null&&this.handleGroupBy(_2)==false){return}
if(_2.length==0){this.clearGroupBy();this.handleGroupStateChanged();if(this.groupByComplete!=null){this.groupByComplete(_2)}
return}
var _4=[];for(var i=0;i<_2.length;i++){if(this.isCheckboxField(_2[i]))continue;var _5=(_2[i].property||_2[i]),_6=this.getUnderlyingField(_5);if(_6&&_6.displayField!=null&&_6.optionDataSource==null&&this.getField(_6.displayField))
{_5=_6.displayField}
_4.add(_5)}
this.logInfo("groupBy: "+_4,"grouping");var _7=this.isGrouped;this.isGrouped=true;if(this.showGroupSummary&&this.showGroupSummaryInHeader&&this.showGroupTitleColumn&&this.getGroupTitleField()==null)
{if(this.groupTitleColumn==null){this.groupTitleColumn=this.getGroupTitleColumn()}
if(this.fields.indexOf(this.groupTitleColumn)==-1){this.addField(this.groupTitleColumn,this.getGroupTitleColumnPosition())}}
this.isGrouped=_7;this.$997(true,true,false,false,false,_2,_4);this.dataChanged()},isc.A.clearGroupBy=function isc_ListGrid_clearGroupBy(){this.$997(false,false,false,true,false);this.logInfo("ungrouping","grouping");if(this.$21z){delete this.$21z;delete this.$100a;isc.Timer.clear(this.$1072);delete this.$1072;isc.clearPrompt()}
var _1=this.getGroupByFields();if(_1!=null)for(var i=0;i<_1.length;i++){var _3=this.getUnderlyingField(_1[i]);if(_3)_3.groupingMode=null}
this.isGrouped=false;if(this.originalData){if(this.groupByField)this.groupByField=null;var _4=this.preserveEditsOnSetData;this.preserveEditsOnSetData=true;this.setData(this.originalData,true);this.preserveEditsOnSetData=_4;delete this.originalData;delete this.groupTree}
if(this.groupTitleColumn!=null){var _5=this.completeFields||this.fields,_6=_5.indexOf(this.groupTitleColumn);if(_6!=-1){var _7=[];for(var i=0;i<_5.length;i++){if(i==_6)continue;_7[_7.length]=_5[i]}
this.setFields(_7)}}},isc.A.getGroupTitle=function isc_ListGrid_getGroupTitle(_1,_2){return this.$108m(this.data,this.getGroupByFields(),null,this.singleCellValueProperty,_1,_2)},isc.A.$108m=function isc_ListGrid__getGroupTitle(_1,_2,_3,_4,_5,_6){if(!_6&&_2){var _7=_1.getLevel(_5)-1,_6=this.getUnderlyingField(_2[_7])}
if(_6==null){return}
var _8;if(_6.getGroupTitle){return _6.getGroupTitle(_5.groupValue,_5,_6,_6.name,this)}
else if(!_6.getGroupValue&&_6.$31u&&_6.$31u.getGroupTitle){return _6.$31u.getGroupTitle(_5.groupValue,_5,_6,_6.name,this)}else{_8=_5.groupValue}
var k=(_3==null?-1:_3.indexOf(_6)),_10=(k==-1?_6.valueMap:_3[k]);if(_10){_8=this.resolveValueMap(_8,_10)}else if(_6.displayField&&_5[_6.displayField]!=null){_8=_5[_6.displayField]}
if(_6.escapeHTML&&isc.isA.String(_8)&&_8!=this.$1w){_8=_8.asHTML()}
return _8},isc.A.getGroupNodeHTML=function isc_ListGrid_getGroupNodeHTML(_1,_2){var _3=this.frozenBody===_2;var _4=this.frozenFields&&this.frozenFields.length>0;if(_4&&!_3&&this.singleCellGroupHeaders()){return this.emptyCellValue}
if(!isc.isA.Tree(this.data))return this.emptyCellValue;var _5=this.data.isOpen(_1),_6=_5?"opened":"closed",_7=isc.Img.urlForState(this.groupIcon,null,null,_6),_8=isc.Canvas.spacerHTML(this.groupIconPadding,1),_9=isc.Canvas.spacerHTML((this.data.getLevel(_1)-1)*this.groupIndentSize+this.groupLeadingIndent,1),_10=this.getGroupTitle(_1);var _11={src:_7,width:this.groupIconSize,height:this.groupIconSize,align:"middle"},_12=this.imgHTML(_11,null,null,null,"eventPart='opener'",null,null,isc.Canvas.$13x);var _13=(this.canCollapseGroup?_9+_12:_9)+_8+_10;return _13},isc.A.$17c=function isc_ListGrid__shouldCascadeSelection(){if(this.canSelectGroups&&this.groupTree!=null&&(this.groupTree==this.data))return true;return this.Super("$17c",arguments)},isc.A.getGroupTreeSelection=function isc_ListGrid_getGroupTreeSelection(_1,_2){var _3=this.getSelection(_1,true);if(_2&&this.isGrouped){var _4=[];for(var i=0;i<_3.length;i++){if(_3[i].$17b)_4.add(_3[i])}
_3=_4}
return _3},isc.A.getSelection=function isc_ListGrid_getSelection(_1,_2,_3){var _4=this.Super("getSelection",arguments);if(!_2&&_4&&_4.length>0&&this.isGrouped){var _5=[];for(var i=0;i<_4.length;i++){if(_4[i].$17b)continue;_5.add(_4[i])}
_4=_5}
return _4},isc.A.getSelectedRecord=function isc_ListGrid_getSelectedRecord(){var _1=this.getSelection();return(_1.length>0?_1[0]:null)},isc.A.$995=function isc_ListGrid__getGroupValue(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _10=_3.userFormula,_11=_3.userSummary;if(_5==null)_5=_10;if(_6==null)_6=_11;if(_7==null)_7=_3.displayField;if(_8==null)_8=_3.valueMap;if(_3.getGroupValue){_1=_3.getGroupValue(_1,_2,_3,_4,this)}else if(_5){_3.userFormula=_5;_1=this.getFormulaFieldValue(_3,_2);_3.userFormula=_10}else if(_6){_3.userSummary=_6;_1=this.getSummaryFieldValue(_3,_2);_3.userSummary=_11}else{if(_7){var _12=this.$106h(_3,_8,_7,_1,_2);if(_12){_1=_12}}else if(_3.$31u&&_3.$31u.getGroupValue){_1=_3.$31u.getGroupValue(_1,_2,_3,_4,this)}}
if(_8&&_8[_1]){_1=_8[_1]}
if(_1==null||isc.isAn.emptyString(_1)){_1=_9||this.nullGroupTitle}
return _1},isc.A.$17t=function isc_ListGrid__addRecordToGroup(_1,_2,_3,_4){return this.$108h(this.getGroupByFields(),this.data,this.emptyCellValue,this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,null,null,this.applyFormulaAfterSummary,null,null,null,null,this.nullGroupTitle,this.showGroupSummary,this.showGroupSummaryInHeader,this.recordBaseStyleProperty,this.groupNodeBaseStyle,this.recordCustomStyleProperty,this.groupNodeStyle,this.recordEditProperty,this.singleCellValueProperty,_1,_2,_3,_4)},isc.A.$108h=function isc_ListGrid___addRecordToGroup(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26){var _27=this.$96e(_14,_15),_28=_22.getRoot(),_29;for(var i=0;i<_1.length;i++){var _31=_1[i],_32=this.getUnderlyingField(_31),_33;if(_26!=null){_33=_26.indexOf(_23)}else{_33=_2.indexOf(_23)}
var _34=_9==null?_32.userFormula:_9[i],_35=_10==null?_32.userSummary:_10[i],_36=_11==null?_32.displayField:_11[i],_37=_12==null?_32.valueMap:_12[i],_38=this.$1013(_3,_4,_5,_6,_7,_2,_8,(_34!=null),_34,(_35!=null),_35,_23,_33,_31,true);var _39=_38;_38=this.$995(_38,_23,_32,_31,_34,_35,_36,_37,_13);var _40=_22.getChildren(_28);if(_40==null)_29=null;else _29=_40.find('groupValue',_38,_32.type=="datetime"?Array.DATETIME_VALUES:null);if(!_29){_29={groupName:_31,groupValue:_38,$17b:true,canDrag:false};if(_32.optionDataSource==null&&_32.displayField!=null){_29[_32.displayField]=_23[_32.displayField]}
_29[_31]=_39;_29[_16]=_17;_29[_18]=_19;_29[_20]=false
if(_25!=null){_29[_22.openProperty]=isc.isA.List(_25)?_25.find(_31,_38):!!_25}
if(_14)_22.addBeforeSummaries(_29,_28);else _22.add(_29,_28)}
_28=_29}
if(_14)_22.addBeforeSummaries(_23,_28);else _22.add(_23,_28);if(_24){var _41=_22.getParents(_23);for(var i=_41.length-2,j=0;i>=0;i--,j++){var _43=this.$108m(_22,_1,_12,_21,_41[i],null);if(!_27)_41[i].groupTitle=_43;else _41[i][_21]=_43}}},isc.A.isGroupNode=function isc_ListGrid_isGroupNode(_1){if(_1==null)return false;return!!_1.$17b},isc.A.applyGroupSummaryToHeader=function isc_ListGrid_applyGroupSummaryToHeader(_1,_2,_3){return this.$108n(this.groupByFieldSummaries,this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3)},isc.A.$108n=function isc_ListGrid__applyGroupSummaryToHeader(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_7.groupName;if(_1!=null&&!_1.contains(_9)){return}
var _10=_6.combineWithEditVals(_6.getRecordsInGroup(_7)),_11=this.$103m(_2,_3,_4,_5,_10,_7,_8);if(isc.isAn.Array(_11))_11=_11[0];if(!_11)return 0;var _8=this.completeFields||this.fields;for(var i=0;i<_8.length;i++){var _13=_8[i];var _14=this.getGridSummaryFunction(_13);if(_14&&isc.isAn.Array(_14))_14=_14[0];if(_14=="count"){var _15=_7[this.recordApplyPluralTitleProperty]||[];_15.add(_13.name);_7[this.recordApplyPluralTitleProperty]=_15}
var _16=_8[i].name;if(_16=="groupTitle")continue;_7[_16]=_11[_16]}
_7[_4]=true;return _10.length},isc.A.setShowGroupSummaryInHeader=function isc_ListGrid_setShowGroupSummaryInHeader(_1){if(this.showGroupSummaryInHeader==_1)return;this.showGroupSummaryInHeader=_1;var _2=this.getGroupByFields();this.ungroup();if(_2!=null&&_2.length>0){this.groupBy(_2)}},isc.A.setShowCollapsedGroupSummary=function isc_ListGrid_setShowCollapsedGroupSummary(_1){if(this.showCollapsedGroupSummary==_1)return;this.showCollapsedGroupSummary=_1;var _2=this.getGroupByFields();this.ungroup();if(_2!=null&&_2.length>0){this.groupBy(_2)}},isc.A.ungroup=function isc_ListGrid_ungroup(){this.$987=this.getSelectedState(true);this.groupBy(null)},isc.A.setHeaderSpans=function isc_ListGrid_setHeaderSpans(_1,_2){this.headerSpans=_1;this.$1068=true;if(_2)return;if(this.completeFields)this.setFields(this.completeFields);this.layoutChildren("headerSpans changed")},isc.A.setHeaderSpanTitle=function isc_ListGrid_setHeaderSpanTitle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanTitle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.title=_2;if(_3.liveObject&&_3.headerTitle==null){_3.liveObject.setTitle(_2)}},isc.A.setHeaderSpanHeaderTitle=function isc_ListGrid_setHeaderSpanHeaderTitle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanHeaderTitle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerTitle=_2;if(_3.liveObject)_3.liveObject.setTitle(_2)},isc.A.setHeaderSpanBaseStyle=function isc_ListGrid_setHeaderSpanBaseStyle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanBaseStyle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerBaseStyle=_2;if(_3.liveObject==null)return;if(_2==null){var _4=this.getSpannedFields(_3),_5=_4[0];var _6=this.getHeaderButtonProperties();if(_5.frozen&&_6.frozenBaseStyle){_2=_6.frozenBaseStyle}else if(_6.baseStyle){_2=_6.baseStyle}
if(_2==null){_2=_3.liveObject.getClass().getPrototype().baseStyle}}
_3.liveObject.setBaseStyle(_2)},isc.A.setHeaderSpanTitleStyle=function isc_ListGrid_setHeaderSpanTitleStyle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanTitleStyle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerTitleStyle=_2;if(_3.liveObject==null)return;if(_2==null){var _4=this.getSpannedFields(_3),_5=_4[0];var _6=this.getHeaderButtonProperties();if(_5.frozen&&_6.frozenTitleStyle){_2=_6.frozenTitleStyle}else if(_6.titleStyle){_2=_6.titleStyle}
if(_2==null){_2=_3.liveObject.getClass().getPrototype().titleStyle}}
_3.liveObject.setTitleStyle(_2)},isc.A.setShowGroupSummary=function isc_ListGrid_setShowGroupSummary(_1){if(this.$21z){this.$1074=_1;return}
var _2=(this.showGroupSummary!=_1);if(_2&&this.groupTree){var _3=this.groupByFieldSummaries;this.$108l(this.groupTree,this.showGroupSummary,_1,_3,_3)}
this.showGroupSummary=_1},isc.A.setGroupByFieldSummaries=function isc_ListGrid_setGroupByFieldSummaries(_1){if(this.$108u){this.$1073=_1;return}
var _2=(this.groupByFieldSummaries!=_1);if(!_2){var _3=isc.isAn.Array(_1);_2=(_3!=isc.isAn.Array(this.groupByFieldSummaries));if(!_2&&_3){var _4=_1.length;_2=(_4==this.groupByFieldSummaries.length);if(!_2){for(var i=_4;!_2&&i--;){_2=!this.groupByFieldSummaries.contains(_1[i])}}}}
if(_2&&this.groupTree){var _6=this.showGroupSummary;this.$108l(this.groupTree,_6,_6,this.groupByFieldSummaries,_1)}
this.groupByFieldSummaries=_1},isc.A.refreshGroupSummary=function isc_ListGrid_refreshGroupSummary(_1,_2){if(!this.isGrouped||!this.showGroupSummary||!this.groupTree)return;if(isc.isA.Number(_1))_1=this.groupTree.get(_1);if(this.showGroupSummaryInHeader){if(_1!=null){var _3=this.groupTree.$108c(_1,false,[]);for(var i=_3.length-1;i>=0;i--){var _5=_3[i];this.applyGroupSummaryToHeader(this.groupTree,_5,_2);this.refreshRow(this.groupTree.indexOf(_5));delete _5.$108d}}else{var _3=this.groupTree.findAll("$17b",true);if(_3!=null){for(var i=0;i<_3.length;i++){this.applyGroupSummaryToHeader(this.groupTree,_3[i],_2)}}
this.markForRedraw("refresh group summaries")}}else{this.$108l(this.groupTree,this.showGroupSummary,this.showGroupSummary,this.groupByFieldSummaries,this.groupByFieldSummaries,true,_1,_2)}},isc.A.configureGrouping=function isc_ListGrid_configureGrouping(_1){var _2=this,_3=this.getGroupByFields();if(_1&&(!_3||_3.length==0)){_3=[_1[this.fieldIdProperty]]}
isc.MultiGroupDialog.askForGrouping(this,_3,function(_4){if(_4)_2.setGroupSpecifiers(_4)})},isc.A.addBodyPassthroughMethods=function isc_ListGrid_addBodyPassthroughMethods(_1){if(this.body)this.$106o(this.body);if(this.frozenBody)this.$106o(this.frozenBody)},isc.A.$106o=function isc_ListGrid__addBodyPassthroughMethods(_1){var _2={},_3=isc.getKeys(isc.ListGrid.$95o);for(var i=0;i<_3.length;i++){var _5=_3[i],_6=this[_5];if(_5=="cellContextClick")continue;if(_6==null){_2[_5]=_1.getClass().getPrototype()[_5]}else if(_6!=isc.ListGrid.$95p[_5]&&!((_1[_5]!=null)&&(_1[_5].$93b||(_1[_5]!=_1.getClass().getPrototype()[_5]))))
{_2[_5]=isc.ListGrid.$95o[_5]}}
_1.addMethods(_2)},isc.A.addProperties=function isc_ListGrid_addProperties(_1){this.Super("addProperties",arguments);this.addBodyPassthroughMethods()},isc.A.addMethods=function isc_ListGrid_addMethods(_1){this.Super("addMethods",arguments);this.addBodyPassthroughMethods()},isc.A.propertyChanged=function isc_ListGrid_propertyChanged(_1,_2){this.invokeSuper(isc.ListGrid,"propertyChanged",_1,_2);if(this.$98q[_1])this.$108v=true;if(this.body==null)return;if(isc.ListGrid.$95j.contains(_1)){this.body[_1]=_2}
if(this.$98r[_1]!=null){this.body.setProperty(this.$98r[_1],_2);this.markForRedraw()}
if(this.editingOn&&this.editProxy&&_1=="initialCriteria"){this.setCriteria(this.initialCriteria)}},isc.A.doneSettingProperties=function isc_ListGrid_doneSettingProperties(){if(this.$108v)this.$98x()},isc.A.setChildEditableProperties=function isc_ListGrid_setChildEditableProperties(_1,_2,_3,_4){var _5=isc.DS.get(_3.type);if(!_5||!_5.inheritsSchema("ListGridField")){return this.Super("setChildEditableProperties",arguments)}
if(!_2.hidden&&_1.showIf=="false")_1.showIf=null;var _6=this.completeFields||this.fields;if(isc.EditContext.testNodeSchemaFieldProperty(_3,"rebuildOnChange",_2)){_3.liveObject=isc.addProperties({editContext:_4,editNode:_3},_3.defaults);_6=_6.map(function(_7){return _7==_1?_3.liveObject:_7})}else{isc.addProperties(_1,_2)}
this.setFields(_6)},isc.A.getExportFieldValue=function isc_ListGrid_getExportFieldValue(_1,_2,_3){var _4=this.getSpecifiedField(_2);if(this.isCheckboxField(_4)||_4.valueIcons||this.$100r(_4))
{var _5=(_4.displayField!=null&&!_4.valueMap&&!_4.getCellValue&&this.$18d(_4));var _6=this.getRecordIndex(_1),_7;_7=this.getRawCellValue(_1,_6,_5?_4.displayField:_2,true);var _8=_4.hiliteHTMLAfterFormat;if(_8==null)_8=this.hiliteHTMLAfterFormat;if(_8==null)_8=true;var _9=this.getFieldHilites(_1,_4);if(!_8){if(_9!=null)_7=this.applyHiliteHTML(_9,_7);_7=this.$57n(_7,_1,_4,_6,_3)}else{_7=this.$57n(_7,_1,_4,_6,_3);if(_9!=null)_7=this.applyHiliteHTML(_9,_7)}
return this.htmlUnescapeExportFieldTitle(_7.toString())}
return this.Super("getExportFieldValue",arguments)},isc.A.getOriginalData=function isc_ListGrid_getOriginalData(){return(this.isGrouped&&this.originalData)?this.originalData:this.getData()},isc.A.getSelectedCellData=function isc_ListGrid_getSelectedCellData(_1,_2){if(this.canSelectCells){var _3=[],_4={},_5;var _6=this.selection.getSelectedCells();if(_6.length==0)return[];var _7,_8=0,_9=_6[_8][1];while(_8<_6.length){var _10={},_11=false,_12=_6[_8][0],_13=_6[_8][1];while(_8<_6.length){var _14=_6[_8][0];var _15=_6[_8][1];if(_14!=_12)break;if(_15==_13||!_2){var _16=this.getCellRecord(_14,_15);if(this.shouldShowRecordComponent(_16,_15)){_7=this.getRawCellValue(_16,_14,_15);if(_7===_5&&this.copyEmptyCells)_7=null;_11=true}else _7=_5}
var _17=_15-_9;if(_1){var _18=_4[_17];if(_18!==_5)_7=_18;else _4[_17]=_7}
if(_7!==_5)_10[_17]=_7;_8++}
if(_11)_3.add(_10)}
return _3}
return null},isc.A.applyCellData=function isc_ListGrid_applyCellData(_1,_2,_3){if(!this.canSelectCells||!_1)return;if(!_3)_3=this.selection.getSelectedCells().slice(0,1);if(_3.length==0)return;var _4=_3[0][1],_5=this.getTotalRows();var _6=isc.CellListIterator.create({cells:_3});for(var i=0,_8=_6.getNextRow();i<_1.length&&_8<_5;i++,_8=_6.getNextRow()){while(!this.$108w(_8)){_8=_6.getNextRow()}
if(_8>=_5)break;var _9,_10=_1[i];var _11=isc.ListGrid.$95q(_10,!_2);for(var j=0;j<_11.length;j++){if(j==0||_2)_9=_4+_11[j];else _9++;for(var _13=null;_9>=0&&_9<this.getTotalCols();_9++){_13=this.$108x(_9);if(_13||_2)break}
if(_13&&this.canEditCell(_8,_9)){this.setEditValue(_8,_9,_10[_11[j]])}}}},isc.A.applyRecordData=function isc_ListGrid_applyRecordData(_1){if(!this.canSelectCells||!_1)return;var _2=this.selection.getSelectedCells();if(_2.length==0)return;var _3,_4=_2[0][0],_5=this.getTotalRows();for(var i=0,_7=_4;i<_1.length&&_7<_5;i++,_7++){while(!this.$108w(_7)){_7++}
if(_7>=_5)break;var _8=_1[i];for(var _9 in _8){if(_8.hasOwnProperty(_9)){var _10=_8[_9];if(_10!==_3){var _11=this.getFieldNum(_9);var _12=this.getField(_11);if(_12&&this.canEditCell(_7,_11)){this.setEditValue(_7,_11,_10)}}}}}},isc.A.$108x=function isc_ListGrid__getFieldIfNonGenerated(_1){var _2=this.getField(_1);if(!_2||_2.userFormula||_2.userSummary||_2.type==this.$97q)return null;return _2},isc.A.$108w=function isc_ListGrid__isValidRowForApplyGridData(_1){var _2=this.getCellRecord(_1);if(_2==null)return true;return!_2.$17b&&!_2[this.isSeparatorProperty]&&!_2[this.groupSummaryRecordProperty]},isc.A.$1029=function isc_ListGrid__invokeKeyboardCopyPasteShortcut(_1){if(!this.useCopyPasteShortcuts||!this.canSelectCells)return true;switch(_1){case"D":this.applyCellData(this.getSelectedCellData(true,null),true,this.selection.getSelectedCells());break;case"R":this.applyCellData(this.getSelectedCellData(null,true),true,this.selection.getSelectedCells());break;case"C":isc.ListGrid.$95m=this.getSelectedCellData();break;case"V":this.applyCellData(isc.ListGrid.$95m);break}
return false},isc.A.$1037=function isc_ListGrid__provideEditRecordToRuleContext(_1){if(this.ruleScope||this.isRuleScope){var _2=(this.getEditSession(this.getEditRow())?this.getEditRow():null),_3=(_2!=null?this.getEditedRecord(_2,null,true):null),_4=(_2!=null?this.rowHasChanges(_2,false):null),_5=this.getDataSource(),_6=this.hasStableID()||(this.editNode!=null);if(_1){for(var _7 in _1){if(_5)this.provideRuleContext(_5.getID()+"."+_7,_1[_7],_6);if(_6)this.provideRuleContext(this.ID+".values."+_7,_1[_7],true)}}else{if(_3){if(this.selection)delete _3[this.selection.selectionProperty];delete _3.__ref}
if(_5)this.provideRuleContext(_5.getID(),_3,_6);if(_6)this.provideRuleContext(this.ID+".values",_3,true)}
if(_6)this.provideRuleContext(this.ID+".hasChanges",_4)}},isc.A.$104i=function isc_ListGrid__provideEditFocusToRuleContext(_1){this.provideRuleContext(this.ID+".focusField",(_1?_1.name:null))},isc.A.$101x=function isc_ListGrid__observeRuleContextChanged(){var _1=this,_2=this.getRuleScopeComponent();if(!this.isObserving(_2,"ruleContextChanged")){this.observe(_2,"ruleContextChanged",function(_4){var _3=_1.getCriteria()||_1.getInitialCriteria();if(_3&&isc.DS.$108y(_3)){_1.fetchData(_3)}})}},isc.A.$6v=function isc_ListGrid__removeFromRuleScope(){var _1=this.getRuleScopeComponent();if(_1&&this.isObserving(_1,"ruleContextChanged")){this.ignore(_1,"ruleContextChanged")}
this.Super("$6v",arguments)});isc.B._maxIndex=isc.C+895;isc.ListGrid.registerStringMethods(isc.GridRenderer.$93z);isc.ListGrid.registerStringMethods({recordClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordDoubleClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordsDropped:"records,rowNum,viewer,sourceWidget",recordDropMove:"viewer,recordNum,record,position",editValueChanged:"rowNum,fieldName,newValue,oldValue",editorChange:"record,newValue,oldValue,rowNum,colNum",cellChanged:"record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum",editComplete:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse",editFailed:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse,dsRequest",editorEnter:"record,value,rowNum,colNum",rowEditorEnter:"record,editValues,rowNum",editorExit:"editCompletionEvent,record,newValue,rowNum,colNum",rowEditorExit:"editCompletionEvent,record,newValues,rowNum",validateCellValue:"rowNum,colNum,newValue,oldValue",validateFieldValue:"newValue,oldValue,record,field,rowNum,colNum",formatCellValue:"value,record,rowNum,colNum",formatEditorValue:"value,record,rowNum,colNum",parseEditorValue:"value,record,rowNum,colNum",sortChanged:"sortSpecifiers",fieldStateChanged:"",groupStateChanged:"",viewStateChanged:"",dataArrived:"startRow,endRow",headerHover:"fieldNum",headerClick:"fieldNum",onHeaderClick:"fieldNum",onRecordDrop:"dropRecords,targetRecord,index,dropPosition,sourceWidget",onExpandRecord:"record",onCollapseRecord:"record",drawAreaChanged:"oldStartRow,oldEndRow,oldStartCol,oldEndCol",showRecordComponent:"record,colNum",createRecordComponent:"record,colNum",updateRecordComponent:"record,colNum,component,recordChanged",updateFilterEditorValues:"criteria",filterEditorSubmit:"criteria",handleGroupBy:"fields",groupByComplete:"fields",hilitesChanged:"",cellErrorIconHover:"record,rowNum,colNum"});isc.ListGrid.$108z=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerDefaults"));isc.ListGrid.$1080=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerButtonDefaults"));isc.ListGrid.classInit();isc.defineClass("LineEditor",isc.ListGrid);isc.A=isc.LineEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canEdit=true;isc.A.editEvent="click";isc.A.editOnFocus=true;isc.A.modalEditing=true;isc.A.enterKeyEditAction="nextRowStart";isc.A.listEndEditAction="next";isc.A.height=50;isc.A.emptyMessage="Click to add data";isc.A.emptyMessageStyle="normal";isc.A.autoFitData="vertical";isc.A.leaveScrollbarGap=false;isc.B.push(isc.A.click=function isc_LineEditor_click(){var _1=this.getRecord(this.getEventRow());this.Super("click",arguments);if(_1==null&&isc.EH.lastEvent.target==this.body)this.startEditingNew()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TreeGrid","ListGrid");isc.addGlobal("TreeViewer",isc.TreeGrid);isc.defineClass("TreeGridBody",isc.GridBody);isc.A=isc.TreeGridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$28f="TABLE";isc.A.$1081="padding:0px;border:0px;";isc.B.push(isc.A.$928=function isc_TreeGridBody__getShowClippedValuesOnHover(){if(this.showClippedValuesOnHover==null)return true;return this.showClippedValuesOnHover},isc.A.cellValueIsClipped=function isc_TreeGridBody_cellValueIsClipped(_1,_2,_3,_4,_5){var _6=this.grid,_7=_6.$91i,_8=_6.getFieldBody(_7);if(this===_8&&_2==_6.getLocalFieldNum(_7)){var _9=this.getTableElement(_1,_2);if(_9==null)return false;var _10=_9.firstChild;while(_10&&_10.tagName!=this.$28f)_10=_10.firstChild;if(_10&&_10.rows&&_10.rows[0]){var _11=_10.rows[0].lastChild,_12=_11;if(isc.Browser.isMoz&&_11.firstChild&&_11.firstChild.hasAttribute&&_11.firstChild.hasAttribute("$39g"))
{_12=_11.firstChild}
return this.$92b(_12)}}
return this.invokeSuper(isc.TreeGridBody,"cellValueIsClipped",_1,_2,_3,_4,_5)},isc.A.defaultCellValueHoverHTML=function isc_TreeGridBody_defaultCellValueHoverHTML(_1,_2,_3,_4,_5,_6){var _7=this.grid,_8=_7.$91i,_9=_7.getFieldBody(_8);if(this===_9&&_3==_7.getLocalFieldNum(_8)){return this.grid.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_8)}
return this.invokeSuper(isc.TreeGridBody,"defaultCellValueHoverHTML",_1,_2,_3,_4,_5,_6)},isc.A.$92w=function isc_TreeGridBody__updateCellStyle(_1,_2,_3,_4,_5){if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(!this.showHiliteInCells&&_3==this.grid.getLocalFieldNum(this.grid.getTreeFieldNum()))
{if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);var _6=_4.firstChild;while(_6&&_6.tagName!=this.$28f)_6=_6.firstChild;if(_6){var _7;if(this.getCellCSSText){_7=this.getCellCSSText(_1,_2,_3);if(_7!=null&&!isc.isAn.emptyString(_7)){_7+=isc.Canvas.$05}else _7=null}
_6.className=_5;if(_7!=null)_6.cssText=_7;var _8=_6.rows,_9=_8[0].childNodes;if(_9&&_9.length>0){for(var i=0;i<_9.length;i++){_9[i].className=_5;if(_7){if(i==_9.length-1){_7+=(this.isRTL()?"paddingRight:":"paddingLeft:")+this.iconPadding}
_9[i].cssText=_7}}}}}
return isc.GridRenderer.getPrototype().$92w.apply(this,[_1,_2,_3,_4,_5])},isc.A.click=function isc_TreeGridBody_click(_1,_2){if(!this.$20v()){var _3=this.grid,_4=_3.getEventRecordNum(),_5=_4<0?null:_3.getRecord(_4);if(_5!=null&&_3.data.isFolder(_5)&&_3.clickInOpenArea(_5)){if(isc.screenReader){this.$90v(_4)}
_3.toggleFolder(_5);_3.clearLastHilite();_3.$99v=null;delete this.$947;return isc.EH.STOP_BUBBLING}}
return this.Super("click",arguments)},isc.A.mouseDown=function isc_TreeGridBody_mouseDown(){var _1=this.getEventRow(),_2=_1<0?null:this.grid.data.get(_1);if(_2!=null){if(this.grid.clickInOpenArea(_2)){return isc.EH.STOP_BUBBLING}else if(this.grid.clickInCheckboxArea(_2)&&this.canSelectRecord(_2)){var _3=this.grid.selectionType;if(_3==isc.Selection.SINGLE){this.deselectAllRecords();this.selectRecord(_2)}else if(_3==isc.Selection.SIMPLE||_3==isc.Selection.MULTIPLE){if(this.selection.isSelected(_2))this.deselectRecord(_2);else this.selectRecord(_2)}
return isc.EH.STOP_BUBBLING}}
return this.Super("mouseDown",arguments)},isc.A.mouseUp=function isc_TreeGridBody_mouseUp(){var _1=this.getEventRow(),_2=_1<0?null:this.grid.data.get(_1);if(_2!=null&&(this.grid.clickInOpenArea(_2)||this.grid.clickInCheckboxArea(_2)))
{return isc.EH.STOP_BUBBLING}else{return this.Super("mouseUp",arguments)}},isc.A.placeEmbeddedComponent=function isc_TreeGridBody_placeEmbeddedComponent(_1){if(this.grid.indentRecordComponents){var _2=_1.$91x;if(_2==this.grid.getTreeFieldNum()&&!_1.snapOffsetLeft){var _3=_1.embeddedRecord;if(_3!=null){_1.snapOffsetLeft=this.grid.getOpenAreaWidth(_3)+this.grid.iconPadding}}}
return this.Super("placeEmbeddedComponent",arguments)},isc.A.getTableHTML=function isc_TreeGridBody_getTableHTML(_1,_2,_3,_4,_5,_6){var _7=this.grid.data,_8=(isc.isA.ResultTree(_7)&&!this.isEmpty());var _9=_2,_10=_3;if(_8){var _11=this.$904(_2,_3,false);_9=_11[0];_10=_11[1];_7.$1082(_9,_10)}
var _12=this.invokeSuper(isc.TreeGridBody,"getTableHTML",_1,_2,_3,_4,_5,_6);if(_8){_7.$1083(_9,_10)}
return _12});isc.B._maxIndex=isc.C+9;isc.A=isc.TreeGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.TREE_FIELD={name:"nodeTitle",treeField:true,canFilter:false,$102e:true,getCellValue:function(_1,_2,_3,_4){if(!_1.getNodeTitle){var _5=_4==null?null:_1.getFieldName(_4);return _2==null||_5==null?null:_2[_5]}
return _1.getNodeTitle(_2,_3,this)},getFieldTitle:function(_1,_2){var _3=_1.getField(_2);if(_3.name=="nodeTitle")return _1.treeFieldTitle;return _3.title||_3.name}};isc.B.push(isc.A.$1084=function isc_c_TreeGrid__pagedTreeFieldSortNormalizer(_1,_2,_3){return _3.getNodeTitle(_1,-1,this)},isc.A.$1085=function isc_c_TreeGrid__getTreeCellTemplate(){if(!this.$43j){isc.Canvas.$0y.add({target:this,methodName:"$43k"});this.$43j=true}
if(this.$1086==null){this.$1086=["<table"+(isc.Browser.isIE&&isc.screenReader?" unselectable='on'":"")+" role='presentation' cellpadding=0 cellspacing=0 class='",,"' style='",,isc.Canvas.$05+"'><colgroup><col width='",,"px'/><col width='",,"px'/><col/></colgroup><tbody><tr><td"+(isc.Browser.isIE&&isc.screenReader?" unselectable='on'":"")+" style='line-height:0px;",,isc.Canvas.$05+"' class='",,"'>",,"</td>"]}
return this.$1086},isc.A.$1087=function isc_c_TreeGrid__getTreeCellTitleTemplate(){if(!this.$43j){isc.Canvas.$0y.add({target:this,methodName:"$43k"});this.$43j=true}
if(this.$1088==null){this.$1088=["<td"+(isc.Browser.isIE&&isc.screenReader?" unselectable='on'":"")+" style='line-height:0px;",,";"+isc.Canvas.$05+"' class='",,"'>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari||isc.Browser.isIE?"</nobr>":"")+"</td><td",,(isc.Browser.isIE&&isc.screenReader?" unselectable='on'":"")+" style='",,";"+isc.Canvas.$05+(isc.Page.isRTL()?"padding-left:1px;padding-right:":"padding-right:1px;padding-left:"),,"px;' class='",,"'>",,,,"</td>"]}
return this.$1088},isc.A.$43k=function isc_c_TreeGrid__doublingStringsChanged(){this.$1086=null;this.$1088=null});isc.B._maxIndex=isc.C+4;isc.A=isc.TreeGrid.getPrototype();isc.A.autoFetchTextMatchStyle="exact";isc.A.cascadeSelection=false;isc.A.showPartialSelection=false;isc.A.booleanTrueImage=null;isc.A.booleanFalseImage=null;isc.A.booleanPartialImage=null;isc.A.showClippedValuesOnHover=null;isc.A.treeFieldTitle="Name";isc.A.autoAssignTreeField=true;isc.A.showRoot=false;isc.A.displayNodeType=isc.Tree.FOLDERS_AND_LEAVES;isc.A.canDragRecordsOut=false;isc.A.canDropRootNodes=true;isc.A.dragDataAction=isc.ListGrid.MOVE;isc.A.openDropFolderDelay=600;isc.A.parentAlreadyContainsChildMessage="This item already contains a child item with that name.";isc.A.cantDragIntoSelfMessage="You can't drag an item into itself.";isc.A.cantDragIntoChildMessage="You can't drag an item into one of it's children.";isc.A.fixedFieldWidths=true;isc.A.wrapCells=false;isc.A.showHiliteInCells=false;isc.A.indentSize=20;isc.A.extraIconGap=2;isc.A.iconSize=16;isc.A.skinImgDir="images/TreeGrid/";isc.A.showLoadingIcons=true;isc.A.loadingIcon="[SKIN]folder_loading.gif";isc.A.folderIcon="[SKIN]/folder.gif";isc.A.dropIconSuffix="drop";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.nodeIcon="[SKIN]/file.gif";isc.A.showOpenIcons=true;isc.A.showDropIcons=true;isc.A.customIconProperty="icon";isc.A.customIconOpenProperty="showOpenIcon";isc.A.customIconDropProperty="showDropIcon";isc.A.showCustomIconOpen=false;isc.A.showCustomIconDrop=false;isc.A.leaveSelectionCheckboxGap=true;isc.A.manyItemsImage="[SKIN]folder_file.gif";isc.A.showConnectors=false;isc.A.showFullConnectors=true;isc.A.showOpener=true;isc.A.alwaysShowOpener=false;isc.A.openerImage="[SKIN]opener.gif";isc.A.connectorImage="[SKIN]connector.gif";isc.A.offlineNodeMessage="This data not available while offline";isc.A.indentRecordComponents=true;isc.A.createDefaultTreeField=true;isc.A.canGroupBy=false;isc.A.ignoreEmptyCriteria=false;isc.A.drawAllMaxCells=50;isc.A.drawAheadRatio=1.0;isc.A.$203="open_icon_";isc.A.$204="extra_icon_";isc.A.$1089="icon_";isc.A.$109a="nodeTitle";isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.bodyConstructor="TreeGridBody";isc.A.recordDropAppearance=isc.ListGrid.BOTH;isc.A.iconPadding=3;isc.A.$109b="</tr></tbody></table>";isc.A.$y5=";";isc.A.$42x="checkbox";isc.A.$109c="absmiddle";isc.B.push(isc.A.initWidget=function isc_TreeGrid_initWidget(){this.invokeSuper(isc.TreeGrid,this.$1v);if(!this.dataSource&&this.data!=null&&this.data.dataSource){this.dataSource=this.data.dataSource}
if(this.createDefaultTreeField&&(this.getDataSource()==null||!this.useAllDataSourceFields))
{if(!this.fields||this.fields.length==0){this.fields=[isc.TreeGrid.TREE_FIELD]}}},isc.A.setDataSource=function isc_TreeGrid_setDataSource(_1,_2){if(this.createDefaultTreeField){if(_2==null||_2.length==0){_2=[isc.TreeGrid.TREE_FIELD]}}
return this.Super("setDataSource",[_1,_2])},isc.A.cellValueHoverHTML=function isc_TreeGrid_cellValueHoverHTML(_1,_2,_3,_4){if(_3==this.$91i){var _5=this.Super("cellValueHoverHTML",arguments);if(_5!=null&&!isc.isAn.emptyString(_5))_5="<nobr>"+_5+"</nobr>";return _5}else if(this.showClippedValuesOnHover!==true)return null;else return _4},isc.A.$109d=function isc_TreeGrid__initTreeField(){if((!this.fields||this.fields.length==0)&&(this.getDataSource()==null||!this.useAllDataSourceFields))
{if(this.createDefaultTreeField)this.fields=[isc.TreeGrid.TREE_FIELD]}else{var _1=this.completeFields,_2=this.fields,_3;for(var i=0;i<_1.length;i++){if(_1[i].treeField){_3=_2.indexOf(_1[i]);break}}
if(_3==null){if(!this.autoAssignTreeField)return;var _5=this.data.titleProperty,_6=_2.findIndex(this.fieldIdProperty,_5);if(_6!=-1)_3=_6}
if(_3==null){_3=0;while(this.fields[_3]&&this.fields[_3].treeField==false)
{_3++}
if(this.fields[_3]==null)return}
this.$91i=_3;var _7=_2[_3],_8=isc.TreeGrid.TREE_FIELD,_9=_7.formatCellValue!=null||_7.displayField!=null;for(var _10 in _8){if(_9&&_10=="getCellValue"){continue}
if(_7[_10]==null){_7[_10]=_8[_10]}}}},isc.A.deriveVisibleFields=function isc_TreeGrid_deriveVisibleFields(_1,_2,_3,_4){this.invokeSuper(isc.TreeGrid,"deriveVisibleFields",_1,_2,_3,_4);this.$109d()},isc.A.getEmptyMessage=function isc_TreeGrid_getEmptyMessage(){if(this.isOffline()){return this.offlineMessage}
if(isc.isA.Tree(this.data)&&this.data.getLoadState(this.data.getRoot())==isc.Tree.LOADING)
return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});return this.emptyMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function isc_TreeGrid_isEmpty(){if(!isc.isA.Tree(this.data))return true;var _1=this.data.getRoot();if(_1==null)return true;var _2=this.data.hasChildren(_1);if(_2||this.showRoot||this.data.showRoot)return false;return true},isc.A.getOpenState=function isc_TreeGrid_getOpenState(){var _1=this.data;if(_1==null){this.logWarn("getOpenState() called for a treeGrid with no data");return[]}
if(_1.getOpenState)return _1.getOpenState();var _2=_1.getRoot(),_3=[];this.$990(_1,_2,_3);return isc.Comm.serialize(_3)},isc.A.setOpenState=function isc_TreeGrid_setOpenState(_1){if(this.data&&this.data.setOpenState){this.data.setOpenState(_1);return}
_1=this.evalViewState(_1,"openState")
if(!_1)return;if(!this.data){this.logWarn("unable to set open state for this treeGrid as this.data is unset");return}
this.data.closeAll();this.data.openFolders(_1)},isc.A.getSelectedPaths=function isc_TreeGrid_getSelectedPaths(){if(!this.selection)return null;var _1=this.selection.getSelection(),_2=_1.length,_3=[];for(var i=0;i<_2;++i){_3[i]=this.data.getPath(_1[i])}
return isc.Comm.serialize(_3)},isc.A.showActionInPanel=function isc_TreeGrid_showActionInPanel(_1){return this.Super("showActionInPanel",arguments)},isc.A.setSelectedPaths=function isc_TreeGrid_setSelectedPaths(_1){_1=this.evalViewState(_1,"selectedPaths")
if(!_1)return;var _2=this.selection,_3=this.data;if(_3&&_2){_2.deselectAll();var _4=[];for(var i=0;i<_1.length;i++){var _6=_3.find(_1[i]);if(_6)_4.add(_6)}
this.selection.selectList(_4);this.fireSelectionUpdated()}},isc.A.getViewState=function isc_TreeGrid_getViewState(){var _1=this.Super("getViewState",[true]);_1.open=this.getOpenState();return"("+isc.Comm.serialize(_1)+")"},isc.A.setViewState=function isc_TreeGrid_setViewState(_1){this.Super("setViewState",arguments);_1=this.evalViewState(_1,"viewState",true)
if(!_1)return;if(_1.open)this.setOpenState(_1.open);if(_1.selected)this.setSelectedState(_1.selected)},isc.A.getDefaultData=function isc_TreeGrid_getDefaultData(){return isc.Tree.create({$71k:true})},isc.A.setData=function isc_TreeGrid_setData(_1){if(this.data){if(this.separateFolders!=null)this.data.setSeparateFolders(this.separateFolders);if(this.sortFoldersBeforeLeaves!=null){this.data.setSortFoldersBeforeLeaves(this.sortFoldersBeforeLeaves)}}
this.Super("setData",arguments);if(!isc.isA.Tree(this.data))return;if(this.separateFolders!=null)this.data.setSeparateFolders(this.separateFolders);if(this.sortFoldersBeforeLeaves!=null){this.data.setSortFoldersBeforeLeaves(this.sortFoldersBeforeLeaves)}
if(this.showRoot&&isc.ResultTree&&isc.isA.ResultTree(this.data)){this.logWarn("showRoot may not be set with a databound treeGrid, unexpected results may occur")}
this.data.setShowRoot(this.showRoot);this.data.setOpenDisplayNodeType(this.displayNodeType);if(this.autoPreserveOpenState!=null){this.data.autoPreserveOpenState=this.autoPreserveOpenState}},isc.A.$107o=function isc_TreeGrid__getSortNormalizerForField(_1,_2,_3,_4){if(_1==isc.TreeGrid.TREE_FIELD&&isc.ResultTree&&isc.isA.ResultTree(this.data)){if(this.data.isPaged())return isc.TreeGrid.$1084}
return this.invokeSuper(isc.TreeGrid,"$107o",_1,_2,_3,_4)},isc.A.draw=function isc_TreeGrid_draw(_1,_2,_3,_4){if(this.initialData&&(!isc.ResultSet||!isc.isA.ResultSet(this.data))&&(!this.data||!isc.isA.ResultTree(this.data))){this.setData(this.createResultTree())}
this.invokeSuper(isc.TreeGrid,"draw",_1,_2,_3,_4)},isc.A.bodyKeyPress=function isc_TreeGrid_bodyKeyPress(_1){var _2=this.selection;if(this.selectionType!=isc.Selection.NONE&&this.data.getLength()>0&&_2.anySelected()&&(!_2.multipleSelected||!_2.multipleSelected()))
{var _3=this.getRecord(this.getFocusRow());if(_1.keyName=="Arrow_Left"){if(!this.canExpandRecords||!(this.$957(_3,this.getFocusRow())&&this.isExpanded(_3)))
{if(this.data.isFolder(_3)&&this.data.isOpen(_3)){this.closeFolder(_3);return false}else
{var _4=this.data.getParent(_3);if(_4){var _5=this.getFocusRow();while(_5>0&&this.getRecord(_5)!=_4){_5--}
if(this.getRecord(_5)==_4){this.$372(_5-this.getFocusRow(),false);return false}}}}}else if(_1.keyName=="Arrow_Right"){if(this.data.isFolder(_3)){if(!this.data.isOpen(_3)){this.openFolder(_3);return false}else if(!this.canExpandRecords||!(this.$957(_3,this.getFocusRow())&&!this.isExpanded(_3)))
{if(this.data.hasChildren(_3)){this.$372(1,false);return false}}}}}
return this.Super("bodyKeyPress",arguments)},isc.A.$936=function isc_TreeGrid__cellContextClick(_1,_2,_3){if(_2<0||_3<0)return true;var _4=this.data.isFolder(_1);if(this.nodeContextClick&&this.nodeContextClick(this,_1,_2)==false){return false}
if(_4){if(this.folderContextClick&&this.folderContextClick(this,_1,_2)==false){return false}}else{if(this.leafContextClick&&this.leafContextClick(this,_1,_2)==false){return false}}
return this.Super("$936",arguments)},isc.A.handleEditCellEvent=function isc_TreeGrid_handleEditCellEvent(_1,_2){var _3=this.getRecord(_1);if(this.clickInOpenArea(_3)||this.clickInCheckboxArea(_3))return false;return this.Super("handleEditCellEvent",arguments)},isc.A.canEditCell=function isc_TreeGrid_canEditCell(_1,_2){if(this.Super("canEditCell",arguments)==false)return false;if(this.getField(_2)[this.fieldIdProperty]==this.data.nameProperty)return false;if(this.getField(_2)[this.fieldIdProperty]==this.$109a)return false;return true},isc.A.getEditFormItemFieldWidths=function isc_TreeGrid_getEditFormItemFieldWidths(_1){var _2=this.data.getLevel(_1);if(!this.showRoot)_2--;var _3=this.getOpenerIconWidth(_1),_4=_2*(this.showConnectors?_3:this.indentSize);_4+=this.iconSize+_3;if(this.$109e(_1)){_4+=(this.$1006()+this.extraIconGap)}else if(this.getExtraIcon(_1)){_4+=(this.iconSize+this.extraIconGap)}
var _5=this.Super("getEditFormItemFieldWidths",arguments),_6=this.getTreeFieldNum();_5[_6]-=_4;return _5},isc.A.getRecordDataSource=function isc_TreeGrid_getRecordDataSource(_1){return this.data.getNodeDataSource(_1)},isc.A.rowClick=function isc_TreeGrid_rowClick(_1,_2,_3){var _4=_1;if(this.clickInOpenArea(_4)||this.clickInCheckboxArea(_4))return false;this.$99v=_2;if(_2<0||_3<0)return false;var _4=this.getRecord(_2),_5=this.data.isFolder(_4);if(this.nodeClick)this.nodeClick(this,_4,_2);if(_5){if(this.folderClick)this.folderClick(this,_4,_2)}else{if(this.leafClick)this.leafClick(this,_4,_2)}
return this.Super("rowClick",arguments)},isc.A.recordDoubleClick=function isc_TreeGrid_recordDoubleClick(_1,_2,_3,_4,_5,_6,_7){if(this.clickInOpenArea(_2)||this.clickInCheckboxArea(_2))return false;if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK&&this.canEditCell(_3,_5))
{return true}
if(this.data.isFolder(_2)){return this.toggleFolder(_2)}else
return this.openLeaf(_2)},isc.A.dataChanged=function isc_TreeGrid_dataChanged(){this.Super("dataChanged",arguments);var _1=this.$99y;if(_1&&this.data.isOpen(_1)&&this.data.getLoadState(_1)==isc.Tree.LOADED)
{this.$99z(_1);this.$99y=null}},isc.A.openLeaf=function isc_TreeGrid_openLeaf(_1){},isc.A.getDragTrackerIcon=function isc_TreeGrid_getDragTrackerIcon(_1){var _2;if(_1&&_1.length>1&&this.manyItemsImage!=null)
_2=this.manyItemsImage;else if(_1&&_1[0])_2=this.getIcon(_1[0],true);return _2},isc.A.getDragTrackerTitle=function isc_TreeGrid_getDragTrackerTitle(_1,_2,_3,_4,_5,_6){var _7=this.getFieldNum(this.getTitleField());if(_7!=this.getTreeFieldNum())
return this.invokeSuper(isc.TreeGrid,"getDragTrackerTitle",_1,_2,_3,_4,_5,_6);var _8=this.getCellStyle(_1,_2,_7),_9=this.getCellCSSText(_1,_2,_7);if(this.selection.isSelected(_1)){var _10=this.body.getCellStyleIndex(_1,_2,_7),_11=this.body.getCellStyleName(_10,_1,_2,_7);if(_11==_8){_10-=2;_8=this.body.getCellStyleName(_10,_1,_2,_7)}}
var _12=this.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_7);var _13=this.$109f(_12,_1,_2,_7,false,_8,_9).join(isc.emptyString);return["<table class='",_8,"' style='",_9,"'><tr>",_13,"</tr></table>"].join(isc.emptyString)},isc.A.willAcceptDrop=function isc_TreeGrid_willAcceptDrop(){var _1=this.Super("willAcceptDrop",arguments);if(!_1)return _1;isc.$wa=true;var _2=this.getEventRecordNum(null,true),_3=_2<0?null:this.data.get(_2);isc.$wa=false;if(_3==null){if(this.canDropInEmptyArea==false||!this.canDropRootNodes)return false;_3=this.data.getRoot()}
if(!_3||_3.canAcceptDrop==false)return false;var _4=this.data.isFolder(_3);if(!_4&&!(this.canReorderRecords||this.canDropOnLeaves))return false;var _5=isc.EH.dragTarget.getDragData();if(!isc.isAn.Object(_5)||this.getDropError(_5,_3)!=null){return false}
if(!_4){_3=this.data.getParent(_3);if(_3.canAcceptDrop==false)return false}
if(isc.EH.dragTarget!=this)return true;var _6=this.canReparentNodes;if(_6==null&&this.canAcceptDroppedRecords)_6=true;if(!_6){if(!isc.isAn.Array(_5))_5=[_5];var _7;_7=this.data.getParent(_5[0]);if(_7!=_3)return false;for(var i=1;i<_5.length;i++){if(_7!=this.data.getParent(_5[i]))return false}}
return true},isc.A.$98x=function isc_TreeGrid__setUpDragProperties(){this.canDrag=(this.canDrag||this.canDragRecordsOut||this.$106e()||this.canDragSelect);this.canDrop=(this.canDrop||this.canDragRecordsOut||this.$106e());this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.$106e())},isc.A.$106e=function isc_TreeGrid__canDragRecordsToSelf(){var _1=this.canReparentNodes;if(_1==null&&this.canAcceptDroppedRecords){if(!this.$109g){this.logInfo("'canReparentNodes' is unset. Allowing node reparenting as 'canAcceptDroppedRecords' is set to true. For explicit control, use 'canReparentNodes' instead.","dragDrop");this.$109g=true}
_1=this.canAcceptDroppedRecords}
return this.canReorderRecords||_1},isc.A.getDropError=function isc_TreeGrid_getDropError(_1,_2){for(var i=0,_4=_1.length;i<_4;i++){if(this.data.isDescendantOf(_2,_1[i])){return this.cantDragIntoChildMessage}}
var _5=this.data.isFolder(_2);if(_5){for(i=0;i<_4;i++){if(_1[i]==_2){return this.cantDragIntoSelfMessage}}}
return null},isc.A.dropMove=function isc_TreeGrid_dropMove(){var _1=this.getEventRow();if(_1==-1)return false;if(this.canDragRecordsOut==false&&isc.EH.dropTarget!=this&&!this.contains(isc.EH.dropTarget))return false;if(!this.canAcceptDroppedRecords&&isc.EH.dragTarget!=this){return false}
var _2=(_1==-2?this.data.getRoot():this.data.get(_1)),_3=this.getDropFolder(),_4=(this.canReorderRecords?this.getRecordDropPosition(_1):null);if(_3!=this.lastDropFolder||_2!=this.$109h||_4!=this.$109i){if(!this.$109j){this.$109j=this.getID()+".openDropFolder()"}
if(this.openDropFolderTimer)isc.Timer.clear(this.openDropFolderTimer);if(!this.data.isOpen(_3)){this.openDropFolderTimer=isc.Timer.setTimeout(this.$109j,this.openDropFolderDelay)}
this.updateDropFolder(_3)}
if(!this.willAcceptDrop()){this.body.setNoDropIndicator()}else{this.body.clearNoDropIndicator()}
if(this.shouldShowDragLineForRecord(_3)){if(this.data.isOpen(_3))this.showDragLineForRecord(_1,_4);else this.hideDragLine()}
this.$109h=_2;this.$109i=_4},isc.A.getEventRecordNum=function isc_TreeGrid_getEventRecordNum(_1,_2){var _3=this.Super("getEventRecordNum",arguments);if(_3<0&&_2&&!this.canDropRootNodes){var _4=this.data,_5=_4.getChildren();if(_5!=null){if(_3==-2){for(var i=_5.length-1;i>=0;i--){if(_4.isFolder(_5[i]))return this.getRecordIndex(_5[i])}}else{for(var i=0;i<_5.length;i++){if(_4.isFolder(_5[i]))return this.getRecordIndex(_5[i])}}}}
return _3},isc.A.getDropFolder=function isc_TreeGrid_getDropFolder(){var _1=this.getEventRecordNum(null,true),_2=this.data,_3=(_1<0?_2.getRoot():_2.get(_1));if(_2.isRoot(_3))return _2.getRoot();var _4=_2.isFolder(_3);if(!this.canReorderRecords)return(_4?_3:_2.getParent(_3));var _5=this.getRecordDropPosition(_3);if(!_4||_5==isc.ListGrid.BEFORE||_5==isc.ListGrid.AFTER&&(!_2.isOpen(_3)||!_2.hasChildren(_3)))
{var _6=_2.getParent(_3);return _4&&!this.canDropRootNodes&&_2.isRoot(_6)?_3:_6}else{return _3}},isc.A.openDropFolder=function isc_TreeGrid_openDropFolder(){var _1=this.lastDropFolder;if(!_1||!this.data.isFolder(_1)||this.data.isOpen(_1))return false;this.openFolder(_1);if(this.shouldShowDragLineForRecord(_1)){this.showDragLineForRecord(this.data.indexOf(_1),isc.ListGrid.OVER)}},isc.A.getRecordDropPosition=function isc_TreeGrid_getRecordDropPosition(_1,_2,_3){if(this.recordDropAppearance==isc.ListGrid.OVER)return isc.ListGrid.OVER;if(this.recordDropAppearance==isc.ListGrid.BODY)return null;if(_2==null)_2=this.body.getOffsetY();if(_1==null)_1=this.getEventRow(_2);var _4=this.data;if(!isc.isA.Number(_1))_1=_4.indexOf(_1);var _5=_1<0?null:_4.get(_1);if(_5&&_4.isFolder(_5)){return this.$106i(_1,_2,_3)}
if(_3==null&&!this.canDropOnLeaves){_3=isc.ListGrid.BETWEEN}
return this.invokeSuper(isc.TreeGrid,"getRecordDropPosition",_1,_2,_3)},isc.A.showDragLineForRecord=function isc_TreeGrid_showDragLineForRecord(_1,_2,_3,_4,_5){if(_1==null)_1=this.getEventRecordNum();if(_2==null)_2=this.getRecordDropPosition(_1);if(_2==isc.ListGrid.OVER){var _6=this.getRecord(_1),_7=this.data;if(_7.isFolder(_6)&&_7.isOpen(_6))_2=isc.ListGrid.AFTER}
return this.invokeSuper(isc.TreeGrid,"showDragLineForRecord",_1,_2,_3,_4,_5)},isc.A.dropOut=function isc_TreeGrid_dropOut(){this.hideDragLine();this.body.clearNoDropIndicator();this.$109h=null;this.updateDropFolder();if(this.openDropFolderTimer)isc.Timer.clear(this.openDropFolderTimer)},isc.A.updateDropFolder=function isc_TreeGrid_updateDropFolder(_1){var _2=this.lastDropFolder;this.lastDropFolder=_1;if(_1){_1.$109k=this.body.willAcceptDrop(_1)
this.setRowIcon(_1,this.getIcon(_1))}
if(_2&&_2!=_1){delete _2.$109k;this.setRowIcon(_2,this.getIcon(_2))}},isc.A.transferSelectedData=function isc_TreeGrid_transferSelectedData(_1,_2,_3,_4){if(!this.isValidTransferSource(_1)){if(_4)this.fireCallback(_4);return}
if(_3==null)_3=0;if(_2==null)_2=this.data.getRoot();var _5=_1.cloneDragData();this.transferNodes(_5,_2,_3,_1,_4)},isc.A.$109l=function isc_TreeGrid__dropAfterLastChild(_1,_2,_3){if(this.canDropRootNodes)return false;if(_2!=_3)return false;var _4=this.data,_5=_4.getParent(_2);return _4.isRoot(_5)&&_4.isOpen(_2)&&_1==isc.ListGrid.AFTER},isc.A.drop=function isc_TreeGrid_drop(){if(!this.willAcceptDrop())return false;var _1=isc.EH.dragTarget.cloneDragData(),_2=this.getEventRecordNum(null,true),_3=this.getRecordDropPosition(_2),_4=_2<0?null:this.data.get(_2),_5=this.getDropFolder();if(!_4)_4=this.data.getRoot();var _6=isc.EH.dragTarget.getData(),_7=(isc.isA.Tree(_6)&&isc.isA.Tree(this.data)&&_6.getRoot()==this.data.getRoot());for(var i=0;i<_1.length;i++){var _9=_1[i];var _10=(this.data.findChildNum(_5,this.data.getName(_9))!=-1);var _11=_7&&this.canReorderRecords&&_5==this.data.getParent(_9);if(_10&&!_11){this.logInfo("already a child named: "+this.data.getName(_9)+" under parent: "+this.data.getPath(_5));isc.warn(this.parentAlreadyContainsChildMessage);return false}}
var _12=null;if(this.canReorderRecords){if(_2<0||this.$109l(_3,_4,_5)){_5=_4;_12=this.data.getChildren(_5).getLength()}else if(_4==_5){_12=0}else{_12=(_3==isc.ListGrid.BEFORE?0:1)+this.data.getChildren(_5).indexOf(_4)}}
var _13=_3;if(this.onFolderDrop!=null&&(this.onFolderDrop(_1,_5,_12,_13,isc.EH.dragTarget)==false))return false;this.folderDrop(_1,_5,_12,isc.EH.dragTarget);this.data.openFolder(_5);return false},isc.A.folderDrop=function isc_TreeGrid_folderDrop(_1,_2,_3,_4,_5){this.transferNodes(_1,_2,_3,_4,_5)},isc.A.transferNodes=function isc_TreeGrid_transferNodes(_1,_2,_3,_4,_5){if(!this.$17p("transferNodes",_1,_2,_3,_4,_5)){return}
_2=_2||this.data.root;var _6=_4.getData(),_7=(isc.isA.Tree(_6)&&isc.isA.Tree(this.data)&&_6.getRoot()==this.data.getRoot());var _8=this.getDataSource(),_9=_4.getDataSource();if(_7&&(this.dragDataAction!=isc.TreeGrid.COPY&&this.dragDataAction!=isc.TreeGrid.CLONE))
{if(_8!=null&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data))
{this.$17x[0].noRemove=true;var _10=isc.rpc.startQueue();var _11=_6.getChildren(_2);var _12,_13;if(_3!=null){if(_3<_11.getLength()){_12=_11.get(_3)}}
if(_12==_13){_12=_11.last()}
var _14=isc.ResultSet.getLoadingMarker();for(var i=0;i<_1.length;i++){var _16=_1[i];if(_16==null)continue;if(this.shouldSaveLocally()||_16[this.data.parentIdField]==_2[this.data.idField])
{if(_3!=null){_6.moveBefore(_16,_12)}}else{var _17=_1[i]["_isOpen_"+this.data.ID];var _16=isc.addProperties({},this.data.getCleanNodeData(_1[i],true,false)),_18=isc.addProperties({},_16);if(_17!=null)_16["_isOpen_"+this.data.ID]=_17;_16[this.data.parentIdField]=_2[this.data.idField];var _19=null,_20=this.data.getChildren(_2);if(_3==null){_19=_20.last();if(_19==_14){_19=null}}else if(_3>0){_19=_20.get(_3-1);if(_19==_14){_19=null}}
this.updateDataViaDataSource(_16,_8,{oldValues:_18,parentNode:this.data.getParent(_1[i]),newParentNode:_2,dragTree:_6,draggedNode:_16,draggedNodeList:_1,dropNeighbor:_19,dropIndex:_3},_4)}}}else{var _11=_6.getChildren(_2);var _12,_13;if(_3!=null){if(_3<_11.getLength()){_12=_11.get(_3)}}
if(_12==null){_6.moveList(_1,_2,_3)}else{_6.moveListBefore(_1,_12)}}}else if(_8!=null){var _21;if(this.dragRecategorize=="always"||this.dragRecategorize!="never"&&(_9!=null&&_9!=_8&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data)&&_4.dragDataAction==isc.TreeGrid.MOVE))
{var _22=_9.getTreeRelationship(_8);if(_22!=null&&_22.parentIdField){var _23=false,_24=_9.getPrimaryKeyFields();for(var _25 in _24){if(_25==_22.parentIdField){this.logWarn("dragRecategorize: data source has dataSource:"+_9.getID()+". foreignKey relationship with target dataSource "+_8.getID()+" is based on primary key which cannot be modified.");_23=true}}
if(!_23)_21=true;this.logInfo("Recategorizing dropped nodes in dataSource:"+_9.getID())}
this.$17x[0].noRemove=true;var _10=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){var _16={};var _26=_9.getPrimaryKeyFieldNames();for(var j=0;j<_26.length;j++){_16[_26[j]]=_1[i][_26[j]]}
if(_21){_16[_22.parentIdField]=_2[_22.idField]}
isc.addProperties(_16,this.getDropValues(_16,_9,_2,_3,_4));this.updateDataViaDataSource(_16,_9,null,_4)}}else{if(isc.isA.Tree(_6)&&_4.dragDataAction==isc.TreeGrid.MOVE){_1=_6.getCleanNodeData(_1,_4.dataSource==null)}
var _10=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){var _28=_1[i],_29=this.data;if(_29){_28[_29.parentIdField]=_2[_29.idField]}
isc.addProperties(_28,this.getDropValues(_28,_9,_2,_3,_4));this.$17r(_28,_9,_4,null,_3,_2)}}}else{for(var i=0;i<_1.length;i++){this.$17r(_1[i],_9,_4,null,_3,_2)}}
if(!this.$17u){isc.Log.logDebug("Invoking transferDragData from inside transferNodes - no server queries needed?","dragDrop");_4.transferDragData(this.$17v,this);if(_8){if(!this.$17q)isc.rpc.sendQueue()}}
this.$17w=false},isc.A.$17z=function isc_TreeGrid__updateComplete(_1,_2,_3){if(!_3.dragTree)return;if(_3.newParentNode!=this.data.root&&_3.dragTree.getParent(_3.newParentNode)==null)
{isc.logWarn("Target folder is no longer in the Tree in TreeGrid cache sync");return}
var _4=_3.dropNeighbor,_5=_3.dragTree,_6=_5.getChildren(_3.newParentNode),_7=_3.draggedNodeList,_8=_5.idField,_9=_7.findIndex(_8,_3.draggedNode[_8]),_10,_11;if(_4==null){_10=0}else{for(var i=0,_13=_6.getLength();i<_13;++i){var _14=_6.getCachedRow(i);if(_14==_4){_10=i+1;break}}}
if(_10!==_11){var _13=_6.getLength();while(_10<_13){var _14=_6.getCachedRow(_10);if(_14!=null){var _15=_7.findIndex(_8,_14[_8]);if(_15==-1||_15>_9)break}
_10++}}
if(_10===_11){isc.logWarn("Could not order dropped node by reference to neighbor; trying absolute index");_10=_3.dropIndex}
if(_10===_11){isc.logWarn("Unable to determine drop location in TreeGrid cache sync");return}
var _16=this.data.find(_8,_3.draggedNode[_8]);_5.move(_16,this.data.getParent(_16),_10);this.Super("$17z",arguments)},isc.A.getTreeCellValue=function isc_TreeGrid_getTreeCellValue(_1,_2,_3,_4,_5){if(_2==null||Array.isLoading(_2)){return _1}
var _6=this.data.getLevel(_2),_7=isc.TreeGrid.$1085(),_8=this.getCellCSSText(_2,_3,_4),_9=this.getCellStyle(_2,_3,_4);_7[1]=_9
_7[3]=(this.$109m()?"table-layout:fixed;width:100%;"+(_8!=null?_8:""):_8);if(_7[3]!=null&&!_7[3].endsWith(this.$y5))_7[3]+=this.$y5;_7[9]=_8;_7[11]=_9;_7[13]=this.getIndentHTML(_6,_2,_7,5);var _10=this.$109f(_1,_2,_3,_4,this.shouldShowOpenerIcon(),_9,_8,_7,7);for(var i=0,j=15;i<_10.length;i++){_7[j]=_10[i];j++}
_7[j]=this.$109b;return _7.join(isc.emptyString)},isc.A.shouldShowOpenerIcon=function isc_TreeGrid_shouldShowOpenerIcon(){return this.showOpener||this.showConnectors},isc.A.$91j=function isc_TreeGrid__getTreeCellValueID(_1){return this.ID+"_valueCell"+_1},isc.A.$109f=function isc_TreeGrid__getTreeCellTitleArray(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _10=0;if(_7==null)_7=this.getCellCSSText(_2,_3,_4);if(_7==null)_7="";else _7+=";";if(!this.wrapCells)_7+="white-space:nowrap;";if(this.$109m()){_7+="overflow:hidden;"+isc.Browser.$s+":ellipsis"}
if(_6==null)_6=this.getCellStyle(_2,_3,_4);var _11=isc.TreeGrid.$1087();_11[1]=_7;_11[3]=_6;if(_5){var _12=this.getOpenIcon(_2),_13=this.getOpenerIconWidth(_2),_14=this.getOpenerIconHeight(_2),_15=(_3!=null?this.$203+_3:null);if(_12){_11[5]=this.getIconHTML(_12,_15,_13,null,_14);_10+=_13}else{_11[5]=this.$109n(_13||this.iconSize);_10+=_13}}else _11[5]=null;var _16=this.$109e(_2),_17=_16||this.getExtraIcon(_2),_18=(_3!=null?this.$204+_3:null),_19=(_16!=null?this.$1006():this.iconSize),_20=this.extraIconGap,_21=this.getIcon(_2),_22=(_3!=null?this.$1089+_3:null);if(_17){_11[6]=this.getIconHTML(_17,_18,_19,_20);_10+=_19+_20}else _11[6]=null;_11[7]=this.getIconHTML(_21,_22,_2.iconSize);_10+=_21==null?0:(_2.iconSize||this.iconSize);if(isc.Canvas.ariaEnabled()){_11[9]=" id='"+this.$91j(_3)+"'"}else{_11[9]=null}
_11[11]=_7;_11[13]=this.iconPadding;_11[15]=_6;if(isc.Browser.isIE&&isc.Browser.version<10&&!this.wrapCells){_11[17]="<NOBR>";_11[19]="</NOBR>"}else if(this.$109m()&&isc.Browser.isMoz&&isc.Browser.version<21){_11[17]="<div style='overflow:hidden;text-overflow:ellipsis' $39g='true'>";_11[19]="</div>"}else{_11[19]=_11[17]=null}
_11[18]=_1;if(_8)_8[_9]=_10;return _11},isc.A.$109m=function isc_TreeGrid__fixTitleWidth(){var _1=this.getTreeFieldNum(),_2=this.fields[_1]&&this.fields[_1].frozen,_3=_2?(this.frozenBody&&this.frozenBody.$906):(this.body&&this.body.$906);return this.fixedFieldWidths&&!_3},isc.A.getCellAlign=function isc_TreeGrid_getCellAlign(_1,_2,_3){var _4=this.getField(_3);if(_4&&_4.treeField){return this.isRTL()?"right":"left"}
return this.Super("getCellAlign",arguments)},isc.A.getCellValue=function isc_TreeGrid_getCellValue(_1,_2,_3,_4,_5,_6,_7){var _8=this.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_3,_4,_5,_6,_7);if(_3==this.getTreeFieldNum()){_8=this.getTreeCellValue(_8,_1,_2,_3,_4)}
return _8},isc.A.bodyDrawing=function isc_TreeGrid_bodyDrawing(_1,_2,_3,_4,_5){this.$109o={};return this.invokeSuper(isc.TreeGrid,"bodyDrawing",_1,_2,_3,_4,_5)},isc.A.getNodeTitle=function isc_TreeGrid_getNodeTitle(_1,_2,_3){var _4;if(_3.name&&_3.name!=this.$109a){if(_2==-1)return _1[_3.name];_4=this.getEditedRecord(_2)[_3.name]}else{_4=this.data.getTitle(_1)}
return this.applyCellTypeFormatters(_4,_1,_3,_2,this.getFieldNum(_3))},isc.A.getTitleField=function isc_TreeGrid_getTitleField(){if(this.titleField!=null)return this.titleField;return this.getFieldName(this.getTreeFieldNum())},isc.A.getTreeFieldNum=function isc_TreeGrid_getTreeFieldNum(){return this.$91i},isc.A.getOpenAreaWidth=function isc_TreeGrid_getOpenAreaWidth(_1){var _2=this.showOpener?this.getOpenerIconWidth(_1):0,_3=(this.showConnectors?_2:this.indentSize);return((this.data.getLevel(_1)-(this.showRoot?0:1))*_3)+_2},isc.A.getOpenerIconSize=function isc_TreeGrid_getOpenerIconSize(_1){return(this.openerIconSize||(this.showConnectors?this.cellHeight:this.iconSize))},isc.A.getOpenerIconWidth=function isc_TreeGrid_getOpenerIconWidth(_1){return this.openerIconWidth||this.getOpenerIconSize(_1)},isc.A.getOpenerIconHeight=function isc_TreeGrid_getOpenerIconHeight(_1){return this.openerIconHeight||this.getOpenerIconSize(_1)},isc.A.clickInOpenArea=function isc_TreeGrid_clickInOpenArea(_1){if(!this.data.isFolder(_1)||!this.showOpener)return false;var _2=this.getTreeFieldNum(),_3=this.getFieldBody(_2),_4=this.getLocalFieldNum(_2),_5=_3.getColumnLeft(_4),_6=_3.getColumnWidth(_4),_7=this.getOpenAreaWidth(_1),x=_3.getOffsetX();if(this.isRTL()){_5+=_3.getScrollWidth()-_3.getViewportWidth();var _9=_5+_6;return x>=(_9-_7)&&x<=_9}else{return x>=_5&&x<_5+_7}},isc.A.isOverOpenArea=function isc_TreeGrid_isOverOpenArea(){var _1=this.getRecord(this.getEventRow());if(_1==null)return false;return this.clickInOpenArea(_1)},isc.A.clickInCheckboxArea=function isc_TreeGrid_clickInCheckboxArea(_1){if(this.selectionAppearance!=this.$42x)return false;return this.isOverExtraIcon(_1)},isc.A.isOverExtraIcon=function isc_TreeGrid_isOverExtraIcon(_1){if(_1==null)_1=this.getRecord(this.getEventRow());if(_1==null)return false;var _2=this.$109e(_1),_3=_2||this.getExtraIcon(_1);if(_3==null)return false;var _4=(_2!=null?this.$1006():this.iconSize);var _5=this.getTreeFieldNum(),_6=this.getFieldBody(_5),_7=this.getLocalFieldNum(_5),_8=_6.getColumnLeft(_7),_9=_6.getColumnWidth(_7),_10=this.getOpenAreaWidth(_1),x=_6.getOffsetX();if(this.isRTL()){var _12=_8+_9;return(x>=(_12-_10-_4)&&x<=(_12-_10))}else{return(x>=(_8+_10)&&x<(_8+_10+_4))}},isc.A.getIndentHTML=function isc_TreeGrid_getIndentHTML(_1,_2,_3,_4){var _5=_1;if(!this.showRoot)_5--;var _6=(this.showConnectors?this.getOpenerIconWidth(_2):this.indentSize),_7=this.isPrinting||isc.Browser.isIE||isc.Browser.isOpera||isc.Browser.isEdge,_8=(_7?1:0);if(this.showConnectors&&this.showFullConnectors){var _9=this.data.$865(_2);_9.remove(_1);if(!this.showRoot)_9.remove(0);if(_9.length!=0){if(!this.$109p){var _10="ancestor";if(this.isRTL())_10+="_rtl";var _11=isc.Img.urlForState(this.connectorImage,null,null,_10),_12=this.getIconHTML(_11,null,this.cellHeight);this.$109p=_12}
var _13=this.$109n(_6),_14=isc.StringBuffer.create(isc.emptyString);_14.append("<NOBR>");if(_7)_14.append(this.$109n(1));for(var i=(this.showRoot?0:1);i<_1;i++){if(_9.contains(i)){_14.append(this.$109p);_8+=this.cellHeight}else{_14.append(_13);_8+=_6}}
_14.append("</NOBR>");_14=_14.release(false);if(_3)_3[_4]=_8;return _14}}
_8=_5*_6;if(_7)_8=Math.max(1,_8);var _16=this.$109n(_8);if(isc.Browser.isIE9||(isc.Browser.isStrict&&(isc.Browser.isIE7||isc.Browser.isIE8))){_16="<NOBR>"+_16+"</NOBR>"}
if(_3)_3[_4]=_8;return _16});isc.evalBoundary;isc.B.push(isc.A.$109n=function isc_TreeGrid__indentHTML(_1){if(_1==0)return isc.emptyString;var _2=isc.TreeGrid.$109q;if(_2==null)_2=isc.TreeGrid.$109q={};if(_2[_1]==null)_2[_1]=isc.Canvas.spacerHTML(_1,1);return _2[_1]},isc.A.getOpenIcon=function isc_TreeGrid_getOpenIcon(_1){if(this.showOpener==false&&!this.showConnectors)return null;if(!this.data)return null;if(isc.isA.Number(_1))_1=this.data.get(_1);if(_1==null)return null;if(_1.openIcon){return _1.openIcon}else{var _2=this.showOpener&&this.data.isFolder(_1),_3=_2,_4=_2,_5,_6;if(_2){var _7=this.data.getLoadState(_1);if(_7==isc.Tree.UNLOADED||(_7==isc.Tree.FOLDERS_LOADED&&this.displayNodeType!=isc.Tree.FOLDERS_ONLY))
{_3=true;_4=false}else{_3=this.data.hasChildren(_1,this.displayNodeType);_4=(_3||this.alwaysShowOpener)&&this.data.isOpen(_1)}}
if(_4&&!this.showFullConnectors)_6=true
else{_6=!this.$109r(_1)}
_5=!this.$109s(_1);return this.getOpenerImageURL(_2,_3,_4,_5,_6)}},isc.A.$109s=function isc_TreeGrid__shouldShowPreviousLine(_1){if(!this.data.isEmpty()&&this.data.first()==_1){return false}
if(this.showFullConnectors)return true;var _2=this.data.indexOf(_1),_3=this.getRecord(_2-1),_4=this.data.getParent(_1);if(_3==null)return false;return(_4==_3||_4==this.data.getParent(_3))},isc.A.$109r=function isc_TreeGrid__shouldShowNextLine(_1){if(this.showFullConnectors){var _2=this.data,_3=_2.getParent(_1),_4=_2.getChildren(_3);return(_4.indexOf(_1)!=(_4.getLength()-1))}
var _5=this.data.indexOf(_1),_6=this.getRecord(_5+1);if(_6==null)return false;return(this.data.getParent(_1)==this.data.getParent(_6))},isc.A.getOpenerImageURL=function isc_TreeGrid_getOpenerImageURL(_1,_2,_3,_4,_5){if(!this.$109t){var _6=this.openerImage;this.$109t={opened:isc.Img.urlForState(_6,null,null,"opened"),closed:isc.Img.urlForState(_6,null,null,(this.isRTL()?"closed_rtl":"closed")),opening:isc.Img.urlForState(_6,null,null,"opening")}}
if(this.showConnectors&&!this.$109u){var _6=this.connectorImage,_7=["single","start","end","middle","opened_single","opened_start","opened_middle","opened_end","closed_single","closed_start","closed_middle","closed_end"],_8={},_9=this.isRTL(),_10="_rtl";for(var i=0;i<_7.length;i++){var _12=_7[i],_13=_12;if(_9)_13+=_10;_8[_12]=isc.Img.urlForState(_6,null,null,_13)}
this.$109u=_8}
if(this.showConnectors){var _14=this.$109u;if(_2||(_1&&this.alwaysShowOpener)){if(_3){if(!this.showFullConnectors){if(_4)return _14.opened_single;return _14.opened_end}
if(_4&&_5)return _14.opened_single;else if(_4)return _14.opened_start;else if(_5)return _14.opened_end;else return _14.opened_middle}else{if(_4&&_5)return _14.closed_single;if(_4)return _14.closed_start;if(_5)return _14.closed_end;return _14.closed_middle}}else{if(_4&&_5)return _14.single;if(_4)return _14.start;if(_5)return _14.end;return _14.middle}}else{var _14=this.$109t;if(!_1||(!_2&&!this.alwaysShowOpener))return null;if(_3)return _14.opened;return _14.closed}},isc.A.$109e=function isc_TreeGrid__getCheckboxIcon(_1){var _2=null;if(this.selectionAppearance==this.$42x){var _3=this.selection.isSelected(_1)?true:false;var _4=(_3&&this.showPartialSelection&&this.selection.isPartiallySelected(_1))?true:false;_2=_4?(this.checkboxFieldPartialImage||this.booleanPartialImage):_3?(this.checkboxFieldTrueImage||this.booleanTrueImage):(this.checkboxFieldFalseImage||this.booleanFalseImage);if(!this.body.canSelectRecord(_1)){if(this.showDisabledSelectionCheckbox){if(_2!=this.$46t)_2=isc.Img.urlForState(_2,null,null,"Disabled")}else{if(this.leaveSelectionCheckboxGap){_2=isc.Canvas.$wv}else{_2=null}}}
if(_2==this.$46t)_2=isc.Canvas.$wv}
return _2},isc.A.getExtraIcon=function isc_TreeGrid_getExtraIcon(_1){return null},isc.A.getIcon=function isc_TreeGrid_getIcon(_1,_2){if(isc.isA.Number(_1))_1=this.data.get(_1);if(!_1)return null;var _3=_1[this.customIconProperty],_4=(_3!=null),_5=this.data.isFolder(_1);if(!_4){if(_5)_3=this.folderIcon;else _3=this.nodeIcon}
var _6;if(_5){var _7=_2?false:(this.lastDropFolder==_1&&_1.$109k),_8=_2?false:!!this.data.isOpen(_1),_9=this.data.getLoadState(_1)==isc.Tree.LOADING;if(_9&&this.showLoadingIcons){return this.loadingIcon}else if(_7){if(_1.dropIcon!=null)_3=_1.dropIcon;else if(!_4&&this.folderDropImage!=null)_3=this.folderDropImage;else{var _10;if(_4){_10=_1[this.customIconDropProperty];if(_10==null)_10=this.showCustomIconDrop}else{_10=this.showDropIcons}
if(_10)_6=this.dropIconSuffix}}else if(_8){if(_1.openedIcon!=null)_3=_1.openedIcon;else if(!_4&&this.folderOpenImage!=null)_3=this.folderOpenImage;else{var _11;if(_4){_11=_1[this.customIconOpenProperty];if(_11==null)_11=this.showCustomIconOpen}else{_11=this.showOpenIcons}
if(_11)_6=this.openIconSuffix;else if(!_4)_6=this.closedIconSuffix}}else{if(!_4){if(this.folderClosedImage)_3=this.folderClosedImage;else _6=this.closedIconSuffix}}}else{if(!_4&&this.fileImage)_3=this.fileImage}
return _3==null?null:isc.Img.urlForState(_3,false,false,_6)},isc.A.$109v=function isc_TreeGrid__getIconHTMLCacheKey(_1,_2,_3,_4){return _1+"#w="+_2+",extraRightMargin="+_3+",h="+_4},isc.A.getIconHTML=function isc_TreeGrid_getIconHTML(_1,_2,_3,_4,_5){if(_1==null)return isc.emptyString;if(_3==null)_3=this.iconSize;if(_5==null)_5=_3;if(this.$109o==null){this.$109o={}}
var _6=this.$109o.iconHTML;if(_6==null)_6=this.$109o.iconHTML={};var _7=this.$109v(_1,_3,_4,_5),_8=_6[_7];if(_8==null){var _9;if(_4){_9=(this.isRTL()?"margin-left:":"margin-right:")+_4+"px"}
_8=_6[_7]=this.$121({src:_1,width:_3,height:_5,name:_2,align:this.$109c,extraCSSText:_9,generateSpan:isc.Canvas.$13x})}
_8[16]=_2;return _8.join(isc.$ba)},isc.A.setRowIcon=function isc_TreeGrid_setRowIcon(_1,_2){if(!isc.isA.Number(_1))_1=this.data.indexOf(_1);if(_1!=-1&&this.getIcon(_1)!=null){this.setImage(this.$1089+_1,_2,null,isc.Canvas.$13x)}},isc.A.setNodeIcon=function isc_TreeGrid_setNodeIcon(_1,_2){_1[this.customIconProperty]=_2;this.setImage(this.$1089+this.getRecordIndex(_1),_2,null,isc.Canvas.$13x)},isc.A.getPrintHTML=function isc_TreeGrid_getPrintHTML(_1,_2){var _3=this.printExpandTree;if(_3==null)_3=_1?_1.expandTrees:null;if(_3&&this.data){if(isc.ResultTree&&isc.isA.ResultTree(this.data)&&this.data.loadDataOnDemand){this.logWarn("Printing TreeGrid with option to expand folders on print not supported for load on demand trees.")}else{this.data.openAll()}}
return this.Super("getPrintHTML",arguments)},isc.A.getExportFieldValue=function isc_TreeGrid_getExportFieldValue(_1,_2,_3){var _4=this.Super("getExportFieldValue",arguments);if(_3==this.getTreeFieldNum()&&this.exportIndentString){var _5=this.data.getLevel(_1);while(--_5>0)_4=this.exportIndentString+_4}
return _4});isc.B._maxIndex=isc.C+82;isc.TreeGrid.registerStringMethods({folderOpened:"node",folderClosed:"node",folderClick:"viewer,folder,recordNum",leafClick:"viewer,leaf,recordNum",nodeClick:"viewer,node,recordNum",folderContextClick:"viewer,folder,recordNum",leafContextClick:"viewer,leaf,recordNum",nodeContextClick:"viewer,node,recordNum",dataArrived:"parentNode",onFolderDrop:"nodes,folder,index,dropPosition,sourceWidget"});isc.defineInterface("Observer").addInterfaceProperties({registerObserved:isc.ClassFactory.TARGET_IMPLEMENTS,unregisterObserved:isc.ClassFactory.TARGET_IMPLEMENTS});isc.defineInterface("AutoObserver","Observer").addInterfaceProperties({observedName:"observed",observations:{},registerObserved:function(_1){this[this.observedName]=_1;for(var _2 in this.observations){this.observe(_1,_2,this.observations[_2])}
if(isc.isA.Canvas(_1)){this.observe(_1,"destroy","observer.unregisterObserved(observed)")}},unregisterObserved:function(_1){this[this.observedName]=null;for(var _2 in this.observations){this.ignore(_1,_2)}}});isc.defineInterface("GridAutoObserver","AutoObserver").addInterfaceProperties({observedName:"grid"});isc.defineClass("GridTotalRowsIndicator","Label","GridAutoObserver");isc.A=isc.GridTotalRowsIndicator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=1;isc.A.wrap=false;isc.A.overflow="visible";isc.A.valign="center";isc.A.observations={"dataArrived":"observer.gridDataChanged()","setData":"observer.gridDataChanged()"};isc.A.dynamicContents=true;isc.A.contents="Total Rows: ${this.rowCount}";isc.A.rowCount="N/A";isc.B.push(isc.A.gridDataChanged=function isc_GridTotalRowsIndicator_gridDataChanged(){var _1=this.grid.data;if(!_1)this.rowCount="N/A";if(isc.isA.ResultSet(_1)){if(_1.lengthIsKnown()){if(_1.getLength()!=0&&_1.progressiveLoading){var _2=_1.getLength()-1;if(_1.rowIsLoaded(_2))this.rowCount=_1.getLength();else this.rowCount=_1.getLength()+"+ (progressive loading)"}else{this.rowCount=_1.getLength()}}
else this.rowCount="N/A"}else if(isc.isAn.Array(_1)){this.rowCount=_1.getLength()}
this.markForRedraw()});isc.B._maxIndex=isc.C+1;isc.defineClass("ObserverToolStrip","ToolStrip");isc.A=isc.ObserverToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_ObserverToolStrip_initWidget(){this.Super("initWidget",arguments);for(var i=0;i<this.members.length;i++){var m=this.members[i];if(isc.isAn.Observer(m)){m.registerObserved(this.grid)}}});isc.B._maxIndex=isc.C+1;isc.defineClass("GridToolStrip","ObserverToolStrip");isc.A=isc.GridToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.membersMargin=5;isc.A.addButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/add.png",click:"this.creator.grid.startEditingNew()"};isc.A.removeButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/remove.png",click:"this.creator.grid.removeSelectedData()"};isc.A.refreshButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/refresh.png",click:"this.creator.grid.invalidateCache()"};isc.A.exportButtonDefaults={_constructor:"IButton",title:"Export to CSV",layoutAlign:"center",click:"this.creator.grid.exportData()"};isc.A.totalRowsIndicatorDefaults={_constructor:"GridTotalRowsIndicator",layoutAlign:"center"};isc.A.members=["autoChild:removeButton","autoChild:addButton","autoChild:exportButton","starSpacer","autoChild:refreshButton","autoChild:totalRowsIndicator"];isc.B.push(isc.A.initWidget=function isc_GridToolStrip_initWidget(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("FieldPickerField");isc.A=isc.FieldPickerField;isc.A.frozenTitle="Is Frozen";isc.A.precisionTitle="Precision";isc.A.decimalPrecisionTitle="Decimal Precision";isc.A.decimalPadTitle="Decimal Pad";isc.A.alignTitle="Header Text Alignment";isc.A.cellAlignTitle="Data Alignment";isc.ClassFactory.defineInterface("FieldPickerGrid").addInterfaceProperties({clearCriteriaIfPresent:function(){if(!isc.isA.emptyObject(this.getCriteria())){if(this.willFetchData(null,"substring")){this.logWarn("ListGrid.willFetchData() has returned true unexpectedly while trying to clear the filter criteria prior to save.")}
this.filterData()}},getExpansionComponent:function(_1){var _2=this.parentElement,_3=_2.shuttle.changedRecords,_4=_3[_1.name];if(_4){_1=isc.shallowClone(_1);isc.addProperties(_1,_4)}
return _2.createExpansionDynamicForm(this.editableProperties,_1)},saveAndCollapseRecord:function(_1,_2,_3){var _4=this.parentElement,_5=_1.getChangedValues(),_6=_4.shuttle.changedRecords;if(_6[_3.name])isc.addProperties(_6[_3.name],_5);else _6[_3.name]=_5;this.$969(_3,_2)},setCanExpandRecords:function(_1){var _2=_1&&!this.canExpand;this.Super("setCanExpandRecords",arguments);if(_2)this.setRecordExpansion(0,this.getTotalRows())},setRecordExpansion:function(_1,_2){var _3=0,_4=0,_5=0;var _6=this.parentElement.shuttle,_7=_6.picker.expansionDataSource,_8=_7.getFieldNames(),_9=_7.getFields();for(var i=0;i<_8.length;i++){var _11=_8[i];if(this.editableProperties.contains(_11)){switch(_11){default:_5++;case"precision":_4++;case"decimalPad":case"decimalPrecision":_3++;break}}}
var _12=false,_13=this.canExpandRecordProperty;for(var i=_1;i<_2;i++){var _14=true,_15=this.getFieldRecord(i);if(!_15.userSummary&&!_15.userFormula){if(isc.SimpleType.inheritsFrom(_15.type,"float")){_14=_3>0}else if(isc.SimpleType.inheritsFrom(_15.type,"integer")){_14=_4>0}else{_14=_5>0}}
if(_15[_13]==null||_15[_13]==true){if(!_14){_15[_13]=false;_12=true}}else{if(_14){delete _15[_13];_12=true}}}
if(_12)this.markForRedraw()},collapseRecordList:function(_1,_2){for(var i=0;i<_1.length;i++){var _4=_1[i];if(this.isExpanded(_4))this.collapseRecord(_4);if(_2)_4.$38e=_4.title}},collapseAllRecords:isc.ClassFactory.TARGET_IMPLEMENTS,filterData:function(){this.collapseAllRecords();return this.Super("filterData",arguments)},expandRecord:function(_1){this.Super("expandRecord",arguments);var _2=this.getCurrentExpansionComponent(_1);if(_2!=null)_2.validate()},validateFieldRecord:function(_1){if(this.isExpanded(_1))return this.getCurrentExpansionComponent(_1).validate();var _2=this.parentElement.shuttle,_3=_2.changedRecords[_1.name];if(!_3)return true;return _2.picker.validateDataSourceField(_3)},validateRecordList:function(_1){if(!this.canExpandRecords)return true;var _2=this.canExpandRecordProperty;for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4[_2]!=false&&!this.validateFieldRecord(_4)){if(!this.isExpanded(_4)){this.expandRecord(_4);this.getCurrentExpansionComponent(_4).validate()}
this.scrollToRow(this.getRecordIndex(_4));return false}}
return true},validateAllRecords:isc.ClassFactory.TARGET_IMPLEMENTS,$109w:function(_1,_2,_3){var _4=[],_5=this.creator.dataBoundComponent,_6=!isc.isA.ListGrid(_5)||_5.canReorderFields;for(var i=0;i<_1.length;i++){var _8=_1[i];if(_2){if(_8.canHide==false)_4.add(_8)}else{if(_8.canReorder==null&&!_6||_8.canReorder==false)_4.add(_8)}}
if(_3)return _1.length>_4.length;else{if(_4.length>0)_1.removeList(_4);return _1.length>0}},willAcceptDrop:function(){var _1=this.ns.EH,_2=this.Super("willAcceptDrop");if(!_2)return false;return this.$109w(_1.dragTarget.getDragData(),_1.dragTarget!=this,true)},$109x:function(){},canHover:true,showHover:true,cellHoverHTML:function(_1,_2,_3){if(!this.creator.showFieldPrompts)return null;if(_1&&_1.prompt)return _1.prompt;return null},getContiguousSelection:function(){var _1=this.getSelectedRecords(),_2=(_1==null?0:_1.length);if(_2==0)return null;var _3=this.getRecordSetBounds(_1,-1);var _4=[];for(var i=1;i<_2;++i){var _6=_1[i];if(_4.length==0&&this.getRecord(_3+i)!=_6||_4.length>0)_4.add(_6)}
this.deselectRecords(_4);return this.getSelectedRecords()},getRecordSetBounds:function(_1,_2,_3){if(_3==null)_3=0;var _4=this.getTotalRows();switch(_2){case-1:var _5=this.getRecordIndex(_1.first());if(_5>=0){return Math.max(_5-_3,0)}
break;case 1:var _5=this.getRecordIndex(_1.last());if(_5>=0){return Math.min(_5+_3+1,_4)}
break}
return null},getCellValue:function(_1,_2,_3){var _4=this.Super("getCellValue",arguments);var _5=this.getField(_3);if(_5.name!="$38e"||_4!=this.emptyCellValue)return _4;var _6=this.creator.dataBoundComponent;if(isc.isA.Function(_6.getFieldTitle)){var _7=_6.getField(_1.name);if(_7)return _6.getFieldTitle(_7)}
return _1.name}});isc.ClassFactory.defineClass("FieldPickerListGrid","ListGrid","FieldPickerGrid");isc.A=isc.FieldPickerListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.getFieldRecord=isc.ListGrid.getPrototype().getRecord;isc.A.getTotalFieldRecords=isc.ListGrid.getPrototype().getTotalRows;isc.A.filterData=isc.FieldPickerGrid.getPrototype().filterData;isc.A.expandRecord=isc.FieldPickerGrid.getPrototype().expandRecord;isc.A.willAcceptDrop=isc.FieldPickerGrid.getPrototype().willAcceptDrop;isc.A.setCanExpandRecords=isc.FieldPickerGrid.getPrototype().setCanExpandRecords;isc.A.getExpansionComponent=isc.FieldPickerGrid.getPrototype().getExpansionComponent;isc.A.saveAndCollapseRecord=isc.FieldPickerGrid.getPrototype().saveAndCollapseRecord;isc.A.cellHoverHTML=isc.FieldPickerGrid.getPrototype().cellHoverHTML;isc.A.getCellValue=isc.FieldPickerGrid.getPrototype().getCellValue;isc.B.push(isc.A.clearFieldRecords=function isc_FieldPickerListGrid_clearFieldRecords(){},isc.A.dataArrived=function isc_FieldPickerListGrid_dataArrived(_1,_2){if(this.canExpandRecords&&_1<_2)this.setRecordExpansion(_1,_2)},isc.A.collapseAllRecords=function isc_FieldPickerListGrid_collapseAllRecords(){if(this.canExpandRecords){var _1=this.data.getAllRows();this.collapseRecordList(_1)}},isc.A.validateAllRecords=function isc_FieldPickerListGrid_validateAllRecords(){if(this.canExpandRecords){var _1=this.data.getAllRows();return this.validateRecordList(_1)}
return true},isc.A.requestSyntheticReorder=function isc_FieldPickerListGrid_requestSyntheticReorder(_1,_2){if(this.$109y||!this.canReorderRecords)return;if(!this.isObserving(this.data,"handleUpdate")){this.observe(this.data,"handleUpdate","observer.applySyntheticReorder(arguments[1])")}
var i,_4={};for(i=0;i<_1.length;i++)_4[_1[i].name]=true;this.$109y={target:_2.name,total:_1.length,arrived:0,keys:_4}},isc.A.applySyntheticReorder=function isc_FieldPickerListGrid_applySyntheticReorder(_1){var _2=this.$109y;if(!_2){this.ignore(this.data,"handleUpdate");return}
if(!isc.isAn.Array(_1))_1=[_1];if(_1==null)return;for(var i=0;i<_1.length;i++){if(_2.keys[_1[i].name])_2.arrived++}
if(_2.arrived!=_2.total)return;if(!this.data.lengthIsKnown())return;var _4=[],_5=this.data.getLength(),_6=Math.max(0,_5-_2.total),_7=this.data.findIndex("name",_2.target);for(var i=_6;i<_5;i++){var _8=this.data.get(i)||{};if(_2.keys[_8.name])_4.add(_8)}
this.$109y=null;this.ignore(this.data,"handleUpdate");this.delayCall("$109z",[_2,_4,_7])},isc.A.$109z=function isc_FieldPickerListGrid__finishApplySyntheticReorder(_1,_2,_3){this.transferRecords(_2,_1.target,_3,this,this.$109x)},isc.A.dragComplete=function isc_FieldPickerListGrid_dragComplete(){var _1=this.parentElement;_1.shuttle.markForSave()},isc.A.transferRecords=function isc_FieldPickerListGrid_transferRecords(_1,_2,_3,_4,_5){var _6=this.parentElement,_7=this!=_4,_8=_5==this.$109x;if(!_8)this.$109w(_1,_7);if(_7&&!_4.validateRecordList(_1))_1.clear();if(_1.length>0)_6.shuttle.markForSave();if(_7){_4.collapseRecordList(_1,true)}
if(_7&&_2!=null){this.requestSyntheticReorder(_1,_2)}
return this.Super("transferRecords",arguments)});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("FieldPickerTreeGrid","TreeGrid","FieldPickerGrid");isc.A=isc.FieldPickerTreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.filterData=isc.FieldPickerGrid.getPrototype().filterData;isc.A.expandRecord=isc.FieldPickerGrid.getPrototype().expandRecord;isc.A.willAcceptDrop=isc.FieldPickerGrid.getPrototype().willAcceptDrop;isc.A.setCanExpandRecords=isc.FieldPickerGrid.getPrototype().setCanExpandRecords;isc.A.getExpansionComponent=isc.FieldPickerGrid.getPrototype().getExpansionComponent;isc.A.saveAndCollapseRecord=isc.FieldPickerGrid.getPrototype().saveAndCollapseRecord;isc.A.cellHoverHTML=isc.FieldPickerGrid.getPrototype().cellHoverHTML;isc.A.getCellValue=isc.FieldPickerGrid.getPrototype().getCellValue;isc.B.push(isc.A.createResultTree=function isc_FieldPickerTreeGrid_createResultTree(_1,_2,_3){var _4=this.parentElement.shuttle.picker;if(!_3.dataProperties)_3.dataProperties={};isc.addProperties(_3.dataProperties,{modelType:"parent",defaultIsFolder:true,reportCollisions:false,idField:_4.pickerIdField,parentIdField:"_"+_4.pickerParentIdField});var _5=this.Super("createResultTree",arguments);if(this.isObserving(this.data,"dataSourceDataChanged")){this.ignore(this.data,"dataSourceDataChanged")}
this.observe(_5,"dataSourceDataChanged","observer.invalidateCacheIfMissingNodes()");return _5},isc.A.getTotalFieldRecords=function isc_FieldPickerTreeGrid_getTotalFieldRecords(){this.$1090=this.data.getDescendants();return this.$1090.length},isc.A.getFieldRecord=function isc_FieldPickerTreeGrid_getFieldRecord(_1){return this.$1090[_1]},isc.A.clearFieldRecords=function isc_FieldPickerTreeGrid_clearFieldRecords(){delete this.$1090},isc.A.dataArrived=function isc_FieldPickerTreeGrid_dataArrived(_1){if(this.canExpandRecords&&isc.isA.Object(_1)){this.$1090=this.data.getChildren(_1);this.setRecordExpansion(0,this.$1090.getLength());delete this.$1090}},isc.A.collapseAllRecords=function isc_FieldPickerTreeGrid_collapseAllRecords(){if(this.canExpandRecords){var _1=this.data.getDescendants();this.collapseRecordList(_1)}},isc.A.validateAllRecords=function isc_FieldPickerTreeGrid_validateAllRecords(){if(this.canExpandRecords){var _1=this.data.getDescendants();return this.validateRecordList(_1)}
return true},isc.A.dragComplete=function isc_FieldPickerTreeGrid_dragComplete(){var _1=this.parentElement;_1.shuttle.markForSave()},isc.A.transferNodes=function isc_FieldPickerTreeGrid_transferNodes(_1,_2,_3,_4){var _5=this.parentElement,_6=this!=_4;this.$109w(_1,_6);if(_6&&!_4.validateRecordList(_1))_1.clear();if(_1.length>0)_5.shuttle.markForSave();_4.$1091=true;if(_6){_4.collapseRecordList(_1,true)}
this.Super("transferNodes",arguments)},isc.A.invalidateCacheIfMissingNodes=function isc_FieldPickerTreeGrid_invalidateCacheIfMissingNodes(){if(this.data.getAllNodes().length<
this.dataSource.cacheData.length){if(!this.$1091)return;delete this.$1091;this.invalidateCache()}});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("FieldPickerGridView","VLayout");isc.A=isc.FieldPickerGridView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.expansionFormDefaults={_constructor:"DynamicForm",width:5,titleAlign:isc.Page.isRTL()?"right":"left",overflow:"visible",wrapItemTitles:false,validateOnExit:true,validateOnChange:true};isc.B.push(isc.A.initWidget=function isc_FieldPickerGridView_initWidget(){this.Super(this.$1v,arguments);var _1=isc.SectionStack.create({height:5,overflow:"visible",sections:[{title:this.title,controls:this.controls,controlsLayoutProperties:{membersMargin:2,layoutEndMargin:2},canCollapse:false}]});this.addMember(_1)},isc.A.addMember=function isc_FieldPickerGridView_addMember(_1){this.Super("addMember",arguments);if(isc.isA.ListGrid(_1))this.grid=_1},isc.A.createExpansionDynamicForm=function isc_FieldPickerGridView_createExpansionDynamicForm(_1,_2){var _3=[],_4=this.shuttle.picker.dataBoundComponent,_5=this.shuttle.picker.expansionDataSource,_6=_5.getFieldNames();for(var i=0;i<_6.length;i++){var _8=_6[i],_9=_1.contains(_8);switch(_8){case"decimalPad":case"decimalPrecision":if(!isc.SimpleType.inheritsFrom(_2.type,"float"))_9=false;break;case"precision":if(!isc.SimpleType.inheritsFrom(_2.type,"float")&&!isc.SimpleType.inheritsFrom(_2.type,"integer"))_9=false;break}
if(_9)_3.add({name:_8})}
if(_2.userSummary){_3.add({type:"text",autoFit:true,endRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$1092",title:_4.editSummaryFieldText,click:function(){this.shuttle.confirmSaveOK('editSummaryField',this.record)}})}
if(_2.userFormula){_3.add({type:"text",autoFit:true,endRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$1093",title:_4.editFormulaFieldText,click:function(){this.shuttle.confirmSaveOK('editFormulaField',this.record)}})}
if(_2.userSummary||_2.userFormula){_3.add({type:"text",autoFit:true,startRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$1094",title:"Remove Field",click:function(){this.shuttle.confirmRemoveOK(this.record)}})}
var _10=this.createAutoChild("expansionForm",{dataSource:_3.length>0?_5:null,fields:_3});_10.setValues(_2);return _10},isc.A.cleanup=function isc_FieldPickerGridView_cleanup(){this.grid.collapseAllRecords()});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("FieldPickerShuttle","HLayout");isc.A=isc.FieldPickerShuttle.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.changedRecords={};isc.A.availableViewDefaults={_constructor:"FieldPickerGridView"};isc.A.currentViewDefaults={_constructor:"FieldPickerGridView"};isc.A.buttonStackDefaults={align:"center",overflow:"visible",layoutAlign:"center"};isc.A.hilitesButtonConstructor="IButton";isc.A.hilitesButtonDefaults={autoFit:true,click:"this.shuttle.confirmSaveOK('editHilites')"};isc.B.push(isc.A.applyCompleteFields=function isc_FieldPickerShuttle_applyCompleteFields(_1){var i,_3,_4,_5=[],_6=this.picker.shouldUseTrees(),_7=this.picker.pickerParentIdField;var _8=this.currentView.grid,_9=_8.getTotalFieldRecords();for(i=0;i<_9;i++){_4=_8.getFieldRecord(i);_3=this.picker.getOriginalField(_4);_3.title=_4.$38e;if(_8.isExpanded(_4)){var _10=_8.getCurrentExpansionComponent(_4);if(_10&&_10.valuesHaveChanged()){var _11=_10.getChangedValues();isc.addProperties(_3,_11);_10.setValues(_11)}}
if(_6)_3[_7]=_4["_"+_7];_3.showIf="true";_3.visible=true;_3.hidden=false;_5.add(_3)}
_8.clearFieldRecords();var _12=this.availableView.grid,_13=_12.getTotalFieldRecords();for(i=0;i<_13;i++){_4=_12.getFieldRecord(i);_3=this.picker.getOriginalField(_4);if(_6)_3[_7]=_4["_"+_7];_3.showIf="false";_3.visible=false;_3.hidden=true;_5.add(_3)}
_12.clearFieldRecords();for(i=0;i<_5.length;i++){var _14=this.changedRecords[_5[i].name];if(_14)isc.addProperties(_5[i],_14)}
if(_1.useAllDataSourceFields){_1.setProperty("useAllDataSourceFields",false);this.logInfo("Clearing useAllDataSourceFields for DBC "+_1.getID()+"so that setFields() can apply the requested picker field order")}
_1.setFields(_5);this.clearChanges()},isc.A.clearChanges=function isc_FieldPickerShuttle_clearChanges(){this.changedRecords={};this.recordsMoved=false},isc.A.markForSave=function isc_FieldPickerShuttle_markForSave(){this.recordsMoved=true},isc.A.requiresSave=function isc_FieldPickerShuttle_requiresSave(){var _1=this.currentView.grid,_2=_1.getTotalFieldRecords();for(var i=0;i<_2;i++){var _4=_1.getFieldRecord(i);if(_1.isExpanded(_4)){var _5=_1.getCurrentExpansionComponent(_4);if(_5&&_5.valuesHaveChanged())return true}}
_1.clearFieldRecords();var _6=isc.getKeys(this.changedRecords);return this.recordsMoved||_6.length>0},isc.A.confirmRemoveOK=function isc_FieldPickerShuttle_confirmRemoveOK(_1){this.$1095=_1;isc.confirm(this.picker.removeText,{target:this,methodName:"completeConfirmRemoveOK"})},isc.A.completeConfirmRemoveOK=function isc_FieldPickerShuttle_completeConfirmRemoveOK(_1){var _2=this.$1095;delete this.$1095;if(_1)this.currentView.grid.removeData(_2)},isc.A.confirmSaveOK=function isc_FieldPickerShuttle_confirmSaveOK(_1,_2){this.$1096=_1;this.$1095=_2;if(this.requiresSave()){isc.confirm(this.picker.confirmText,{target:this,methodName:"completeSaveOK"})}else{this.completeSaveOK(true)}},isc.A.completeSaveOK=function isc_FieldPickerShuttle_completeSaveOK(_1){var _2=this.$1096,_3=this.$1095;delete this.$1096;delete this.$1095;if(_1)this.saveAndExecuteMethod(_2,_3)},isc.A.saveAndExecuteMethod=function isc_FieldPickerShuttle_saveAndExecuteMethod(_1,_2){var _3=this.picker;if(!_3.currentFieldsGrid.validateAllRecords())return false;_3.currentFieldsGrid.endEditing();_3.currentFieldsGrid.clearCriteriaIfPresent();_3.availableFieldsGrid.clearCriteriaIfPresent();_3.currentFieldsGrid.collapseAllRecords();this.applyCompleteFields(_3.dataBoundComponent);if(_1!=null)this.openEditor(_1,_2);return true},isc.A.openEditor=function isc_FieldPickerShuttle_openEditor(_1,_2){var _3=this.picker.dataBoundComponent;_3[_1](_2);var _4=true;switch(_1){case"addSummaryField":case"addFormulaField":_4=false;case"editSummaryField":case"editFormulaField":var _5=_3.fieldEditorWindow;if(_5){var _6=_5.items[0];if(_4)_5.items[0].saveAddAnotherButton.hide();this.observe(_6,"fireOnClose","observer.picker.refresh(observed)");_6.testRecord=this.picker.sampleRecord}
break;case"editHilites":var _5=_3.hiliteWindow;if(_5){this.observe(_5,"hide","observer.picker.refresh(null, observed)")}
break}},isc.A.initWidget=function isc_FieldPickerShuttle_initWidget(){this.Super(this.$1v,arguments);var _1=this.picker,_2=_1.dataBoundComponent;this.availableView=this.createAutoChild("availableView",{shuttle:this,controls:_1.availableFieldsHeaderControls,title:_1.availableFieldsTitle});var _3=[];var _4=_1.currentFieldsHeaderControls;if(_4==null){_4=[];if(_1.showHilitesButton)_4.add("hilitesButton");if(_2.canAddFormulaFields||_2.canAddSummaryFields)_4.add("customFieldsMenuButton")}
for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="hilitesButton"){this.hilitesButton=this.createAutoChild("hilitesButton",{shuttle:this,title:_1.hilitesText});_3.add(this.hilitesButton)}else if(_6=="customFieldsMenuButton"){var _7=[];if(_2.canAddSummaryFields)_7.add({shuttle:this,title:_2.addSummaryFieldText,click:"item.shuttle.confirmSaveOK('addSummaryField')",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});if(_2.canAddFormulaFields)_7.add({shuttle:this,title:_2.addFormulaFieldText,click:"item.shuttle.confirmSaveOK('addFormulaField')",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add(isc.MenuButton.create({autoFit:true,title:_1.addCustomFieldsButtonTitle,menu:isc.Menu.create({data:_7})}))}else if(isc.isA.Canvas(_6)){_6.addProperties({shuttle:this,picker:_1});_3.add(_6)}}
this.currentView=this.createAutoChild("currentView",{shuttle:this,controls:_3,title:_1.currentFieldsTitle});this.initTransferArrows();this.addMembers([this.availableView,this.horizontalArrows,this.currentView,this.verticalArrows])},isc.A.initTransferArrows=function isc_FieldPickerShuttle_initTransferArrows(){var _1=this.currentView,_2=this.availableView;this.horizontalArrows=isc.VLayout.create({width:24,membersMargin:5,members:[isc.ImgButton.create({height:22,imageType:"center",showDown:false,align:"center",src:"[SKINIMG]TransferIcons/right.png",click:function(){_1.grid.transferSelectedData(_2.grid)}}),isc.ImgButton.create({height:22,imageType:"center",showDown:false,src:"[SKINIMG]TransferIcons/left.png",click:function(){_2.grid.transferSelectedData(_1.grid)}})]},this.buttonStackDefaults);var _3=function(_8){var _4=_1.grid,_5=_4.getSelection()||[],_6=_8==-1?0:_4.getTotalRows();_4.transferRecords(_5,null,_6,_4);_4.scrollToRow(_6)};var _7=function(_8){var _4=_1.grid,_5=_4.getContiguousSelection();if(_5){var _6=_4.getRecordSetBounds(_5,_8,1);_4.transferRecords(_5,null,_6,_4);_4.scrollToRow(_6-(_8+1)/2)}};if(this.picker.showFieldOrderButtons){this.verticalArrows=isc.VLayout.create({width:24,membersMargin:5,members:[isc.ImgButton.create({height:22,imageType:"center",showDown:false,src:"[SKINIMG]TransferIcons/up_first.png",click:function(){_3(-1)}}),isc.ImgButton.create({height:22,imageType:"center",showDown:false,src:"[SKINIMG]TransferIcons/up.png",click:function(){_7(-1)}}),isc.ImgButton.create({height:22,imageType:"center",showDown:false,src:"[SKINIMG]TransferIcons/down.png",click:function(){_7(1)}}),isc.ImgButton.create({height:22,imageType:"center",showDown:false,src:"[SKINIMG]TransferIcons/down_last.png",click:function(){_3(1)}})]},this.buttonStackDefaults)}},isc.A.cleanup=function isc_FieldPickerShuttle_cleanup(){this.currentView.cleanup();this.clearChanges()});isc.B._maxIndex=isc.C+13;isc.ClassFactory.defineClass("FieldPicker","VLayout");isc.A=isc.FieldPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.layoutMargin=10;isc.A.membersMargin=10;isc.A.originalFields={};isc.A.defaultWidth=800;isc.A.defaultHeight=425;isc.A.dataBoundComponent=null;isc.A.sampleRecord="first";isc.A.showFieldOrderButtons=true;isc.A.hilitesText="Highlights...";isc.A.availableFieldsTitle="Available Fields";isc.A.currentFieldsTitle="Visible Fields";isc.A.addCustomFieldsButtonTitle="Add Custom Fields";isc.A.availableTitleTitle="Name";isc.A.currentTitleTitle="Field Title";isc.A.sampleValueTitle="Sample Value";isc.A.sampleValueField="$1097";isc.A.showAvailableSampleValue=true;isc.A.showSampleValues=true;isc.A.confirmText="Must save pending changes to proceed. OK?";isc.A.removeText="You are about to remove the field. Are you sure?";isc.A.instructions="Drag and drop or use arrows to move fields.  Drag reorder to change field order.";isc.A.instructionLabelConstructor="Label";isc.A.instructionLabelDefaults={height:5,overflow:"visible"};isc.A.saveAndExitButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.removeItemTitle="Remove";isc.A.emptyTitleHint="[No title specified]";isc.A.showFieldPrompts=true;isc.A.sortAvailableFields=true;isc.A.availableFieldsSortDirection="ascending";isc.A.availableFieldsHeaderControls=null;isc.A.availableFieldsGridDefaults={canGroupBy:false,dataFetchMode:"basic",dragDataAction:"move",canFreezeFields:false,showFilterEditor:true,filterOnKeypress:true,canDragRecordsOut:true,loadDataOnDemand:false,dragRecategorize:"never",keepParentsOnFilter:true,autoFitWidthApproach:"both",useAllDataSourceFields:true,canAcceptDroppedRecords:true,createDefaultTreeField:false,recordEnabledProperty:"$1098",autoFetchTextMatchStyle:"substring"};isc.A.buttonLayoutConstructor="HLayout";isc.A.buttonLayoutDefaults={height:5,align:"right",overflow:"visible",membersMargin:10,defaultLayoutAlign:"center"};isc.A.saveAndExitButtonConstructor="IButton";isc.A.saveAndExitButtonDefaults={click:"this.picker.saveClick()"};isc.A.cancelChangesButtonConstructor="IButton";isc.A.cancelChangesButtonDefaults={click:"this.picker.closeClick()"};isc.B.push(isc.A.getOriginalField=function isc_FieldPicker_getOriginalField(_1){return this.originalFields[_1[this.primaryKeyField]]},isc.A.shouldUseTrees=function isc_FieldPicker_shouldUseTrees(){if(this.dataBoundComponent){var _1=this.dataBoundComponent.dataSource;return _1!=null&&!!_1.showFieldsAsTree}
return false},isc.A.duplicateAndValidateFields=function isc_FieldPicker_duplicateAndValidateFields(_1){var _2=[],_3=this.dataBoundComponent,_4=!isc.isA.ListGrid(_3)||_3.canReorderFields;for(var i=0;i<_1.length;i++){var _6=_1[i];if(!_6.excludeFromState)_2.add(_6);if((_6.canReorder==false||_6.canReorder==null&&!_4)&&_6.canHide==false)_6.$1098=false}
return _2},isc.A.createDataSourceFromFields=function isc_FieldPicker_createDataSourceFromFields(_1,_2,_3,_4){var _5=_4?_1:this.duplicateAndValidateFields(_1);if(_2!=null)_5.removeList(_2);var _1=[],_6=this.dataBoundComponent;if(_3){_5=_5.filter(function(_12){return _12.canHide!=false})}
var _7,_8=_3?this.availableTitleTitle:this.currentTitleTitle;if(isc.isA.String(this.sampleRecord)){if(this.sampleRecord=="first"){if(isc.isA.ListGrid(_6)){if(_6.fieldPickerShowSampleValues){var _9=_6.getOriginalData();this.sampleRecord=_9&&_9.getLength()>0?_9.get(0):null}}else if(this.showSampleValues){this.sampleRecord=_6.getRecord(0)}
if(!isc.isAn.Object(this.sampleRecord))this.sampleRecord=null}else if(this.sampleRecord=="firstOpenLeaf"&&isc.isA.TreeGrid(_6)){var _9=_6.getData();var _10=_9.getOpenList(_9.getRoot(),isc.Tree.LEAVES_ONLY);if(_10.length)this.sampleRecord=_10.get(0);else this.sampleRecord=_6.getRecord(0)}}
if(isc.isA.Object(this.sampleRecord)){for(var i=0;i<_5.length;i++){var _12=_5[i];_12[this.sampleValueField]=_6.getStandaloneFieldValue(this.sampleRecord,_12.name)}
if(!_3||this.showAvailableSampleValue){_1.add({name:this.sampleValueField,title:this.sampleValueTitle,canFilter:false,canEdit:false,type:"any"});_7=true}}
var _13={name:"name",title:_8,autoFitWidth:_7,primaryKey:true},_14={name:"$38e",title:_8,autoFitWidth:_7,editorProperties:{showHintInField:true,hint:this.emptyTitleHint},canEdit:this.canEditTitles&&!_3};if(this.useTitleField){_13.hidden=true;_14.treeField=true}
else{_14.hidden=true;_13.treeField=true}
_1.addListAt([_13,_14],0);if(this.shouldUseTrees()){var _15=this.pickerIdField,_16=this.pickerParentIdField,_17=_6.dataSource.fieldTreeRootValue;_1.addList([{name:_15,hidden:true,primaryKey:true},{name:"_"+_16,hidden:true,foreignKey:_15,rootValue:_17}]);if(this.useTitleField)_14.canFilter=true;else _13.canFilter=true;delete _13.primaryKey;_5.map(function(_12){_12["_"+_16]=_12[_16]})}
for(var i=0;i<_5.length;i++){var _12=_5[i];this.originalFields[_12[this.primaryKeyField]]=_12;if(_12.userSummary||_12.userFormula)this.customFields=true;_12.$38e=_12.title}
var _18=isc.DataSource.create({fields:_1,clientOnly:true,dataProtocol:"clientCustom",transformRequest:function(_20){var _19=this.getClientOnlyResponse(_20,null);this.processResponse(_20.requestId,_19);return _20.data}});_18.setCacheData(_5);return _18},isc.A.createExpansionDataSource=function isc_FieldPicker_createExpansionDataSource(){var _1=[{name:"frozen",title:isc.FieldPickerField.frozenTitle,showTitle:false,type:"boolean"},{name:"precision",validators:[{type:"regexp",errorMessage:"Must be between 1 and 21 inclusive",expression:"^([1-9]|1[0-9]|2[0-1])?$"}],title:isc.FieldPickerField.precisionTitle,type:"integer"},{name:"decimalPrecision",title:isc.FieldPickerField.decimalPrecisionTitle,type:"integer"},{name:"decimalPad",validators:[{type:"regexp",errorMessage:"Must be between 0 and 20 inclusive",expression:"^([0-9]|1[0-9]|20)?$"}],title:isc.FieldPickerField.decimalPadTitle,type:"integer"},{name:"align",title:isc.FieldPickerField.alignTitle,valueMap:["left","center","right"]},{name:"cellAlign",title:isc.FieldPickerField.cellAlignTitle,valueMap:["left","center","right"]}];if(isc.isA.DetailViewer(this.dataBoundComponent)){var _2=function(_3){switch(_3.name){case"frozen":case"align":case"cellAlign":return false;default:return true}};_1=_1.filter(_2)}
this.expansionDataSource=isc.DataSource.create({clientOnly:true,fields:_1})},isc.A.updateFieldConfiguration=function isc_FieldPicker_updateFieldConfiguration(_1){this.useTitleField=_1&&_1.title!=null;this.primaryKeyField=this.shouldUseTrees()?this.pickerIdField:"name"},isc.A.updateEditableProperties=function isc_FieldPicker_updateEditableProperties(){var _1=this.dataBoundComponent.fieldPickerFieldProperties,_2=this.currentFieldsGrid;isc.addProperties(_2,{editableProperties:_1||[],autoFitFieldWidths:isc.isA.Object(this.sampleRecord)});_2.setCanExpandRecords(isc.isA.Array(_1)&&_1.length>0||this.customFields)},isc.A.validateDataSourceField=function isc_FieldPicker_validateDataSourceField(_1){var _2=_1.precision;if(_2!=null&&(_2<1||_2>21))return false;var _3=_1.decimalPad;if(_3!=null&&(_3<0||_3>20))return false;return true},isc.A.refresh=function isc_FieldPicker_refresh(_1,_2){if(_1){var _3=this.shuttle;_3.ignore(_1,"fireOnClose");var _4=this.dataBoundComponent.fieldEditorWindow;if(!_4.destroying&&!_4.destroyed){_3.observe(_4.items[0],"fireOnClose","observer.picker.refresh(observed)")}}
if(_2){this.shuttle.ignore(_2,"hide")}
var _5=this.dataBoundComponent.fields,_6=this.dataBoundComponent.completeFields,_7;this.updateFieldConfiguration(_6[0]);this.availableFieldsGrid.setDataSource(this.createDataSourceFromFields(_6,_5,true));this.availableFieldsGrid.fetchData();this.currentFieldsGrid.setDataSource(this.createDataSourceFromFields(_5));this.currentFieldsGrid.fetchData();this.updateEditableProperties();this.needsRefresh=false},isc.A.initWidget=function isc_FieldPicker_initWidget(){this.Super(this.$1v,arguments);if(this.dataBoundComponent==null&&this.dataSource!=null){var _1=this,_2=isc.addProperties({},this.creator.fieldPickerProperties,{autoDraw:false,fieldStateChanged:function(){if(isc.isA.Function(_1.callback)){_1.callback(this.completeFields,this.getHilites())}}});var _3=isc.ListGrid.create(_2);_3.setFields(_3.fields);this.dataBoundComponent=_3}
if(this.showHilitesButton==null){var _4=this.dataBoundComponent;this.showHilitesButton=_4&&_4.canEditHilites}
this.instructionLabel=this.createAutoChild("instructionLabel",{contents:this.instructions});this.addMember(this.instructionLabel);var _5=isc.FieldPickerShuttle.create({picker:this,membersMargin:10});this.shuttle=_5;this.addMember(_5);var _6=this.shouldUseTrees()?isc.FieldPickerTreeGrid:isc.FieldPickerListGrid;var _7=this.dataBoundComponent.fields,_8=this.dataBoundComponent.completeFields;if(!_8){_8=_7}
this.updateFieldConfiguration(_8[0]);var _9;if(this.sortAvailableFields){_9=[{property:"$38e",direction:this.availableFieldsSortDirection}]}
this.addAutoChild("availableFieldsGrid",{autoFetchData:true,initialSort:_9,autoFitExpandField:this.showAvailableSampleValue?this.sampleValueField:null,dataSource:this.createDataSourceFromFields(_8,_7,true),rowDoubleClick:function(_12,_13,_14){var _10=_5.currentView.grid;_10.transferSelectedData(this)}},_6,_5.availableView);this.addAutoChild("currentFieldsGrid",{autoFetchData:true,autoFitExpandField:this.sampleValueField,dataSource:this.createDataSourceFromFields(_7),contextMenu:isc.Menu.create({autoDraw:false,data:[{title:this.removeItemTitle,click:function(){var _10=_5.currentView.grid;var _11=_5.availableView.grid;_11.transferSelectedData(_10)}}]})},_6,_5.currentView);this.createExpansionDataSource();this.updateEditableProperties();this.addAutoChild("buttonLayout");if(this.buttonLayout){this.saveAndExitButton=this.createAutoChild("saveAndExitButton",{picker:this,title:this.saveAndExitButtonTitle});this.cancelChangesButton=this.createAutoChild("cancelChangesButton",{picker:this,title:this.cancelButtonTitle});this.buttonLayout.addMembers([this.saveAndExitButton,this.cancelChangesButton]);this.addMember(this.buttonLayout)}},isc.A.setAvailableFields=function isc_FieldPicker_setAvailableFields(_1){var i,_3,_4={};for(i=0;i<_1.length;i++){var _5=_1[i];_4[_5.name]=_5}
var _6=this.currentFieldsGrid,_7=_6.dataSource.cacheData;var _8=[];for(var i=0;i<_7.length;i++){var _9=_7[i];if(_4[_9.name]!==_3){_8.add(_9);delete _4[_9.name]}}
this.currentFieldsGrid.setDataSource(this.createDataSourceFromFields(_8,null,false,true));this.currentFieldsGrid.fetchData();var _10=this.availableFieldsGrid,_11=_10.dataSource.cacheData;var _12=[];for(var i=0;i<_11.length;i++){var _9=_11[i];if(_4[_9.name]!==_3){_12.add(_9);delete _4[_9.name]}}
for(var _13 in _4){if(_4.hasOwnProperty(_13)){var _14=isc.DataSource.getAutoTitle(_13);_12.add({name:_13,title:_14})}}
this.availableFieldsGrid.setDataSource(this.createDataSourceFromFields(_12,null,true,true));this.availableFieldsGrid.fetchData()},isc.A.saveClick=function isc_FieldPicker_saveClick(){if(this.shuttle.saveAndExecuteMethod()){var _1=this.dataBoundComponent;_1.markForRedraw();if(_1.handleFieldStateChanged){_1.handleFieldStateChanged()}
if(this.callback)this.callback(_1.completeFields,_1.getHilites());if(this.creator)this.creator.closeClick()}},isc.A.closeClick=function isc_FieldPicker_closeClick(){},isc.A.cleanup=function isc_FieldPicker_cleanup(){this.shuttle.cleanup();var _1=this.dataBoundComponent.completeFields,_2=this.currentFieldsGrid.canExpandrecordProperty;for(var i=0;i<_1.length;i++){var _4=_1[i];delete _4[this.sampleValueField];delete _4[_2];delete _4["_"+this.pickerParentIdField];delete _4.$1098;delete _4.$38e}
this.originalFields={}});isc.B._maxIndex=isc.C+14;isc.A=isc.FieldPicker.getPrototype();isc.A.currentFieldsGridDefaults=isc.addProperties(isc.shallowClone(isc.FieldPicker.getPrototype().availableFieldsGridDefaults),{canSort:false,expansionMode:"editor",canReparentNodes:true,canReorderRecords:true,canExpandRecordProperty:"$1099"});if(isc.Window!=null){isc.ClassFactory.defineClass("FieldPickerWindow","Window");isc.A=isc.FieldPickerWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Field Picker";isc.A.width=800;isc.A.height=425;isc.A.canDragResize=true;isc.A.autoCenter=true;isc.A.isModal=true;isc.A.autoDismiss=true;isc.A.fieldPickerConstructor="FieldPicker";isc.A.fieldPickerDefaults={autoParent:"none",pickerIdField:"fieldTreeId",pickerParentIdField:"fieldTreeParentId"};isc.B.push(isc.A.initWidget=function isc_FieldPickerWindow_initWidget(){if(this.isModal&&this.autoDismiss)this.isModal=false;this.Super(this.$1v,arguments);this.addAutoChild("fieldPicker");this.addItem(this.fieldPicker);this.observe(this.fieldPicker,"closeClick","observer.closeClick()");this.observe(this.fieldPicker.dataBoundComponent,"visibilityChanged","if (!observed.isVisible()) observer.hide();")},isc.A.show=function isc_FieldPickerWindow_show(){if(this.needsRefresh)this.fieldPicker.refresh();var _1=this.Super("show",arguments);if(this.autoDismiss&&!this.clickMaskUp())this.$110a();return _1},isc.A.$110a=function isc_FieldPickerWindow__showClickMask(){if(this.autoDismiss&&!this.clickMaskUp()){this.showClickMask(this.getID()+".closeClick()","soft",this.children)}},isc.A.closeClick=function isc_FieldPickerWindow_closeClick(){if(this.clickMaskUp())this.hideClickMask();this.fieldPicker.cleanup();this.needsRefresh=true;return this.Super("closeClick",arguments)},isc.A.destroy=function isc_FieldPickerWindow_destroy(){this.ignore(this.fieldPicker,"closeClick");this.ignore(this.fieldPicker.dataBoundComponent,"hide");return this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+5}else{isc.Log.logInfo("Source for standard FieldPickerWindow class included in this module, but required related class (Window) is not loaded. This can occur if the Grid module is loaded without the Containers module.","moduleDependencies")}
isc.defineClass("FilterEditorBody","GridBody");isc.A=isc.FilterEditorBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getInnerHTML=function isc_FilterEditorBody_getInnerHTML(_1){var _2;var _3={target:this,method:function(_5){if(!isc.Browser.isIE){_5="<form action='javascript:void(0)' onsubmit='return false;'>"+_5+"</form>"}
if(_2){if(_1!=null)this.fireCallback(_1,"HTML",[_5]);return false}else{return _5}}};var _4=this.Super("getInnerHTML",[_3],arguments);_2=(_4===false);if(_2){return false}else{return _3.method.call(this,_4)}});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RecordEditor","ListGrid");isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.cellSpacing=0;isc.A.cellPadding=0;isc.A.selectionType="none";isc.A.showRollOver=false;isc.A.baseStyle="recordEditorCell";isc.A.showHeader=false;isc.A.showEmptyMessage=false;isc.A.bodyOverflow="hidden";isc.A.fixedRecordHeights=true;isc.A.drawAllMaxCells=0;isc.A.skinImgDir="images/RecordEditor/";isc.A.saveImg="[SKIN]add.png";isc.A.filterImg={src:"[SKIN]filter.png",width:50,height:50,showOver:true};isc.A.actionButtonConstructor=isc.Button;isc.A.actionButtonDefaults={title:"",showOver:true,showFocusedAsOver:false};isc.A.actionButtonStyle="normal";isc.A.listEndEditAction="next";isc.A.canEdit=true;isc.A.editByCell=false;isc.A.$r9=false;isc.A.bodyStyleName="normal";isc.A.styleName="normal";isc.B.push(isc.A.shouldAutoFitField=function isc_RecordEditor_shouldAutoFitField(){return false},isc.A.$104c=function isc_RecordEditor__showEditClickMask(){});isc.B._maxIndex=isc.C+2;isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$110b="filter";isc.A.rebuildForFreeze=isc.Class.NO_OP;isc.A.rowClick=isc.Class.NO_OP;isc.A.rowDoubleClick=isc.Class.NO_OP;isc.B.push(isc.A.initWidget=function isc_RecordEditor_initWidget(){if(this.sourceWidget!=null){var _1=this.sourceWidget;this.setWidth(_1.getInnerContentWidth(true));this.observe(_1,"resized","observer.sourceWidgetResized(observed)");this.leaveScrollbarGap=this.sourceWidget.leaveScrollbarGap;var _2={autoFocus:false};if(this.isAFilterEditor()){this.actOnCellChange=this.sourceWidget.filterByCell;this.actOnKeypress=this.sourceWidget.filterOnKeypress;_2.storeDisplayValues=false}else{this.actOnCellChange=this.sourceWidget.saveByCell}
isc.addProperties(this.editFormDefaults,_2);this.fieldIDProperty=this.sourceWidget.fieldIDProperty;this.fields=this.sourceWidget.completeFields.duplicate();this.cellHeight=this.getInnerHeight()}else{this.logWarn("RecordEditor initialized without a sourceWidget property. This widget is not supported as a standalone component.")}
return this.Super(this.$1v)},isc.A.destroy=function isc_RecordEditor_destroy(){this.ignore(this.sourceWidget,"resized");this.Super("destroy",arguments)},isc.A.sourceWidgetResized=function isc_RecordEditor_sourceWidgetResized(_1){this.setWidth(_1.getInnerContentWidth(true))},isc.A.isAFilterEditor=function isc_RecordEditor_isAFilterEditor(){return(this.actionType==this.$110b)},isc.A.$57n=function isc_RecordEditor__formatCellValue(_1,_2,_3,_4,_5){if(_3.isRemoveField)return"&nbsp;"
return this.Super("$57n",arguments)},isc.A.$18d=function isc_RecordEditor__useDisplayFieldValue(_1){return false},isc.A.draw=function isc_RecordEditor_draw(){var _1=this.sourceWidget;this.setWidth(_1.getInnerContentWidth(true));var _2=this.findNextEditCell(0,0,1,true,true,false,true,true);if(_2==null){this.logInfo("No editable fields in this record editor."+(this.isAFilterEditor()?" Check the 'canFilter' property for each field in ":" Check the 'canEdit' property for each field in ")+this.sourceWidget.getID())}else{var _3=this.isAFilterEditor(),_4;if(_3){_4=this.sourceWidget.$103s()}else{var _5;_4={};for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(_7.defaultValue!==_5){_4[_7[this.fieldIdProperty]]=_7.defaultValue}}}
if(this.isAFilterEditor())this.setValuesAsCriteria(_4);else this.setEditValues(0,_4);var _8=_2[1];this.$100w(0,_8)}
this.Super("draw",arguments);this.actionButton.bringToFront()},isc.A.setFields=function isc_RecordEditor_setFields(){var _1=this.getEditForm();if(this.isAFilterEditor()){this.$110c=_1?this.getValuesAsCriteria():null}
this.Super("setFields",arguments);if(this.$110c){_1.setValuesAsCriteria(this.$110c);delete this.$110c}
this.initializeEdit()},isc.A.initializeEdit=function isc_RecordEditor_initializeEdit(){if(!this.isDrawn()||this.$94e)return;var _1=this.findNextEditCell(0,0,1,true,true);if(_1==null)_1=[0,0];this.$100w(0,_1[1])},isc.A.showField=function isc_RecordEditor_showField(){this.Super("showField",arguments);this.initializeEdit()},isc.A.createChildren=function isc_RecordEditor_createChildren(){this.Super("createChildren",arguments);var _1=this.getEditForm();if(_1!=null&&this.$110d){_1.setValuesAsCriteria(this.$110d);delete this.$110d;if(this.isAFilterEditor())_1.isSearchForm=true}
if(!this.actionButton)this.makeActionButton()},isc.A.makeActionButton=function isc_RecordEditor_makeActionButton(){var _1;if(this.isAFilterEditor()){_1=this.filterImg}else{_1=this.saveImg}
var _2,_3
if(isc.isAn.Object(_1)){_2=_1.showOver;_3=_1.showFocused;_1=_1.src}
var _4=this.sourceWidget.$89f();var _5={recordEditor:this,left:this.isRTL()?0:this.getInnerWidth()-_4,width:_4,autoDraw:false,baseStyle:this.actionButtonStyle,skinImgDir:this.skinImgDir,icon:_1,iconSize:_4,prompt:this.actionButtonPrompt,click:function(){this.recordEditor.performAction()}}
if(_2!=null)_5.showRollOverIcon=_2;if(_3!=null)_5.showFocusedIcon=_3;if(this.tabIndex!=null&&!this.$76){_5.tabIndex=this.tabIndex}
this.actionButton=this.createAutoChild("actionButton",_5);this.addChild(this.actionButton)},isc.A.performAction=function isc_RecordEditor_performAction(_1,_2){if(this.isAFilterEditor())this.performFilter(_1,_2);else this.performSave(_1,_2)},isc.A.setValuesAsCriteria=function isc_RecordEditor_setValuesAsCriteria(_1,_2,_3,_4){var _5=this.getEditForm();if(_5==null){this.$110d=_1;return}
_5.setValuesAsCriteria(_1,null,_3,_4);if(_2)this.refreshRow(0)},isc.A.makeEditForm=function isc_RecordEditor_makeEditForm(){var _1=this.editFormProperties=this.editFormProperties||{};if(_1.allowExpressions==null&&this.allowFilterExpressions!=null)
_1.allowExpressions=this.allowFilterExpressions;_1.expressionDataSource=this.expressionDataSource;if(this.isAFilterEditor())_1.storeAtomicValues=true;var _2=this.getEditForm(),_3;_1.$40j=true;if(_2==null){_3=this.$110d}else{_3=_2.getValuesAsCriteria();_2.expressionDataSource=this.expressionDataSource}
this.Super("makeEditForm",arguments);_2=this.getEditForm();if(_2!=null){_2.setValuesAsCriteria(_3);delete this.$110d;if(this.isAFilterEditor())_2.isSearchForm=true}},isc.A.updateDataSource=function isc_RecordEditor_updateDataSource(_1){this.expressionDataSource=_1;var _2=this.getEditForm();if(_2)_2.expressionDataSource=this.expressionDataSource},isc.A.getEditDisplayValue=function isc_RecordEditor_getEditDisplayValue(_1,_2,_3){if(this.isAFilterEditor()&&this.$20w!=null){var _4=this.getFieldName(_2);return this.$20w.getValue(_4)}
return this.Super("getEditDisplayValue",arguments)},isc.A.getEditDisplayValues=function isc_RecordEditor_getEditDisplayValues(_1,_2){if(this.isAFilterEditor()&&this.$20w!=null){return this.$20w.getValues()}
return this.Super("getEditDisplayValues",arguments)},isc.A.performFilter=function isc_RecordEditor_performFilter(_1,_2){var _3=this.$110e(this.sourceWidget.autoFetchTextMatchStyle);var _4={};if(_1)_4.showPrompt=false;_3=isc.DS.checkEmptyCriteria(_3);if(_3==null||isc.getKeys(_3).length==0){_4.textMatchStyle=this.sourceWidget.autoFetchTextMatchStyle}
var _5=this.sourceWidget.data;if((isc.isA.ResultSet(_5)&&_5.willFetchData(_3,_4.textMatchStyle))||(isc.isA.Tree(_5)&&this.sourceWidget.dataSource!=null))
{this.fireOnPause("performFilter",{target:this.sourceWidget,methodName:"handleFilterEditorSubmit",args:[_3,_4,_2]},this.fetchDelay)}else{this.sourceWidget.handleFilterEditorSubmit(_3,_4,_2)}},isc.A.$110e=function isc_RecordEditor__getFilterCriteria(_1){var _2=this.getEditForm();if(_2==null){return this.$110d}
var _3=_2.getValuesAsCriteria(null,_1);var _4=isc.DS.compressNestedCriteria(_3);return _4},isc.A.performSave=function isc_RecordEditor_performSave(_1,_2){var _3=this.getEditRow(),_4=this.getEditCol(),_5=this.getFieldName(_4),_6=this.$20w.getValue(_5);this.setEditValue(_3,_4,_6);var _7=this.getEditValues(0),_8=this.getFields().getProperty(this.fieldIdProperty);if(!this.validateRowValues(_7,{},0,_8))return;this.$104h(0);this.$100w(0,0);for(var _5 in _7){this.refreshCell(0,_4)}
if(_2)this.fireCallback(_2)},isc.A.getValues=function isc_RecordEditor_getValues(){var _1=this.getEditCol(),_2=this.getEditFieldName();this.setEditValue(0,_1,this.$20w.getValue(_2));var _3=this.$110e();return _3},isc.A.getValuesAsCriteria=function isc_RecordEditor_getValuesAsCriteria(_1){var _2=this.getEditCol(),_3=this.getEditFieldName();var _4=this.$110e(_1);return _4},isc.A.canEditCell=function isc_RecordEditor_canEditCell(_1,_2){if(this.isAFilterEditor()){var _3=this.getField(_2);if(_3==null)return false;return(_3.canFilter!=false)}else{return this.sourceWidget.canEditCell(_1,_2)}},isc.A.getEditorValueMap=function isc_RecordEditor_getEditorValueMap(_1,_2){if(this.isAFilterEditor()){return this.sourceWidget.getFilterEditorValueMap(_1)}else{return this.sourceWidget.getEditorValueMap(_1,_2)}},isc.A.getEditorType=function isc_RecordEditor_getEditorType(_1,_2){if(this.isAFilterEditor()){return this.sourceWidget.getFilterEditorType(_1)}else{return this.sourceWidget.getEditorType(_1,_2)}},isc.A.$110f=function isc_RecordEditor__editorChanged(){this.form.grid.editorChanged(this)},isc.A.editorChanged=function isc_RecordEditor_editorChanged(_1){var _2=_1.actOnKeypress!=null?_1.actOnKeypress:this.actOnKeypress;if(_2){if(this.sourceWidget.allowFilterExpressions&&!_1.enteredCompleteExpression())return;if(this.isAFilterEditor())this.$103h=true;this.performAction(true)}},isc.A.getEditorProperties=function isc_RecordEditor_getEditorProperties(_1){var _2={height:this.cellHeight};if(this.isAFilterEditor()){_2.allowEmptyValue=true;_2.changed=this.$110f;_2.actOnKeypress=_1.filterOnKeypress;return isc.addProperties(_2,this.sourceWidget.getFieldFilterEditorProperties(_1))}else{return isc.addProperties(_2,this.sourceWidget.getEditorProperties(_1))}},isc.A.getEditItem=function isc_RecordEditor_getEditItem(_1,_2,_3,_4,_5,_6){var _7=this.Super("getEditItem",arguments);if(!this.isAFilterEditor())return _7;_7.getElementName=function(){return this.Super("getElementName",arguments)+"$110g"};var _8=this.sourceWidget.getFieldFilterEditorProperties(_1),_9;if(!_8)_8={};if(_1.defaultValue!=null&&_8.defaultValue===_9){delete _7.defaultValue}
if(_1.change!=null&&_8.change===_9){delete _7.change}
if(_1.defaultDynamicValue!=null&&_8.defaultDynamicValue!=null)
{delete _7.defaultDynamicValue}
if(_1.icons!=null&&_8.icons===_9){delete _7.icons}
if(_1.showPickerIcon!=null&&_8.showPickerIcon===_9){delete _7.showPickerIcon}
return _7},isc.A.getDefaultEditValue=function isc_RecordEditor_getDefaultEditValue(_1,_2){if(this.isAFilterEditor())return null;return this.Super("getDefaultEditValue",arguments)},isc.A.getValueIcon=function isc_RecordEditor_getValueIcon(_1,_2,_3,_4){if(this.isAFilterEditor())return null;return this.Super("getValueIcon",arguments)},isc.A.cellEditEnd=function isc_RecordEditor_cellEditEnd(_1,_2){if(_1!=isc.ListGrid.ENTER_KEYPRESS&&_1!=isc.ListGrid.TAB_KEYPRESS&&_1!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&_1!=isc.ListGrid.EDIT_FIELD_CHANGE)return true;var _3;if(_2===_3)_2=this.getUpdatedEditorValue();var _4=this.getEditRow(),_5=this.getEditCol();this.setEditValue(_4,_5,_2);if(_1==isc.ListGrid.ENTER_KEYPRESS||this.actOnCellChange){this.performAction();if(_1==isc.ListGrid.ENTER_KEYPRESS)return}
var _6=this.getNextEditCell(_4,_5,_1);if(_6==null||_6[0]!=_4){if(this.tabIndex!=null&&!this.$76){this.$110h=true;return}else{if(_1==isc.ListGrid.TAB_KEYPRESS){this.body.$tx(true)}else{this.$tx(false)}
return}}
return this.Super("cellEditEnd",arguments)},isc.A.editorKeyPress=function isc_RecordEditor_editorKeyPress(_1,_2,_3){var _4=this.Super("editorKeyPress",arguments);if(this.$110h){this.$110h=null;return true}
return _4},isc.A.clearEditValue=function isc_RecordEditor_clearEditValue(_1,_2){return this.Super("clearEditValue",[_1,_2,null,true])},isc.A.layoutChildren=function isc_RecordEditor_layoutChildren(){this.Super("layoutChildren",arguments);var _1=this.sourceWidget.$89f();if(this.actionButton)
this.actionButton.setLeft(this.isRTL()?0:this.getInnerWidth()-_1);if(this.body){var _2=this.body;if(this.bodyLayout)_2=this.bodyLayout;_2.setWidth(Math.max(1,this.getInnerWidth()-_1));if(this.actionButton&&this.isRTL()){_2.setLeft(_1)}}
if(this.actionButton&&this.body)this.actionButton.$77(this.body)},isc.A.adjustOverflow=function isc_RecordEditor_adjustOverflow(){this.Super("adjustOverflow",arguments);if(this.actionButton){this.actionButton.setHeight(this.body.getVisibleHeight())}},isc.A.bodyScrolled=function isc_RecordEditor_bodyScrolled(_1,_2){this.Super("bodyScrolled",arguments);if(!this.isVisible()||!this.isDrawn())return;if(this.$110i!=null){isc.Timer.clear(this.$110i)}
this.$110i=this.delayCall("syncSourceScrolling",[],0)},isc.A.syncSourceScrolling=function isc_RecordEditor_syncSourceScrolling(){var _1=this.sourceWidget,_2;if(!_1||!(_2=_1.body))return;var _3=this.body.getScrollLeft();if(this.isRTL()){var _4=_2.getViewportWidth()-this.body.getViewportWidth();_3-=_4;if(_3<0)_3=0}
var _5=_2.getScrollRight();if(_3>_5)_3=_5;if(_2.getScrollLeft()!=_3){_2.scrollTo(_3)}},isc.A.getFieldWidths=function isc_RecordEditor_getFieldWidths(){var _1=this.sourceWidget.getFieldWidths();if(isc.isA.Array(_1)){_1=_1.duplicate();if(this.$110j()){var _2=this.sourceWidget.$89f();var _3=_1.sum(),_4=this.getInnerWidth()-_2;if(_3>_4){_1[_1.length-1]-=Math.min(_2,(_3-_4))}}}
return _1},isc.A.$110j=function isc_RecordEditor__correctForActionButtonClipping(){var _1=this.sourceWidget;if(_1!=null&&!_1.$89e()&&_1.body!=null&&!_1.body.vscrollOn)
{return true}},isc.A.getEditFormItemFieldWidths=function isc_RecordEditor_getEditFormItemFieldWidths(_1){var _2=this.Super("getEditFormItemFieldWidths",arguments);if(this.$110j()){var _3=this.sourceWidget.$89f();var _4=_2.sum(),_5=this.getInnerWidth()-_3;if(_4>_5){_2[_2.length-1]-=Math.min(_3,(_4-_5))}}
return _2},isc.A.getCellValue=function isc_RecordEditor_getCellValue(_1,_2,_3,_4){var _5=this.fields[_3];if(_5&&(this.isCheckboxField(_5)||this.isExpansionField(_5)||this.isRowNumberField(_5)))
return"&nbsp;"
var _6=this.Super("getCellValue",arguments);if(_3==this.fields.length-1){if(isc.Browser.$110k){var _5=this.getField(_3),_7=this.getEditForm(),_8=_7!=null?_7.getItem(_5.name):null,_9=_8!=null?_8.getWidth():null;if(_9!=null){_6=("<div style='text-align:"+this.getCellAlign(_1,_2,_3,true)+";width:"+_9+"px;'>"+_6+"</div>")}}}
return _6});isc.B._maxIndex=isc.C+43;isc.Browser.$110k=isc.Browser.isIE&&!isc.Browser.isIE8Strict;if(isc.Browser.$110k){isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getCellAlign=function isc_RecordEditor_getCellAlign(_1,_2,_3,_4){if(!_4&&_3==this.fields.length-1){return this.isRTL()?"right":"left"}
return this.Super("getCellAlign",arguments)});isc.B._maxIndex=isc.C+1}
isc.ClassFactory.defineClass("Menu","ListGrid");isc.A=isc.Menu;isc.A.ICON_FIELD={};isc.A.TITLE_FIELD={};isc.A.KEY_FIELD={};isc.A.SUBMENU_FIELD={};isc.A.$tt=[];isc.A.SHIFT=(isc.Browser.isWin?"Shift+":"shift-");isc.A.CTRL=(isc.Browser.isWin?"Ctrl+":"ctrl-");isc.A.ALT=(isc.Browser.isWin?"Alt+":"option-");isc.A.META=(isc.Browser.isWin?"Windows+":"command-");isc.A=isc.Menu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.iconFieldDefaults={name:"icon",width:25,getCellValue:function(_1,_2){return _1.getIcon(_2)},showIf:function(_1,_2,_3){return _1.shouldShowIconField()},$20z:true};isc.A.titleFieldDefaults={name:"title",width:"*",getCellValue:function(_1,_2){return _1.getItemTitle(_2)}};isc.A.keyFieldDefaults={name:"key",width:35,getCellValue:function(_1,_2){return _1.getKeyTitle(_2)},showIf:function(_1,_2,_3){return _1.shouldShowKeyField()}};isc.A.submenuFieldDefaults={name:"submenu",width:18,align:"right",getCellValue:function(_1,_2){return _1.getSubmenuImage(_2)},showIf:function(_1,_2,_3){return _1.shouldShowSubmenuField()}};isc.A.fixedIconWidth=true;isc.A.styleName="normal";isc.A.bodyStyleName="normal";isc.A.submenuDelay=200;isc.A.submenuOffset=-4;isc.A.defaultWidth=150;isc.A.defaultHeight=20;isc.A.enforceMaxHeight=true;isc.A.maxHeight=null;isc.A.backgroundColor=null;isc.A.overflow=isc.Canvas.VISIBLE;isc.A.bodyOverflow=isc.Canvas.VISIBLE;isc.A.arrowKeyAction="focus";isc.A.hiliteRowOnFocus=false;isc.A.selectionType=isc.Selection.NONE;isc.A.autoDraw=false;isc.A.tableStyle="menuTable";isc.A.showRollOver=true;isc.A.showFocusOutline=false;isc.A.showAllRecords=true;isc.A.fixedFieldWidths=false;isc.A.fixedRecordHeights=false;isc.A.leaveScrollbarGap=false;isc.A.baseStyle="menu";isc.A.alternateRecordStyles=false;isc.A.showHeader=false;isc.A.showSortArrow=isc.ListGrid.NONE;isc.A.canDrag=false;isc.A.canAcceptDrop=false;isc.A.canReorderRecords=false;isc.A.useKeys=true;isc.A.showKeys=true;isc.A.showIcons=true;isc.A.showSubmenus=true;isc.A.submenuDirection=null;isc.A.showFieldsSeparately=false;isc.A.emptyMessage="[Empty menu]";isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.iconWidth=16;isc.A.iconHeight=16;isc.A.autoSetDynamicItems=true;isc.A.skinImgDir="images/Menu/";isc.A.submenuImage={src:"[SKIN]submenu.gif",width:7,height:7};isc.A.submenuDisabledImage={src:"[SKIN]submenu_disabled.gif",width:7,height:7};isc.A.checkmarkImage={src:"[SKIN]check.gif",width:9,height:9};isc.A.checkmarkDisabledImage={src:"[SKIN]check_disabled.gif",width:9,height:9};isc.A.useBackMask=true;isc.A.submenuInheritanceMask=["submenuConstructor","$110l","className","submenuDelay","submenuOffset","defaultWidth","backgroundColor","tableStyle","showRollOver","baseStyle","emptyMessage","canDrag","canAcceptDrop","canReorderRecords","useKeys","showKeys","showIcons","showSubmenus","submenuDirection","cellPadding","iconWidth","iconHeight","autoSetDynamicItems","skinImgDir","submenuImage","submenuDisabledImage","checkmarkImage","checkmarkDisabledImage","bodyDefaults","$110m","iconBodyStyleName","fillSpaceStyleName","iconFillSpaceStyleName","itemClick","canSelectParentItems","childrenProperty","inheritedProperties"];isc.A.mergeSingleParent=true;isc.A.autoDismiss=true;isc.A.cascadeAutoDismiss=true;isc.A.autoDismissOnBlur=true;isc.A.fetchSubmenus=true;isc.A.navigationBarDefaults={autoParent:"none",hieght:44,rightPadding:5,leftPadding:5,defaultLayoutAlign:"center",overflow:"hidden",showLeftButton:false,showRightButton:true,navigationClick:function(_1){if("back"==_1){this.creator.$107i.pop()}else if("forward"==_1){this.creator.hide()}}};isc.A.navigationBarConstructor="NavigationBar";isc.A.cancelButtonTitle="Done";isc.A.navStackDefaults={height:"100%",overflow:"hidden",autoDraw:false,$57c:false,getTransformCSS:function(){if(!this.creator.$107h||!this.creator.$110n()){return null}else{var y=(!this.$57c?"100%":"0px");return";"+isc.Element.$y6+": translateY("+y+");"}},handleTransitionEnd:function(_1,_2){if(_2.target===this){this.$11f();var _3=this.creator;var _4=_3.$107h||this;if(!this.$57c){_4.hide();_3.$107i.setSinglePanel(_3.$207||_3)}}},$57d:function(){if(!this.creator.$110n()){this.moveTo(0,this.getInnerHeight());this.animateMove(0,0,function(){},this.creator.animateDuration)}else{this.$57c=true;this.delayCall("$57e")}},$57e:function(){this.$11e();isc.Element.$0t(this,"translateY(0px)")},$57f:function(){if(!this.creator.$110n()){this.animateMove(0,this.getInnerHeight(),function(){var _1=this.creator;var _2=_1.$107h||this;_2.hide();_1.$107i.setSinglePanel(_1.$207||_1)},this.creator.animateDuration)}else{this.$57c=false;this.$11e();isc.Element.$0t(this,"translateY(100%)")}},isA:function(_1){return isc.Menu.isA(_1)}};isc.A.navStackConstructor="NavStack";isc.A.navStackContainerDefaults={width:"100%",height:"100%",overflow:"hidden",autoDraw:false,isA:function(_1){return isc.Menu.isA(_1)}};isc.A.navStackContainerConstructor="Layout";isc.A.animateTransitions=!isc.Browser.isMobileIE;isc.A.skinUsesCSSTransitions=false;isc.A.animateDuration=350;isc.B.push(isc.A.getIconField=function isc_Menu_getIconField(){return isc.addProperties({},this.iconFieldDefaults,isc.Menu.ICON_FIELD,this.iconFieldProperties)},isc.A.$110o=function isc_Menu__getTitleField(){return isc.addProperties({},this.titleFieldDefaults,isc.Menu.TITLE_FIELD,this.titleFieldProperties)},isc.A.getKeyField=function isc_Menu_getKeyField(){return isc.addProperties({},this.keyFieldDefaults,isc.Menu.KEY_FIELD,this.keyFieldProperties)},isc.A.getSubmenuField=function isc_Menu_getSubmenuField(){return isc.addProperties({},this.submenuFieldDefaults,isc.Menu.SUBMENU_FIELD,this.submenuFieldProperties)},isc.A.getStandardField=function isc_Menu_getStandardField(_1){if(isc.isA.String(_1)){var _2=this.getIconField();if(_2.name==_1)return _2;var _3=this.$110o();if(_3.name==_1)return _3;var _4=this.getKeyField();if(_4.name==_1)return _4;var _5=this.getSubmenuField();if(_5.name==_1)return _5;this.logWarn("Menu field specified as :"+_1+". This is not a recognized standard field name");return null}else{var _6=_1.name;var _2=this.getIconField();if(("menuBuiltin_"+_2.name)==_6)return _2;var _3=this.$110o();if(("menuBuiltin_"+_3.name)==_6)return _3;var _4=this.getKeyField();if(("menuBuiltin_"+_4.name)==_6)return _4;var _5=this.getSubmenuField();if(("menuBuiltin_"+_5.name)==_6)return _5}
return _1},isc.A.shouldShowKeyField=function isc_Menu_shouldShowKeyField(){return this.showKeys},isc.A.setShowIcons=function isc_Menu_setShowIcons(_1){this.$110p=true;this.showIcons=_1;if(this.isDrawn())this.refreshFields()},isc.A.shouldShowIconField=function isc_Menu_shouldShowIconField(){return this.showIcons},isc.A.setShowSubmenus=function isc_Menu_setShowSubmenus(_1){this.$110q=true;this.showSubmenus=_1;if(this.isDrawn())this.refreshFields()},isc.A.shouldShowSubmenuField=function isc_Menu_shouldShowSubmenuField(){return this.showSubmenus},isc.A.getSubmenuDirection=function isc_Menu_getSubmenuDirection(){if(this.submenuDirection!=null)return this.submenuDirection;if(this.isRTL())return"left";return"right"},isc.A.$110n=function isc_Menu__animateTransitionsUsingCSS(){return this.animateTransitions&&isc.Browser.$x&&this.skinUsesCSSTransitions});isc.B._maxIndex=isc.C+12;isc.A=isc.Menu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnOnReusedFields=false;isc.A.$110r="nearOrigin";isc.A.$2n="left";isc.A.$2p="right";isc.B.push(isc.A.init=function isc_Menu_init(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){this.$110s=(_1&&_1.showKeys!=null)||(_2&&_2.showKeys!=null)||(_3&&_3.showKeys!=null)||(_4&&_4.showKeys!=null)||(_5&&_5.showKeys!=null);this.$110q=(_1&&_1.showSubmenus!=null)||(_2&&_2.showSubmenus!=null)||(_3&&_3.showSubmenus!=null)||(_4&&_4.showSubmenus!=null)||(_5&&_5.showSubmenus!=null);this.$110p=(_1&&_1.showIcons!=null)||(_2&&_2.showIcons!=null)||(_3&&_3.showIcons!=null)||(_4&&_4.showIcons!=null)||(_5&&_5.showIcons!=null);this.$110t=(_1&&_1.bodyStyleName!=null)||(_2&&_2.bodyStyleName!=null)||(_3&&_3.bodyStyleName!=null)||(_4&&_4.bodyStyleName!=null)||(_5&&_5.bodyStyleName!=null);return this.Super("init",arguments)},isc.A.initWidget=function isc_Menu_initWidget(){this.$110u();this.position=isc.Canvas.ABSOLUTE;var _1=this.initialCriteria||this.criteria;var _2=this.$64e;if(this.dataSource!=null&&!this.hasFlatDataSource()){var _3=this;var _4=this.createResultTree(_1,null,{showPrompt:false,dataProperties:isc.addProperties({autoOpenRoot:false,getOperationId:function(_12,_13,_14){var _5;if(_12==_3.dataSource&&_2!==_5){return _2}else{return this.Super("getOperationId",arguments)}}},this.dataProperties)});if(this.items)_4.addList(this.items,_4.getRoot());if(this.loadDataOnDemand==false){_4.loadChildren(_4.getRoot(),{caller:this,methodName:"treeDataLoaded"})}
this.data=_4}else if(this.dataSource!=null){var _6=isc.DataSource.get(this.dataSource),_7,_5;if(_2!==_5){_7={operationId:_2}}
_6.fetchData(_1,{caller:this,methodName:"flatDataLoaded"},_7)}
if(this.data==null&&this.items!=null)this.data=this.items;if(isc.Tree&&isc.isA.Tree(this.data)){this.setTreeData(this.data,false)}
this.Super(this.$1v);if(!this.fields){this.$110v=true;this.fields=[];this.$110w()}else{this.$110v=false;for(var i=0;i<this.fields.length;i++){var _9=this.fields[i];_9=this.getStandardField(_9);if(_9==null){this.fields.removeAt(i);i-=1}else{this.fields[i]=_9}}}
if(isc.Browser.isSafari){isc.addProperties(this.submenuImage,{align:"BOTTOM"});isc.addProperties(this.submenuDisabledImage,{align:"BOTTOM"})}
if(isc.Browser.isStrict){isc.addProperties(this.submenuImage,{align:"absmiddle"});isc.addProperties(this.submenuDisabledImage,{align:"absmiddle"})}
if(this.useKeys)this.setUpKeyListening();if(this.$110l){if(!this.treeParentNode)this.treeParentNode=this.$110l.getRoot();this.setTreeNode(this.treeParentNode)}
if(this.placement==null&&isc.Browser.isHandset){this.placement="fillScreen"}
if(this.placement=="fillScreen"||this.placement=="halfScreen"||this.placement=="fillPanel")
{var _10=(this.placement=="halfScreen")?"50%":"100%";this.setWidth(_10);this.autoDismissOnBlur=false;this.showShadow=false;this.showEdges=false;if(this.$107i==null){this.$110x=this.createAutoChild("navigationBar",{rightButtonTitle:this.cancelButtonTitle});this.$107i=this.createAutoChild("navStack",{width:_10,navigationBar:this.$110x});if(this.placement=="fillScreen"){this.$107h=this.createAutoChild("navStackContainer",{children:[this.$107i]})}
var _11=this;this.$107i.push(this,function(){if(!_11.$21l)_11.$110y()})}}
if(this.$110m==null)this.$110m=this.bodyStyleName},isc.A.$110w=function isc_Menu__setToStandardFields(){var _1=[];var _2,_3;_2=(this.getSubmenuDirection()==this.$2n);_3=(_2!=this.isRTL());if(_3){_1.add(this.getSubmenuField())}
_1.add(this.getIconField());_1.add(this.$110o());_1.add(this.getKeyField());if(!_3)_1.add(this.getSubmenuField());this.$110z=true;this.setFields(_1);delete this.$110z;this.markForRedraw()},isc.A.isVisible=function isc_Menu_isVisible(){if(!this.$107i){return this.Super("isVisible",arguments)}else{return this.$107i.isVisible()}},isc.A.setTreeData=function isc_Menu_setTreeData(_1,_2){this.$110l=_1;this.childrenProperty=_1.childrenProperty;var _3=_1.getChildren(),_4=this.mergeSingleParent&&!isc.isA.ResultTree(this.$110l)&&_3.length==1&&_1.hasChildren(_3[0]);if(_4){var _5=_3[0];this.data=_1.getChildren(_5).duplicate();this.data.add({isSeparator:true});var _6={};isc.addProperties(_6,_5);_6[this.childrenProperty]=null;this.data.add(_6)}else{this.data=null}
if(_2&&this.$110l){this.treeParentNode=this.$110l.getRoot();this.setTreeNode(this.treeParentNode)}},isc.A.hasFlatDataSource=function isc_Menu_hasFlatDataSource(){var _1=isc.DataSource.get(this.dataSource);var _2=_1.getFieldNames();var _3=false,_4=false;for(var i=0;i<_2.length;i++){var _6=_1.getField(_2[i]);if(_6.primaryKey)_3=true;if(_6.foreignKey)_4=true}
return!(_3&&_4)},isc.A.setFields=function isc_Menu_setFields(_1,_2,_3,_4,_5){if(_1&&(!this.$110z||(_1!=this.fields))){this.$110v=false;for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];_7=this.getStandardField(_7);if(_7==null){this.fields.removeAt(i);i-=1}else{this.fields[i]=_7}}}
this.invokeSuper(isc.Menu,"setFields",_1,_2,_3,_4,_5)},isc.A.treeDataLoaded=function isc_Menu_treeDataLoaded(){this.treeDataArrived(this.$1100)},isc.A.setTreeNode=function isc_Menu_setTreeNode(_1){var _2=this.$110l.getLoadState(_1);this.$1100=_1;if(_2==isc.Tree.LOADED){this.treeDataArrived(_1)}else if(_2!=isc.Tree.LOADING){this.$110l.loadChildren(_1,this.getID()+".treeDataArrived(node)");this.$1101=true;this.setData(null)}},isc.A.treeDataArrived=function isc_Menu_treeDataArrived(_1){delete this.$1101;if(_1==this.$1100){var _2=this.$110l.getChildren(_1);if(isc.isA.ResultSet(_2)){_2=_2.getAllLoadedRows()}
this.setData(_2);if(this.masterMenu&&this.masterMenu.isVisible())
this.masterMenu.placeSubmenu(_1,this)}
if(this.$1102){delete this.$1102;this.$372(1)}},isc.A.flatDataLoaded=function isc_Menu_flatDataLoaded(_1,_2){this.setData(_2)},isc.A.getEmptyMessage=function isc_Menu_getEmptyMessage(){if(this.$1101){return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})}
return this.Super("getEmptyMessage",arguments)},isc.A.isEmpty=function isc_Menu_isEmpty(){if(this.$1101)return true;return this.Super("isEmpty",arguments)},isc.A.$110u=function isc_Menu__setUpEmptyMessage(){isc.addProperties(this,{emptyMessageTableStyle:this.tableStyle,emptyMessageStyle:this.baseStyle+isc.GridRenderer.standardStyleSuffixes[4]})},isc.A.$983=function isc_Menu__observeData(_1,_2,_3,_4,_5){var _6;if(this.$110l){_6=this.isObserving(this.$110l,"dataChanged");_1=this.$110l}
if(!_6)this.invokeSuper(isc.Menu,"$983",_1,_2,_3,_4,_5)},isc.A.draw=function isc_Menu_draw(){if(!this.ruleScope&&this.$fn){this.ruleScope=this.$fn.ruleScope}
var _1=this.Super("draw",arguments);this.$1103();return _1},isc.A.$1103=function isc_Menu__createMenuWhenRules(){if(this.$1104)return;var _1=this.getRuleScopeComponent();if(!_1)return null;var _2=[];for(var i=0,_4=this.data.length;i<_4;++i){var _5=this.getItem(i);if(!_5)continue;if(_5.enableWhen&&!_5.enableIf){var _6=isc.AutoTest.getMenuItemLocator(this,_5);_2.add(this.$13i(_6,"enable",_5.enableWhen))}}
if(_2.length>0){var _7=this.getRulesEngine();if(!_7){return}
_7.addMember(this);for(var i=0;i<_2.length;i++){_7.addRule(_2[i])}}
this.$1104=true},isc.A.$1105=function isc_Menu__removeMenuWhenRules(){var _1=this.getRuleScopeComponent();if(_1&&_1.rulesEngine){for(var i=0,_3=this.data.length;i<_3;++i){var _4=this.getItem(i);if(!_4)continue;if(_4.enableWhen){var _5=isc.AutoTest.getMenuItemLocator(this,_4);if(this.enableWhen)this.$13j(_5,"enable")}}}
delete this.$1104},isc.A.getDataSource=function isc_Menu_getDataSource(_1){var _2=this.invokeSuper(isc.Menu,"getDataSource");if(_2||!_1)return _2;return this.$207?this.$207.getDataSource():null},isc.A.rowClick=function isc_Menu_rowClick(_1,_2,_3){this.Super("rowClick",arguments);this.selectMenuItem(_2,_3)},isc.A.selectMenuItem=function isc_Menu_selectMenuItem(_1,_2){if(_1==null)_1=this.getEventRecordNum();_1=this.getItem(_1);var _3=true;if(_1==null||!this.itemIsEnabled(_1)){isc.Menu.hideAllMenus("itemClick");return false}
if(this.hasSubmenu(_1)){var _4=false;if(!this.canSelectParentItems&&!_1.canSelectParent){_4=true}else{var _5=this.getFieldNum("title");var _6=this.body.getTableElement(this.getEventRecordNum(),_5);var _7;if(!this.body.$91e(this.body.cellHeight)){_7=_6}else{_7=this.body.$90j(_6)}
if(_7!=null){var _8=_7.innerHTML;_7.innerHTML="<span>"+_8+"</span>";var _9=_7.firstChild.offsetWidth;_7.innerHTML=_8;var _10=this.body.getColumnSizes(),_11=0,_12=0;for(var i=0;i<_5;i++){_11+=_10[i]}
var _14=this.getFieldNum("submenu");for(var i=0;i<_14;i++){_12+=_10[i]}
var x=this.getOffsetX();var _16=0;if(x<_11){_16=_11-x}else{_16=x-(_11+_9)}
var _17=0;if(x<_12){_17=_12-x}else{_17=x-(_12+_10[_14])}
_4=_16>_17}}
if(_4){if(!this.$107i){if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);if(this.$1106!=_1)this.hideSubmenu();this.showSubmenu(_1)}else{var _18=this;var _19=this.getSubmenu(_1);this.$107i.push(_19,function(){if(!_18.$21l)_18.$110y()})}
return false}}
var _20=this;while(_20.$200){_20=_20.$200}
if(this.autoDismiss&&(_1.autoDismiss||_1.autoDismiss==null)){isc.Menu.hideAllMenus("itemClick")}
if(_1.action){if(!isc.isA.Function(_1.action)){isc.Func.replaceWithMethod(_1,"action","")}
if(_1.action()==false)return false}
if(_1.click){if(!isc.isA.Function(_1.click)){isc.Func.replaceWithMethod(_1,"click","target,item,menu,colNum")}
var _21=(this.target?this.target:this);_3=_1.click(_21,_1,this,_2)}
if(_3!=false){_3=this.itemClick(_1,_2)}
if(!(this.autoDismiss&&(_1.autoDismiss||_1.autoDismiss==null))){this.refreshRow(this.getRecordIndex(_1))}
return _3},isc.A.mouseOver=function isc_Menu_mouseOver(){var _1=this.$200;if(_1&&_1.body.lastOverRow!=this.$1107){if(_1.submenuTimer)_1.submenuTimer=isc.Timer.clear(_1.submenuTimer);_1.$57o(this.$1107)}},isc.A.rowOver=function isc_Menu_rowOver(_1,_2){if(this.placement!=null&&this.placement!="nearOrigin")return;if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);this.submenuTimer=isc.Timer.setTimeout({target:this,method:this.changeSubmenu},this.submenuDelay)},isc.A.itemClick=function isc_Menu_itemClick(_1,_2){},isc.A.getShowSubmenuKey=function isc_Menu_getShowSubmenuKey(){return this.getSubmenuDirection()=="right"?"Arrow_Right":"Arrow_Left"},isc.A.getHideSubmenuKey=function isc_Menu_getHideSubmenuKey(){return this.getSubmenuDirection()=="right"?"Arrow_Left":"Arrow_Right"},isc.A.bodyKeyPress=function isc_Menu_bodyKeyPress(_1,_2){var _3=isc.EventHandler.lastEvent.keyName;if(_3==this.getHideSubmenuKey()){if(this.$200!=null){this.$200.hideSubmenu();this.$200.focus();return false}}else if(_3==this.getShowSubmenuKey()){var _4=this.getItem(this.getFocusRow());if(this.hasSubmenu(_4)){this.changeSubmenu();var _5=this.$201;if(_5.$1101)_5.$1102=true;else _5.$372(1);return false}}else if(_3=="Escape"&&this.autoDismissOnBlur!=false){if(this.$200!=null){this.$200.hideSubmenu();this.$200.focus()}else{isc.Menu.hideAllMenus("outsideClick")}
return false}else if(_3=="Enter"){return this.$373()}
return this.Super("bodyKeyPress",arguments)},isc.A.$372=function isc_Menu__navigateToNextRecord(_1){var _2=this.getFocusRow();if(_2==null)_2=0;if(_1==-1){do{_2+=_1;if(_2<0){this.hide();return false}}while(!this.itemIsEnabled(_2))}
return this.Super("$372",arguments)},isc.A.show=function isc_Menu_show(_1){if(this.$1108){return this.Super("show",arguments)}
if(isc.EH.mouseIsDown()){if(isc.Menu.mouseDownEventID==null)isc.Menu.mouseDownEventID=0;else isc.Menu.mouseDownEventID++;isc.EH.mouseDownEvent.$um=isc.Menu.mouseDownEventID}
this.$1109();var _2=this.$107i!=null&&this.$111a==null;var _3=_2?(this.$107h||this.$107i||this):this;if(this.$107i&&_3.isVisible()&&_3.isDrawn()){return}
if(_2&&this.placement=="fillPanel"&&isc.Menu.$111b){var c=isc.Menu.$111b.getParentCanvas();this.$107i.setRect(c.getLeft(),c.getTop(),c.getWidth(),c.getHeight())}
if(this.$111c){_3.moveTo(this.$111d[0],this.$111d[1]);this.$111c=null}
if(_1==null)_1=this.showAnimationEffect;var _5=!this.$21l&&(_1!=null)&&(_1!="none");if(_5){this.$21l=true;this.animateShow(_1,"this.$110y()");return}
if(this.autoSetDynamicItems)this.setDynamicItems()
if(!_3.isDrawn()){if(_3.contains(this))this.$1108=true;_3.draw(true);delete this.$1108}
this.body.focusOnHide=isc.EH.getFocusCanvas();isc.Menu.$tt.add(this);if(this.autoDismissOnBlur){isc.Menu.$111e()}
_3.bringToFront();var _6=(this.placement=="fillScreen")&&_2&&!this.$107i.$57c;this.Super("show",arguments);if(_2&&!_3.isVisible()){_3.show()}
if(_6){this.$107i.$57d()}else if(!this.$21l){this.$110y()}
if(this.rulesEngine&&!this.$111f){this.rulesEngine.processContextChanged();this.$111f=true}},isc.A.$110y=function isc_Menu__showComplete(){if(!this.body||this.$107i&&this.$107i.$33w()){return}
if(this.$21l)delete this.$21l;if(isc.Browser.isMoz){this.getClipHandle().offsetLeft}
this.body.focus()},isc.A.$1109=function isc_Menu__updateBodyStyleName(){var _1=this.getFields(),_2=(_1[0].name=="icon"&&_1[0].$20z==true),_3=(this.placement=="fillScreen"||this.placement=="halfScreen"||this.placement=="fillPanel");var _4=this.$110m;if(_3){if(_2&&this.iconFillSpaceStyleName!=null){_4=this.iconFillSpaceStyleName;if(this.isRTL())_4+="RTL"}else if(this.fillSpaceStyleName!=null){_4=this.fillSpaceStyleName}
if(this.placement=="fillScreen"&&this.$107i){this.$107i.setStyleName(_4+"Animated")}}else{if(_2&&this.iconBodyStyleName!=null){_4=this.iconBodyStyleName;if(this.isRTL())_4+="RTL"}}
this.$111g=true;this.setBodyStyleName(_4)
this.$111g=false},isc.A.setBodyStyleName=function isc_Menu_setBodyStyleName(_1){if(!this.$111g){this.$110t=_1;this.$110m=_1}
return this.Super("setBodyStyleName",arguments)},isc.A.placeNear=function isc_Menu_placeNear(){if(!this.$107i)this.Super("placeNear",arguments)},isc.A.hide=function isc_Menu_hide(){if(this.$107i){isc.Menu.$tt.remove(this);if(this.$107i.visibility==isc.Canvas.HIDDEN)return;this.$111h();if(this.placement=="fillScreen"){this.$107i.$57f()}else{this.$107i.setSinglePanel(this.$207||this);this.$107i.hide()}}else{if(this.visibility==isc.Canvas.HIDDEN)return;this.$111h();this.Super("hide",arguments)}
this.clearLastHilite();this.$99v=null;if(this.$1106)delete this.$1106;if(this.submenuTimer)isc.Timer.clearTimeout(this.submenuTimer)},isc.A.showContextMenu=function isc_Menu_showContextMenu(_1){if(_1&&(_1.target==this||(this.body&&_1.target==this.body))){if(this.body){if(isc.Browser.isSafari){this.body.$93h=this.getEventRow();this.body.$93i=this.getEventColumn()}
this.body.click()}
return false}
var _2;if(isc.isA.Canvas(_1))_2=_1;if(_1!=null&&_1.target!=null)_2=_1.target;if(_2!=null)this.target=_2;this.positionContextMenu();this.show();return false},isc.A.getMaxHeight=function isc_Menu_getMaxHeight(){if(this.maxHeight!=null)return this.maxHeight;return isc.Page.getHeight()-this.getScrollbarSize()},isc.A.$30w=function isc_Menu__showOffscreen(){var _1=this.$107h||this.$107i||this;if(!_1.isDrawn()){_1.setVisibility(isc.Canvas.HIDDEN);_1.draw()}
_1.setVisibility(isc.Canvas.VISIBLE);this.$111h();if(this.isDirty()||this.body.isDirty())_1.redraw();if(this.$6o)this.adjustOverflow();if(!this.$111i&&this.enforceMaxHeight){this.doEnforceMaxHeight()}
_1.setVisibility(isc.Canvas.HIDDEN)},isc.A.doEnforceMaxHeight=function isc_Menu_doEnforceMaxHeight(){if(this.placement!=null&&this.placement!==this.$110r)return;if(this.overflow!=isc.Canvas.VISIBLE){this.leaveScrollbarGap=false;this.setOverflow(isc.Canvas.VISIBLE);this.setHeight(this.defaultHeight);this.setWidth(this.$107d||this.defaultWidth);this.adjustOverflow()}
var _1=this.getVisibleHeight(),_2=this.getVisibleWidth(),_3=this.getMaxHeight();if(this.overflow==isc.Canvas.VISIBLE&&_1>_3){this.leaveScrollbarGap=true;this.setHeight(_3);this.$107d=this.getWidth();this.setWidth(this.getVisibleWidth()+this.getScrollbarSize())
this.setOverflow(isc.Canvas.AUTO);this.adjustOverflow()}
this.$111i=true;if(!this.$33f){this.$33f=isc.Page.setEvent("resize",this,null,"pageResized")}},isc.A.pageResized=function isc_Menu_pageResized(){if(this.enforceMaxHeight)this.doEnforceMaxHeight()},isc.A.dataChanged=function isc_Menu_dataChanged(_1,_2,_3,_4){if(this.$110l&&this.$1100!=null){if(!this.$111j(this.$1100)){if(this.$200==null){this.setTreeNode(this.$110l.getRoot())}else{this.destroy(true);return}}}
var _5=this.invokeSuper(isc.Menu,"dataChanged",_1,_2,_3,_4);delete this.$111i;return _5},isc.A.$111j=function isc_Menu__treeContains(_1){while(_1){if(this.$110l.isRoot(_1))return true;_1=this.$110l.getParent(_1)}
return false},isc.A.setData=function isc_Menu_setData(_1,_2,_3,_4){var _5;if(isc.Tree&&isc.isA.Tree(_1)){this.setTreeData(_1,true)}else{_5=this.invokeSuper(isc.Menu,"setData",_1,_2,_3,_4)}
delete this.$111i;return _5},isc.A.setItems=function isc_Menu_setItems(_1,_2,_3,_4){return this.setData(_1,_2,_3,_4)},isc.A.getMenuItem=function isc_Menu_getMenuItem(_1){return isc.Class.getArrayItem(_1,this.data,"name")},isc.A.$111h=function isc_Menu__moveMenuOffscreen(){if(this.parentElement!=null)return;if(this.$111c)return;this.$111d=[this.getLeft(),this.getTop()];this.moveTo(0,-9999);this.$111c=true},isc.A.moveBy=function isc_Menu_moveBy(){var _1=this.Super("moveBy",arguments);if(this.$111c)this.$111c=false;return _1},isc.A.resizeBy=function isc_Menu_resizeBy(_1,_2,_3,_4,_5,_6){if((_1!=null&&_1!=0)||(_2!=null&&_2!=0))delete this.$111i;return this.invokeSuper(isc.Menu,"resizeBy",_1,_2,_3,_4,_5,_6)},isc.A.hideContextMenu=function isc_Menu_hideContextMenu(){this.hide()},isc.A.positionContextMenu=function isc_Menu_positionContextMenu(){this.$30w();var _1=isc.EH.getLastEvent(),_2=_1.x,_3=_1.y;if(this.isRTL()){_2-=this.getVisibleWidth()}
this.placeNear(_2,_3)},isc.A.getItem=function isc_Menu_getItem(_1){return isc.Class.getArrayItem(_1,this.data,"name")},isc.A.setItemProperties=function isc_Menu_setItemProperties(_1,_2){var _1=this.getItem(_1);if(_1!=null){isc.addProperties(_1,_2)}
if(this.isVisible())this.redraw()},isc.A.getItemNum=function isc_Menu_getItemNum(_1){return isc.Class.getArrayItemIndex(_1,this.data,"name")},isc.A.getItems=function isc_Menu_getItems(){return this.getData()},isc.A.addItem=function isc_Menu_addItem(_1,_2){if(_2==null)_2=this.data.getLength();this.data.addAt(_1,_2);this.markForRedraw()},isc.A.removeItem=function isc_Menu_removeItem(_1){this.data.remove(_1);this.markForRedraw()},isc.A.changeSubmenu=function isc_Menu_changeSubmenu(){var _1=this.getItem(this.body.lastOverRow);if(_1&&this.$1106==_1)return;if(!this.$107i){this.hideSubmenu();if(_1!=null)this.showSubmenu(_1)}else{var _2=this.getSubmenu(_1);var _3=this;if(_2!=null){if(_2.autoSetDynamicItems)_2.setDynamicItems();this.$107i.push(_2,function(){if(!_3.$21l)_3.$110y()})}}},isc.A.hasSubmenu=function isc_Menu_hasSubmenu(_1){if(!_1)return false;if(_1.submenu)return true;if(this.fetchSubmenus==false||_1.fetchSubmenus==false)return false;if(isc.isA.Tree(this.$110l)){return(this.$110l.isFolder(_1)&&((isc.ResultTree&&isc.isA.ResultTree(this.$110l))||this.$110l.hasChildren(_1)))}
return false},isc.A.showSubmenu=function isc_Menu_showSubmenu(_1){var _2=this.getSubmenu(_1);if(!_2)return;this.placeSubmenu(_1,_2)},isc.A.getSubmenu=function isc_Menu_getSubmenu(_1){_1=this.getItem(_1);if(!this.hasSubmenu(_1))return;var _2=isc.applyMask(this,this.submenuInheritanceMask);if(!this.$110v){var _3=[];var _4=this.completeFields||this.fields;for(var i=0;i<_4.length;i++){_3[i]=isc.addProperties({},_4[i])}
_2.fields=_3}
if(this.cascadeAutoDismiss){_2.autoDismiss=this.autoDismiss}
if(this.placement){_2.placement=this.placement;_2.$107i=this.$107i}
var _6=_1.submenu;if(!_6){var _7=(this.$207||this),_8=(_7==this?0:!this.$111k?0:this.$111k);if(!_7.$111l)_7.$111l=[];this.logDebug("RootMenu:"+_7.getID()+", submenus:"+_7.$111l+", Level:"+_8);_6=_7.$111l[_8];if(!_6){isc.addProperties(_2,{ID:(_7.getID()+"_childrenSubMenu_"+_8),$207:_7,$111k:_8+1,autoDraw:false,treeParentNode:this.$110l?_1:null,masterMenu:this});var _9=this.submenuConstructor||this.menuConstructor||isc.Menu;_6=isc.ClassFactory.newInstance(_9,_2);_7.$111l[_8]=_6;_7.observe(_6,"destroy",function(){this.submenuDestroyed(_8)})}}else if(!isc.isA.Menu(_6)){if(!this.$111l)this.$111l=[];if(isc.isA.String(_6)){_6=window[_6]}else if(isc.isAn.Array(_6)){_6=this.getMenuConstructor().create({autoDraw:false,data:_6},_2);this.$111l.add(_6)}else if(isc.isAn.Object(_6)){_6=this.getMenuConstructor().create(isc.addProperties({autoDraw:false},_2,_6));this.$111l.add(_6)}
_1.submenu=_6;if(_6&&_6.__sgwtRelink)_6.__sgwtRelink()}else{if(this.placement){_6.placement=this.placement;_6.$111a=this.$107i}}
if(_6.placement!=null&&_6.placement!="nearOrigin"){_6.autoDismissOnBlur=false}
if(!_6.$110t&&_6.$110m==null){_6.$110m=this.$110m}
if(!_6.$110p)_6.setShowIcons(this.showIcons);if(!_6.$110q)_6.setShowSubmenus(this.showSubmenus);if(!_6.$110s){_6.showKeys=this.showKeys}
if(_6.refreshFields!=null)_6.refreshFields();if(this.$110l)_6.setTreeNode(_1);_6.$207=this.$207||this;return _6},isc.A.submenuDestroyed=function isc_Menu_submenuDestroyed(_1){delete this.$111l[_1]},isc.A.placeSubmenu=function isc_Menu_placeSubmenu(_1,_2){var _3=(this.$1106==_1&&this.$201==_2);var _4=this.getItemNum(_1);if(!this.$107i){_2.$30w();var _5=_2.getPeerRect(),_6=isc.Canvas.$9m(_5[2],_5[3],{left:this.getPageLeft()-this.submenuOffset,width:this.getVisibleWidth()+this.submenuOffset,top:this.body.getRowPageTop(_4)},this.getSubmenuDirection()==this.$2n?this.$2n:this.$2p,false)
_2.setPageRect(_6[0],_6[1]);if(_3){_2.setVisibility(isc.Canvas.INHERIT)}}
if(_3)return;this.$1106=_1;this.$201=_2;if(this.target!=this&&_2.target!=_2){_2.target=this.target}
_2.show();_2.$200=this;_2.$1107=_4;if(isc.Menu.$111m)delete isc.Menu.$111m[this.getID()]},isc.A.hideMenuTree=function isc_Menu_hideMenuTree(){this.hideSubmenu();this.hide()},isc.A.hideSubmenu=function isc_Menu_hideSubmenu(){if(this.$201){this.$201.hideSubmenu();this.$201.hide();delete this.$201;delete this.$1106}},isc.A.getSubmenuImage=function isc_Menu_getSubmenuImage(_1){if(!this.hasSubmenu(_1))return"&nbsp;";if(!this.$111n){var _2=(this.getSubmenuDirection()==this.$2n),_3=isc.addProperties({},this.submenuImage),_4=isc.addProperties({},this.submenuDisabledImage);_3.src=isc.Img.urlForState(_3.src,null,null,(_2?this.$2n:null));_4.src=isc.Img.urlForState(_4.src,null,null,(_2?this.$2n:null));this.$111n=this.imgHTML(_3);this.$111o=this.imgHTML(_4)}
return(this.itemIsEnabled(_1)?this.$111n:this.$111o)},isc.A.itemIsEnabled=function isc_Menu_itemIsEnabled(_1){_1=this.getItem(_1);return(_1&&_1.enabled!=false&&_1.isSeparator!=true)},isc.A.setDynamicItems=function isc_Menu_setDynamicItems(){if(this.enableIf){isc.Func.replaceWithMethod(this,"enableIf","target,menu")}
var _1=false,_2=this.target,_3=this,_4=isc.isA.Function(this.enableIf)&&this.enableIf(_2,_3),_5=isc.isAn.Object(_4)&&isc.getKeys(_4),_6=_5?_5.length:0,_7="target,menu,item"+(_5?","+_5.join(","):""),_8=[_2,_3,null];if(_6>0){_8.addListAt(isc.getValues(_4),3)}
if(!this.data)return;for(var i=0,_10=this.data.length;i<_10;++i){var _11=this.getItem(i);if(!_11)continue;_8[2]=_11;if(_11.enableIf!=null){var _12;if(_11.enableIf===this.$16c){_12=true}else if(_11.enableIf===this.$16b){_12=false}else{isc.Func.replaceWithMethod(_11,"enableIf",_7);_12=_11.enableIf.apply(_11,_8)}
_1|=this.$111p(i,_12)}
if(_11.checkIf){var _13;if(_11.checkIf===this.$16c){_13=true}else if(_11.checkIf===this.$16b){_13=false}else{isc.Func.replaceWithMethod(_11,"checkIf",_7);_13=_11.checkIf.apply(_11,_8)}
_1|=this.$111q(i,_13)}
if(_11.dynamicTitle){isc.Func.replaceWithMethod(_11,"dynamicTitle",_7);_1|=this.setItemTitle(i,_11.dynamicTitle.apply(_11,_8))}
if(_11.dynamicIcon){isc.Func.replaceWithMethod(_11,"dynamicIcon",_7);_1|=this.setItemIcon(i,_11.dynamicIcon.apply(_11,_8))}}
if(_1&&this.isDrawn()){this.redraw("dynamic item change");if(isc.Browser.isIE){this.body.setRowStyle(0)}}},isc.A.refreshRow=function isc_Menu_refreshRow(){if(this.autoSetDynamicItems)this.setDynamicItems();return this.Super("refreshRow",arguments)},isc.A.$111p=function isc_Menu__setItemEnabled(_1,_2){return this.setItemEnabled(_1,!!_2)},isc.A.$111q=function isc_Menu__setItemChecked(_1,_2){return this.setItemChecked(_1,!!_2)},isc.A.setItemEnabled=function isc_Menu_setItemEnabled(_1,_2){if(_2==null)_2=true;_1=this.getItem(_1);if(!_1)return;if(_1.enabled!=_2){_1.enabled=_2;this.markForRedraw("itemEnabled");return true}
return false},isc.A.setItemChecked=function isc_Menu_setItemChecked(_1,_2){if(_2==null)_2=true;_1=this.getItem(_1);if(!_1)return;if(_1.checked!=_2){_1.checked=_2;this.markForRedraw("itemChecked");return true}
return false},isc.A.setItemTitle=function isc_Menu_setItemTitle(_1,_2){_1=this.getItem(_1);if(!_1)return;if(_1.title!=_2){_1.title=_2;this.markForRedraw("item title change");return true}
return false},isc.A.setItemIcon=function isc_Menu_setItemIcon(_1,_2,_3){_1=this.getItem(_1);if(!_1)return;if(_1.icon!=_2){_1.icon=_2;if(_3)_1.disabledIcon=_3;this.markForRedraw("item icon change");return true}
return false},isc.A.getIcon=function isc_Menu_getIcon(_1){var _2=this.fixedIconWidth&&this.getRecordIndex(_1)==0,_3=_2?this.iconWidth:null;var _4;if(_1.icon){var _5=(this.itemIsEnabled(_1)||!_1.disabledIcon?_1.icon:_1.disabledIcon);var _6={src:_5};_6.width=_1.iconWidth||this.iconWidth;_6.height=_1.iconHeight||this.iconHeight;if(isc.Browser.isStrict){_6.align="absmiddle"}
_4=this.imgHTML(_6);if(_2&&(_1.iconWidth==null||_1.iconWidth>=_3)){_2=false}else{_3-=_1.iconWidth}}
if(_1.checked){_4=this.getCheckmarkImage(_1);if(_2){var _7=this.checkmarkImage?this.checkmarkImage.width:this.iconWidth;if(_7<_3){_3-=_7}else{_2=false}}}
if(_2){if(_4)return _4+this.imgHTML("[SKIN]/../blank.gif",_3,1);else return this.imgHTML("[SKIN]/../blank.gif",_3,1)}
return _4||"&nbsp;"},isc.A.getItemTitle=function isc_Menu_getItemTitle(_1){var _2;if(this.$110l){_2=this.$110l.getTitle(_1)}else{_2=_1.title||_1.name||_1.id}
_2=_2||"&nbsp;";return _2},isc.A.getKeyTitle=function isc_Menu_getKeyTitle(_1){if(_1.keyTitle)return _1.keyTitle;return"&nbsp;"},isc.A.getCheckmarkImage=function isc_Menu_getCheckmarkImage(_1){if(!this.$111r){if(isc.Browser.isStrict){this.checkmarkImage.align=this.checkmarkDisabledImage.align="absmiddle"}
this.$111r=this.imgHTML(this.checkmarkImage);this.$111s=this.imgHTML(this.checkmarkDisabledImage)}
return(this.itemIsEnabled(_1)?this.$111r:this.$111s)},isc.A.setUpKeyListening=function isc_Menu_setUpKeyListening(){var _1="";var _2,_3,_4=this.data.length;for(var i=0;i<_4;i++){_2=this.getItem(i);if(!_2)continue;_3=_2.keys;if(!_3)continue;if(!isc.isAn.Array(_3))_3=[_3];for(var _6,k=0,_8=_3.length;k<_8;k++){_6=_3[k];if(_6==null)continue;isc.Page.registerKey(_6,"target.menuKey("+i+");",this);if(!this.registeredKeys)this.registeredKeys=[];this.registeredKeys.add(_6)}
if(!_2.keyTitle)this.setItemKeyTitle(_2,_3[0])}},isc.A.destroy=function isc_Menu_destroy(_1){if(this.registeredKeys){for(var i=0;i<this.registeredKeys.length;i++){isc.Page.unregisterKey(this.registeredKeys[i],this)}}
if(this.$111l)this.$111l.map("destroy");if(this.$110l){var _3=this.$110l;if(!_1&&_3.$71k&&isc.isA.Function(_3.destroy)&&(_3.componentId==this.ID))
{_3.destroy()}else{this.$981(_3)}
delete this.$110l}
if(this.$33f)isc.Page.clearEvent("resize",this.$33f);this.$1105();this.Super("destroy",arguments)});isc.evalBoundary;isc.B.push(isc.A.menuKey=function isc_Menu_menuKey(_1){if(this.autoSetDynamicItems)this.setDynamicItems();return this.selectMenuItem(_1)},isc.A.setItemKeyTitle=function isc_Menu_setItemKeyTitle(_1,_2){var _3;if(isc.isA.String(_2))_3=_2
else if(isc.isAn.Object(_2)){if(_2.title)_3=_2.title
else _3=_2.keyName}
_1.keyTitle=_3});isc.B._maxIndex=isc.C+81;isc.A=isc.Menu;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.hideAllMenus=function isc_c_Menu_hideAllMenus(_1){var _2=_1=="itemClick",_3=_1=="outsideClick";var _4=true;if(isc.Menu.$tt.length>0){var _5=isc.Menu.$tt,_6=false,_7,_8=isc.EH.getFocusCanvas();isc.Menu.$tt=[];for(var i=_5.length-1;i>=0;i--){var _10=_5[i];if(!_10.isVisible()){continue}
if(_2&&_10.autoDismiss==false){isc.Menu.$tt.addAt(_10,0);_4=false;continue}
if(_3&&_10.autoDismissOnBlur==false){isc.Menu.$tt.addAt(_10,0);_4=false;continue}
if(_10.$78(_8)){if(_7==null)_7=_10;_6=true}
_10.hide()}
if(_6&&isc.isA.Canvas(_7.body.focusOnHide)){_7.body.focusOnHide.focus()}}
isc.Menu.$111m={};if(_4){if(isc.Menu.$111t){isc.EH.hideClickMask(isc.Menu.$111t);isc.Menu.$111t=null}}else{if(!isc.EH.clickMaskUp(isc.Menu.$111t)){this.$111e()}}
if(isc.Menu.$111b!=null){var _11=isc.Menu.$111b;delete isc.Menu.$111b;if(isc.EH.lastEvent.eventType==isc.EH.MOUSE_DOWN&&isc.EH.lastEvent.target==_11)
{_11.$111u=true;isc.Page.setEvent(isc.EH.CLICK,_11,isc.Page.FIRE_ONCE,"$111v")}}},isc.A.$111w=function isc_c_Menu__getAutoDismissOnBlurMenus(){if(this.$tt==null||this.$tt.length==0)return[];var _1=[];for(var i=0;i<this.$tt.length;i++){if(this.$tt[i].autoDismissOnBlur!=false)_1.add(this.$tt[i])}
return _1},isc.A.$111e=function isc_c_Menu__showMenuClickMask(){if(isc.Menu.$111w().length>0&&(isc.Menu.$111t==null||!isc.EH.clickMaskUp(isc.Menu.$111t)))
{isc.Menu.$111t=isc.EH.showClickMask("isc.Menu.hideAllMenus('outsideClick')",true)}},isc.A.menuForValueMap=function isc_c_Menu_menuForValueMap(_1,_2){var _3=[];if(isc.isA.String(_1))_1=this.getPrototype().getGlobalReference(_1);if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){_3[i]={value:_1[i],title:_1[i]}}}else{for(var _5 in _1){_3.add({value:_5,title:_1[_5]})}}
var _6=isc.Menu.$111x;if(_2==false||isc.Menu.$111x==null){_6=isc.Menu.newInstance({autoDraw:false,itemClick:function(_7){if(this.target.valueMapMenuSelected){this.target.valueMapMenuSelected(_7.value)}}})}
if(_2!=false&&isc.Menu.$111x==null)isc.Menu.$111x=_6;_6.setData(_3);return _6});isc.B._maxIndex=isc.C+4;isc.Menu.registerStringMethods({itemClick:"item"})
isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderContextMenu=true;isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderMenuButton=false;isc.$111y={$111z:true,title:"Show Menu",height:22,showMenuButtonImage:true,menuButtonImage:"[SKIN]menu_button.gif",menuButtonImageUp:"[SKIN]menu_button_up.gif",hiliteAccessKey:true,iconWidth:7,iconHeight:7,iconOrientation:"right",iconAlign:"right",align:"left",showMenuBelow:true,menu:null,initWidget:function(_1,_2,_3,_4){if(this.menuAlign==null){this.menuAlign=!this.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT}
if(this.showMenuButtonImage)this.$50k();return this.invokeSuper(isc.MenuButton,"initWidget",_1,_2,_3,_4)},autoDestroyMenu:true,destroy:function(_1,_2,_3,_4,_5){if(this.menu!=null&&this.autoDestroyMenu&&this.menu.destroy!=null&&!this.menu.destroyed&&!this.menu.destroying)
{this.menu.destroy();this.menu=null}
return this.invokeSuper(isc.MenuButton,"destroy",_1,_2,_3,_4,_5)},setShowMenuButtonImage:function(_1){if(_1==this.showMenuButtonImage)return;this.showMenuButtonImage=_1;if(_1)this.$50k();else this.icon=null;if(this.isDrawn())this.markForRedraw()},setShowMenuBelow:function(_1){if(_1!=this.showMenuBelow){this.showMenuBelow=_1;if(this.showMenuButtonImage){this.$50k();if(this.isDrawn())this.markForRedraw()}}},$50k:function(){var _1=this.showMenuBelow?this.menuButtonImage:this.menuButtonImageUp;if(isc.isAn.Object(_1)){if(_1.width)this.iconWidth=_1.width;if(_1.height)this.iconHeight=_1.height;this.icon=_1.src}else{this.icon=_1}},handleClick:function(){if(this.Super("handleClick",arguments)==false)return;if(this.$111u)return;this.showMenu()},$111v:function(){if(this.$111u){var _1=this;isc.Page.setEvent(isc.EH.IDLE,function(){_1.$111u=null},isc.Page.FIRE_ONCE)}},keyPress:function(){if(isc.EventHandler.lastEvent.keyName=="Arrow_Down"){this.showMenu();return false}
return this.Super("keyPress",arguments)},$10q:function(){this.Super("$10q",arguments);this.markForRedraw()},$1110:function(_1){_1.rootMenuButton=this;_1.autoDismissOnBlur=false;this.observe(_1,"mouseOver",function(){this.checkRollOverMouseOver()});this.observe(_1,"mouseOut",function(){this.checkRollOverMouseOut()});var _2=_1.getSubmenu;_1.getSubmenu=function(_4){var _3=_2.apply(this,arguments);if(isc.isA.Menu(_3)){if(_3.rootMenuButton==null){this.rootMenuButton.$1110(_3)}}
return _3};this.observe(_1,"$104",function(){this.$1111(_1)});if(_1.vscrollbar!=null)this.$1111(_1)},$1111:function(_1){var _2=_1.vscrollbar;var _3=function(){this.checkRollOverMouseOver()};var _4=function(){this.checkRollOverMouseOut()};this.observe(_2,"handleMouseOver",_3);this.observe(_2,"handleMouseOut",_4);var _5=_2.peers,_6=_5==null?0:_5.length;for(var i=0;i<_6;++i){var _8=_5[i];this.observe(_8,"handleMouseOver",_3);this.observe(_8,"handleMouseOut",_4)}},checkRollOverMouseOver:function(){if(this.$1112!=null){isc.Timer.clear(this.$1112);this.$1112=null}
if(isc.isA.Menu(this.menu)&&!(this.menu.isVisible()&&this.menu.isDrawn())){isc.Menu.hideAllMenus();this.showMenu()}},checkRollOverMouseOut:function(){if(this.$1112!=null){isc.Timer.clear(this.$1112);this.$1112=null}
if(isc.isA.Menu(this.menu)&&this.menu.isVisible()&&this.menu.isDrawn()){var _1=this;this.$1112=isc.Timer.setTimeout(function(){_1.$1112=null;if(isc.isA.Menu(_1.menu)&&_1.menu.isVisible()&&_1.menu.isDrawn()){isc.Menu.hideAllMenus()}},this.rollOverMenuHideDelay)}},showMenu:function(){if(isc.isA.String(this.menu))this.menu=window[this.menu];if(!isc.isA.Menu(this.menu))this.$30v(this.menu);if(!isc.isA.Menu(this.menu))return;isc.Menu.$111b=this;var _1=this.menu;if(!_1.ruleScope){var _2=this.getRuleScope();if(_2)_1.ruleScope=_2}
if(this.showMenuOnRollOver&&_1.rootMenuButton==null){if(_1.rootMenuButton==null){this.$1110(_1)}}
_1.$30w();this.positionMenu(_1);_1.show(this.menuAnimationEffect)},positionMenu:function(_1){if(!_1)return;var _2=this.getPageLeft();if(this.menuAlign==isc.Canvas.CENTER){_2=_2-((_1.getVisibleWidth()-this.getVisibleWidth())/2)}else if(this.menuAlign==isc.Canvas.RIGHT){_2-=(_1.getVisibleWidth()-this.getVisibleWidth())}
var _3=this.showMenuBelow?this.getPageTop()+this.getVisibleHeight()+1:this.getPageTop()-_1.getVisibleHeight()+2;_1.placeNear(_2,_3)},repositionMenu:function(){var _1=this.menu;if(_1&&isc.isA.Menu(_1)&&_1.isDrawn()&&_1.isVisible()){this.positionMenu(_1)}},$30v:function(_1){if(!_1)return;_1.autoDraw=false;var _2=this.menuConstructor||isc.Menu;this.menu=isc.ClassFactory.newInstance(_2,_1)},handleMoved:function(_1,_2){this.Super("handleMoved",arguments);this.repositionMenu()},handleParentMoved:function(_1,_2,_3){this.Super("handleParentMoved",arguments);this.repositionMenu()},rollOverMenuHideDelay:250,mouseMove:function(){if(this.showMenuOnRollOver)this.mouseOver()},mouseOver:function(){if(this.showMenuOnRollOver)this.checkRollOverMouseOver();return this.Super("mouseOver",arguments)},mouseOut:function(){if(this.showMenuOnRollOver)this.checkRollOverMouseOut();return this.Super("mouseOut",arguments)}};isc.ClassFactory.defineClass("MenuButton","Button");isc.MenuButton.addProperties(isc.$111y)
isc.A=isc.MenuButton.getPrototype();isc.A.skinImgDir="images/Menu/";isc.A.baseStyle="menuButton";isc.ClassFactory.defineClass("IMenuButton","StretchImgButton");isc.IMenuButton.addProperties(isc.$111y)
isc.A=isc.IMenuButton.getPrototype();isc.A.labelSkinImgDir="images/Menu/";isc.defineClass("ToolStripMenuButton","IMenuButton");isc.A=isc.ToolStripMenuButton.getPrototype();isc.A.showTitle=true;isc.A.showRollOver=true;isc.A.showDown=true;isc.A.labelVPad=0;isc.A.labelHPad=7;isc.A.autoFit=true;isc.A.src="[SKIN]/ToolStrip/button/button.png";isc.A.capSize=3;isc.A.height=22;isc.ClassFactory.defineClass("SelectionTreeMenu","Menu")
isc.A=isc.SelectionTreeMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.itemClick=function isc_SelectionTreeMenu_itemClick(_1){this.inheritedProperties.button.$64b(_1)},isc.A.getBaseStyle=function isc_SelectionTreeMenu_getBaseStyle(_1,_2,_3){var _4=this.inheritedProperties.button;if(_4.$1113(_1))return _4.selectedBaseStyle;return this.Super("getBaseStyle",arguments)},isc.A.show=function isc_SelectionTreeMenu_show(){if(this.body){for(var i=0;i<this.getTotalRows();i++){this.body.setRowStyle(i)}}
return this.Super("show",arguments)},isc.A.getItemTitle=function isc_SelectionTreeMenu_getItemTitle(_1,_2,_3,_4,_5){var _6=this.inheritedProperties.button;if(_6.displayField){return _1[_6.displayField]}
return this.invokeSuper(isc.SelectionTreeMenu,"getItemTitle",_1,_2,_3,_4,_5)});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("TreeMenuButton","MenuButton");isc.ClassFactory.defineClass("ITreeMenuButton","IMenuButton");isc.$1114={title:null,unselectedTitle:"Choose a value",showPath:false,pathSeparatorString:"&nbsp;&gt;&nbsp;",selectedBaseStyle:"treeMenuSelected",overflow:isc.Canvas.VISIBLE,treeMenuConstructor:isc.SelectionTreeMenu,treeMenuDefaults:{height:1},getTitle:function(){if(this.title)return this.title;var _1=this.getSelectedItem();return this.$64k(_1)},$64k:function(_1){if(_1!=null){if(!this.showPath){if(!isc.isA.Menu(this.treeMenu))this.$30v();return this.treeMenu.getItemTitle(_1)}else{var _2=this.getTree();var _3=_2.getParents(_1),_4=[];for(var i=_3.length-1;i>=0;i--){if(!_2.showRoot&&i==_3.length-1)continue;_4.add(this.treeMenu.getItemTitle(_3[i]))}
_4.add(this.treeMenu.getItemTitle(_1));return _4.join(this.pathSeparatorString)}}else{return this.unselectedTitle}},$30v:function(_1){_1=isc.addProperties({},_1,{inheritedProperties:{button:this},submenuConstructor:this.treeMenuConstructor,canSelectParentItems:this.canSelectParentItems,dataSource:this.dataSource,criteria:this.criteria,data:this.data,dataProperties:this.dataProperties});if(this.emptyMenuMessage)_1.emptyMessage=this.emptyMenuMessage;if(this.loadDataOnDemand!=null)_1.loadDataOnDemand=this.loadDataOnDemand;this.treeMenu=this.createAutoChild("treeMenu",_1);this.menu=this.treeMenu;this.observe(this.treeMenu,"treeDataLoaded","observer.$64d()")},$64d:function(){if(this.treeDataLoaded)this.treeDataLoaded()},getTree:function(){if(!isc.isA.Menu(this.treeMenu))this.$30v();return this.treeMenu.$110l},setData:function(_1){this.data=_1;if(this.treeMenu!=null){if(!isc.isA.Menu(this.treeMenu))this.$30v();this.treeMenu.setData(_1)}},$64b:function(_1){if(this.itemSelected&&this.itemSelected(_1,this.$1115)==false)
return;this.setSelectedItem(_1)},setSelectedItem:function(_1){this.$1115=_1;if(this.isDrawn())this.setTitle()},getSelectedItem:function(){return this.$1115},$1113:function(_1){var _2=this.getSelectedItem(),_3=this.getTree();while(_2){if(_1==_2)return true;_2=_3.getParent(_2)}
return false}};isc.TreeMenuButton.addProperties(isc.$1114)
isc.ITreeMenuButton.addProperties(isc.$1114)
isc.TreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});isc.ITreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});isc.ClassFactory.defineClass("TileLayout","Canvas");isc.A=isc.TileLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.layoutPolicy="fit";isc.A.tileSize=50;isc.A.tileMargin=10;isc.A.layoutMargin=5;isc.A.paddingAsLayoutMargin=true;isc.A.animateTileChange=true;isc.A.orientation="horizontal";isc.A.overflow="auto";isc.A.canFocus=true;isc.A.expandMargins=true;isc.A.autoWrapLines=true;isc.A.dragLineDefaults={overflow:"hidden",styleName:"layoutDropLine"};isc.A.$1116=true;isc.A.relayoutProperties=["tilesPerLine","orientation","tileWidth","tileHeight","expandMargins"];isc.A.canDrop=true;isc.A.$1117=2;isc.B.push(isc.A.initWidget=function isc_TileLayout_initWidget(){this.$1118();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];this.data=this.tiles},isc.A.draw=function isc_TileLayout_draw(_1,_2,_3,_4){this.invokeSuper(isc.TileLayout,"draw",_1,_2,_3,_4);this.$1119();this.logDebug('calling layoutTiles from draw',"TileLayout");this.layoutTiles()},isc.A.layoutChildren=function isc_TileLayout_layoutChildren(){this.Super("layoutChildren",arguments);this.logDebug('calling layoutTiles from layoutChildren',"TileLayout");this.$1119();this.layoutTiles()},isc.A.childResized=function isc_TileLayout_childResized(_1,_2,_3,_4){if(this.$254)return;this.invokeSuper(isc.TileLayout,"childResized",_1,_2,_3,_4);if(this.tiles!=null&&this.tiles.contains(_1)){this.logDebug('calling layoutTiles from childResized',"TileLayout");this.delayCall("layoutTiles",null,100)}},isc.A.$1118=function isc_TileLayout__enforceLegalLayoutPolicy(){if(this.layoutPolicy!="fit"&&this.layoutPolicy!="flow"){this.layoutPolicy="fit"}},isc.A.willScroll=function isc_TileLayout_willScroll(){var _1=this.orientation=="horizontal";var _2=this.$8y;var _3=this.$8z;var _4=this.$8w;var _5=this.$8x;var _6,_7;if(this.$1116){_7=this.getUserVisibleTiles();_6=_7.getLength()}else{_6=this.getLength()}
if(this.layoutPolicy=="flow"){if(this.overflow!="auto"&&this.overflow!="scroll")return false;var _8=_1?this.getInnerWidth()-_5:this.getInnerHeight()-_3;var _9=_1?this.getInnerHeight()-_3:this.getInnerWidth()-_4;var _10=_1?_4:_2;var _11=_1?_2:_4;var _12=0;var _13=0;var _14=_1?this.getTileHMargin():this.getTileVMargin();var _15=_1?this.getTileVMargin():this.getTileHMargin();for(var i=0;i<_6;i++){var _17=_7?_7[i]:this.getTile(i);if(!this.autoWrapLines&&_17.startLine)_10=0;var _18=_1?_17.getVisibleWidth():_17.getVisibleHeight();if((this.autoWrapLines&&_10+_18>_8)||(!this.autoWrapLines&&_17.endLine)){_10=_1?_4:_2;;_11+=_12+_15;_12=0;_13++}
var _19=_1?_17.getVisibleHeight():_17.getVisibleWidth();if(_11+_19>_9)return true;if(_12<_19){_12=_19}
_10+=_18+_14}
return false}else{var _9=_1?this.getVisibleHeight()-(_2+_3):this.getVisibleWidth()-(_5+_4);var _19=_1?this.getTileHeight():this.getTileWidth();var _15=_1?this.getTileVMargin():this.getTileHMargin();var _20=this.getTilesPerLine();var _21=Math.floor(_9/(_19+_15));var _22=_20*_21;return(_6>_22)}},isc.A.layoutTiles=function isc_TileLayout_layoutTiles(_1){var _2=this.$254;this.$254=true;this.$112a(_1);this.$254=_2;if(_2)this.$112b=true},isc.A.$112a=function isc_TileLayout__layoutTiles(_1){if(!this.isDrawn())return;this.$112c=[];this.$112d=0;if(this.tiles)this.tiles.map(function(_50){delete _50.$112e});this.$112f=[this.getScrollLeft(),this.getScrollTop(),this.getInnerWidth(),this.getInnerHeight()];var _2,_3,_4,_5;if(this.paddingAsLayoutMargin){var _6=this.$0k();_4=_6.left;_5=_6.right;_2=_6.top;_3=_6.bottom}
var _7=this.$8y=this.$ga(this.layoutMargin,_2,0);var _8=this.$8z=this.$ga(this.layoutMargin,_3,0);var _9=this.$8w=this.$ga(this.layoutMargin,_4,0);var _10=this.$8x=this.$ga(this.layoutMargin,_5,0);var _11,_12;if(this.$1116){_12=this.getUserVisibleTiles();_11=_12.getLength()}else{_11=this.getLength()}
if(this.layoutPolicy=="flow"){this.logDebug("starting flow layout","TileLayout");var _13=this.orientation=="horizontal";var _14=_13?this.getInnerWidth()-_10:this.getInnerHeight()-_8;if(this.willScroll())_14-=this.getScrollbarSize();var _15=_13?_9:_7,_16=_13?_7:_9,_17=_13?this.getTileHMargin():this.getTileVMargin(),_18=_13?this.getTileVMargin():this.getTileHMargin();var _19=0,_20=0;var _21=this.$21l;for(var i=0;i<_11;i++){var _23=_12?_12[i]:(_21?this.getRecordTile(i):this.getTile(i));if(_23==null)continue;if(!this.autoWrapLines&&_23.startLine)_15=0;if(!_21&&_23.parentElement!==this)this.addChild(_23);var _24=_13?_23.getVisibleWidth():_23.getVisibleHeight();if((this.autoWrapLines&&_15+_24>_14)||(!this.autoWrapLines&&_23.endLine)){_15=_13?_9:_7;;_16+=_20+(i==0?0:_18);_20=0;_19++}
var _25=_13?_16:_15;var _26=_13?_15:_16;this.processTile(_23,_25,_26);var _27=_13?_23.getVisibleHeight():_23.getVisibleWidth();if(_20<_27){_20=_27}
_15+=_24+_17}}else{this.logDebug("starting fit layout:"+this.$21l,"TileLayout");var _28=this.getTilesPerLine();var _29=this.getTileHeight();var _30=this.getTileWidth();var _13=this.orientation=="horizontal";var _31,_32,_33;var _34,_35,_36,_37,_38,_39;if(this.shouldUseIncrRendering()){this.logDebug("fit layout, using incremental rendering","TileLayout");var _40=this.getVisibleTiles();this.$112g=_40;_35=_40[0];_34=_11;var _41=this.getVisibleLines();_38=_41[0];_39=_41[0]+_41[1];if(!this.hasAllVisibleTiles(_40,true)){if(this.loadingMessage==null||!this.data.lengthIsKnown())return}}else{this.logDebug("fit layout, rendering all tiles","TileLayout");delete this.$112g;_34=_11;_35=0;_38=0;_39=Math.ceil(_34/_28);_31=this.getTileHMargin();_32=this.getTileVMargin()}
if(this.$112h)this.$112h();var _42=Math.ceil(_11/_28);var _32=this.getTileVMargin();var _31=this.getTileHMargin();var _27=_13?_29:_30;var _43=_13?_32:_31;var _44=((_27+_43)*_42)-_43+(_13?_7+_8:_9+_10);_37=this.$112i();_13?_37.setHeight(_44):_37.setWidth(_44);_37.sendToBack();_33=this.getExtraMarginPixels(_28,_29,_30,_31,_32);this.$112b=false;for(var i=_38;i<_39;i++){var _45=_33;for(var j=0;j<_28;j++){var _47=_13?i:j;var _48=_13?j:i;var _25=(_47*_29)+(_47*_32)+_7;if(!_13&&j+1<=_33)_25+=j+1;var _26=(_48*_30)+(_48*_31)+_9;if(_13&&j+1<=_33)_26+=j+1;var _49=_12?_12[_35]:_35
var _23=this.processTile(_49,_25,_26,this.getTileHeight(),this.getTileWidth());if(this.$112b)return;_35++;if(_35>=_34)break}
if(_35>=_34)break}}},isc.A.hasAllVisibleTiles=function isc_TileLayout_hasAllVisibleTiles(){return true},isc.A.getUserVisibleTiles=function isc_TileLayout_getUserVisibleTiles(){var _1=[];for(var i=0;i<this.getLength();i++){var _3=this.getTile(i);if(!_3.$112j)_1.add(_3)}
return _1},isc.A.processTile=function isc_TileLayout_processTile(_1,_2,_3,_4,_5){var _6;if(this.$21l){if(isc.isA.Canvas(_1))_6=_1;else _6=this.getRecordTile(_1);if(!_6)return;if(this.$112k!=null&&this.$112k.findIndex("ID",_6.ID)==-1)
{return}
if(_4)_6.setHeight(_4);if(_5)_6.setWidth(_5);if(_6.getTop()!=_2||_6.getLeft()!=_3){_6.$112l=_2;_6.$112m=_3;this.$112n.add(_6)}
var _7=[_3,_2,_6.getVisibleWidth(),_6.getVisibleHeight()];if(isc.Canvas.rectsIntersect(this.$112f,_7)){if(!this.$112c.contains(_6))this.$112c.add(_6)}}else{if(isc.isA.Canvas(_1))_6=_1;else _6=this.getTile(_1);if(!_6)return;if(_6.isDirty())_6.redraw("tile dirty during layout");if(_4)_6.setHeight(_4);if(_5)_6.setWidth(_5);_6.setTop(_2);_6.setLeft(_3);this.addChild(_6);if(isc.TileGrid&&isc.isA.TileGrid(this)){_6.$112o=true;_6.show();_6.$112o=null}else{if(_6.visibility=="hidden")_6.$112j=true;else _6.$112j=null}
var _7=[_6.getLeft(),_6.getTop(),_6.getVisibleWidth(),_6.getVisibleHeight()];if(isc.Canvas.rectsIntersect(this.$112f,_7)){if(!this.$112c.contains(_6))this.$112c.add(_6)}
this.$112d++;_6.$112e=true;return _6}},isc.A.$112i=function isc_TileLayout__getSpacerCanvas(){if(!this.$112p){this.$112p=isc.Canvas.create({autoDraw:false,width:1,height:1});this.addChild(this.$112p)}
return this.$112p},isc.A.getDrawnStartIndex=function isc_TileLayout_getDrawnStartIndex(_1){if(this.$112g)return this.$112g[0];return _1?null:0},isc.A.getDrawnEndIndex=function isc_TileLayout_getDrawnEndIndex(_1){if(this.$112g)return this.$112g[1];return _1?null:(this.data?this.data.getLength():0)},isc.A.shouldUseIncrRendering=function isc_TileLayout_shouldUseIncrRendering(){if(this.$21l){return true}else if(!this.showAllRecords&&this.layoutPolicy=="fit"&&(this.overflow=="auto"||this.overflow=="hidden"))
{var _1=this.data;if(_1==null||isc.ResultSet&&isc.isA.ResultSet(_1)&&!_1.lengthIsKnown()){return true}
var _2=this.drawAllMaxTiles;return _2==null||_2==0||_1.getLength()>_2}else{return false}},isc.A.getLength=function isc_TileLayout_getLength(){if(!this.tiles)return 0;else return this.tiles.getLength()},isc.A.getTilesPerLine=function isc_TileLayout_getTilesPerLine(){if(this.tilesPerLine)return this.tilesPerLine;else{var _1=this.orientation=="horizontal"?this.getTileWidth():this.getTileHeight();var _2=this.orientation=="horizontal"?(this.tileHMargin||this.tileMargin):(this.tileVMargin||this.tileMargin);var _3=this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight();var _4=Math.floor(_3/_1);var _5=this.orientation=="horizontal"?this.$8w+this.$8x:this.$8y+this.$8z;var _6=_2*(_4-1)+(_4*_1)+_5;if(_6>_3){var _7=Math.ceil((_6-_3)/_1);_4-=_7}
if(_4<1)_4=1;return _4}},isc.A.$1119=function isc_TileLayout__setTileSize(){var _1=this.orientation=="horizontal";if(this.layoutPolicy!="fit"||this.expandMargins||!this.tilesPerLine||(_1&&this.tileWidth)||(!_1&&this.tileHeight))return;var _2=_1?(this.tileHMargin||this.tileMargin):(this.tileVMargin||this.tileMargin);var _3=_1?this.getInnerWidth():this.getInnerHeight();var _4=this.layoutMargin*2;var _5=_3-_4;if(!this.tilesPerLine){if(this.tileSize==null)this.tileSize=50}else{var _6=Math.floor(_5/this.tilesPerLine);_6-=_2;if(this.orientation=="horizontal")this.defaultTileWidth=_6;else this.defaultTileHeight=_6}},isc.A.getVisibleLines=function isc_TileLayout_getVisibleLines(){var _1=(this.orientation=="horizontal");var _2=_1?this.getScrollTop():this.getScrollLeft();var _3=_1?this.getTileHeight()+this.getTileVMargin():this.getTileWidth()+this.getTileHMargin();var _4=_1?this.getInnerHeight():this.getInnerWidth();var _5=Math.floor(_2/_3);if(_5>0)_5--;var _6=Math.ceil(_4/_3)+2;return[_5,_6]},isc.A.getVisibleTiles=function isc_TileLayout_getVisibleTiles(){var _1=this.getVisibleLines();var _2=this.getTilesPerLine();var _3=_1[0]*_2;var _4=(_1[0]+_1[1])*_2;return[_3,_4]},isc.A.scrolled=function isc_TileLayout_scrolled(){if(this.shouldUseIncrRendering()){if(this.$21o)isc.Timer.clear(this.$21o);this.$21o=this.delayCall("layoutAfterScroll")}},isc.A.layoutAfterScroll=function isc_TileLayout_layoutAfterScroll(){this.logDebug('layoutAfterScroll',"TileLayout");if(this.shouldLayoutTiles()){this.logDebug('calling layoutTiles from layoutAfterScroll',"TileLayout");this.layoutTiles()}
this.$21o=null},isc.A.shouldLayoutTiles=function isc_TileLayout_shouldLayoutTiles(){var _1=this.getVisibleTiles();return _1[0]!=this.getDrawnStartIndex(true)||_1[1]!=this.getDrawnEndIndex(true)},isc.A.getTileWidth=function isc_TileLayout_getTileWidth(){if(this.tileWidth){if(isc.isA.String(this.tileWidth)){this.tileWidth=parseInt(this.tileWidth);if(!isc.isA.Number(this.tileWidth))this.tileWidth=this.tileSize}
return this.tileWidth}else if(this.defaultTileWidth){return this.defaultTileWidth}else{return this.tileSize}},isc.A.getTileHeight=function isc_TileLayout_getTileHeight(){if(this.tileHeight){if(isc.isA.String(this.tileHeight)){this.tileHeight=parseInt(this.tileHeight);if(!isc.isA.Number(this.tileHeight))this.tileHeight=this.tileSize}
return this.tileHeight}else if(this.defaultTileHeight!=null){return this.defaultTileHeight}else{return this.tileSize}},isc.A.getInnerBreadth=function isc_TileLayout_getInnerBreadth(){var _1=this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight();return _1},isc.A.getTileHMargin=function isc_TileLayout_getTileHMargin(){var _1;if(this.tileHMargin){_1=this.tileHMargin}else{_1=this.tileMargin}
if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="horizontal"){var _2=this.getTilesPerLine();var _3=this.$8w+this.$8x;var _4=_2-1;if(_4==0)_4=1;var _5=Math.floor((this.getInnerBreadth()-(_2*this.getTileWidth())-_3)/_4);if(_5<_1)return _1;else return _5}else{return _1}},isc.A.getTileVMargin=function isc_TileLayout_getTileVMargin(){var _1;if(this.tileHMargin){_1=this.tileVMargin}else{_1=this.tileMargin}
if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="vertical"){var _2=this.getTilesPerLine();var _3=this.$8y+this.$8z;var _4=_2-1;if(_4==0)_4=1;var _5=Math.floor((this.getInnerBreadth()-(_2*this.getTileHeight())-_3)/_4);if(_5<_1)return _1;else return _5}else{return _1}},isc.A.getExtraMarginPixels=function isc_TileLayout_getExtraMarginPixels(_1,_2,_3,_4,_5){if(this.expandMargins&&this.orientation=="horizontal"){var _6=(_1*_3)+((_1-1)*_4)+(this.$8w+this.$8x);return this.getInnerBreadth()-_6}else if(this.expandMargins&&this.orientation=="vertical"){var _6=(_1*_2)+((_1-1)*_5)+(this.$8y+this.$8z);return this.getInnerBreadth()-_6}else{return 0}},isc.A.getTile=function isc_TileLayout_getTile(_1){return isc.Class.getArrayItem(_1,this.tiles)},isc.A.addTile=function isc_TileLayout_addTile(_1,_2){if(!this.tiles)return;if(_2!==0&&!_2)_2=this.tiles.getLength();this.tiles.addAt(_1,_2);this.reLayout()},isc.A.removeTile=function isc_TileLayout_removeTile(_1){if(!this.tiles)return;if(!isc.isA.Canvas(_1)){var _2=this.tiles.findIndex("ID",_1);if(_2==-1)_1=this.tiles.get(_1);else _1=this.tiles.get(_2)}
this.removeChild(_1)},isc.A.removeChild=function isc_TileLayout_removeChild(_1,_2){this.tiles.removeWhere("ID",_1.ID);if(this.$112c){this.$112c.removeWhere("ID",_1.ID)}
if(this.$112k&&this.$112k!=this.$112c){this.$112k.removeWhere("ID",_1.ID)}
if(this.$112n){this.$112n.removeWhere("ID",_1.ID)}
this.invokeSuper(isc.TileLayout,"removeChild",_1,_2);this.reLayout()},isc.A.getRecordTile=function isc_TileLayout_getRecordTile(_1){if(_1==null)return null;return this.tiles.get(_1)},isc.A.childVisibilityChanged=function isc_TileLayout_childVisibilityChanged(_1,_2){if(!this.$21l&&!_1.$112o){if(_2=="hidden")_1.$112j=true;else _1.$112j=null;this.reLayout()}},isc.A.propertyChanged=function isc_TileLayout_propertyChanged(_1,_2){this.invokeSuper(isc.TileLayout,"propertyChanged",_1,_2);if(isc.endsWith(_1,"Margin")||this.relayoutProperties.contains(_1))
{this.layoutTiles()}},isc.A.showDragLineForRecord=function isc_TileLayout_showDragLineForRecord(){if(isc.isAn.Array(this.data)||(isc.isA.ResultSet(this.data))){var x=this.getOffsetX(),y=this.getOffsetY(),_3=this.getPageLeft(),_4=this.getPageTop();if(this.data.getLength()==0){return}
var _5=this.findIndexForCoord(x,y);if(this.$112q==null)this.$112q=_5;var _6,_7,_8=this.getRecordTile(_5);if(_8!=null){if((this.orientation=="horizontal"&&x>_8.getLeft()+(_8.getVisibleWidth()/2))||(this.orientation=="vertical"&&y>_8.getTop()+(_8.getVisibleHeight()/2))){_5++;_8=this.getRecordTile(_5)}}
if(_5==null||_8==null){_5=this.data.getLength();_8=this.getRecordTile(_5-1);if(this.orientation=="horizontal"){_6=_8.getLeft()+_8.getVisibleWidth()-this.$1117;_7=_8.getTop()}else{_6=_8.getLeft();_7=_8.getTop()+_8.getVisibleHeight()-this.$1117}}else{_6=_8.getLeft();_7=_8.getTop()}
this.$112r=_5;var _9,_10;if(this.orientation=="horizontal"){_10=_8.getVisibleHeight();_9=this.$1117}
else{_9=_8.getVisibleWidth();_10=this.$1117}
this.showDragLine(_3+(_6-this.getScrollLeft()),_4+(_7-this.getScrollTop()),_9,_10)}},isc.A.showDragLine=function isc_TileLayout_showDragLine(_1,_2,_3,_4){this.makeDragLine();var _5=this.getVisibleHeight();var _6=Math.round((_5-this.getInnerHeight())/2);var _7=this.getPageTop();var _8=_7+_6;var _9=_7+_5-_6;if(_2<_8){_4=_4-(_8-_2);_2=_8}else if(_2+_4>_9){if(_2>=_9){_4=0}else{_4=_4-((_2+_4)-_9)}}
this._dragLine.moveTo(_1,_2);this._dragLine.resizeTo(_3,_4);this._dragLine.show()},isc.A.dropOut=function isc_TileLayout_dropOut(){this.hideDragLine()},isc.A.dropMove=function isc_TileLayout_dropMove(){this.showDragLineForRecord()},isc.A.findIndexForCoord=function isc_TileLayout_findIndexForCoord(_1,_2){var _3=this.getDrawnStartIndex(),_4=this.getDrawnEndIndex();var _5=this.ns.EH;var _6=_5.dragTarget,_7;if(_6)_7=_6.ID;for(var i=_3;i<_4;i++){var _9=this.getRecordTile(i);if(!_9)continue;if(_9.ID==_7)continue;if(_9.getLeft()+_9.getVisibleWidth()>_1&&_9.getTop()+_9.getVisibleHeight()>_2)return i}
return null},isc.A.drop=function isc_TileLayout_drop(){var _1=this.$112r||0;var _2=this.ns.EH.dragTarget;var _3=this.$112q;this.$112q=null;if(!isc.isAn.Array(_2))_2=[_2];var _4=_2[0].parentElement;var _5=this.data.get(_1);this.transferRecords(_2,_5,_1,_4);this.reLayout()},isc.A.reLayout=function isc_TileLayout_reLayout(){if(this.destroying)return;if(this.animateTileChange){this.delayCall("$112s",null,200)}else{this.logDebug('calling layoutTiles from reLayout',"TileLayout");this.layoutTiles()}},isc.A.$112s=function isc_TileLayout__animateChange(){this.logDebug("starting $112s()","TileLayout");this.$21l=true;this.$22e=[];var _1=this.$112k=this.$112c;this.$112n=[];this.layoutTiles();if(_1!=null){for(var i=0;i<_1.length;i++){if(!this.$112c.contains(_1[i])){_1[i].hide()}}}
var _3=this.$112n.length;if(_3==0){this.$112t();return}
for(var i=0;i<_3;i++){var _4=this.$112n[i];_4.show();var _5;if(i==_3-1){_5=_4.animateMove(_4.$112m,_4.$112l,this.getID()+".$112t()")}else{_5=_4.animateMove(_4.$112m,_4.$112l)}
this.$22e.add({ID:_5,tile:_4})}},isc.A.$112t=function isc_TileLayout__finishAnimating(){this.$21l=false;this.$112k=null;delete this.$112k;this.$112n=null;delete this.$112n;this.logDebug('calling layoutTiles from $112t',"TileLayout");this.layoutTiles()},isc.A.isAnimatingTileLayout=function isc_TileLayout_isAnimatingTileLayout(){return this.$21l===true},isc.A.setTileSize=function isc_TileLayout_setTileSize(_1){this.tileSize=_1;this.layoutTiles()},isc.A.setTileWidth=function isc_TileLayout_setTileWidth(_1){this.tileWidth=_1;this.layoutTiles()},isc.A.setTileHeight=function isc_TileLayout_setTileHeight(_1){this.tileHeight=_1;this.layoutTiles()},isc.A.setTilesPerLine=function isc_TileLayout_setTilesPerLine(_1){this.tilesPerLine=_1;this.$1119();this.layoutTiles()},isc.A.setTileMargin=function isc_TileLayout_setTileMargin(_1){this.tileMargin=_1;this.layoutTiles()},isc.A.setTileHMargin=function isc_TileLayout_setTileHMargin(_1){this.tileHMargin=_1;this.layoutTiles()},isc.A.setTileVMargin=function isc_TileLayout_setTileVMargin(_1){this.tileVMargin=_1;this.layoutTiles()});isc.B._maxIndex=isc.C+53;isc.ClassFactory.defineClass("FlowLayout","TileLayout");isc.A=isc.FlowLayout.getPrototype();isc.A.layoutPolicy="flow";isc.ClassFactory.defineClass("TileGrid","TileLayout","DataBoundComponent");isc.A=isc.TileGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tileValueStyle="tileValue";isc.A.valuesShowRollOver=false;isc.A.valuesShowSelected=true;isc.A.valuesShowDown=false;isc.A.tileValueAlign="center";isc.A.showLabels=false;isc.A.tileLabelStyle="tileLabel";isc.A.wrapValues=false;isc.A.canSortFields=true;isc.A.autoFetchTextMatchStyle="substring";isc.A.selectionType=isc.Selection.MULTIPLE;isc.A.tileConstructor="SimpleTile";isc.A.detailViewerDefaults={_constructor:"DetailViewer",visibility:"hidden"};isc.A.recycleTiles=true;isc.A.drawAllMaxTiles=25;isc.A.animateTileChange=true;isc.A.styleName="tileGrid";isc.A.$1116=false;isc.A.$112u=[];isc.A.$112v=10;isc.A.$61i="Arrow_Up";isc.A.$61j="Arrow_Down";isc.A.$97z="Arrow_Left";isc.A.$970="Arrow_Right";isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragTrackerMode="title";isc.A.tileDragAppearance=isc.EH.TRACKER;isc.A.showEmptyMessage=true;isc.A.emptyMessage="No tiles to show.";isc.A.emptyMessageStyle="emptyMessage";isc.A.emptyMessageLabelConstructor="Label";isc.A.emptyMessageLabelDefaults={width:"100%",height:1,align:"center",snapTo:"T"};isc.B.push(isc.A.init=function isc_TileGrid_init(){if(this.disableTouchScrollingForDrag&&(this.canDragTilesOut||this.canReorderTiles)&&this.useTouchScrolling==null)
{this.logInfo("Automatically disabling touch scrolling","scrolling");this.useTouchScrolling=false}
this.Super("init",arguments)},isc.A.initWidget=function isc_TileGrid_initWidget(){this.$1118();if(isc.FormulaBuilder==null)this.canAddFormulaFields=false;if(isc.SummaryBuilder==null)this.canAddSummaryFields=false;if(this.layoutPolicy=="flow"){isc.logWarn("TileGrid does not support layoutPolicy 'flow'; there may be unexpected behavior. Use a TileLayout instead for flow layout.")}
this.$98x();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];if(this.showAllRecords)this.recycleTiles=false;var _1=this.getDataSource();if(isc.isA.DataSource(_1)){this.$112w={};if(_1.getPrimaryKeyFieldNames().length==0){this.animateTileChange=false}}
this.detailViewer=this.createAutoChild("detailViewer",{tileGrid:this,showLabel:this.showLabels,showBorder:false,cellStyle:this.tileValueStyle,labelStyle:this.tileLabelStyle,blockStyle:"normal",wrapValues:this.wrapValues,cellPadding:0,valueAlign:this.tileValueAlign,useInnerWidth:false,clipValues:true,width:10,height:10,data:[],dataSource:_1,getCellStyle:function(_3,_4,_5,_6){var _2=(_4.cellStyle||this.cellStyle);if(this.tileGrid.valuesShowRollOver&&this.currentTile.state==isc.StatefulCanvas.STATE_OVER){_2+=this.currentTile.getStateSuffix()}else if(this.tileGrid.valuesShowDown&&this.currentTile.state==isc.StatefulCanvas.STATE_DOWN){_2+=this.currentTile.getStateSuffix()}else if(this.tileGrid.valuesShowSelected&&this.currentTile.isSelected()){_2+=this.currentTile.getStateSuffix()}
return _2}},this.detailViewerProperties);this.$112x=[];if(this.fieldState!=null)this.setFieldState(this.fieldState);else this.setFields(this.fields,true);this.membersMargin=this.tileMargin;this.setData(this.data?this.data:this.getDefaultData())},isc.A.setDataSource=function isc_TileGrid_setDataSource(_1,_2){this.Super("setDataSource",arguments);var _3=this.getDataSource();if(isc.isA.DataSource(_3)){this.$112w={};if(_3.getPrimaryKeyFieldNames().length==0){this.animateTileChange=false}}},isc.A.shouldUseField=function isc_TileGrid_shouldUseField(_1,_2){if(this.Super("shouldUseField",arguments))return true;_2=isc.DS.get(_2);if(isc.isA.DataSource(_2)){var _3=_2.getIconField();if(_1==_3||_1.name==_3||(_3&&_1.name==_3.name))
{return true}}
return false},isc.A.setFields=function isc_TileGrid_setFields(_1,_2){var _3=this.getDataSource();if(!_1&&isc.isA.DataSource(_3)){var _4=_3.getIconField();if(_4){_1=[];_1.add({name:_4,type:_4.type});_1.add({name:_3.getTitleField()})}}
if(this.completeFields==null)this.fields=[];this.completeFields=this.bindToDataSource(_1);if(this.completeFields==null)this.completeFields=[];if(!this.completeFields)return;this.deriveVisibleFields();this.updateFieldDependencies();this.detailViewer.fields=this.completeFields.duplicate();if(!_2){this.logDebug('calling layoutTiles from setFields',"TileGrid");this.layoutTiles()}},isc.A.deriveVisibleFields=function isc_TileGrid_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields))},isc.A.getVisibleFields=function isc_TileGrid_getVisibleFields(_1){var _2=this.detailViewer,_3=this.getData(),_4=_1.duplicate();for(var i=0;i<_1.length;i++){var _6=_1.get(i);if(!_2.fieldShouldBeVisible(_6,_3)||_6.visible==false)_4.remove(_6)}
return _4},isc.A.computeTileDimensions=function isc_TileGrid_computeTileDimensions(_1){if(((this.tileHeight&&this.tileWidth)||(this.tileSize))&&!_1)return;if(!((isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.data.resultSize>=this.data.getLength())||isc.isAn.Array(this.data))){return}
if(this.layoutPolicy!="fit")return;var _2=0,_3=0;this.detailViewer.clipValues=false;for(var i=0;i<this.data.getLength();i++){var t=this.getTile(i);var _6=t.overflow;t.setOverflow("visible");t.redraw();t.show();var _7=t.getVisibleHeight();var _8=t.getVisibleWidth();if(_7>_2)_2=_7;if(_8>_3)_3=_8;t.setOverflow(_6);t.hide()}
this.detailViewer.clipValues=true;if(!this.tileHeight&&_2>0)this.tileHeight=_2;if(!this.tileWidth&&_3>0)this.tileWidth=_3},isc.A.getTileID=function isc_TileGrid_getTileID(_1){if(!_1)return null;var _2=this.getDataSource();if(isc.isA.DataSource(_2)&&_2.getPrimaryKeyFieldNames().length>0){var _3=_2.getPrimaryKeyFields();var _4="";for(var _5 in _3){_4+=_1[_5]}
return this.$112w[_4]}else{return _1.$112y}},isc.A.setTileID=function isc_TileGrid_setTileID(_1,_2){var _3=this.getDataSource();if(isc.isA.DataSource(_3)&&_3.getPrimaryKeyFieldNames().length>0){var _4=_3.getPrimaryKeyFields();var _5="";for(var _6 in _4){_5+=_1[_6]}
this.$112w[_5]=_2}else{_1.$112y=_2}},isc.A.getCleanRecordData=function isc_TileGrid_getCleanRecordData(_1){var _2=this.invokeSuper(isc.TileGrid,"getCleanRecordData",_1);if(_2.$112y)_2.$112y=null;return _2},isc.A.getTileRecord=function isc_TileGrid_getTileRecord(_1){return _1.record},isc.A.checkTileRecord=function isc_TileGrid_checkTileRecord(_1){if(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())return false;var _2=_1.tileNum;if(_2==null)return false;var _3=_1.record,_4=this.data.get(_2);return this.$112z(_3,_4)},isc.A.setData=function isc_TileGrid_setData(_1){if(this.$21l)this.$1120();if(!_1)return;if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived")}
if(_1)this.data=_1;if(!this.data)return;if(this.data){if(isc.ResultSet&&isc.isA.ResultSet(this.data)){this.observe(this.data,"dataArrived","observer.dataArrived(arguments[0],arguments[1])");this.observe(this.data,"dataChanged","observer.dataChanged(operationType, originalRecord, rowNum, updateData)")}else{this.observe(this.data,"dataChanged","observer.dataChanged()")}}
if(!this.selection||(this.data!=this.selection.data)){this.createSelectionModel()}
this.dataChanged()},isc.A.getData=function isc_TileGrid_getData(){return this.data},isc.A.getPrimaryKeys=function isc_TileGrid_getPrimaryKeys(_1){var _2=this.data;if(!isc.ResultSet||!isc.isA.ResultSet(_2))return _1;var _3=this.getDataSource(),_4={};if(isc.isA.DataSource(_3)){var _5=_3.getPrimaryKeyFieldNames();for(var i=0;i<_5.length;i++){_4[_5[i]]=_1[_5[i]]}}
return _4},isc.A.setRecordValues=function isc_TileGrid_setRecordValues(_1,_2){if(!this.data)return;var _3=this.data.indexOf(_1);if(_3==-1)return;var _4=this.data.get(_3);isc.combineObjects(_4,_2);this.invalidateUserCache(_4);if(this.valuesManager!=null){this.valuesManager.$18o(_3,null,_4,this)}
this.logDebug('calling layoutTiles from setRecordValues',"TileGrid");this.layoutTiles()},isc.A.dataArrived=function isc_TileGrid_dataArrived(_1,_2){},isc.A.dataChanged=function isc_TileGrid_dataChanged(_1,_2,_3,_4){this.invalidateUserCache();if(!this.data||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))
{this.logDebug("dataChanged: returning due to no data yet","TileGrid");return}
this.computeTileDimensions();if(!this.$1121)this.$1121=0;this.detailViewer.setHilites(this.hilites);if(_1=="add"){this.logDebug("add","TileGrid");this.layoutTiles()}else if(_1=="remove"){this.logDebug("remove","TileGrid");if(!this.recycleTiles||this.data.getLength()>this.getDrawnEndIndex()-this.getDrawnStartIndex())
{if(_2)this.setTileID(_2,null);var _5=this.tiles[this.tiles.length-1];this.$1122(_5.tileNum);this.$1123(_5);this.tiles.remove(_5);_5.destroy()}
this.layoutTiles()}else if(_1=="update"){this.logDebug("update","TileGrid");var _6=this.getTileID(_2),_7=_6&&window[_6];if(_7){_7.record=_4;_7.redraw("tile record data changed")}
this.layoutTiles()}else if(this.data.getLength()>=this.$1121){this.logDebug("filter or sort, new data same or longer","TileGrid");if(this.getDataSource())this.tiles.clearProperty("record");if(this.$1121>0)this.$1124();else this.layoutTiles()}else{this.logDebug("filter or sort, new data shorter","TileGrid");if(this.getDataSource())this.tiles.clearProperty("record");this.selection.deselectAll();this.fireSelectionUpdated();var _8=this.getDrawnEndIndex();var _9=_8>this.data.getLength()?this.data.getLength():_8;var _10=this.getTilesPerLine();if(Math.floor(_8/_10)>Math.floor(_9/_10)&&this.getScrollTop()!=0&&this.recycleTiles){this.scrollToTop();this.layoutTiles()}else{this.$1124()}}
this.$1121=this.data.getLength();if(this.data.getLength()==0){this.cleanupExtraTiles(true)}},isc.A.$1120=function isc_TileGrid__cancelAnimation(){var _1=this.$22e;for(var i=0;i<_1.length;i++){this.finishAnimation(_1[i].ID);_1[i].tile.hide()}},isc.A.$1124=function isc_TileGrid__layoutAfterDataChange(){if(this.destroying)return;if(this.animateTileChange){if(this.$21l){this.$1120();return}
this.fireOnPause("tileGridAnimate",this.$112s)}else{this.logDebug('calling layoutTiles from layoutAfterDataChange',"TileGrid");this.layoutTiles()}},isc.A.cleanupExtraTiles=function isc_TileGrid_cleanupExtraTiles(_1){var _2=this.tiles;for(var i=0;i<_2.length;i++){var _4=_2[i];if(!_4.$112e||_1){_4.hide();_4.moveTo(0,0)}}},isc.A.destroy=function isc_TileGrid_destroy(){if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived");if(this.data.$71k&&isc.isA.Function(this.data.destroy))
this.data.destroy()}
this.Super("destroy",arguments)},isc.A.$1125=function isc_TileGrid__getTileID(_1){if(this.createTile!=null&&this.tiles&&this.tiles.length>_1){return this.tiles[_1].ID}
return this.ID+"_tile_"+_1},isc.A.getLength=function isc_TileGrid_getLength(){if(!this.data||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))return 0;else return this.data.getLength()},isc.A.makeTile=function isc_TileGrid_makeTile(_1,_2){var _3=this;var _4={canHover:true,tileGrid:_3,handleHover:function(){if(_3.itemHover)_3.fireCallback("itemHover","item",[this]);return this.Super("handleHover",arguments)},handleMouseDown:function(){_3.$1126(this);_3.focus();return this.Super("handleMouseDown",arguments)},handleRightMouseDown:function(){var _5=_3.$1127(this);if(_5==false)return false;_3.focus();return this.Super("handleRightMouseDown",arguments)},handleMouseUp:function(){_3.$1128(this);return this.Super("handleMouseUp",arguments)},handleClick:function(){_3.$1129(this);return this.Super("handleClick",arguments)},handleShowContextMenu:function(){var _5=_3.$113a(this);if(_5!=false){_5=this.Super("handleShowContextMenu",arguments)}
return _5},handleDoubleClick:function(){var _6=_3.getTileRecord(this);var _5=_3.recordDoubleClick(_3,this,_6);if(_5!=false){_5=this.Super("handleDoubleClick",arguments)}
return _5}};if(_1.tileProperties)isc.addProperties(_4,_1.tileProperties);var _7;if(this.createTile!=null){_7=this.createTile(_1,_2);_7.addProperties(_4,this.tileDefaults,this.tileProperties)}else{_4.ID=this.$1125(this.tiles.length);var _8=_1.tileConstructor?_1.tileConstructor:this.tileConstructor;_7=this.createAutoChild("tile",_4,_8)}
this.detailViewer.setWidth(_7.getInnerWidth());this.detailViewer.setHeight(_7.getInnerHeight());return _7},isc.A.setHilites=function isc_TileGrid_setHilites(_1){this.Super("setHilites",arguments);this.dataChanged()},isc.A.$112z=function isc_TileGrid__tileRecordsEqual(_1,_2){if(_1==null)return _2==null;if(_2==null)return _1==null;var _3=this.getDataSource();if(!_3)return _1==_2;var _4=_3.getPrimaryKeyFieldNames();for(var i=0;i<_4.length;++i){if(_1[_4[i]]!=_2[_4[i]]){return false}}
return true},isc.A.getTileHTML=function isc_TileGrid_getTileHTML(_1){return this.detailViewer.getBlockHTML([_1])},isc.A.getTile=function isc_TileGrid_getTile(_1){var _2,_3,_4;if(isc.isAn.Object(_1)){_3=_1;_4=this.data.indexOf(_1);_2=this.getTileID(_1)}else{if(!this.data)return null;_3=this.data.get(_1);if(!_3)return null;_2=this.getTileID(_3);_4=_1}
if(_4==null)return null;var _5=this.getDrawnStartIndex(),_6=this.getDrawnEndIndex();if(_4<_5||_4>=_6){this.logWarn("canReclaimTile() has been called with an index "+_4+" outside the visible range ["+_5+", "+_6+"]");return null}
var _7=_2&&window[_2];if(_7&&this.$112z(_3,_7.record)){if(_7.tileNum!=_4){this.$1122(_4,_7)}
return _7}
var _8=true,_9=null;if(this.canReclaimTile(_4)&&!_3.tileConstructor){_9=this.$113b(_4)}else if(_2&&window[_2]){_9=this.$113b(_4,window[_2])}else{if(!this.tiles)this.tiles=[];_9=this.makeTile(_3,_4);this.setTileID(_3,_9.ID);this.$1122(_4,_9);if(_9.setFields&&_9.getFields&&(_9.getFields()==null||_9.getFields().length==0))
{_9.setFields(isc.clone(this.fields))}
this.tiles.add(_9);_8=false}
if(_9.setValues)_9.setValues(_3);else if(_9.setData)_9.setData([_3]);_9.record=_3;if(_8){if(_9.isA("SimpleTile")){_9.setSelected(this.selection.isSelected(_3))}
if(_9.isDirty())_9.redraw("tile bound to new record")}else if(this.selection.isSelected(_3)){_9.setSelected(true)}
return _9},isc.A.getTileIndex=function isc_TileGrid_getTileIndex(_1){return this.tiles.indexOf(_1)},isc.A.getCurrentTile=function isc_TileGrid_getCurrentTile(){return this.detailViewer.currentTile},isc.A.$113c=function isc_TileGrid__clearLogs(){this.$112u=[]},isc.A.$113d=function isc_TileGrid__limitLog(_1,_2){if(!this.$112u.find("key",_2)){this.$112u.add({key:_2,logs:this.$112v})}
if(this.$112u.find("key",_2).logs>0){isc.logWarn(_1);this.$112u.find("key",_2).logs-=1}},isc.A.layoutTiles=function isc_TileGrid_layoutTiles(){this.requestVisibleRows();this.computeTileDimensions();this.invokeSuper(isc.TileGrid,"layoutTiles");var _1=this.tiles?this.tiles.length:0;var _2=this.$112d;if(!this.$21l&&_2<_1)this.cleanupExtraTiles();this.updateEmptyMessageLabel()},isc.A.invalidateCache=function isc_TileGrid_invalidateCache(){this.Super("invalidateCache",arguments);this.requestVisibleRows()},isc.A.requestVisibleRows=function isc_TileGrid_requestVisibleRows(){var _1=this.data;if(_1==null||!isc.isA.ResultSet(_1))return;if(!_1.lengthIsKnown()){if(this.tileSize==null)_1.get(0);else{var _2=this.getVisibleTiles();_1.getRange(_2[0],_2[1])}}},isc.A.$1122=function isc_TileGrid__updateTileIndex(_1,_2){var _3=this.$112x,_4=_3[_1];if(_4!=_2&&_4!=null&&_4.tileNum==_1){this.$113e(_4);_4.tileNum=null}
_3[_1]=_2;if(_2)_2.tileNum=_1},isc.A.$113f=function isc_TileGrid__getTileForTileIndex(_1){var _2=this.$112x,_3=_2[_1];return _3!=null&&_3.tileNum==_1?_3:null},isc.A.$113e=function isc_TileGrid__addTileToReclaim(_1){var _2=this.$113g;if(_2!=null)_2.push(_1)},isc.A.$1123=function isc_TileGrid__removeTileFromReclaim(_1){var _2=this.$113g;if(_2!=null)_2.remove(_1)},isc.A.$113h=function isc_TileGrid__canReclaimTile(_1,_2,_3){var _4=_1.tileNum;return _4==null||_4<_2||_4>=_3},isc.A.$113i=function isc_TileGrid__getTileToReclaim(){var _1=this.getDrawnStartIndex(),_2=this.getDrawnEndIndex();var _3=this.$113g;if(_3==null){_3=this.$113g=[];for(var i=0;i<this.tiles.length;i++){var _5=this.tiles[i];if(this.$113h(_5,_1,_2))_3.push(_5)}}
while(_3.length>0){var _5=_3.pop();if(this.$113h(_5,_1,_2))return _5}
return null},isc.A.$112h=function isc_TileGrid__lastVisibleTilesChanged(){delete this.$113g},isc.A.$113b=function isc_TileGrid__reclaimTile(_1,_2){var _3=this.data.get(_1)
var _4=_2||this.$113f(_1)||this.$113i();if(this.updateTile!=null&&this.recycleTiles){this.updateTile(_3,_1,_4)}
var _5=_4.record;if(_5)this.setTileID(_5,null);this.setTileID(_3,_4.ID);this.$1122(_1,_4);return _4},isc.A.canReclaimTile=function isc_TileGrid_canReclaimTile(_1){if(!this.recycleTiles)return false;var _2=this.getDrawnStartIndex(),_3=this.getDrawnEndIndex(),_4=_3-_2;return this.tiles.length>=_4},isc.A.$1127=function isc_TileGrid__tileRightMouseDown(_1){return this.$1126(_1)},isc.A.$1126=function isc_TileGrid__tileMouseDown(_1){var _2=this.getTileRecord(_1);if(_2)this.selection.selectOnMouseDown(this,_1.tileNum);var _3,_4;if(_1.getTop()<this.getScrollTop()){_4="top"}else if(_1.getTop()+_1.getVisibleHeight()>this.getScrollTop()+this.getInnerHeight()){_4="bottom"}
if(_1.getLeft()<this.getScrollLeft()){_3="left"}else if(_1.getLeft()+_1.getVisibleWidth()>this.getScrollLeft()+this.getInnerWidth()){_3="right"}
if(_3||_4){this.scrollIntoView(_1.getLeft(),_1.getTop(),_1.getVisibleWidth(),_1.getVisibleHeight(),_3,_4,true)}},isc.A.$1128=function isc_TileGrid__tileMouseUp(_1){this.selection.selectOnMouseUp(this,_1.tileNum)},isc.A.$1129=function isc_TileGrid__tileClick(_1){var _2=this.getTileRecord(_1);this.recordClick(this,_1,_2)},isc.A.$113a=function isc_TileGrid__tileContextClick(_1){var _2=this.getTileRecord(_1);return this.recordContextClick(this,_1,_2)},isc.A.recordClick=function isc_TileGrid_recordClick(_1,_2,_3){},isc.A.recordDoubleClick=function isc_TileGrid_recordDoubleClick(_1,_2,_3){},isc.A.recordContextClick=function isc_TileGrid_recordContextClick(_1,_2,_3){return true},isc.A.selectionChange=function isc_TileGrid_selectionChange(_1,_2){if(this.selectionChanged&&(this.selectionChanged(_1,_2)==false))return false;var _3=this.selection,_4=_3.lastSelectionItem;var _5=window[this.getTileID(_4)];if(_5&&_5.setSelected){_5.setSelected(_2)}},isc.A.widgetHandleKeyPress=function isc_TileGrid_widgetHandleKeyPress(_1,_2){if(this.isAnimating("scroll"))return false;var _3=this.selection.lastSelectionItem;if(!_3)return;var _4=_1.keyName,_5=this.selection.data.indexOf(_3),_6=this.orientation=="horizontal",_7;if(_4==this.$61i){_7=_6?this.$113j(_5,"above"):_5-1}else if(_4==this.$61j){_7=_6?this.$113j(_5,"below"):_5+1}else if(_4==this.$97z){_7=_6?_5-1:this.$113j(_5,"above")}else if(_4==this.$970){_7=_6?_5+1:this.$113j(_5,"below")}else{return}
if(_7==-1||_7>this.data.getLength()-1)return;if(_7==null)return false;var _8=this.selection.data.get(_7),_9=window[this.getTileID(_8)];if(_9){this.$1126(_9)}
return false},isc.A.$113j=function isc_TileGrid__adjacentTileIndex(_1,_2){var _3=this.selection.data,_4=_1,_5=window[this.getTileID(_3.get(_4))],_6=this.orientation=="horizontal",_7=_6?_5.getTop():_5.getLeft(),_8=_6?_5.getLeft():_5.getTop(),_9=_6?_5.getVisibleWidth():_5.getVisibleHeight(),_10=_5;while(_7==(_6?_10.getTop():_10.getLeft())){_4=_2=="above"?_4-1:_4+1;if(_4<0||_4>_3.getLength()-1){return-1}
_10=window[this.getTileID(_3.get(_4))];if(!_10)return-1}
var _11=_6?_10.getTop():_10.getLeft();var _12=-1,_13=0;while((_6?_10.getTop():_10.getLeft())==_11){var _14=_6?_10.getLeft():_10.getTop(),_15=_6?_10.getVisibleWidth():_10.getVisibleHeight(),_16=this.$113k([_8,_8+_9],[_14,_14+_15]);if(_16>_13){_12=_4;_13=_16}
_4=_2=="above"?_4-1:_4+1;if(_4<0||_4>_3.getLength()-1)break;_10=window[this.getTileID(_3.get(_4))];if(!_10)break}
return _12},isc.A.$113k=function isc_TileGrid__getCommonRange(_1,_2){if((_2[0]>=_1[0]&&_2[0]<=_1[1])||(_2[1]>=_1[0]&&_2[1]<=_1[1])||(_2[0]<=_1[0]&&_2[1]>=_1[1]))
{var _3=_2[0]>_1[0]?_2[0]:_1[0];var _4=_2[1]>_1[1]?_1[1]:_2[1];return _4-_3}
return 0},isc.A.addTile=function isc_TileGrid_addTile(){return false},isc.A.removeTile=function isc_TileGrid_removeTile(){return false},isc.A.getRecordTile=function isc_TileGrid_getRecordTile(_1){if(_1==null)return null;if(!this.data||_1>=this.data.getLength())return null;var _2=this.getTileID(this.data.get(_1));if(!_2)return null;else return window[_2]},isc.A.childVisibilityChanged=function isc_TileGrid_childVisibilityChanged(_1,_2){this.invokeSuper(isc.TileLayout,"childVisibilityChanged",_1,_2)},isc.A.hasAllVisibleTiles=function isc_TileGrid_hasAllVisibleTiles(_1,_2){if(isc.isA.ResultSet(this.data)){if(!this.data.lengthIsKnown())return false;var _3=_1[1]+1;if(_3>this.data.getLength())_3=this.data.getLength();if(this.data.rangeIsLoaded(_1[0],_3)){return true}else{if(_2){this.logDebug("in hasAllVisibleTiles, fetching range: "+_1[0]+" to "+_3+", total length: "+this.data.getLength(),"TileGrid");this.data.getRange(_1[0],_3)}
return false}}else{return true}},isc.A.$98x=function isc_TileGrid__setUpDragProperties(){this.canReorderTiles=(this.canDrag||this.canReorderTiles);this.canDragTilesOut=(this.canDrag||this.canDragTilesOut);this.canAcceptDroppedRecords=(this.canAcceptDrop||this.canAcceptDroppedRecords)
this.canDrag=(this.canDrag||this.canDragTilesOut||this.canReorderTiles);this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderTiles)},isc.A.setCanReorderTiles=function isc_TileGrid_setCanReorderTiles(_1){this.canReorderTiles=_1;this.$98x()},isc.A.setCanDragTilesOut=function isc_TileGrid_setCanDragTilesOut(_1){this.canDragTilesOut=_1;this.$98x()},isc.A.setCanAcceptDroppedRecords=function isc_TileGrid_setCanAcceptDroppedRecords(_1){this.canAcceptDroppedRecords=_1;this.$98x()},isc.A.getDragTrackerTitle=function isc_TileGrid_getDragTrackerTitle(_1){var _2=this.getTitleField(),_3=_1[_2];return"<nobr>"+_3+"</nobr>"},isc.A.drop=function isc_TileGrid_drop(){var _1=this.$112r||0;if(_1>this.data.getLength())_1=0;var _2=this.ns.EH.dragTarget;var _3=this.$112q;this.$112q=null;var _4=_2.cloneDragData();var _5=this.data.get(_1);this.transferRecords(_4,_5,_1,_2)},isc.A.dropMove=function isc_TileGrid_dropMove(){if(!this.canReorderTiles)return true;if(!this.canAcceptDroppedRecords&&isc.EH.dragTarget!=this)return true;this.showDragLineForRecord()},isc.A.dragStart=function isc_TileGrid_dragStart(){var _1=isc.EH.dropTarget;if(!this.canDragTilesOut&&_1!=null&&_1!=this){return false}
var _2=this.getSelectedRecord();if(_2==null)return false},isc.A.dragMove=function isc_TileGrid_dragMove(){var _1=this.getSelectedRecord();if(this.tileDragAppearance=="outline"){var _2=this.ns.EH;var _3=this.getTileID(_1);var _4=window[_3];var _5="<div style='width:"+_4.getVisibleWidth()+";height:"+_4.getVisibleHeight()+"'>"+_2.getDragOutline(_4).getInnerHTML()+"</div>";_2.setDragTracker(_5)}else if(this.tileDragAppearance=="target"){var _2=this.ns.EH;var _3=this.getTileID(_1);var _4=window[_3];this.detailViewer.clipValues=false;var _5="<div style='width:"+_4.getVisibleWidth()+";height:"+_4.getVisibleHeight()+"'>"+_4.getInnerHTML()+"</div>";this.detailViewer.clipValues=true;_2.setDragTracker(_5);_4.hide();this.$113l=_4;if(!_2.dragMoveAction)_2.dragMoveAction=_2.$vt;if(_2.dragTarget.showDragShadow)_2.$vu();if(_2.dragTarget.dragOpacity!=null)_2.$vv()}},isc.A.willAcceptDrop=function isc_TileGrid_willAcceptDrop(){var _1=this.ns.EH;var _2=this.Super("willAcceptDrop",arguments);if(!_2)return _2;var _3=_1.dragTarget;if(_3==this){if(!this.canReorderTiles)return false}else{if(!this.canAcceptDroppedRecords)return null}
if(!isc.isAn.Object(_3.getDragData()))return null;return true},isc.A.dragStop=function isc_TileGrid_dragStop(){this.Super("dropOut",arguments);if(this.$113l){this.$113l.show();this.$113l=null}},isc.A.getCellValue=function isc_TileGrid_getCellValue(_1,_2){return this.detailViewer.getStandaloneFieldValue(_1,_2[this.fieldIdProperty])},isc.A.getStandaloneFieldValue=function isc_TileGrid_getStandaloneFieldValue(_1,_2){var _3=this.getCellValue(_1,this.getField(_2));return _3},isc.A.getTitleFieldValue=function isc_TileGrid_getTitleFieldValue(_1){var _2=this.getDataSource(),_3=_2.getTitleField(),_4=this.getCellValue(_1,_2.getField(_3));return _4},isc.A.hideField=function isc_TileGrid_hideField(_1){this.getField(_1).showIf="false";this.getField(_1).hidden=true;this.fieldStateChanged()},isc.A.showField=function isc_TileGrid_showField(_1){this.getField(_1).showIf="true";this.getField(_1).hidden=false;this.fieldStateChanged()},isc.A.getField=function isc_TileGrid_getField(_1){if(!this.fields)return null;return isc.Class.getArrayItem(_1,this.fields,this.fieldIdProperty)},isc.A.getFields=function isc_TileGrid_getFields(){return this.fields},isc.A.getAllFields=function isc_TileGrid_getAllFields(){return this.fields},isc.A.setFieldState=function isc_TileGrid_setFieldState(_1){if(isc.isA.String(_1))_1=this.evalViewState(_1,"fieldState")
if(_1){this.completeFields=this.$16z(_1);this.setFields(_1);this.markForRedraw();this.fieldStateChanged()}},isc.A.showActionInPanel=function isc_TileGrid_showActionInPanel(_1){if(_1.name=="sort")return true;return this.Super("showActionInPanel",arguments)},isc.A.getPrintHTML=function isc_TileGrid_getPrintHTML(){var _1=isc.ResultSet&&isc.isA.ResultSet(this.data);if(_1&&!this.data.lengthIsKnown()){isc.logWarn("Attempt to print TileGrid "+this.ID+" while data is loading will be ignored");return""}
var _2=this.data.getLength();if(_1&&!this.data.rangeIsLoaded(0,_2)){isc.logWarn("Make sure all data is loaded before attempting to print TileGrid: "+this.ID);return""}
var _3;var _4=this.printTilesPerLine?this.printTilesPerLine:this.getTilesPerLine();if(this.orientation=="horizontal"){var _5=this.getInnerWidth();_3="<table width='"+_5+"'>";for(var i=0;i<_2;i++){var _7=this.getTile(i);if(i%_4==0){if(i==0)_3+="<tr>";else if(i<_2-1)_3+="</tr><tr>"}
_3+="<td>"+_7.getPrintHTML()+"</td>"}
_3+="</tr></table>"}else{_3="<table>";for(var i=0;i<_4;i++){_3+="<tr>";for(var j=i;j<_2;j+=_4){var _7=this.getTile(j);_3+="<td>"+_7.getPrintHTML()+"</td>"}
_3+="</tr>"}
_3+="</table>"}
return _3},isc.A.setShowEmptyMessage=function isc_TileGrid_setShowEmptyMessage(_1){this.showEmptyMessage=_1;this.updateEmptyMessageLabel()},isc.A.setEmptyMessage=function isc_TileGrid_setEmptyMessage(_1){this.emptyMessage=_1;var _2=this.emptyMessageLabel;if(_2)_2.setContents(_1)},isc.A.setEmptyMessageStyle=function isc_TileGrid_setEmptyMessageStyle(_1){this.emptyMessageStyle=_1;var _2=this.emptyMessageLabel;if(_2)_2.setStyleName(_1)},isc.A.updateEmptyMessageLabel=function isc_TileGrid_updateEmptyMessageLabel(){var _1=this.showEmptyMessage,_2=this.$112c&&this.$112c.length>0;if(this.emptyMessageLabel==null){if(_1)this.addAutoChild("emptyMessageLabel",{contents:this.emptyMessage,visibility:_2,styleName:this.emptyMessageStyle})}else{if(_2||!_1)this.emptyMessageLabel.hide();else this.emptyMessageLabel.show()}});isc.B._maxIndex=isc.C+89;isc.ClassFactory.defineClass("SimpleTile","StatefulCanvas");isc.A=isc.SimpleTile.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.baseStyle="simpleTile";isc.A.overflow="hidden";isc.A.showRollOver=true;isc.A.redrawOnStateChange=true;isc.A._redrawWithParent=false;isc.B.push(isc.A.getInnerHTML=function isc_SimpleTile_getInnerHTML(){var _1=this.tileGrid;if(!_1)return this.Super("getInnerHTML");_1.detailViewer.currentTile=this;this.showDown=_1.valuesShowDown;var _2=this.getRecord();if(!_2)return null;if(_1.loadingMessage!=null&&Array.isLoading(_2)){return _1.loadingMessage}
return _1.getTileHTML(_2)},isc.A.setValues=function isc_SimpleTile_setValues(_1){this.$50=true},isc.A.getRecord=function isc_SimpleTile_getRecord(){return this.tileGrid.getTileRecord(this)});isc.B._maxIndex=isc.C+3;isc.TileGrid.registerStringMethods({dataArrived:"startRecord,endRecord",selectionChanged:"record,state",itemHover:"item",itemClick:"item",recordClick:"viewer,tile,record",recordDoubleClick:"viewer,tile,record",recordContextClick:"viewer,tile,record",fieldStateChanged:""});isc.ClassFactory.defineClass("ColumnTree","Layout","DataBoundComponent");isc.A=isc.ColumnTree;isc.A.TREE_FIELD={name:"treeField",width:"*",getCellValue:function(_1,_2,_3,_4){return _1.creator.getCellValue(_1,_2,_3,_4)}};isc.A=isc.ColumnTree.getPrototype();isc.A.orientation="horizontal";isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"R"};isc.A.folderIcon="[SKIN]/folder.gif";isc.A.customIconProperty="icon";isc.A.skinImgDir="images/TreeGrid/";isc.A.nodeIcon="[SKIN]file.gif";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.showOpenIcons=true;isc.A.showCustomIconOpen=false;isc.A.customIconOpenProperty="showOpenIcon";isc.A.showColumn=true;isc.A.columnConstructor="ListGrid";isc.A.columnDefaults={animateTime:100,animateEffect:"slide",canAddFormulaFields:false,canAddSummaryFields:false,canSort:false,canGroupBy:false,showHeaderMenuButton:false,selectionChanged:function(_1,_2){if(_2){this.creator.nodeSelected(this,_1)}},bodyProperties:{$92w:function(_1,_2,_3,_4,_5){var _6="padding:0px;border:0px;";if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(!this.showHiliteInCells)
{if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);var _7=_4.firstChild;while(_7&&_7.tagName!="TABLE")_7=_7.firstChild;if(_7){_7.className=_5;if(this.getCellCSSText){_4.style.cssText=isc.StringBuffer.concat(this.$92x(_1,_2,_3,_5),this.zeroBorderPadding)}}}
return isc.GridRenderer.getPrototype().$92w.apply(this,[_1,_2,_3,_4,_5])}}};isc.A.showHeaders=false;isc.A.firstColumnTitle="&nbsp;";isc.A.showNodeCount=false;isc.A.wrapCells=false;isc.A.iconPadding=3;isc.A.ignoreEmptyCriteria=false;isc.A.backButtonTitle="Back";isc.A.backButtonDefaults={_constructor:"IButton",snapTo:"TR",left:5,top:5,autoFit:true,click:function(){this.creator.navigateBack()}};isc.A.overflow="hidden";isc.A=isc.ColumnTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1086=["<table cellpadding=0 cellspacing=0 class='",,"' style='",,"border:0px;padding:0px;'><tr><td>",,"</td>","<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>","</tr></table>"];isc.A.$1088=["<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>"];isc.A.$109c="absmiddle";isc.A.$28a={};isc.B.push(isc.A.getDynamicDefaults=function isc_ColumnTree_getDynamicDefaults(_1){if(_1=="column"){return{autoDraw:false,showHiliteInCells:true,leaveScrollbarGap:false,selectionType:"single",showHeader:false,fields:isc.clone(this.fields)}}},isc.A.initWidget=function isc_ColumnTree_initWidget(){this.Super("initWidget",arguments);if(this.showMultipleColumns==null)
this.showMultipleColumns=!isc.Browser.isHandset;this.columns=[];if(!this.dataSource&&this.data!=null&&this.data.dataSource){this.dataSource=this.data.dataSource}
if(!this.fields||this.fields.length==0){this.fields=[isc.ColumnTree.TREE_FIELD]}
if(this.showMultipleColumns==false&&this.showHeaders&&this.showBackButton!=false){this.backButton=this.createAutoChild("backButton",{title:this.backButtonTitle,disabled:true});this.addChild(this.backButton);this.backButton.bringToFront()}
this.columns[0]=this.createAutoChild("column",this.getColumnProperties(this.data?this.data.getRoot():null,0),null,false);this.addColumn(this.columns[0],0);this.currentColumn=0;if(this.data)this.populateFirstColumn()},isc.A.populateFirstColumn=function isc_ColumnTree_populateFirstColumn(){if(this.data.showRoot){this.columns[0].setData([this.data.getRoot()])}else{var _1=this.data.getChildren(this.data.getRoot());if(isc.isA.ResultSet(_1)){_1=_1.getAllLoadedRows()}
this.columns[0].setData(_1)}
if(this.shouldShowHeader(null,0)){this.columns[0].setShowHeader(true);this.columns[0].setFieldProperties(0,{title:this.getColumnTitle(null,0)})}},isc.A.treeIsTied=function isc_ColumnTree_treeIsTied(_1,_2){return false},isc.A.getSelectedRecord=function isc_ColumnTree_getSelectedRecord(){if(this.currentColumn<=0)return this.data.getRoot();var _1=this.getColumn(this.currentColumn-1);return _1.getSelectedRecord()},isc.A.navigateBack=function isc_ColumnTree_navigateBack(){if(this.currentColumn<=0)return;var _1,_2;if(this.currentColumn>=2){_1=this.getColumn(this.currentColumn-2);_2=_1.getSelectedRecord()}else{_1=this.getColumn(0);_2=this.data.getRoot()}
this.logInfo("navigating to column: "+(this.currentColumn-1)+" to node: "+this.data.getTitle(_2));this.nodeSelected(_1,_2,true)},isc.A.slideTransition=function isc_ColumnTree_slideTransition(_1,_2,_3,_4){if(!isc.Browser.isWebKit){if(_4){_2.deselectAllRecords();_2.animateShow()}else{_1.animateHide();_2.show()}
_2.bringToFront();return}
this.logInfo((_4?"right":"left")+" slideTransition from: "+_1+" to "+_2+" within "+_3);_2.hide();_3.addChild(_2);if(!_2.isDrawn())_2.draw();var _5=_1.getStyleHandle();var _6=_2.getStyleHandle();_6.setProperty("-webkit-transition","none");var _7="translate3d("+(_4?"-":"")+_3.getViewportWidth()+"px, 0%, 0%)";_6.setProperty("-webkit-transform",_7);var _8=_3.overflow;_3.setOverflow("hidden");_2.show();isc.Timer.setTimeout(function(){_5.setProperty("-webkit-transition","-webkit-transform 0.3s ease-in-out");_6.setProperty("-webkit-transition","-webkit-transform 0.3s ease-in-out");_7="translate3d("+(_4?"":"-")+_3.getViewportWidth()+"px, 0%, 0%)";_5.setProperty("-webkit-transform",_7);_6.setProperty("-webkit-transform","translate3d(0px, 0%, 0%)");isc.Timer.setTimeout(function(){_1.hide();_3.setOverflow(_8)},350)},0)},isc.A.nodeSelected=function isc_ColumnTree_nodeSelected(_1,_2,_3){if(this.onNodeSelected!=null&&(this.onNodeSelected(_1,_2)==false)){return}
var _4=this.getColumnIndex(_2),_5=this.data.isFolder(_2);var _6=_4+1;if(!_5)_6-=1;var _7=this.columns[_6];if(!this.treeIsTied(_1,_2)){if(this.showMultipleColumns!=false)this.hideColumnsToRight(_6);if(!_5)return;this.data.openFolder(_2);if(isc.isA.ListGrid(_7)){_7.deselectAllRecords();var _8=this.data.getChildren(_2);if(isc.isA.ResultSet(_8)){_8=_8.getAllLoadedRows()}
_7.setData(_8);this.addColumn(_7,_6)}else{_7=this.columns[_6]=this.createAutoChild("column",this.getColumnProperties(_2,_4+1),null,false);var _8=this.data.getChildren(_2);if(isc.isA.ResultSet(_8)){_8=_8.getAllLoadedRows()}
_7.setData(_8);this.addColumn(_7,_6)}
if(this.shouldShowHeader(_2,_6)){_7.setShowHeader(true);var _9=this.getColumnTitle(_2,_6);_7.setFieldProperties(0,{title:_9})}
if(_7.data.getLength()>0){this.updateHeadingNodeCount(_2)}}
var _10=(_3?this.columns[this.currentColumn]:_1);var _11=_7;if(this.showMultipleColumns==false){this.slideTransition(_10,_11,this,_3?true:false)}else{_11.show()}
this.currentColumn=(_6<0?0:_6);this.logInfo("currentColumn is now: "+this.currentColumn);if(this.backButton){this.backButton.bringToFront();this.backButton.setDisabled(this.currentColumn<=0)}},isc.A.addColumn=function isc_ColumnTree_addColumn(_1,_2){if(this.showMultipleColumns==false){_1.resizeTo("100%","100%");this.addChild(_1,_2)}else{this.addMember(_1,_2)}},isc.A.getCurrentTitle=function isc_ColumnTree_getCurrentTitle(){return this.columns[this.currentColumn].getFieldTitle(0)},isc.A.getPreviousTitle=function isc_ColumnTree_getPreviousTitle(){if(this.currentColumn<=0)return"";return this.columns[this.currentColumn-1].getFieldTitle(0)},isc.A.updateHeadingNodeCount=function isc_ColumnTree_updateHeadingNodeCount(_1){var _2=this.getColumnIndex(_1);if(!this.shouldShowHeader(_1,_2)||!this.showNodeCount)return;if(_2<0)return;if(this.columns[_2+1].data.getLength()==0)return;var _3=this.data.getTitle(_1);if(this.showNodeCount){_3=_3+" ("+this.columns[_2+1].data.getLength()+")"}
this.columns[_2+1].setFieldProperties(0,{title:_3})},isc.A.getColumnIndex=function isc_ColumnTree_getColumnIndex(_1){if(this.data.showRoot){return this.data.getLevel(_1)}else{var _2=this.data.getLevel(_1);return _2-1}},isc.A.hideColumnsToRight=function isc_ColumnTree_hideColumnsToRight(_1){for(var i=_1+1;i<this.columns.length;i++){this.columns[i].hide();this.columns[i].deselectAllRecords()}},isc.A.shouldShowHeader=function isc_ColumnTree_shouldShowHeader(_1,_2){return this.showHeaders},isc.A.getColumnTitle=function isc_ColumnTree_getColumnTitle(_1,_2){if(_2==0){return this.firstColumnTitle}else{return this.data.getTitle(_1)}},isc.A.getRecord=function isc_ColumnTree_getRecord(_1,_2){if(_1==null||_1<0)return null;if(_2!=null){if(_2<0||_2>this.columns.length){return null}
if(_1>this.columns[_2].data.length||!this.columns[_2].isVisible()){return null}
return this.columns[_2].data[_1]}
var _3=0;for(var _4=0;_4<this.columns.length;_4++){if(!this.columns[_4].isVisible())continue;if(_3+this.columns[_4].data.length>_1){return this.columns[_4].data[_1-_3]}
_3+=this.columns[_4].data.length}
return null},isc.A.getTreeCellValue=function isc_ColumnTree_getTreeCellValue(_1,_2,_3,_4,_5){if(_3==null){return _1}
var _6=this.$1086;_6[1]=_2.getCellStyle(_3,_4,_5);_6[3]=_2.getCellCSSText(_3,_4,_5);var _7=this.$109f(_1,_3,_4,true);for(var i=0;i<10;i++){_6[6+i]=_7[i]}
return _6.join(isc.emptyString)},isc.A.$109f=function isc_ColumnTree__getTreeCellTitleArray(_1,_2,_3,_4){var _5=this.$1088;_5[1]=null;var _6=this.getIcon(_2),_7=(_3!=null?this.$1089+_3:null);_5[2]=null;_5[3]=this.getIconHTML(_6,_7,_2.iconSize);_5[5]=this.iconPadding;_5[7]=this.wrapCells?null:"<NOBR>"
_5[8]=_1;return _5},isc.A.getCellValue=function isc_ColumnTree_getCellValue(_1,_2,_3,_4,_5,_6,_7,_8){var _9=this.getNodeTitle(_2,_3);_9=this.getTreeCellValue(_9,_1,_2,_3,_4);return _9},isc.A.getIcon=function isc_ColumnTree_getIcon(_1,_2){if(isc.isA.Number(_1))_1=this.data.get(_1);if(!_1)return null;var _3=_1[this.customIconProperty],_4=(_3!=null),_5=this.data.isFolder(_1);if(!_4){if(_5)_3=this.folderIcon;else _3=this.nodeIcon}
var _6;if(_5){var _7=_2?false:(this.lastDropFolder==_1&&_1.$109k),_8=_2?false:!!this.data.isOpen(_1);if(_7){if(_1.dropIcon!=null)_3=_1.dropIcon;else if(!_4&&this.folderDropImage!=null)_3=this.folderDropImage;else{var _9;if(_4){_9=_1[this.customIconDropProperty];if(_9==null)_9=this.showCustomIconDrop}else{_9=this.showDropIcons}
if(_9)_6=this.dropIconSuffix}}else if(_8){if(_1.openedIcon!=null)_3=_1.openedIcon;else if(!_4&&this.folderOpenImage!=null)_3=this.folderOpenImage;else{var _10;if(_4){_10=_1[this.customIconOpenProperty];if(_10==null)_10=this.showCustomIconOpen}else{_10=this.showOpenIcons}
if(_10)_6=this.openIconSuffix;else if(!_4)_6=this.closedIconSuffix}}else{if(!_4){if(this.folderClosedImage)_3=this.folderClosedImage;else _6=this.closedIconSuffix}}}else{if(!_4&&this.fileImage)_3=this.fileImage}
return isc.Img.urlForState(_3,false,false,_6)},isc.A.getIconHTML=function isc_ColumnTree_getIconHTML(_1,_2,_3){if(_1==null)return isc.emptyString;if(_3==null)_3=this.iconSize;var _4=this.$28a;_4.src=_1;_4.width=_4.height=_3;_4.name=_2;_4.align=this.$109c;var _5=this.$121(_4);_5[16]=_2;return _5.join(isc.$ba)},isc.A.getNodeTitle=function isc_ColumnTree_getNodeTitle(_1,_2,_3){return this.data.getTitle(_1)},isc.A.getData=function isc_ColumnTree_getData(){return this.data},isc.A.setData=function isc_ColumnTree_setData(_1,_2,_3,_4){if(!isc.isA.Tree(_1))return;this.data=_1;this.data.columnTree=this;this.data.setProperty("dataArrived","this.columnTree.updateHeadingNodeCount(parentNode);");this.data.setSeparateFolders(this.separateFolders);if(this.showRoot&&isc.isA.ResultTree(this.data)){this.logWarn("showRoot may not be set with a databound columnTree, unexpected results may occur")}
this.data.setShowRoot(this.showRoot);this.data.setOpenDisplayNodeType(this.displayNodeType);this.data.openFolder(this.data.root);this.hideColumnsToRight(0);this.populateFirstColumn()},isc.A.useExistingDataModel=function isc_ColumnTree_useExistingDataModel(_1,_2,_3){return false},isc.A.createDataModel=function isc_ColumnTree_createDataModel(_1,_2,_3){return this.createResultTree(_1,_3.afterFlowCallback,_3,null)},isc.A.updateDataModel=function isc_ColumnTree_updateDataModel(_1,_2,_3){},isc.A.getColumn=function isc_ColumnTree_getColumn(_1){if(isc.isAn.Object(_1)){var _2=this.getColumnIndex(_1)+1;if(this.columns[_2]&&this.columns[_2].isVisible())return this.columns[_2]}else{if(this.columns[_1]&&_1<=this.currentColumn)return this.columns[_1]}
return null},isc.A.getColumnProperties=function isc_ColumnTree_getColumnProperties(_1,_2){},isc.A.selectAllRecords=function isc_ColumnTree_selectAllRecords(_1){if(_1==null)_1=0;if(!this.columns[_1])return;this.columns[_1].selectAllRecords()},isc.A.deselectAllRecords=function isc_ColumnTree_deselectAllRecords(_1){if(_1==null)_1=0;if(!this.columns[_1])return;this.columns[_1].deselectAllRecords()},isc.A.anySelected=function isc_ColumnTree_anySelected(_1){if(_1==null)_1=0;if(!this.columns[_1])return false;return this.columns[_1].anySelected()},isc.A.getSelection=function isc_ColumnTree_getSelection(_1){if(_1==null)_1=0;if(!this.columns[_1])return[];return this.columns[_1].getSelection()},isc.A.getSelectionObject=function isc_ColumnTree_getSelectionObject(_1){if(_1==null)_1=0;if(!this.columns[_1])return null;return this.columns[_1].selection});isc.B._maxIndex=isc.C+35;isc.ColumnTree.registerStringMethods({nodeSelected:"column, node",onNodeSelected:"column,node"})
isc.ClassFactory.defineClass("TableView","ListGrid");isc.A=isc.TableView;isc.A.PLAIN="plain";isc.A.GROUPED="grouped";isc.A.TITLE_ONLY="titleOnly";isc.A.TITLE_DESCRIPTION="titleAndDescription";isc.A.SUMMARY_INFO="summaryInfo";isc.A.SUMMARY_DATA="summaryData";isc.A.SUMMARY_FULL="summaryFull";isc.A.WHOLE_RECORD="wholeRecord";isc.A.NAVICON_ONLY="navIconOnly";isc.A=isc.TableView.getPrototype();isc.A.iconField="icon";isc.A.showIconField=true;isc.A.titleField="title";isc.A.infoField="info";isc.A.dataField="data";isc.A.descriptionField="description";isc.A.recordNavigationProperty="$113m";isc.A.tableMode=isc.TableView.PLAIN;isc.A.recordLayout=isc.TableView.TITLE_ONLY;isc.A.navIcon="[SKINIMG]/iOS/listArrow_button.png";isc.A.wholeRecordNavIcon="[SKINIMG]/iOS/listArrow.png";isc.A.navigationMode=isc.TableView.WHOLE_RECORD;isc.A.recordTitleStyle="recordTitle";isc.A.recordDescriptionStyle="recordDescription";isc.A.recordDataStyle="recordData";isc.A.recordInfoStyle="recordInfo";isc.A.iconFieldDefaults={width:50,imageSize:30,align:"center",type:"image"};isc.A.titleFieldDefaults={name:"TVtitleField",width:"*",type:"text",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.formatRecord!=null){return _5.formatRecord(_2)}
var _6=_5.$113n(_2,_5.titleField),_7=_5.$113n(_2,_5.descriptionField),_8=_5.$113n(_2,_5.infoField),_9=_5.$113n(_2,_5.dataField),_10="";if(_5.recordLayout==isc.TableView.SUMMARY_INFO||_5.recordLayout==isc.TableView.SUMMARY_FULL)
{_10+="<span class='"+_5.recordInfoStyle+"'>"+_8+"</span>"}
_10+="<span class='"+_5.recordTitleStyle+"'>"+_6+"</span>";if(_5.recordLayout!=isc.TableView.TITLE_ONLY){_10+="<span class='"+_5.recordDescriptionStyle+"'>"+_7+"</span>"}
if(_5.recordLayout==isc.TableView.SUMMARY_DATA||_5.recordLayout==isc.TableView.SUMMARY_FULL)
{_10+="<span class='"+_5.recordDataStyle+"'>"+_9+"</span>"}
return _10}};isc.A.navigationFieldDefaults={name:"TVnavigationField",width:54,align:"right",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.getShowNavigation(_2)){var _6=isc.Img.create({autoDraw:false,autoFit:true,imageType:"normal",src:_5.getNavigationIcon(_2)});return _6.getInnerHTML()}
return _5.$1w}};isc.A.groupByFieldDefaults={showIf:"false"};isc.A.canAddFormulaFields=false;isc.A.canAddSummaryFields=false;isc.A.showHeader=false;isc.A.selectionType="none";isc.A.skinImgDir="images/iOS/";isc.A.baseStyle="tableCell";isc.A.border="0px";isc.A.wrapCells=false;isc.A.cellHeight=44;isc.A.alternateRecordStyles=false;isc.A.canCollapseGroup=false;isc.A.groupStartOpen="all";isc.A.ignoreEmptyCriteria=false;isc.A=isc.TableView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_TableView_initWidget(){this.Super("initWidget",arguments);this.$113o={}},isc.A.setFields=function isc_TableView_setFields(_1){this.invokeSuper(isc.TableView,"setFields",this.$113p(_1))},isc.A.$113p=function isc_TableView__defineTableFields(_1){var _2=_1||[];for(var i=0;i<_2.length;i++){_2[i].showIf="false"}
if(this.showIconField){var _4=_2.find(this.fieldIdProperty,this.iconField);if(_4)_2.remove(_4);this.$113q=_2.length;_2[_2.length]=isc.addProperties({name:this.iconField},this.iconFieldDefaults,this.iconFieldProperties)}
var _4=_2.find(this.fieldIdProperty,this.titleFieldDefaults.name);if(_4)_2.remove(_4);_2[_2.length]=isc.addProperties({},this.titleFieldDefaults,this.titleFieldProperties);var _4=_2.find(this.fieldIdProperty,this.navigationFieldDefaults.name);if(_4)_2.remove(_4);this.$113r=_2.length;_2[_2.length]=isc.addProperties({},this.navigationFieldDefaults,this.navigationFieldProperties);if(this.groupByField){var _5;if(isc.isA.Array(this.groupByField)){_5=this.groupByField}else{_5=[this.groupByField]}
for(var i=0;i<_5.length;i++){var _6=_2.find(this.fieldIdProperty,_5[i]);if(_6){isc.addProperties(_6,this.groupByFieldDefaults,this.groupByFieldProperties)}else{_2[_2.length]=isc.addProperties({name:_5[i]},this.groupByFieldDefaults,this.groupByFieldProperties)}}}
return _2},isc.A.$113n=function isc_TableView__getFormattedFieldValue(_1,_2){var _3=_1[_2]||this.$1w,_4=this.$113o[_2],_5;if(_4==null||_4==_5){_4=isc.Class.getArrayItemIndex(_2,this.getAllFields(),this.fieldIdProperty);this.$113o[_2]=_4}
if(_4>=0){_3=this.getFormattedValue(_1,_2,_3)}
return _3},isc.A.getNavigationIcon=function isc_TableView_getNavigationIcon(_1){return(this.navigationMode==isc.TableView.NAVICON_ONLY?this.navIcon:this.wholeRecordNavIcon)},isc.A.getShowNavigation=function isc_TableView_getShowNavigation(_1){if(_1&&_1[this.recordNavigationProperty]!=null){return _1[this.recordNavigationProperty]}
return this.showNavigation},isc.A.recordClick=function isc_TableView_recordClick(_1,_2,_3,_4,_5,_6,_7){if(_5!=this.$113q&&_5!=this.$113r&&this.canSelectRecord(_2))
{this.selectSingleRecord(_2)}
if(_5==this.$113r||this.navigationMode==isc.TableView.WHOLE_RECORD){if(this.recordNavigationClick!=null){this.recordNavigationClick(_2)}}else if(_5==this.$113q){if(this.imageClick!=null){this.imageClick(_2)}}},isc.A.getBaseStyle=function isc_TableView_getBaseStyle(_1,_2,_3){if(this.isGrouped){var _4=this.data.get(_2),_5=this.data.isFirst(_4),_6=this.data.isLast(_4);if(_5&&_6){return(_3==0?"cellOnlyLeft":(_3==this.fields.length-1?"cellOnlyRight":"cellOnly"))}else if(_5){return(_3==0?"cellTopLeft":(_3==this.fields.length-1?"cellTopRight":"cellTop"))}else if(_6){return(_3==0?"cellBottomLeft":(_3==this.fields.length-1?"cellBottomRight":"cellBottom"))}}
return this.Super("getBaseStyle",arguments)});isc.B._maxIndex=isc.C+8;isc.TableView.registerStringMethods({recordNavigationClick:"record",imageClick:"record",formatRecord:"record"});isc.ClassFactory.defineClass("DOMTree","Tree");isc.A=isc.DOMTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tagNameProperty="tagName";isc.A.elementProperty="$378";isc.A.loadOnInit=true;isc.A.loadDataOnDemand=true;isc.A.hideTextNodes=true;isc.B.push(isc.A.makeRoot=function isc_DOMTree_makeRoot(){var _1=this.Super("makeRoot",arguments);_1[this.elementProperty]=this.rootElement;return _1},isc.A.getElement=function isc_DOMTree_getElement(_1){return _1[this.elementProperty]},isc.A.getElementTitle=function isc_DOMTree_getElementTitle(_1){var _2=_1.getAttribute(this.titleProperty);if(!this.valueIsEmpty(_2))return _2;_2=_1.getAttribute(this.nameProperty);if(!this.valueIsEmpty(_2))return _2;if(!isc.xml.hasElementChildren(_1)){_2=isc.xml.getElementText(_1);if(!this.valueIsEmpty(_2))return _2}
return _1.tagName||_1.nodeName},isc.A.valueIsEmpty=function isc_DOMTree_valueIsEmpty(_1){return _1==null||isc.isAn.emptyString(_1)},isc.A.isFolder=function isc_DOMTree_isFolder(_1){if(_1==this.root||_1.children!=null)return true;var _2=_1[this.elementProperty];if(!_2||!_2.childNodes||_2.childNodes.length==0)return false;if(!this.hideTextNodes)return true;return isc.xml.hasElementChildren(_2)},isc.A.moveList=function isc_DOMTree_moveList(_1,_2,_3){var _4=_1[0],_5=this.getElement(_4);this.logWarn("moveList: "+this.echoAll(_1)+", newParent: "+this.echo(_2)+", index: "+_3);this.$113s(_5,_2,_3);this.Super("moveList",arguments)},isc.A.remove=function isc_DOMTree_remove(_1){var _2=this.getElement(_1);_2.parentNode.removeChild(_2);return this.Super("remove",arguments)},isc.A.addElement=function isc_DOMTree_addElement(_1,_2,_3){this.$113s(_1,_2,_3);if(this.isLoaded(_2)){var _4=this.nodeForElement(_1);this.add(_4,_2,_3)}else{this.dataChanged()}},isc.A.$113s=function isc_DOMTree__addToDOM(_1,_2,_3){var _4=this.getElement(_2);if(_3==null){this.logWarn("appending: "+this.echoLeaf(_1)+" to: "+this.echoLeaf(_4));_4.appendChild(_1)}else{var _5=this.getChildren(_2)[_3],_6=this.getElement(_5);this.logWarn("inserting into: "+this.echoLeaf(_4)+", before: "+this.echoLeaf(_6));_4.insertBefore(_1,_6)}},isc.A.nodeForElement=function isc_DOMTree_nodeForElement(_1){var _2={};_2[this.elementProperty]=_1;_2[this.titleProperty]=this.getElementTitle(_1);if(this.tagNameProperty){_2[this.tagNameProperty]=_1.tagName||_1.nodeName}
if(this.copyAttributes){for(var j=0;j<this.copyAttributes.length;j++){var _4=this.copyAttributes[j];_2[_4]=_1.getAttribute(_4)}}
return _2},isc.A.loadChildren=function isc_DOMTree_loadChildren(_1){if(this.isLoaded(_1))return;try{var _2=_1.$378;if(_2==null)return;var _3=_2.childNodes;if(isc.Browser.isMoz&&_2.contentDocument){_3=[_2.contentDocument.documentElement]}else{if(this.loadingBatch()&&!isc.xml.hasElementChildren(_2))return}
_1[this.openProperty]=true;if(_3!=null){for(var i=0;i<_3.length;i++){var _5=_3[i];if(this.hideTextNodes&&_5.nodeName.startsWith("#"))continue;var _6=this.nodeForElement(_5);this.add(_6,_1)}}
this.setLoadState(_1,isc.Tree.LOADED)}catch(e){this.logWarn("parent node: "+this.echo(_1)+", at path: "+this.getPath(_1)+", error: "+this.echo(e)+this.getStackTrace())}});isc.B._maxIndex=isc.C+11;isc.defineClass("DOMGrid","TreeGrid");isc.A=isc.DOMGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.canAcceptDroppedRecords=true;isc.A.canReorderRecords=true;isc.A.showRoot=true;isc.A.$kr="&lt;";isc.A.$kw="&gt;";isc.A.$113t=[" ",,'="',,'"'];isc.A.colorMap={table:"#009900",tr:"#333399",td:"#663366",form:"#CC6600",input:"#3333FF",textarea:"#3333FF",div:"#663300",span:"#663300"};isc.A.colorPrefix="color:";isc.A.$113u={};isc.B.push(isc.A.initWidget=function isc_DOMGrid_initWidget(){this.Super(this.$1v,arguments);if(this.url){isc.xml.loadXML(this.url,this.getID()+".setRootElement(xmlDoc.documentElement)")}},isc.A.getDefaultData=function isc_DOMGrid_getDefaultData(){return null},isc.A.getElement=function isc_DOMGrid_getElement(_1){return this.data.getElement(_1)},isc.A.setRootElement=function isc_DOMGrid_setRootElement(_1){this.rootElement=_1;var _2=isc.DOMTree.create({rootElement:_1});this.setData(_2)},isc.A.getIcon=function isc_DOMGrid_getIcon(){},isc.A.getNodeTitle=function isc_DOMGrid_getNodeTitle(_1,_2,_3){if(_1==null)return null;if(_1.$38e)return _1.$38e;var _4=this.htmlMode?this.$113v(_1):this.$113w(_1);return(_1.$38e=_4)},isc.A.dataChanged=function isc_DOMGrid_dataChanged(){this.Super("dataChanged",arguments);this.data.getOpenList().setProperty("$38e",null)},isc.A.$113w=function isc_DOMGrid__getXMLNodeTitle(_1){if(_1.$378==null){this.logWarn("no element for node: "+this.echo(_1))}
var _2=_1.$378,_3=isc.emptyString,_4=this.$113x;if(_4==null)_4=this.$113x=isc.SB.create();else _4.clear();_4.append(this.$kr,(_2.tagName||_2.nodeName));var _5=_2.attributes;if(_5!=null){var _6=this.$113t;for(var i=0;i<_5.length;i++){var _8=_5[i];_6[1]=_8.name;_6[3]=_8.value;_4.append(_6)}}
if(!isc.xml.hasElementChildren(_2)){_4.append(this.$kw,isc.xml.getElementText(_2),"&lt;/",(_2.tagName||_2.nodeName),this.$kw)}else if(_2.childNodes.length>0){_4.append(this.$kw)}else{_4.append("/&gt;")}
return _4.toString()},isc.A.$113v=function isc_DOMGrid__getHTMLNodeTitle(_1){var _2=_1.$378,_3=isc.emptyString,_4,_5;if(isc.Browser.isIE&&_2.scopeName=="VML"){_4=(_2.style?_2.style.width:null);_5=(_2.style?_2.style.height:null)}else{_4=_2.width||(_2.style?_2.style.width:null);_5=_2.height||(_2.style?_2.style.height:null)}
var _6=(_2.tagName&&_2.tagName.toLowerCase()=="td");return isc.SB.concat(this.$kr,(_2.tagName||_2.nodeName),(_2.id?" ID="+_2.id:_3),(!this.valueIsEmpty(_4)?" WIDTH="+_4:_3),(!this.valueIsEmpty(_5)?" HEIGHT="+_5:_3),(_6&&_2.rowSpan>1?" ROWSPAN="+_2.rowSpan:_3),(_6&&_2.colSpan>1?" COLSPAN="+_2.colSpan:_3),this.$kw)},isc.A.valueIsEmpty=function isc_DOMGrid_valueIsEmpty(_1){return _1==null||isc.isAn.emptyString(_1)},isc.A.getCellCSSText=function isc_DOMGrid_getCellCSSText(_1,_2,_3){var _4=this.data.getElement(_1);if(_4==null)return null;var _5=_4.tagName;if(_5==null)return null;if(this.$113u[_5]){_5=this.$113u[_5]}else{this.$113u=_5=_5.toLowerCase()}
if(this.colorMap[_5]!=null){return isc.SB.concat(this.colorPrefix,this.colorMap[_5],isc.semi)}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("MenuBar","Toolbar");isc.addGlobal("Menubar",isc.MenuBar);isc.A=isc.MenuBar.getPrototype();isc.A.overflow=isc.Canvas.VISIBLE;isc.A.defaultHeight=22;isc.A.menuConstructor="Menu";isc.A.buttonConstructor="MenuBarButton";isc.A.tabIndex=-1;isc.A.tabWithinToolbar=false;isc.A.buttonDefaults={showDown:false,showRollOver:true,showFocused:true,showFocusedAsOver:true};isc.A=isc.MenuBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_MenuBar_initWidget(){this.Super("initWidget",arguments)},isc.A.setButtons=function isc_MenuBar_setButtons(){var _1=[];if(this.menus){for(var i=0;i<this.menus.length;i++){var _3=this.menus[i];_1[i]=this.$113y(_3,i)}}
return this.Super("setButtons",[_1],arguments)},isc.A.$113y=function isc_MenuBar__getButtonProperties(_1,_2,_3){return{title:_1.title,width:(_1.menuButtonWidth?_1.menuButtonWidth:(!_3?_1.width:null)),menuNum:_2,focusChanged:function(_4){if(isc.Browser.isMoz&&_4)this.bringToFront()}}},isc.A.setMenus=function isc_MenuBar_setMenus(_1){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<this.members.length;i++){var _3=this.members[i],_4=this.menus[_3.menuNum];if(_3.isObserving(_4,"hide")){_3.ignore(_4,"hide")}}
this.menus=_1;this.setButtons()},isc.A.$113z=function isc_MenuBar__remapButton(_1,_2){if(!_1)return;if(_2==-1){var _3=_1.menuNum,_4=this.menus[_1.menuNum];if(_1.isObserving(_4,"hide")){_1.ignore(_4,"hide")}}
_1.menuNum=_2},isc.A.addMenu=function isc_MenuBar_addMenu(_1,_2){return this.addMenus([_1],_2,true)},isc.A.addMenus=function isc_MenuBar_addMenus(_1,_2,_3){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];if(!this.menus)this.menus=[];if(_2==null)_2=this.menus.length;if(!this.$30f){this.menus.addListAt(_1,_2)}else{for(var i=_2;i<this.members.length;i++){this.$113z(this.members[i],(i+_1.length))}
this.menus.addListAt(_1,_2);var _5=[];for(var i=0;i<_1.length;i++){var _6=this.menus.indexOf(_1[i]);_5[i]=this.$113y(_1[i],_6,_3)}
this.addButtons(_5,_2)}},isc.A.removeMenus=function isc_MenuBar_removeMenus(_1){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _2=[],_3=this.menus.duplicate();for(var i=0;i<_1.length;i++){var _5=_1[i];if(isc.isA.Number(_5))_5=this.menus[_5];else if(!this.menus.contains(_5))continue;_3.remove(_5);var _6=this.menus.indexOf(_5);if(this.$30f)_2.add(this.members[_6])}
if(!this.$30f){this.menus=_3;return}
for(var i=0;i<this.menus.length;i++){if(this.menus[i]==_3[i])continue;this.$113z(this.members[i],_3.indexOf(this.menus[i]))}
this.menus=_3;this.removeButtons(_2)},isc.A.showMenu=function isc_MenuBar_showMenu(_1){var _2;if(isc.isA.Number(_1))_2=this.menus[_1];else{_2=_1;_1=this.menus.indexOf(_2)}
if(!_2){this.logWarn("showMenu() called with invalid menu number: "+_1+".  No effect.");return}
var _3;for(var i=0;i<this.members.length;i++){if(this.members[i].menuNum==_1){_3=this.members[i]}}
if(!isc.isA.Canvas(_2)){if(_2.ID==null)_2.ID=this.getID()+"_menu"+_1;_2.autoDraw=false;_2=this.menus[_1]=isc.ClassFactory.newInstance(this.menuConstructor,_2,this.menuDefaults)}
if(this.activeMenu!=null){this.menus[this.activeMenu].hideMenuTree()}
_2.keyEventParent=this;if(!this.vertical){_2.moveTo(_3.getPageLeft(),_3.getPageBottom())}else{_2.moveTo(_3.getPageRight(),_3.getPageTop())}
_2.show();_3.$1130=_3.showRollOver;_3.showRollOver=false;_3.setState(isc.StatefulCanvas.STATE_DOWN);this.activeMenu=_1;if(!_3.isObserving(_2,"hide")){_3.observe(_2,"hide","observer.menuHidden(observed)")}
var _5=isc.EH;if(_5.targetIsMasked(this))this.bringToFront();var _6=_5.clickMaskRegistry.last(),_7=_5.getMaskedFocusCanvas(_6);if(this.members.contains(_7))_5.setMaskedFocusCanvas(null,_6);if(!isc.Browser.isTouch){if(_2.body!=null)_2.body.focusOnHide=_3;else{if(_2.bodyProperties==null)_2.bodyProperties={};_2.bodyProperties.focusOnHide=_3}}},isc.A.$30g=function isc_MenuBar__focusInNextButton(_1){if(!this.activeMenu==null)return this.Super("$30g",arguments);if(_1==null)_1=true;var _2=this.activeMenu,_3=_1?1:-1,_4=_2+_3,_5=this.getMembers();while(_2!=_4){if(_4<0)_4=_5.length-1;else if(_4>=this.members.length)_4=0;var _6=_5[_4];if(!_6.isDisabled()){_6.showMenu();break}
_4+=_3}},isc.A.getFocusButtonIndex=function isc_MenuBar_getFocusButtonIndex(){if(this.activeMenu!=null)return this.activeMenu;return this.Super("getFocusButtonIndex",arguments)});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("MenuBarButton","MenuButton");isc.A=isc.MenuBarButton.getPrototype();isc.A.showMenuButtonImage=false;isc.A.showDown=false;isc.A.autoDraw=false;isc.A.align="center";isc.A=isc.MenuBarButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mouseOver=function isc_MenuBarButton_mouseOver(){this.Super("mouseOver",arguments);var _1=this.parentElement.activeMenu;if(_1!=null&&_1!=this.menuNum){this.showMenu()}},isc.A.mouseDown=function isc_MenuBarButton_mouseDown(){if(this.parentElement.activeMenu==this.menuNum){isc.Menu.hideAllMenus()}else{this.showMenu()}},isc.A.mouseUp=function isc_MenuBarButton_mouseUp(){},isc.A.click=function isc_MenuBarButton_click(){},isc.A.handleClick=function isc_MenuBarButton_handleClick(_1,_2){if(this.click!=null){return this.click(_1,_2)}},isc.A.mouseOut=function isc_MenuBarButton_mouseOut(){if(this.parentElement.activeMenu!=this.menuNum){this.Super("mouseOut",arguments)}},isc.A.handleKeyPress=function isc_MenuBarButton_handleKeyPress(_1,_2){if(_1.keyName=="Space"||_1.keyName=="Enter")return this.showMenu();if(this.keyPress){this.convertToMethod("keyPress");return this.keyPress(_1,_2)}},isc.A.showMenu=function isc_MenuBarButton_showMenu(){this.parentElement.showMenu(this.menuNum)},isc.A.menuHidden=function isc_MenuBarButton_menuHidden(_1){if(isc.$et)arguments.$eu=this;if(this.state==isc.StatefulCanvas.STATE_DOWN){if(this.hasFocus&&this.showFocused)this.setState(isc.StatefulCanvas.STATE_OVER);else this.setState(isc.StatefulCanvas.STATE_UP)}
this.showRollOver=this.$1130;delete this.$1130;this.menuIsDown=false;if(this.parentElement.activeMenu==this.menuNum){this.parentElement.activeMenu=null}
delete _1.eventParent;this.ignore(_1,"hide")});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("CellSelection");isc.A=isc.CellSelection;isc.A.$88a=0;isc.A.COL_SELECTION_FLAGS=null;isc.A=isc.CellSelection;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.generateFlagTable=function isc_c_CellSelection_generateFlagTable(){isc.CellSelection.COL_SELECTION_FLAGS=[];for(var i=0;i<32;i++)
isc.CellSelection.COL_SELECTION_FLAGS[i]=Math.pow(2,i)});isc.B._maxIndex=isc.C+1;isc.A=isc.CellSelection.getPrototype();isc.A.data=null;isc.A.numCols=0;isc.A.selectionProperty=null;isc.A.$50=true;isc.A.$1131=[];isc.A.lastSelectedCell=[];isc.A.changedCells=[];isc.A=isc.CellSelection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cellRecordMode="cell";isc.B.push(isc.A.init=function isc_CellSelection_init(){if(!isc.CellSelection.COL_SELECTION_FLAGS)isc.CellSelection.generateFlagTable();if(!this.selectionProperty)this.selectionProperty="_cellSelection_"+isc.CellSelection.$88a++;this.setData((this.data?this.data:[]))},isc.A.setData=function isc_CellSelection_setData(_1){if(this.data!=null)this.ignoreData(this.data);this.data=_1;if(this.data!=null)this.observeData(this.data)},isc.A.observeData=function isc_CellSelection_observeData(_1){this.observe(_1,"dataChanged","observer.$50 = true")},isc.A.ignoreData=function isc_CellSelection_ignoreData(_1){this.ignore(_1,"dataChanged")},isc.A.cellIsSelected=function isc_CellSelection_cellIsSelected(_1,_2){var _3=isc.isAn.Object(_1)?_1:this.data.get(_1),_4=(_3?_3[this.selectionProperty]:null),_5=(_4?_4[Math.floor(_2/32)]:null),_6=isc.CellSelection.COL_SELECTION_FLAGS[_2%32];return(_5!=null&&((_5&_6)!=0))},isc.A.rowHasSelection=function isc_CellSelection_rowHasSelection(_1){var _2=this.data.get(_1),_3=(_2?_2[this.selectionProperty]:null),_4=Math.ceil(this.numCols/32);if(!_2||!_2[this.selectionProperty])return false;for(var i=0;i<_4;i++){if(_3[i])return true}
return false},isc.A.colHasSelection=function isc_CellSelection_colHasSelection(_1){if(_1>this.numCols-1)return false;var _2=isc.CellSelection.COL_SELECTION_FLAGS[_1%32],_3=Math.floor(_1/32),_4=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_4)&&!_4.lengthIsKnown()){return false}
var _5=_4.getLength();for(var i=0;i<_5;i++){var _7=_4.getCachedRow(i);if(_7==null)continue;var _8=_7[this.selectionProperty];if(!_8)continue;if(_8&&_8[_3]&&((_8[_3]&_2)!=0)){return true}}
return false},isc.A.anySelected=function isc_CellSelection_anySelected(){if(!this.$50)return(this.selectedCells!=null&&this.$1131.length>0);var _1=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_1)&&!_1.lengthIsKnown()){return false}
var _2=Math.ceil(this.numCols/32);var _3=_1.getLength();for(var i=0;i<_3;i++){var _5=_1.getCachedRow(i);if(_5==null)continue;var _6=_5[this.selectionProperty];if(!_6)continue;for(var j=0;j<_2;j++){if(_6[j])return true}}
return false},isc.A.getSelectedCells=function isc_CellSelection_getSelectedCells(){if(!this.$50)return this.$1131;var _1=[],_2=this.data,_3=isc.CellSelection.COL_SELECTION_FLAGS,_4=Math.ceil(this.numCols/32),_5=_2.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_2)&&!_2.lengthIsKnown()){this.$50=false;return _1}
for(var i=0;i<_5;i++){var _7=_2.getCachedRow(i);if(_7==null)continue;var _8=_7[this.selectionProperty];if(!_8)continue;for(var j=0,_10,_11;j<_4;j++){_10=_8[j];if(!_10)continue;_11=(j==_4-1&&this.numCols%32!=0)?this.numCols%32:32;for(var k=0;k<_11;k++){if((_10&_3[k])!=0){_1[_1.length]=[i,j*32+k]}}}}
this.$1131=_1;this.$50=false;return _1},isc.A.getSelectionRowNums=function isc_CellSelection_getSelectionRowNums(){var _1=[],_2=Math.ceil(this.numCols/32),_3=this.data,_4=_3.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_3)&&!_3.lengthIsKnown()){return _1}
for(var i=0;i<_4;i++){var _6=_3.getCachedRow(i);if(_6==null)continue;var _7=_6[this.selectionProperty];if(!_7)continue;for(var j=0,_9;j<_2;j++){if(_7[j]){_1[_1.length]=i;break}}}
return _1},isc.A.getSelectedRecord=function isc_CellSelection_getSelectedRecord(){if(this.cellRecordMode=="cell")return this.getSelection()[0];var _1=this.getSelectionRowNums(),_2=_1.length==0?null:_1[0],_3=_2==null?null:this.data.get(_2);return _3},isc.A.getSelection=function isc_CellSelection_getSelection(){if(this.cellRecordMode=="cell"){var _1=this.getSelectedCells();if(_1==null)return null;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=this.target.getCellRecord(_4[0],_4[1]);if(_5==null)continue;_2.add(_5)}
return _2}else{var _6=this.getSelectionRowNums(),_7=[];if(_6&&_6.length>0){for(var i=0;i<_6.length;i++){var _8=this.data.get(_6[i]);if(_8==null)continue;_7.add(_8)}}
return _7}},isc.A.selectList=function isc_CellSelection_selectList(_1,_2){if(_2==null)_2=true;if(!_1)return false;for(var i=0;i<_1.length;i++){var _4=_1.get(i),_5=this.data.indexOf(_4);if(_5==null||_5<0)continue;if(_2)this.selectRow(_5);else this.deselectRow(_5)}},isc.A.getSelectionColNums=function isc_CellSelection_getSelectionColNums(){var _1=[],_2=[],_3=isc.CellSelection.COL_SELECTION_FLAGS,_4=Math.ceil(this.numCols/32),_5=this.data,_6=_5.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_5)&&!_5.lengthIsKnown()){return _1}
for(var i=0;i<_6;i++){var _8=_5.getCachedRow(i);if(_8==null)continue;var _9=_8[this.selectionProperty];if(!_9)continue;for(var j=0,_11;j<_4;j++){if(_9[j]){_2[j]=_2[j]|_9[j]}}}
if(_2.length==0)return _1;for(var i=0,_12=this.numCols;i<_12;i++){if((_2[Math.floor(i/32)]&_3[i%32])!=0)
_1[_1.length]=i}
return _1},isc.A.getSelectionBounds=function isc_CellSelection_getSelectionBounds(){var _1=this.getSelectionRowNums(),_2=this.getSelectionColNums();return[_1.first(),_2.first(),_1.last(),_2.last()]},isc.A.canSelectCell=function isc_CellSelection_canSelectCell(_1,_2){return false},isc.A.$1132=function isc_CellSelection__setCellSelection(_1,_2,_3){if(_3&&!this.cellIsSelected(_1,_2)){if(!this.target.canSelectCell(_1,_2)){return false}}
var _4=this.data.getCachedRow(_1);if(_4==null)return false;var _5=(_4?_4[this.selectionProperty]:null),_6=Math.floor(_2/32),_7=(_5?_5[Math.floor(_2/32)]:0),_8=isc.CellSelection.COL_SELECTION_FLAGS[_2%32];if(!_4||_2>this.numCols-1)return false;if(_4.enabled==false)return false;if(_5==null){_5=_4[this.selectionProperty]=[];for(var i=0,_10=Math.ceil(this.numCols/32);i<_10;i++)_5[i]=0}
else if(_7==null){_5[_6]=0}
if(((_7&_8)!=0)==_3)return false;_5[_6]=_7^_8;if(_3)this.lastSelectedCell=[_1,_2];this.$50=true;return true},isc.A.setCellRangeSelection=function isc_CellSelection_setCellRangeSelection(_1,_2,_3,_4,_5){this.changedCells=this.$1133(_1,_2,_3,_4,_5);return this.$1134()},isc.A.$1133=function isc_CellSelection__setCellRangeSelection(_1,_2,_3,_4,_5){var _6=[],_7,_8,_9,_10;var _11=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_11)&&!_11.lengthIsKnown()){return _6}
if(_1<=_3){_7=_1;_8=_3}else{_7=_3;_8=_1}
if(_2<=_4){_9=_2;_10=_4}else{_9=_4;_10=_2}
if(this.logIsDebugEnabled()){this.logDebug((_5?"selecting ":"deselecting ")+[_7,_9]+" through "+[_8,_10])}
for(var _12=_7;_12<=_8;_12++){for(var _13=_9;_13<=_10;_13++){if(this.$1132(_12,_13,_5)){_6[_6.length]=[_12,_13]}}}
return _6},isc.A.setCellListSelection=function isc_CellSelection_setCellListSelection(_1,_2){if(!_1)return false;var _3=[];for(var i=0,_5=_1.length,_6,_7;i<_5;i++){_6=_1[i][0];_7=_1[i][1];if(this.$1132(_6,_7,_2))
_3[_3.length]=[_6,_7]}
this.changedCells=_3;return this.$1134()},isc.A.$1134=function isc_CellSelection__cellSelectionsChanged(){if(this.changedCells.length>0){this.selectionChanged();return true}else
return false},isc.A.$1135=function isc_CellSelection__updateSelectionOrigin(_1,_2,_3){var _4=isc.isA.GridBody(_1)?_1.grid:_1;var _5=this.originRow,_6=this.originCol;if(_2!=null&&_3!=null){this.originRow=_2;this.originCol=_3;_4.refreshCellStyle(_2,_3)}else{delete this.originRow;delete this.originCol}
if(_5!=null&&_6!=null){_4.refreshCellStyle(_5,_6)}},isc.A.$103g=function isc_CellSelection__validateSelectionOrigin(_1){if(this.originRow==null||this.originCol==null)return false;if(!this.cellIsSelected(this.originRow,this.originCol)){this.$1135(_1);return false}
var _2=isc.isA.GridBody(_1)?_1.grid:_1;_2.refreshCellStyle(this.originRow,this.originCol);return true},isc.A.$1012=function isc_CellSelection__isCellSelectionOrigin(_1,_2){if(this.originRow!=_1||this.originCol!=_2)return false;return this.cellIsSelected(_1,_2)},isc.A.selectionChanged=function isc_CellSelection_selectionChanged(){},isc.A.setCellSelection=function isc_CellSelection_setCellSelection(_1,_2,_3){if(this.$1132(_1,_2,_3)){this.changedCells=[[_1,_2]];this.selectionChanged();return true}else
return false},isc.A.selectCell=function isc_CellSelection_selectCell(_1,_2){return this.setCellSelection(_1,_2,true)},isc.A.deselectCell=function isc_CellSelection_deselectCell(_1,_2){return this.setCellSelection(_1,_2,false)},isc.A.selectCellRange=function isc_CellSelection_selectCellRange(_1,_2,_3,_4){this.changedCells=this.$1133(_1,_2,_3,_4,true);return this.$1134()},isc.A.deselectCellRange=function isc_CellSelection_deselectCellRange(_1,_2,_3,_4){this.changedCells=this.$1133(_1,_2,_3,_4,false);return this.$1134()},isc.A.selectRow=function isc_CellSelection_selectRow(_1){return this.selectCellRange(_1,0,_1,this.numCols-1)},isc.A.deselectRow=function isc_CellSelection_deselectRow(_1){return this.deselectCellRange(_1,0,_1,this.numCols-1)},isc.A.selectCol=function isc_CellSelection_selectCol(_1){return this.selectCellRange(0,_1,this.data.getLength()-1,_1)},isc.A.deselectCol=function isc_CellSelection_deselectCol(_1){return this.deselectCellRange(0,_1,this.data.getLength()-1,_1)},isc.A.selectAll=function isc_CellSelection_selectAll(){return this.selectCellRange(0,0,this.data.getLength()-1,this.numCols-1)},isc.A.deselectAll=function isc_CellSelection_deselectAll(){return this.deselectCellRange(0,0,this.data.getLength()-1,this.numCols-1)},isc.A.selectCellList=function isc_CellSelection_selectCellList(_1){return this.setCellListSelection(_1,true)},isc.A.deselectCellList=function isc_CellSelection_deselectCellList(_1){return this.setCellListSelection(_1,false)},isc.A.selectSingleCell=function isc_CellSelection_selectSingleCell(_1,_2){var _3=this.cellIsSelected(_1,_2);this.changedCells=this.$1133(0,0,this.data.getLength()-1,this.numCols-1,false);this.$1132(_1,_2,true);if(!_3&&_1>=0)
this.changedCells[this.changedCells.length]=[_1,_2];return this.$1134()},isc.A.selectSingleRow=function isc_CellSelection_selectSingleRow(_1){var _2=[];if(_1>0)
_2=this.$1133(0,0,_1-1,this.numCols-1,false);_2=_2.concat(this.$1133(_1,0,_1,this.numCols-1,true));if(_1<this.data.getLength()-1)
_2=_2.concat(this.$1133(_1+1,0,this.data.getLength()-1,this.numCols-1,false));this.changedCells=_2;return this.$1134()},isc.A.selectSingleCol=function isc_CellSelection_selectSingleCol(_1){var _2=[];if(_1>0)
_2=this.$1133(0,0,this.data.getLength()-1,_1-1,false);_2=_2.concat(this.$1133(0,_1,this.data.getLength()-1,_1,true));if(_1<this.numCols-1)
_2=_2.concat(this.$1133(0,_1+1,this.data.getLength()-1,this.numCols-1,false));this.changedCells=_2;return this.$1134()},isc.A.selectOnMouseDown=function isc_CellSelection_selectOnMouseDown(_1,_2,_3){var _4=_1.selectionType;if(_4==isc.Selection.NONE)return false;this.deselectCellOnMouseUp=false;this.deselectOthersOnMouseUp=false;var _5=this.cellIsSelected(_2,_3);if(isc.EventHandler.shiftKeyDown()&&_4!=isc.Selection.SINGLE)
{if(this.$103g(_1)){this.startRow=this.originRow;this.startCol=this.originCol;this.selectOnDragMove(_1,_2,_3);return true}
_4=isc.Selection.SIMPLE;_5=false}
this.startRow=_2;delete this.lastRow;this.startCol=_3;delete this.lastCol;if(_4==isc.Selection.SINGLE){this.selectSingleCell(_2,_3);return true}else if(_4==isc.Selection.SIMPLE){if(!_5){this.selectCell(_2,_3);this.$1135(_1,_2,_3);return true}else{this.deselectCellOnMouseUp=true;return false}}else if(isc.EventHandler.modifierKeyDown()){this.setCellSelection(_2,_3,!_5);if(!_5)this.$1135(_1,_2,_3);return true}else{if(!_5){this.selectSingleCell(_2,_3);this.$1135(_1,_2,_3);return true}else if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else{if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();this.selectOriginOnDragMove=true;return true}
this.selectSingleCell(_2,_3);this.$1135(_1,_2,_3);return true}else{if(this.simpleDeselect){this.deselectAllOnMouseUp=true}else{var _6=this.getSelectedCells();this.deselectOthersOnMouseUp=(_6.length>1);this.$1135(_1,_2,_3)}
return false}}}},isc.A.selectOnDragMove=function isc_CellSelection_selectOnDragMove(_1,_2,_3){var _4=this.startRow,_5=this.startCol;if(this.lastRow==null)this.lastRow=this.startRow;if(this.lastCol==null)this.lastCol=this.startCol;var _6=this.lastRow,_7=this.lastCol;if(_2<0||_3<0){this.logWarn("selectOnDragMove: aborting due to negative coordinate: "+[_2,_3]);return}
if(_2==_6&&_3==_7)return;if(_1.selectionType!=isc.Selection.SINGLE){this.$1135(_1,_4,_5)}
if(_1.selectionType==isc.Selection.SINGLE){this.selectSingleCell(_2,_3);return}
var _8=[];if(this.selectOriginOnDragMove){this.$1132(_4,_5);_8.add([_4,_5]);this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp)
{this.selectSingleCell(_4,_5);this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}
if((_2!=_6&&((_6>=_4&&_4>=_2)||(_2>=_4&&_4>=_6)))||(_3!=_7&&((_7>=_5&&_5>=_3)||(_3>=_5&&_5>=_7))))
{var _9=this.$1132(_4,_5,false);_8.addList(this.$1133(_4,_5,_6,_7,false));if(_9)this.$1132(_4,_5,true);_8.addList(this.$1133(_4,_5,_2,_3,true));this.changedCells=_8;this.$1134();this.lastRow=_2;this.lastCol=_3;return}
if(_2>=0&&_2!=_6){if(_4>=_6&&_6>_2){_8.addList(this.$1133(_2,_5,_6-1,_7,true))}else if(_4>=_2&&_2>_6){_8.addList(this.$1133(_6,_5,_2-1,_7,false))}else if(_4<=_2&&_2<_6){_8.addList(this.$1133(_2+1,_5,_6,_7,false))}else if(_4<=_6&&_6<_2){_8.addList(this.$1133(_6+1,_5,_2,_7,true))}
_6=this.lastRow=_2}
if(_3>=0&&_3!=_7){if(_5>=_7&&_7>_3){_8.addList(this.$1133(_4,_3,_6,_7-1,true))}else if(_5>=_3&&_3>_7){_8.addList(this.$1133(_4,_7,_6,_3-1,false))}else if(_5<=_3&&_3<_7){_8.addList(this.$1133(_4,_3+1,_6,_7,false))}else if(_5<=_7&&_7<_3){_8.addList(this.$1133(_4,_7+1,_6,_3,true))}
this.lastCol=_3}
this.changedCells=_8;this.$1134()},isc.A.selectOnMouseUp=function isc_CellSelection_selectOnMouseUp(_1,_2,_3){if(_1.selectionType==isc.Selection.NONE)return false;var _4=false;if(this.deselectOthersOnMouseUp){this.selectSingleCell(_2,_3);this.deselectOthersOnMouseUp=false;_4=true}else if(this.deselectCellOnMouseUp){this.deselectCell(_2,_3);this.deselectCellOnMouseUp=false;_4=true}else if(this.deselectAllOnMouseUp){this.deselectAll();this.deselectAllOnMouseUp=false;_4=true}
var _5=this.$103g(_1);if(_5&&!_4){_1.fireSelectionUpdated()}
return _4},isc.A.getDependentCellSelection=function isc_CellSelection_getDependentCellSelection(_1){var _2=isc.DependentCellSelection.create({numCols:_1,rootSelection:this});_2.observe(this,"selectionChanged","observer.$1136()");return _2});isc.B._maxIndex=isc.C+45;isc.CellSelection.getPrototype().isSelected=isc.CellSelection.getPrototype().cellIsSelected;isc.ClassFactory.defineClass("DependentCellSelection");isc.A=isc.DependentCellSelection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$949=function isc_DependentCellSelection__updateDependency(_1,_2){if(this.firstCol!=_1||this.numCols!=_2){this.rootSelection.deselectAll()}
this.firstCol=_1;if(_2!=null)this.numCols=_2},isc.A.cellIsSelected=function isc_DependentCellSelection_cellIsSelected(_1,_2){if(_2<0||_2>=this.numCols)return false;return this.rootSelection.cellIsSelected(_1,_2+this.firstCol)},isc.A.selectOnMouseDown=function isc_DependentCellSelection_selectOnMouseDown(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnMouseDown(_1,_2,_3+this.firstCol)},isc.A.selectOnDragMove=function isc_DependentCellSelection_selectOnDragMove(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnDragMove(_1,_2,_3+this.firstCol)},isc.A.selectOnMouseUp=function isc_DependentCellSelection_selectOnMouseUp(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnMouseUp(_1,_2,_3+this.firstCol)},isc.A.$1136=function isc_DependentCellSelection__selectionChanged(){var _1=this.rootSelection.changedCells;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4[1]-this.firstCol;if(_5>=0&&_5<this.numCols){_2.add([_4[0],_5])}}
this.changedCells=_2;this.selectionChanged()},isc.A.destroy=function isc_DependentCellSelection_destroy(){if(this.isObserving(this.rootSelection,"selectionChanged"))
this.ignore(this.rootSelection,"selectionChanged");this.rootSelection.deselectAll();this.Super("destroy",arguments)},isc.A.selectionChanged=function isc_DependentCellSelection_selectionChanged(){});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("CellListIterator");isc.A=isc.CellListIterator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_CellListIterator_init(){if(!this.cells)this.cells=[];this.currCell=0;this.currRow=-1},isc.A.getNextRow=function isc_CellListIterator_getNextRow(){if(this.currCell<this.cells.length)this.currRow=this.cells[this.currCell][0];else this.currRow++;while(this.currCell<this.cells.length){if(this.cells[this.currCell][0]!=this.currRow)break;this.currCell++}
return this.currRow});isc.B._maxIndex=isc.C+2;if(isc.Window){isc.ClassFactory.defineClass("FieldEditor","Window");isc.A=isc.FieldEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isModal=true;isc.A.showMinimizeButton=false;isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.defaultWidth=475;isc.A.visibleFieldsConstructor="ListGrid";isc.A.hiddenFieldsConstructor="ListGrid";isc.A.showFooter=false;isc.A.title="Customize Fields";isc.A.showInstructionsPane=true;isc.A.bodyProperties={layoutMargin:5};isc.A.instructionsPaneDefaults={_constructor:isc.HTMLFlow,padding:5,height:1};isc.A.instructions="Drag fields between grids to control which fields are visible and the order in which fields are displayed";isc.B.push(isc.A.initWidget=function isc_FieldEditor_initWidget(){this.invokeSuper(isc.FieldEditor,"initWidget");if(!this.fields){isc.logWarn('FieldEditor can not be created because no fields were provided');return}
this.addItem(this.addAutoChild("instructionsPane",{contents:this.instructions}));this.visibleFieldsDefaults=this.hiddenFieldsDefaults={height:200,width:200,leaveScrollbarGap:false,canDragRecordsOut:true,canAcceptDroppedRecords:true,canReorderRecords:true,dragDataAction:"move"};var _1=this.visibleFieldsGrid=this.createAutoChild("visibleFields",{fields:[{name:"title",title:"Visible Fields",formatCellValue:"value || record.name"}]});var _2=this.fields;var _3=_2.findAll("visible",null);var _4=_2.findAll("visible",false);_1.setData(_3);var _5=this.hiddenFieldsGrid=this.createAutoChild("hiddenFields",{canReorderRecords:false,fields:[{name:"title",title:"Hidden Fields",formatCellValue:"value || record.name"}]});_5.setData(_4);var _6=isc.HLayout.create({membersMargin:10,layoutMargin:5,height:1,overflow:"visible",members:[_1,isc.VStack.create({width:32,height:74,layoutAlign:"center",membersMargin:10,members:[isc.Img.create({src:"[SKINIMG]actions/back.png",width:16,height:16,visFieldsGrid:_1,hidFieldsGrid:_5,layoutAlign:"center",click:"this.visFieldsGrid.transferSelectedData(this.hidFieldsGrid)"}),isc.Img.create({src:"[SKINIMG]actions/forward.png",width:16,height:16,layoutAlign:"center",visFieldsGrid:_1,hidFieldsGrid:_5,click:"this.hidFieldsGrid.transferSelectedData(this.visFieldsGrid)"})]}),_5]});this.addItem(_6);var _7=this.createAutoChild("okButton",{autoDraw:false,title:"Done",fieldEditor:this,click:function(){this.creator.okClick()},layoutAlign:"center"},isc.IButton);this.addItem(_7)},isc.A.okClick=function isc_FieldEditor_okClick(){var _1=isc.clone(this.visibleFieldsGrid.data);var _2=isc.clone(this.hiddenFieldsGrid.data);_1.setProperty("visible",null);_2.setProperty("visible",false);_1.addList(_2);var _3=_1.getProperties(["name","visible"]);this.done(_1,_3);this.hide();this.destroy()},isc.A.done=function isc_FieldEditor_done(_1,_2){});isc.B._maxIndex=isc.C+3}
isc.ClassFactory.defineClass("FormulaBuilder","VLayout");isc.A=isc.FormulaBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.padding=10;isc.A.showFormulaField=true;isc.A.formulaFieldDefaults={type:"text",formItemType:"AutoFitTextAreaItem",height:20,width:"*",hoverWidth:300,keyPress:function(){if(this.form.creator.autoTest){this.fireOnPause("autoTest",{target:this.form.creator,methodName:"testFunction"},this.form.creator.autoTestDelay)}}};isc.A.showTitleField=true;isc.A.titleFieldDefaults={selectOnFocus:true,type:"text",width:"*"};isc.A.showHelpIcon=true;isc.A.helpIconDefaults={src:"[SKIN]actions/help.png"};isc.A.autoHideCheckBoxLabel="Auto hide fields used in formula";isc.A.showAutoHideCheckBox=true;isc.A.autoHideCheckBoxDefaults={type:"boolean",align:"right"};isc.A.builderTypeText="Formula";isc.A.helpTextIntro="For basic arithmetic, type in symbols (+-/%) directly.<P>The following functions are also available:";isc.A.fieldKeyDefaults={_constructor:"ListGrid",leaveScrollbarGap:false,autoFitData:"both",autoFitMaxRecords:8,autoFitMaxWidth:500,autoFetchData:true,showRollOver:true,selectionType:"none",autoFitFieldWidths:true,autoFitWidthApproach:"both",autoFitExpandField:"title",detailField:"title",canHover:true,hoverMode:"detailField",defaultFields:[{name:"mappingKey",width:40},{name:"title",width:"*"},{name:"sourceDS",width:"*",showIf:"list.creator.dataSources != null"},{name:"name",showIf:"false"},{name:"type",showIf:"false"},{name:"length",showIf:"false"}],recordClick:function(_1,_2){var _3=this.creator.formulaField;if(_3){_3.focusInItem();var _4=this.creator.getInsertValueForRecord(_2);if(_4!=null){if(this.creator.valuePrefix!=null)_4=this.creator.valuePrefix+_4;if(this.creator.valueSuffix!=null)_4+=this.creator.valueSuffix;var _5=_3.getEnteredValue()||"";var _6=_3.getSelectionRange(),_7;if(_6!=null){_5=_5.substring(0,_6[0])+_4+_5.substring(_6[1]);_7=_6[0]+_4.length}else{_5+=_4;_7=_4.length}
_3.setValue(_5);_3.focusInItem();_3.setSelectionRange(_7,_7);if(this.creator.autoTest){this.fireOnPause("autoTest",{target:this.creator,methodName:"testFunction"},this.creator.autoTestDelay)}}}}};isc.A.instructionsTextStart="The following fields are available for use in this ${builderType}";isc.A.instructionsDefaults={_constructor:"Label",height:1,extraSpace:10,overflow:"visible"};isc.A.titleFormDefaults={_constructor:"DynamicForm",extraSpace:5,autoFocus:true};isc.A.formulaFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.hideFieldsFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.sampleHeaderDefaults={_constructor:"Label",height:15,extraSpace:5};isc.A.sampleLabelDefaults={_constructor:"Canvas",height:40,width:"100%",align:"center",valign:"top",extraSpace:10,showHover:true,overflow:"hidden",styleName:"sampleOutput"};isc.A.messageLabelDefaults={_constructor:"Label",height:20,width:"100%",align:"right",valign:"center",overflow:"hidden",showHover:true};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%",height:20,align:"right"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){this.creator.completeEditing(true)}};isc.A.testButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){this.creator.testFunction()}};isc.A.saveAddAnotherButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){if(!this.creator.showTitleForm||this.creator.titleForm.validate())this.creator.saveAddAnother()}};isc.A.saveButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,click:function(){if(!this.creator.showTitleForm||this.creator.titleForm.validate())this.creator.save()}};isc.A.fieldType="float";isc.A.allowEscapedKeys=false;isc.A.invalidBuilderPrompt="Invalid ${builderType}: ${errorText}";isc.A.defaultErrorText="[No Explicit Error]";isc.A.invalidBlankPrompt="Invalid blank ${builderType}";isc.A.validBuilderPrompt="Valid ${builderType}";isc.A.helpWindowTitle="${builderType} Help";isc.A.titleFieldTitle="Title";isc.A.defaultNewFieldTitle="New Field";isc.A.keyColumnTitle="Key";isc.A.sourceFieldColumnTitle="Source Field";isc.A.sourceDSColumnTitle="Source DataSource";isc.A.cancelButtonTitle="Cancel";isc.A.saveAddAnotherButtonTitle="Save & Add Another";isc.A.saveButtonTitle="Save";isc.A.saveConfirmationPrompt="Save changes to this ${builderType}?";isc.A.invalidGeneratedFunctionPrompt="The generated function is invalid - Check your ${builderType} and retry.";isc.A.sampleHeaderTitle="Sample:";isc.A.testButtonTitle="Test";isc.B.push(isc.A.getInsertValueForRecord=function isc_FormulaBuilder_getInsertValueForRecord(_1){if(_1==null)return"";var _2=_1.mappingKey;var _3=this.insertEscapedKeys;if(_3==null)_3=this.allowEscapedKeys;if(_3){_2="#{"+_2+"}"}
return _2});isc.B._maxIndex=isc.C+1;isc.A=isc.FormulaBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnDuplicateTitlesMessage="Another field already has the title '${fieldTitle}'.  Continue anyway?";isc.A.autoTest=true;isc.A.autoTestDelay=200;isc.A.samplePrompt="<nobr>For Record: ${title}</nobr><br><nobr>Output: ${output}</nobr>";isc.B.push(isc.A.getValue=function isc_FormulaBuilder_getValue(){return this.formulaField?this.formulaField.getValue():null},isc.A.setValue=function isc_FormulaBuilder_setValue(_1){if(this.formulaField){this.formulaField.setValue(_1)}},isc.A.setFormula=function isc_FormulaBuilder_setFormula(_1){this.setValue(_1)},isc.A.getFieldIdProperty=function isc_FormulaBuilder_getFieldIdProperty(){return this.getClass().getFieldIdProperty(this.component)},isc.A.getTitle=function isc_FormulaBuilder_getTitle(){return this.titleField?this.titleField.getValue():null},isc.A.setTitle=function isc_FormulaBuilder_setTitle(_1){if(this.titleField){this.titleField.setValue(_1)}},isc.A.getFieldFromMappingKey=function isc_FormulaBuilder_getFieldFromMappingKey(_1){var _2=this.getAvailableFields();for(var i=0;i<_2.length;i++){var _4=_2.get(i);if(_4.mappingKey==_1)return _4}
return null},isc.A.getFields=function isc_FormulaBuilder_getFields(){if(this.fields)return this.fields;if(this.component)return this.component.getAllFields();var _1;if(this.dataSources){_1=[];for(var i=0;i<this.dataSources.length;i++){var _3=this.dataSources[i],_4=_3.getFields();for(var _5 in _4){var _6=isc.addProperties({},_4[_5],{name:_3.getID()+"."+_5,sourceDS:_3.getID()});_1.add(_6)}}}else{_1=isc.getValues(this.dataSource.getFields())}
return _1},isc.A.shouldHideUsedFields=function isc_FormulaBuilder_shouldHideUsedFields(){if(this.showAutoHideCheckBox&&this.autoHideCheckBox&&this.autoHideCheckBox.getValue()){return this.autoHideCheckBox.getValue()}else return false},isc.A.getHelpText=function isc_FormulaBuilder_getHelpText(){return this.getHoverText()},isc.A.initWidget=function isc_FormulaBuilder_initWidget(){this.Super("initWidget",arguments);if(this.dataSource)this.dataSource=isc.DataSource.get(this.dataSource);if(this.dataSources){var _1=[];for(var i=0;i<this.dataSources.length;i++){_1[i]=isc.DataSource.get(this.dataSources[i])}}
var _3=this.getAvailableFields();if(!this.field){this.field={name:this.getUniqueFieldName(),title:this.defaultNewFieldTitle,type:this.fieldType,width:"50",canFilter:false,canSortClientOnly:true,originalOrder:this.availableFields.length,summaryFunction:this.defaultSummaryFunction}}
this.instructions=this.createAutoChild("instructions",{contents:this.instructionsTextStart.evalDynamicString(this,{builderType:this.builderTypeText})});this.addMember(this.instructions);this.fieldKeyDS=isc.DataSource.create({ID:this.getID()+"DS",clientOnly:true,testData:_3,fields:[{name:"mappingKey",title:this.keyColumnTitle,width:40},{name:"title",title:this.sourceFieldColumnTitle,width:"*"},{name:"sourceDS",title:this.sourceDSColumnTitle,showIf:"false"},{name:"name",showIf:"false",primaryKey:true},{name:"type",showIf:"false"},{name:"length",showIf:"false"}]});this.fieldKey=this.createAutoChild("fieldKey",{dataSource:this.fieldKeyDS});if(this.fieldKey.showFilterEditor!==false&&this.fieldKey.autoFitMaxRecords&&_3.length>this.fieldKey.autoFitMaxRecords)
{this.fieldKey.setShowFilterEditor(true)}
this.addMember(this.fieldKey);if(this.showTitleField){this.addAutoChild("titleForm",{fields:[isc.addProperties(this.titleFieldDefaults,this.titleFieldProperties,{title:this.titleFieldTitle,name:"titleField"})]});this.titleField=this.titleForm.getField("titleField");this.setTitle(this.field.title||isc.DataSource.getAutoTitle(this.field.name))}
if(this.showFormulaField){this.addAutoChild("formulaForm",{fields:[isc.addProperties({title:this.builderTypeText},this.formulaFieldDefaults,this.formulaFieldProperties,this.showHelpIcon?{icons:[isc.addProperties({prompt:this.getHelpText()},this.helpIconDefaults,this.helpIconProperties,{click:"form.creator.showHelpWindow();"})]}:{},{name:"formulaField"})]});this.formulaField=this.formulaForm.getField("formulaField");if(this.showHelpIcon)this.helpIcon=this.formulaField.icons[0]}
this.addAutoChild("messageLabel");this.addAutoChild("sampleHeader",{contents:this.sampleHeaderTitle});this.addAutoChild("sampleLabel");if(this.showAutoHideCheckBox){this.addAutoChild("hideFieldsForm",{fields:[isc.addProperties({title:this.autoHideCheckBoxLabel},this.autoHideCheckBoxDefaults,this.autoHideCheckBoxProperties,{name:"autoHide"})]});this.autoHideCheckBox=this.hideFieldsForm.getField("autoHide")}
this.addAutoChild("buttonLayout");this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});if(!this.autoTest)this.addAutoChild("testButton",{title:this.testButtonTitle});this.addAutoChild("saveAddAnotherButton",{title:this.saveAddAnotherButtonTitle});this.addAutoChild("saveButton",{title:this.saveButtonTitle});if(this.showTitleField)this.titleForm.focusInItem(this.titleField);else this.formulaForm.focusInItem(this.formulaField);this.setInitialValue();if(this.editMode&&this.autoTest)this.testFunction()},isc.A.getUniqueFieldName=function isc_FormulaBuilder_getUniqueFieldName(){return this.getNewUniqueFieldName("formulaField")},isc.A.getNewUniqueFieldName=function isc_FormulaBuilder_getNewUniqueFieldName(_1){if(!_1||_1=="")_1="field";var _2=this.component,_3=(_2&&_2.fieldNamingStrategy||"simple")=="uuid",_4=this.getFields(),_5=_1.length,_6;if(_3){_6=_1+isc.Math.randomUUID()}else{var _7=_1+"Index";if(_2&&!_2.fieldNameGenerator[_7])_2.fieldNameGenerator[_7]=1;var _8=_2?_2.fieldNameGenerator[_7]:1;for(var i=0;i<_4.length;i++){var _10=_4.get(i);if(_10.name.startsWith(_1)){var _11=_10.name.substr(_5),_12=new Number(_11);if(_12&&_12>=_8)_8=_12+1}}
if(_2)_2.fieldNameGenerator[_7]=_8;_6=_1+_8}
return _6},isc.A.destroy=function isc_FormulaBuilder_destroy(){if(this.fieldKeyDS)this.fieldKeyDS.destroy();this.Super("destroy",arguments)},isc.A.setInitialValue=function isc_FormulaBuilder_setInitialValue(){if(this.editMode&&this.field.userFormula){this.initialValue=this.field.userFormula.text;if(this.field.userFormula.allowEscapedKeys){this.allowEscapedKeys=this.field.userFormula.allowEscapedKeys}}
this.initialValue=this.initialValue||"";this.setValue(this.initialValue)},isc.A.showHelpWindow=function isc_FormulaBuilder_showHelpWindow(){var _1=this.locatorParent,_2=_1?_1.getTop():this.top,_3=_1?_1.getRight():this.left,_4=_1?_1.getVisibleWidth():this.width,_5=_1?_1.getVisibleHeight():this.getVisibleHeight();if(this.helpWindow&&this.helpWindow!=null){this.hideHelpWindow()}else{this.helpIcon.prompt=null;this.formulaField.stopHover();var _6=this;this.helpWindow=isc.Window.create({title:this.helpWindowTitle.evalDynamicString(this,{builderType:this.builderTypeText}),showMinimizeButton:false,showMaximizeButton:false,isModal:false,closeClick:function(){_6.hideHelpWindow()},headerIconProperties:{src:"[SKIN]actions/help.png"},items:[isc.Label.create({contents:this.getHelpText(),canSelectText:true,padding:10})]});this.helpWindow.observe(_1,"bringToFront","observer.bringToFront()");if(_1){var _7=_1.getRight()+_4;var _8=_7-isc.Page.getWidth();if(_8>0){_1.setLeft(_1.getLeft()-_8);_3=_1.getRight()}}
this.helpWindow.resizeTo(_4,_5);this.helpWindow.moveTo(_3,_2);this.helpWindow.show();if(_1){}}},isc.A.hideHelpWindow=function isc_FormulaBuilder_hideHelpWindow(){if(this.helpWindow){this.helpWindow.destroy();this.helpWindow=null}
this.helpIcon.prompt=this.getHelpText();this.formulaField.stopHover()},isc.A.getHoverText=function isc_FormulaBuilder_getHoverText(){var _1=isc.SB.create();_1.append("<b>",this.helpTextIntro,"</b> <P>");_1.append("<ul>");var _2=isc.MathFunction.getRegisteredFunctionIndex(),_3=this.mathFunctions;if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){var _5=_2[_3[i]];_1.append("<li> <b>",_5.name,": </b> ",_5.description,"<p>");_1.append("<i>usage: ",_5.usage,"</i> </li>")}}
_1.append("</ul>");return _1.release(false)},isc.A.getAvailableFields=function isc_FormulaBuilder_getAvailableFields(){if(this.availableFields)return this.availableFields;var _1=this.availableFields=[],_2=this.field,_3=this.getFields(),j=0;if(!_3)return _1;var _5=this.component?this.component.$176:{};for(var i=0;i<_3.getLength();i++){var _7=isc.addProperties({},_3.get(i)),_8=_7.type;_7.originalOrder=i;if(_2){if(_2.name==_7.name)continue;if(_7.userFormula){var _9=false,_10=_7.userFormula.formulaVars||{};for(var _11 in _10){if(_10[_11]==_2.name){_9=true;break}}
if(_9)continue}}
if(_7.userFormula||isc.SimpleType.inheritsFrom(_8,"integer")||isc.SimpleType.inheritsFrom(_8,"float"))
{var _12=_5.varToFieldName||{},_13=_5.fieldNameToVar||{};var _14=_13[_7.name];if(_14)_7.mappingKey=_14;else{var _15;while(_12[(_15=isc.FormulaBuilder.mappingKeyForIndex(j++))]);_7.mappingKey=_15}
if(!_7.title)_7.title=isc.DataSource.getAutoTitle(_7.name);_1.add(_7)}}
var _10=_2&&_2.userFormula?_2.userFormula.formulaVars:{};var _16=[];for(var _17 in _10){var _18=_1.find("mappingKey",_17),_19=_1.find("name",_10[_17]);if(_19==null){_16.add(_17);continue}
if(_18)_18.mappingKey=_19.mappingKey;_19.mappingKey=_17}
if(_16.length>0){var _20=this.component&&this.component.missingFormulaFieldValue||"-";isc.FormulaBuilder.remapBadVars(_16,_10,_2.userFormula,_20)}
isc.FormulaBuilder.sortFields(_1,true);isc.FormulaBuilder.applyHeaderSpanTitles(this,_1);return _1},isc.A.getUsedFields=function isc_FormulaBuilder_getUsedFields(_1){var _2=[],_3=this.getValue(),_4=this.getAvailableFields().duplicate();if(!_3)return _2;isc.FormulaBuilder.sortFields(_4,!!_1);for(var i=0;i<_4.length;i++){var _6=_4.get(i);if(isc.FormulaBuilder.fieldIsUsed(_3,_6.mappingKey,this.allowEscapedKeys)){_2.add(_6)}}
return _2},isc.A.getCompleteValueObject=function isc_FormulaBuilder_getCompleteValueObject(){var _1=this.getUsedFields(),_2=this.generateFunction(),_3={$178:_2,type:this.fieldType,userFormula:{text:this.getValue(),formulaVars:{}}},_4=this.getFieldIdProperty();if(this.allowEscapedKeys)_3.userFormula.allowEscapedKeys=true;for(var i=0;i<_1.length;i++){var _6=_1.get(i);_3.userFormula.formulaVars[_6.mappingKey]=_6[_4]}
return _3},isc.A.getBasicValueObject=function isc_FormulaBuilder_getBasicValueObject(){var _1=this.getUsedFields(),_2={text:this.getValue(),formulaVars:{}},_3=this.getFieldIdProperty();if(this.allowEscapedKeys)_2.allowEscapedKeys=true;for(var i=0;i<_1.length;i++){var _5=_1.get(i);_2.formulaVars[_5.mappingKey]=_5[_3]}
return _2},isc.A.getUpdatedFieldObject=function isc_FormulaBuilder_getUpdatedFieldObject(){return isc.addProperties(this.field,{title:this.getTitle()},this.getCompleteValueObject())},isc.A.testFunction=function isc_FormulaBuilder_testFunction(){var _1=this.getClass().testFunction(this.field,this.getBasicValueObject(),this.component,this.getFields(),this.testRecord);var _2="",_3=_1.errorText||this.defaultErrorText;if(_1.failedGeneration||_1.failedExecution){_2=this.invalidBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText,errorText:_3})}else if(_1.emptyTestValue){_2=this.invalidBlankPrompt.evalDynamicString(this,{builderType:this.builderTypeText})}else{_2=this.validBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText})}
this.setTestMessage(_2);this.setSamplePrompt(this.getSamplePrompt(_1));return _1},isc.A.getTestRecord=function isc_FormulaBuilder_getTestRecord(){if(this.testRecord)return this.testRecord;return this.getClass().getTestRecord(this.component,this.getAvailableFields())},isc.A.setTestMessage=function isc_FormulaBuilder_setTestMessage(_1){this.messageLabel.setContents(_1)},isc.A.setSamplePrompt=function isc_FormulaBuilder_setSamplePrompt(_1){this.sampleLabel.setContents("<center>"+_1+"</center>")},isc.A.generateFunction=function isc_FormulaBuilder_generateFunction(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.saveAddAnother=function isc_FormulaBuilder_saveAddAnother(){this.restartBuilder=true;this.save()},isc.A.fieldTitleIsUnique=function isc_FormulaBuilder_fieldTitleIsUnique(_1){var _2=this.component?this.component.getAllFields():null,_3=_2?_2.findAll({"title":_1}):null,_4=true;if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){if(_3[i].name!=this.field.name){_4=false;break}}}
return _4},isc.A.save=function isc_FormulaBuilder_save(){var _1=this.testFunction();if(this.warnDuplicateTitles&&!this.duplicateTitleAccepted){var _2=this.getTitle();if(!this.fieldTitleIsUnique(_2)){var _3=this.warnDuplicateTitlesMessage.evalDynamicString(this,{fieldTitle:_2});var _4=this;isc.confirm(_3,function(_5){if(_5){_4.duplicateTitleAccepted=true;_4.delayCall("save")}else{_4.restartBuilder=false}});return null}}
delete this.duplicateTitleAccepted;if(_1.emptyTestValue){isc.warn(this.invalidBlankPrompt.evalDynamicString(this,{builderType:this.builderTypeText}));return}else if(_1.failedGeneration||_1.failedExecution){isc.warn(this.invalidGeneratedFunctionPrompt.evalDynamicString(this,{builderType:this.builderTypeText}));return}
this.completeEditing(false)},isc.A.completeEditing=function isc_FormulaBuilder_completeEditing(_1,_2){this.cancelled=_1;if(_1){if(this.editMode&&!_2){if(this.getValue()!=this.initialValue){var _3=this;var _4=this.saveConfirmationPrompt.evalDynamicString(this,{builderType:this.builderTypeText});isc.confirm(_4,function(_5){if(_5){_3.save()}else{_3.completeEditing(true,true)}});return}}}
if(this.helpWindow)this.hideHelpWindow();if(this.availableFields){isc.FormulaBuilder.sortFields(this.availableFields,true);this.availableFields.clearProperty("originalOrder")}
this.fireOnClose()},isc.A.fireOnClose=function isc_FormulaBuilder_fireOnClose(){},isc.A.getSamplePrompt=function isc_FormulaBuilder_getSamplePrompt(_1){var _2=this.dataSource?this.dataSource.getTitleField():isc.firstKey(_1.record),_3=_1.result!=null?_1.result:this.invalidBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText,errorText:_1.errorText||this.defaultErrorText}),_4=_1.record[_2];return this.samplePrompt.evalDynamicString(this,{title:_4,output:_3})});isc.B._maxIndex=isc.C+34;isc.A=isc.FormulaBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mappingKeyForIndex=function isc_c_FormulaBuilder_mappingKeyForIndex(_1){var _2="",_3=Math.floor(_1/(26*27)),_4=_1%(26*26),_5=Math.floor(_4/26);if(_3>=1)_2+=String.fromCharCode(65+(_3-1));if(_5>=1){if(_3>=1){_2+=String.fromCharCode(65+(_5-1));_2+=String.fromCharCode(65+(_1-(26*27))%26)}else{_2+=String.fromCharCode(65+(_5-1));_2+=String.fromCharCode(65+_1%26)}}else{if(_3>=1){_2+=String.fromCharCode(65)}
_2+=String.fromCharCode(65+_1%26)}
return _2},isc.A.getFieldIdProperty=function isc_c_FormulaBuilder_getFieldIdProperty(_1){return _1?_1.fieldIdProperty:"name"},isc.A.applyHeaderSpanTitles=function isc_c_FormulaBuilder_applyHeaderSpanTitles(_1,_2,_3,_4){if(!_1.showHeaderSpanTitles)return;_3=_3||_1.headerSpans;if(!_3)return;for(var i=0;i<_3.length;i++){var _6=_4||"";var _7=_3[i];_6+=_7.title+_1.spanTitleSeparator;if(_7.spans){this.applyHeaderSpanTitles(_1,_2,_7.spans,_6)}else if(_7.fields){for(var j=0;j<_7.fields.length;j++){var _9=_7.fields[j];for(var k=0;k<_2.length;k++){if(_2[k].name==_9){_2[k].title=_6+_2[k].title;break}}}}}},isc.A.sortFields=function isc_c_FormulaBuilder_sortFields(_1,_2){_1.sortByProperty("mappingKey",_2,function(_4,_5,_6){var _3=_4[_5];if(_3.length==1)_3='99'+_3;else if(_3.length==2)_3='9'+_3;return _3})},isc.A.handleKeyExp=function isc_c_FormulaBuilder_handleKeyExp(_1,_2,_3,_4){switch(_3){case"braced":if(_4)return _1.replaceAll("#{"+_2+"}",_4);else return _1.indexOf("#{"+_2+"}")>=0;case"escaped":var _5=new RegExp("#"+_2+"(?=$|[^A-Z]+)","g");if(_4)return _1.replace(_5,_4);else return _5.test(_1);default:case"simple":var _5=new RegExp("(^|[^A-Z]+)"+_2+"(?=$|[^A-Z]+)","g");if(_4)return _1.replace(_5,"$1"+_4);else return _5.test(_1)}},isc.A.fieldIsUsed=function isc_c_FormulaBuilder_fieldIsUsed(_1,_2,_3){if(!_1||!_2)return false;if(this.handleKeyExp(_1,_2))return true;if(!_3)return false;return this.handleKeyExp(_1,_2,"escaped")||this.handleKeyExp(_1,_2,"braced")},isc.A.getFieldDetailsFromValue=function isc_c_FormulaBuilder_getFieldDetailsFromValue(_1,_2,_3,_4,_5){var _6=isc.shallowClone(_2),_7=this.getFieldIdProperty(_4),_8={usedFields:[],missingFields:[]};for(var _9 in _6){var _10=_6[_9],_11=this.fieldIsUsed(_1,_9,_5),_12=_3.findIndex(_7,_10);if(!_3[_12]){if(!_11){isc.logWarn("Field "+_10+" is not in the list of available fields.  However, it is not used in the formula either - ignoring.");delete _2[_9]}else{isc.logWarn("Field "+_10+" is not in the list of available-fields");_8.missingFields.add(_10)}}else{var _13=isc.addProperties({},_3[_12]);_13.mappingKey=_9;_8.usedFields.add(_13)}}
return _8},isc.A.testFunction=function isc_c_FormulaBuilder_testFunction(_1,_2,_3,_4,_5){var _6={};try{_6.component=_3;_6.record=this.getTestRecord(_3,_4,_5);if(!_2.text||_2.text==""){_6.emptyTestValue=true;return _6}
_6.jsFunction=this.generateFunction(_2,_4,_3);_6.result=_6.jsFunction(_6.record,_3)}catch(err){if(!_6.jsFunction)_6.failedGeneration=true;_6.failedExecution=true;_6.errorText=err.message}
return _6},isc.A.getTestRecord=function isc_c_FormulaBuilder_getTestRecord(_1,_2,_3){var _4=this.getFieldIdProperty(_1),_5;if(_3)return _3;if(_1){_5=_1.getSelectedRecord();if(!_5){if(_1.body){var _6=_1.body.getVisibleRows();_5=_6?_1.getRecord(_6[0]):_1.data.get(0)}else{_5=_1.data.get(0)}}}
if(!_5&&_2){_5={};for(var i=0;i<_2.length;i++){var _8=_2.get(i);if(_8.userFormula){_8.$178=isc.FormulaBuilder.generateFunction(_8.userFormula,_2,_1);var _9=_8.$178;_8.sortNormalizer=function(_5,_10,_11){return _9(_5,_11)}}
if(_8.$178){isc.DataSource.setPathValue(_5,_8[_4],null,_8.$178(_5,_1))}else if(_8.type)
if(isc.SimpleType.inheritsFrom(_8.type,"integer")||isc.SimpleType.inheritsFrom(_8.type,"float"))
{isc.DataSource.setPathValue(_5,_8[_4],null,1)}else{isc.DataSource.setPathValue(_5,_8[_4],null,_8[_4])}
else{isc.DataSource.setPathValue(_5,_8[_4],null,_8[_4])}}}
return _5},isc.A.generateFunction=function isc_c_FormulaBuilder_generateFunction(_1,_2,_3,_4,_5){if(_5==null)_5=true;var _6=isc.SB.create(),_7=_1.text,_8=this.getFieldIdProperty(_3),_9=this.getFieldDetailsFromValue(_7,_1.formulaVars,_2,_3,_1.allowEscapedKeys),_10=_9.usedFields,_11=_9.missingFields;isc.FormulaBuilder.sortFields(_10,false);if(_11.length==0){_6.append("var nullVars = [];\n");if(_10.length>0){for(var i=0;i<_10.length;i++){var _13=_10.get(i),_14=_13.mappingKey;var _15=_13[_8],_16="isc.DataSource.getPathValue(record,'"+_15+"', field)";var _17=_13.userFormula&&_3&&!_3.shouldApplyUserFormulaAfterSummary(_13)
_6.append("var ");_6.append("field=component==null?null:component.getField('",_15,"');","if (field==null && component && component.completeFields)","field=component.completeFields.find('name','",_15,"');","var ",_14,_13.userFormula?"=component"+(_17?"&&!component.$103p(record)":"")+"?component.getFormulaFieldValue(field, record):"+_16:_13.userSummary?"=component?component.getSummaryFieldValue(field, record):"+_16:"="+_16,"\n;");_6.append("if (",_14," == null || (component && ",_14," == component.badFormulaResultValue) || (!component && ",_14," == '.')) nullVars.add('",_14,"');");if(_1.allowEscapedKeys){_7=this.handleKeyExp(_7,_14,"escaped",_14);_7=this.handleKeyExp(_7,_14,"braced",_14)}}
_6.append("\n")}
var _18=isc.MathFunction.getRegisteredFunctions();if(_18&&_18.length>0){_6.append("var functions=isc.MathFunction.getRegisteredFunctionIndex(),\n");for(var i=0;i<_18.length;i++){var _13=_18.get(i);_6.append("        ");_6.append(_13.name,"=","functions.",_13.name,".jsFunction");_6.append(i==_18.length-1?";":",","\n")}
_6.append("\n")}
if(_5){_6.append("try{\n")}
_6.append("var value=",_7,";");if(_5){var _19="Attempt to evaluate formulaFunction "+_7+" failed. Error message:";_6.append("\n} catch (e) { (component||isc).logWarn(",_19.asSource(true)," + e.message)}\n")}
_6.append((_4?null:"if (!isFinite(value) || nullVars.length > 0) return (component && component.badFormulaResultValue) || '.'; "),"return value;")}else{this.logWarn("Formula failed due to missing fields: "+_11.join(", ")+".");var _20=(_3&&_3.badFormulaResultValue)||".";if(_20)_20="'"+_20+"'";_6.append("return ",_20,";")}
var _21=_6.release(false);var _22;if(_5){try{_22=isc.$bh("record,component",_21)}catch(e){this.logWarn("Error attempting to convert formula text '"+_7+"' to a function:"+e.message);_22=isc.$bh("record,component","return null;")}}else{_22=isc.$bh("record,component",_21)}
return _22},isc.A.remapBadVars=function isc_c_FormulaBuilder_remapBadVars(_1,_2,_3,_4){for(var i=0;i<_1.length;i++){var _6=_1[i],_7=_3.text||"";_3.text=this.handleKeyExp(_7,_6,"simple",_4);if(_3.allowEscapedKeys){_3.text=this.handleKeyExp(_3.text,_6,"escaped",_4);_3.text=this.handleKeyExp(_3.text,_6,"braced",_4)}
isc.logWarn("Formula variable "+_6+" refers to missing field "+_2[_6]);delete _2[_6]}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("SummaryBuilder","FormulaBuilder");isc.A=isc.SummaryBuilder.getPrototype();isc.A.builderTypeText="Summary";isc.A.fieldType="text";isc.A.autoHideCheckBoxLabel="Auto hide fields used in Summary";isc.A.helpTextIntro="Building Summary Columns";isc.A.allowBasicMultiCharKeys=false;isc.A=isc.SummaryBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.insertEscapedKeys=true;isc.B.push(isc.A.setSummary=function isc_SummaryBuilder_setSummary(_1){this.setValue(_1)},isc.A.setInitialValue=function isc_SummaryBuilder_setInitialValue(){if(this.editMode&&this.field.userSummary){this.initialValue=this.field.userSummary.text;if(this.field.userSummary.allowBasicMultiCharKeys){this.allowBasicMultiCharKeys=this.field.userSummary.allowBasicMultiCharKeys}}
this.initialValue=this.initialValue||"";this.setValue(this.initialValue)},isc.A.getUniqueFieldName=function isc_SummaryBuilder_getUniqueFieldName(){return this.getNewUniqueFieldName("summaryField")},isc.A.getHoverText=function isc_SummaryBuilder_getHoverText(){var _1=isc.SB.create(),_2=this.getTestRecord(),_3=this.getFieldIdProperty(),_4=this.getFieldFromMappingKey("A"),_5=_4[_3],_6=_4?_4.title||_4.name:null,_7=this.getFieldFromMappingKey("B"),_8=_7?_7[_3]:null,_9=_7?_7.title||_7.name:null;_1.append("<b>",this.helpTextIntro,"</b> <P>");_1.append("Summary columns are user-created fields that combine dynamic-values from other fields in the current record with static text specified by the user.<P>");_1.append("Dynamic-values are specified by prefixing a mapping-key from the table opposite with #");if(this.getFields().length>26)_1.append(", or by using #{key} when the key is 2 or more characters long,");_1.append(" and everything else is copied directly into the output.<P>");if(this.dataSource){_1.append("For example, in the current DataSource, key <b>A</b> maps to field <i>",_6,"</i> and <b>B</b> is <i>",!_7?"missing":_9,"</i>.<P>");_1.append("So, if we enter the Summary format-string as:<P>","<i>#A is relative to #B</i><P>","then example output using the current data would look like:<P>");if(_2){var _10,_11;if(!_7)_11="{missing}";if(!this.component){_10=_2[_5];if(_7)_11=_2[_8]}else{var _12=this.component,_13=_12.shouldIncludeHiliteInSummaryField("sample",_5);_10=_13?_12.getStandaloneFieldValue(_2,_5):_12.getFormattedValue(_2,_5,_12.getRawValue(_2,_5));if(_7){var _14=_12.shouldIncludeHiliteInSummaryField("sample",_8);_11=_14?_12.getStandaloneFieldValue(_2,_8):_12.getFormattedValue(_2,_8,_12.getRawValue(_2,_8))}}
_1.append("<i>",_10," is relative to ",_11,"</i><P>")}}
return _1.release(false)},isc.A.getAvailableFields=function isc_SummaryBuilder_getAvailableFields(){if(this.availableFields)return this.availableFields;var _1=this.availableFields=[],_2=this.field,_3=this.getFields();if(!_3)return _1;for(var i=0,j=0;i<_3.getLength();i++){var _6=isc.addProperties({},_3.get(i));if(_2){if(_2.name==_6.name)continue;if(_6.userSummary){var _7=false,_8=_6.userSummary.summaryVars||{};for(var _9 in _8){if(_8[_9]==_2.name){_7=true;break}}
if(_7)continue}}
_6.originalOrder=i;_6.mappingKey=isc.FormulaBuilder.mappingKeyForIndex(j++);if(!_6.title)_6.title=isc.DataSource.getAutoTitle(_6.name);_1.add(_6)}
var _8=_2&&_2.userSummary?_2.userSummary.summaryVars:{};var _10=[];for(var _11 in _8){var _12=_1.find("mappingKey",_11),_13=_1.find("name",_8[_11]);if(_13==null){_10.add(_11);continue}
if(_12)_12.mappingKey=_13.mappingKey;_13.mappingKey=_11}
if(_10.length>0){var _14=this.component&&this.component.missingSummaryFieldValue||"-";isc.SummaryBuilder.remapBadVars(_10,_8,_2.userSummary,_14)}
isc.FormulaBuilder.sortFields(_1,true);isc.SummaryBuilder.applyHeaderSpanTitles(this,_1);return _1},isc.A.getUsedFields=function isc_SummaryBuilder_getUsedFields(_1){var _2=[],_3=this.getValue(),_4=this.allowBasicMultiCharKeys,_5=this.getAvailableFields().duplicate();isc.FormulaBuilder.sortFields(_5,!!_1);for(var i=0;i<_5.length;i++){var _7=_5.get(i);if(isc.SummaryBuilder.fieldIsUsed(_3,_7.mappingKey,_4)){_2.add(_7)}}
return _2},isc.A.getCompleteValueObject=function isc_SummaryBuilder_getCompleteValueObject(){var _1=this.getUsedFields(),_2=this.generateFunction(),_3=this.getFieldIdProperty(),_4={$18a:_2,type:this.fieldType,userSummary:{text:this.getValue()}};if(this.allowBasicMultiCharKeys)_4.userSummary.allowBasicMultiCharKeys=true;if(_1&&_1.length>0){_4.userSummary.summaryVars={};for(var i=0;i<_1.length;i++){var _6=_1.get(i);_4.userSummary.summaryVars[_6.mappingKey]=_6[_3]}}
return _4},isc.A.getBasicValueObject=function isc_SummaryBuilder_getBasicValueObject(){var _1=this.getUsedFields(),_2=this.getFieldIdProperty(),_3={text:this.getValue(),summaryVars:{}};if(this.allowBasicMultiCharKeys)_3.allowBasicMultiCharKeys=true;for(var i=0;i<_1.length;i++){var _5=_1.get(i);_3.summaryVars[_5.mappingKey]=_5[_2]}
return _3},isc.A.generateFunction=function isc_SummaryBuilder_generateFunction(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.initWidget=function isc_SummaryBuilder_initWidget(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+10;isc.A=isc.SummaryBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.testFunction=function isc_c_SummaryBuilder_testFunction(_1,_2,_3,_4,_5){var _6={},_7=this.getFieldIdProperty(_3);try{_6.component=_3;_6.record=this.getTestRecord(_3,_4,_5);if(_2.text==""){_6.emptyTestValue=true;return _6}
_6.jsFunction=this.generateFunction(_2,_4,_3);_6.result=_6.jsFunction(_6.record,_1[_7],_3)}catch(err){if(!_6.jsFunction)_6.failedGeneration=true;_6.failedExecution=true;_6.errorText=err.message}
return _6},isc.A.fieldIsUsed=function isc_c_SummaryBuilder_fieldIsUsed(_1,_2,_3){if(!_1||!_2)return false;if(this.handleKeyExp(_1,_2,"braced"))return true;if(_2.length>1&&!_3)return false;return this.handleKeyExp(_1,_2,"escaped")},isc.A.generateFunction=function isc_c_SummaryBuilder_generateFunction(_1,_2,_3){var _4=isc.SB.create(),_5=_1.text,_6=this.getFieldIdProperty(_3),_7=_1.allowBasicMultiCharKeys,_8=this.getFieldDetailsFromValue(_5,_1.summaryVars,_2,_3,_7),_9=_8.usedFields,_10=_8.missingFields;isc.FormulaBuilder.sortFields(_9,false);if(_9.length>0){for(var i=0;i<_9.length;i++){var _12=_9.get(i),_13=_12[_6],_14="isc.DataSource.getPathValue(record,'"+_13+"')";_4.append("var includeHilites = component ? ","component.shouldIncludeHiliteInSummaryField(fieldName,'",_13,"') :","false;\n");_4.append("var ");_4.append(_12.mappingKey,"= (component ?","(includeHilites ? ","component.getStandaloneFieldValue(record, '",_13,"') :","component.getFormattedValue(record, '",_13,"',component.getRawValue(record,'",_13,"'))) :",_12.userFormula?"component?component.getFormulaFieldValue(field, record):"+_14:_12.userSummary?"component?component.getSummaryFieldValue(field, record):"+_14:_14,")\n");_4.append(";\n");var _15="'+"+_12.mappingKey+"+'";_5=this.handleKeyExp(_5,_12.mappingKey,"braced",_15);if(_12.mappingKey.length==1||_1.allowBasicMultiCharKeys){_5=this.handleKeyExp(_5,_12.mappingKey,"escaped",_15)}}
_4.append("\n")}
var _16=_3&&_3.missingSummaryFieldValue||"-";_5=_5.replace(/#(\{[A-Z][A-Z]?\}|[A-Z])/g,_16);if(_1.allowBasicMultiCharKeys){_5=_5.replace(/#([A-Z][A-Z]?)/g,_16)}
if(_5.substr(0,2)=="'+"){_5=_5.substr(2)}else if(_5.substr(0,1)!="'"){_5="'"+_5}
if(_5.substr(_5.length-2)=="+'"){_5=_5.substr(0,_5.length-2)}else if(_5.substr(_5.length-1)!="'"){_5=_5+"'"}
_4.append("return ",_5,";");return isc.$bh("record,fieldName,component",_4.release(false))},isc.A.remapBadVars=function isc_c_SummaryBuilder_remapBadVars(_1,_2,_3,_4){for(var i=0;i<_1.length;i++){var _6=_1[i],_7=_3.text||"";_3.text=this.handleKeyExp(_7,_6,"braced",_4);if(_6.length==1||_3.allowBasicMultiCharKeys){_3.text=this.handleKeyExp(_3.text,_6,"escaped",_4)}
isc.logWarn("Summary variable "+_6+" refers to missing field "+_2[_6]);delete _2[_6]}});isc.B._maxIndex=isc.C+4;isc.defineClass("HiliteRule","HLayout");isc.A=isc.HiliteRule.getPrototype();isc.A.height=1;isc.A.overflow="visible";isc.A.clauseConstructor="FilterClause";isc.A.clauseDefaults={fieldPickerWidth:"*",overflow:"visible",clauseDefaults:{canEditField:function(){return true}},operatorPickerWidth:140,valueItemWidth:130,excludeNonFilterableFields:false,getDefaultOptionDataSource:function(_1){if(this.creator&&this.creator.rootDataSource){return this.creator.rootDataSource}
var _2=this.dataSource;if(_2&&_2.isHiliteCriteriaDS)return null;return _2}};isc.A.hiliteFormDefaults={_constructor:"DynamicForm",numCols:6,colWidths:[60,60,60,60,60,40],width:300};isc.A.colorFieldTitle="Color";isc.A.advancedClauseLayoutDefaults={_constructor:"HLayout",height:1,overflow:"visible"};isc.A.advancedClauseLabelDefaults={_constructor:"Label",autoParent:"advancedClauseLayout",width:"*",overflow:"hidden",height:18,valign:"center",wrap:false,padding:1};isc.A.advancedClauseEditButtonDefaults={_constructor:"ImgButton",autoParent:"advancedClauseLayout",width:18,height:18,layoutAlign:"center",src:"[SKINIMG]/actions/edit.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.editAdvancedRule()}};isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,hoverWidth:80,click:function(){this.creator.remove()}};isc.A.foregroundColorTitle="Text";isc.A.backgroundColorTitle="Background";isc.A.iconFieldTitle="Icon";isc.A.iconFieldDefaults={type:"SelectItem",width:"*",defaultValue:"",valueMap:{"":""},valueIcons:{"":isc.Canvas.$wv},disabled:true,showIf:function(){return!this.isDisabled()}};isc.A=isc.HiliteRule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_HiliteRule_initWidget(){if(!this.isAdvanced&&this.hilite){var _1=this.hilite.criteria;if(_1&&_1.criteria&&isc.isAn.Array(_1.criteria))
this.isAdvanced=true}
if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.getDataSource(this.dataSource);if(this.hilite)this.checkHiliteProperties(this.hilite);if(this.isAdvanced){var _2=isc.DataSource.getAdvancedCriteriaDescription(this.hilite.criteria,this.dataSource);var _3=(_2.indexOf(isc.FilterBuilder.missingFieldPrompt)>=0);this.membersMargin=2;this.addAutoChild("advancedClauseLayout");this.addAutoChild("removeButton",{autoParent:"advancedClauseLayout"});this.addAutoChild("advancedClauseLabel",{contents:_2,prompt:_2,disabled:_3?true:false});this.addAutoChild("advancedClauseEditButton",{disabled:_3?true:false})}else{var _4=this.dataSource.getField(this.fieldName);if(_4==null)_4=this.dataSource.getFieldForDataPath(this.fieldName);var _3=(_4==null);this.addAutoChild("clause",{dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,field:this.dataSource.getField(this.fieldName),fieldName:this.fieldName,criterion:this.hilite?this.hilite.criteria:null,showRemoveButton:this.showRemoveButton,missingField:_3,remove:function(){this.creator.remove()}});this.addMember(this.clause);this.addAutoChild("hiliteForm",{disabled:_3?true:false,items:[{name:"textColor",title:this.foregroundColorTitle,type:"ColorItem",width:"*"},{name:"backgroundColor",title:this.backgroundColorTitle,type:"ColorItem",width:"*"}]});if(this.hilite){this.hiliteForm.setValues({textColor:this.hilite.textColor,backgroundColor:this.hilite.backgroundColor})}
var _5=this.clause.field;if(_5&&_5.type=="boolean"){var _6=this.hiliteForm.getItem("textColor");_6.disable()}
var _7=isc.addProperties({},this.iconFieldDefaults,this.iconFieldProperties,{name:"icon",title:this.iconFieldTitle});if(this.hiliteIcons){this.hiliteIcons.map(function(_8){_7.disabled=false;_7.valueMap[_8]="";_7.valueIcons[_8]=_8})}
var _8=this.hilite?this.hilite.icon:null;if(_8&&!_7.valueMap[_8]){_7.disabled=false;_7.valueMap[_8]="";_7.valueIcons[_8]=_8}
this.hiliteForm.addItem(_7);this.hiliteForm.setValue("icon",this.hilite?this.hilite.icon:"");this.addMember(this.hiliteForm);this.iconField=this.hiliteForm.getField("icon")}},isc.A.checkHiliteProperties=function isc_HiliteRule_checkHiliteProperties(_1){if(!_1)return;if(_1.cssText){var _2=_1.cssText.split(";");for(var i=0;i<_2.length;i++){var _4=_2[i],_5=_4.split(":");if(_5[0]=="textColor"&&!_1.textColor)
_1.textColor=_5[1];else if(_5[0]=="backgroundColor"&&!_1.backgroundColor)
_1.backgroundColor=_5[1]}}else if(_1.textColor||_1.backgroundColor){_1.cssText="";if(_1.textColor)
_1.cssText+="color:"+_1.textColor+";";if(_1.backgroundColor)
_1.cssText+="background-color:"+_1.backgroundColor+";"}},isc.A.remove=function isc_HiliteRule_remove(){this.markForDestroy()},isc.A.getHilite=function isc_HiliteRule_getHilite(){if(this.isAdvanced){return this.hilite}
if(this.missingField)return this.hilite;var _1=this.hilite=isc.addProperties(this.hilite||{},{fieldName:this.fieldName}),_2=this.hiliteForm.getValue("icon"),_3=this.hiliteForm.getValue("textColor"),_4=this.hiliteForm.getValue("backgroundColor"),_5=this.clause.getCriterion();if(!_5&&!_2&&!_3&&!_4){return null}
if(_5&&!_5._constructor)_5._constructor="AdvancedCriteria";_1.criteria=_5;_1.icon=_2;if(_3!=null||_4!=null)_1.cssText="";if(_3!=null){_1.textColor=_3;_1.cssText+="color:"+_3+";"}
if(_4!=null){_1.backgroundColor=_4;_1.cssText+="background-color:"+_4+";"}
if(this.hilite&&this.hilite.id)_1.id=this.hilite.id;return _1},isc.A.editAdvancedRule=function isc_HiliteRule_editAdvancedRule(){var _1=this.getID()+".editAdvancedRuleReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:isc.AdvancedHiliteEditor.getInstanceProperty("title"),width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,autoSize:true,autoCenter:true,items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",dataSource:this.fieldDataSource?null:this.dataSource,fieldDataSource:this.fieldDataSource,rootDataSource:this.rootDataSource,hilite:this.hilite,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle,callback:_1})]});this.advancedHiliteDialog.show()},isc.A.editAdvancedRuleReply=function isc_HiliteRule_editAdvancedRuleReply(_1){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();if(_1){this.hilite=_1;var _2=isc.DataSource.getAdvancedCriteriaDescription(this.hilite.criteria,this.dataSource);this.advancedClauseLabel.setContents(_2);this.advancedClauseLabel.setPrompt(_2)}});isc.B._maxIndex=isc.C+6;isc.defineClass("HiliteEditor","VLayout");isc.A=isc.HiliteEditor.getPrototype();isc.A.membersMargin=5;isc.A.mainLayoutDefaults={_constructor:"HLayout",membersMargin:5,overflow:"visible"};isc.A.fieldLayoutDefaults={_constructor:"VLayout",autoParent:"mainLayout",width:1,overflow:"visible"};isc.A.fieldListDefaults={_constructor:"ListGrid",height:"*",autoFitData:"both",autoFitMaxWidth:300,autoFitMaxRecords:5,selectionType:"none",showRollOver:true,width:1,autoFitFieldWidths:true,autoFitWidthApproach:"both",autoFitExpandField:"title",autoParent:"fieldLayout",showHoverComponents:true,detailField:"prompt",hoverMode:"detailField",canHover:true,recordClick:function(_1,_2){this.creator.addRule(_2)}};isc.A.availableFieldsColumnTitle="Available Fields";isc.A.ruleLayoutDefaults={_constructor:"VLayout",membersMargin:1,padding:1,overflow:"auto",autoParent:"mainLayout"};isc.A.hiliteRuleDefaults={_constructor:"HiliteRule"};isc.A.hiliteButtonsDefaults={layoutAlign:"right",_constructor:"HLayout",membersMargin:8,height:1};isc.A.hiliteButtonsSpacerDefaults={_constructor:"LayoutSpacer",width:"*",autoParent:"hiliteButtons"};isc.A.addAdvancedRuleButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",align:"center",height:22,click:function(){this.creator.addAdvancedRule()}};isc.A.addAdvancedRuleButtonTitle="Add Advanced Rule";isc.A.saveButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.saveHilites()}};isc.A.saveButtonTitle="Save";isc.A.cancelButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.completeEditing()}};isc.A.cancelButtonTitle="Cancel";isc.A.defaultWidth=900;isc.A.defaultHeight=300;isc.A=isc.HiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_HiliteEditor_initWidget(){this.Super("initWidget",arguments);if(isc.Browser.isDesktop){this.addAutoChildren(["mainLayout","fieldLayout"]);this.addAutoChild("fieldList",{fields:[{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle}]})}else{var _1=this,_2=isc.addProperties({showFilterEditor:true},this.fieldListProperties,this.fieldListDefaults,{recordClick:function(_3,_4){_1.addRule(_4);this.hide()}});this.fieldList=isc.DynamicForm.create({fields:[{name:"fieldList",showTitle:false,type:"SelectItem",pickListProperties:_2}]});this.addMember(this.fieldList);this.addAutoChildren(["mainLayout","fieldLayout"])}
this.addAutoChildren(["ruleLayout","hiliteButtons","hiliteButtonsSpacer"]);this.addAutoChild("addAdvancedRuleButton",{title:this.addAdvancedRuleButtonTitle});this.addAutoChild("saveButton",{title:this.saveButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.setDataSource(this.dataSource);this.setHilites(this.hilites)},isc.A.setHiliteIcons=function isc_HiliteEditor_setHiliteIcons(_1){this.hiliteIcons=_1},isc.A.setDataSource=function isc_HiliteEditor_setDataSource(_1){this.dataSource=_1;if(this.fieldDataSource&&!this.fieldDataSource.$1137){this.setupFieldList()}else if(this.dataSource){this.getClientOnlyFieldDS()}else{this.logWarn("No DataSource present, can't edit hilites")}
this.fieldList.markForRedraw()},isc.A.setFieldDataSource=function isc_HiliteEditor_setFieldDataSource(_1){this.fieldDataSource=_1;this.setupFieldList()},isc.A.setupFieldList=function isc_HiliteEditor_setupFieldList(){var _1=this.fieldList;var _2=[{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle},{name:"type",showIf:"false"},{name:"showInSimpleEditor",showIf:"false"}];if(isc.ListGrid.isA(_1)){_1.showFilterEditor=true;_1.setDataSource(this.fieldDataSource);_1.setFields(_2)}else{_1=this.fieldList.getField("fieldList");_1.setOptionDataSource(this.fieldDataSource);_1.pickListFields=_2}
var _3={_constructor:"AdvancedCriteria",operator:"or",criteria:[{fieldName:"showInSimpleEditor",operator:"equals",value:true},{fieldName:"showInSimpleEditor",operator:"isNull"}]};_1.fetchData(_3)},isc.A.getClientOnlyFieldDS=function isc_HiliteEditor_getClientOnlyFieldDS(){var _1=isc.getValues(this.dataSource.getFields());var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(!_4.hidden&&_4.canHilite!=false&&this.dataSource.fields[_4.name]!=null)
{if(_4.summaryTitle!=null){_4=isc.addProperties({},_4,{title:_4.summaryTitle})}
_2.add(_4)}}
this.fieldDataSource=isc.DataSource.create({$1137:true,isClientOnlyFieldDS:true,fields:[{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle},{name:"type",showIf:"false"},{name:"showInSimpleEditor",type:"boolean",showIf:"false"}],cacheData:_2,clientOnly:true});this.setupFieldList()},isc.A.addRule=function isc_HiliteEditor_addRule(_1){var _2=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,width:"100%",fieldName:_1.dataPath||_1.name,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,hiliteIcons:this.hiliteIcons});this.showNewHilite(_2)},isc.A.removeRule=function isc_HiliteEditor_removeRule(_1){if(isc.isA.Number(_1))_1=this.ruleLayout.getMember(_1);if(!isc.isA.HiliteRule(_1))return;this.ruleLayout.members.remove(_1);_1.destroy()},isc.A.showNewHilite=function isc_HiliteEditor_showNewHilite(_1){this.ruleLayout.addMember(_1)},isc.A.addAdvancedRule=function isc_HiliteEditor_addAdvancedRule(){var _1=this.getID()+".addAdvancedRuleReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:isc.AdvancedHiliteEditor.getInstanceProperty("title"),width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,canDragResize:true,autoSize:true,autoCenter:true,items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",rootDataSource:this.rootDataSource,dataSource:this.fieldDataSource&&!this.fieldDataSource.$1137?null:this.dataSource,fieldDataSource:this.fieldDataSource,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle,callback:_1})]});this.advancedHiliteDialog.show()},isc.A.addAdvancedRuleReply=function isc_HiliteEditor_addAdvancedRuleReply(_1){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();if(!_1)return;var _2=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,width:"100%",isAdvanced:true,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,fieldName:_1.fieldName,hilite:_1,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle});this.showNewHilite(_2)},isc.A.clearHilites=function isc_HiliteEditor_clearHilites(){for(var i=this.ruleLayout.members.length-1;i>=0;i--)
this.removeRule(this.ruleLayout.getMember(i))},isc.A.setHilites=function isc_HiliteEditor_setHilites(_1){_1=this.hilites=_1||[];this.$1138=this.hilites.duplicate();for(var i=0;i<_1.length;i++){var _3=_1[i],_4=_3.cssText?_3.cssText.replaceAll(" ",""):null,_5=_4?_4.split(";"):[""],_6=_3.textColor,_7=_3.backgroundColor;if(_4){for(var j=0;j<_5.length;j++){var _9=_5[j],_10=_9&&_9.length>0?_9.split(":"):[];if(_10&&_10[0]=="background-color"&&!_7){_3.backgroundColor=_10[1]}
if(_10&&_10[0]=="color"&&!_6){_3.textColor=_10[1]}}}
var _11=false;if(this.dataSource){var _12=isc.DataSource.getCriterionDescription(_3.criteria,this.dataSource);_11=_12.contains(isc.FilterBuilder.missingFieldPrompt)}
var _13=(_3.canEdit!=false||this.creator.editingOn);var _14=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,fieldName:_3.fieldName,hilite:_3,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,missingField:_11,hiliteIcons:this.hiliteIcons,showRemoveButton:_13});if(!_13)_14.disable();this.showNewHilite(_14)}},isc.A.saveHilites=function isc_HiliteEditor_saveHilites(_1){var _2=this.getHilites();if((!_2||_2.length==0)&&(!this.$1138||this.$1138.length==0))return;this.completeEditing(_2)},isc.A.getHilites=function isc_HiliteEditor_getHilites(){var _1=this.ruleLayout.members,_2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.getHilite();if(_5==null)continue;_2.add(_5)}
return _2},isc.A.getHiliteState=function isc_HiliteEditor_getHiliteState(){var _1=this.getHilites();if(_1==null||_1.length==0)return null;return"("+isc.JSON.encode(_1,{dateFormat:"logicalDateConstructor"})+")"},isc.A.completeEditing=function isc_HiliteEditor_completeEditing(_1){if(this.logIsInfoEnabled())this.logInfo("returning hilites: "+isc.echoFull(_1));if(this.callback)this.fireCallback(this.callback,"hilites",[_1])});isc.B._maxIndex=isc.C+17;isc.defineClass("AdvancedHiliteEditor","VStack");isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.A.padding=10;isc.A.membersMargin=10;isc.A.filterBuilderDefaults={_constructor:"FilterBuilder",isGroup:true,padding:8,maxHeight:200,overflow:"visible"};isc.A.filterGroupTitle="Filter";isc.A.hiliteFormDefaults={_constructor:"DynamicForm",isGroup:true,extraSpace:4,padding:8,width:"100%",numCols:8,colWidths:[200,150,100,150,100,150,40,50]};isc.A.appearanceGroupTitle="Appearance";isc.A.targetFieldsItemTitle="Target Field(s)";isc.A.hiliteButtonsDefaults={_constructor:isc.HLayout,membersMargin:8,height:1};isc.A.hiliteButtonsSpacerDefaults={_constructor:"LayoutSpacer",width:"*",autoParent:"hiliteButtons"};isc.A.saveButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.saveHilite()}};isc.A.saveButtonTitle="Save";isc.A.cancelButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.cancelEditing()}};isc.A.cancelButtonTitle="Cancel";isc.A.defaultWidth=900;isc.A.defaultHeight=600;isc.A.visibilityMode="multiple";isc.A.invalidHilitePrompt="Enter at least one rule, a color or icon, and a target field, or press 'Cancel' to abandon changes.";isc.A.title="Advanced Highlight Editor";isc.A.iconFieldDefaults=isc.HiliteRule.getInstanceProperty("iconFieldDefaults");isc.defer("isc.AdvancedHiliteEditor.addProperties({foregroundColorTitle: isc.HiliteRule.getInstanceProperty('foregroundColorTitle'),backgroundColorTitle: isc.HiliteRule.getInstanceProperty('backgroundColorTitle'),iconFieldTitle: isc.HiliteRule.getInstanceProperty('iconFieldTitle')})");isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_AdvancedHiliteEditor_initWidget(){this.Super("initWidget",arguments);var _1=this.getDataSource(),_2=this;this.addAutoChild("filterBuilder",{groupTitle:this.filterGroupTitle,dataSource:_1,fieldDataSource:this.fieldDataSource,inheritedClauseProperties:{rootDataSource:this.rootDataSource,getDefaultOptionDataSource:function(_12){if(this.rootDataSource){return this.rootDataSource}
var _1=this.Super("getDefaultOptionDataSource",arguments);if(_1&&_1.isHiliteCriteriaDS)return null;return _1}},fieldNameChanged:function(_14){this.Super("fieldNameChanged",arguments);_2.fieldChosen(_14.getFieldName(true))}});var _3=isc.addProperties({},this.iconFieldDefaults,this.iconFieldProperties,{name:"icon",title:this.iconFieldTitle});if(this.hiliteIcons){this.hiliteIcons.map(function(_4){_3.disabled=false;_3.valueMap[_4]="";_3.valueIcons[_4]=_4})}
var _4=this.hilite?this.hilite.icon:null;if(_4&&!_3.valueMap[_4]){_3.disabled=false;_3.valueMap[_4]="";_3.valueIcons[_4]=_4}
var _5=[{title:this.targetFieldsItemTitle,name:"fieldName",multiple:true,allowMultiSelect:true,type:"select"},{title:this.foregroundColorTitle,name:"textColor",type:"color"},{title:this.backgroundColorTitle,name:"backgroundColor",type:"color"},_3];var _6={groupTitle:this.appearanceGroupTitle};if(this.hiliteCanReplaceValue){_6.numCols=10;_6.colWidths=[200,150,100,150,150,150,100,150,40,50];if(this.hiliteReplaceValueFieldTitle==null){this.hiliteReplaceValueFieldTitle=isc.ListGrid.getInstanceProperty("hiliteReplaceValueFieldTitle")}
_5.addAt({title:this.hiliteReplaceValueFieldTitle,name:"replacementValue",type:"text"},2)}
var _7=this.addAutoChild("hiliteForm",_6);this.iconField=_7.getField("icon");if(this.fieldDataSource){_5[0]=isc.addProperties({},_5[0],{valueField:"name",displayField:"title",optionDataSource:this.fieldDataSource,optionCriteria:{_constructor:"AdvancedCriteria",operator:"or",criteria:[{fieldName:"showInSimpleEditor",operator:"equals",value:true},{fieldName:"showInSimpleEditor",operator:"isNull"}]}});delete _5[0].defaultDynamicValue;this.hiliteForm.addItems(_5)}else{var _8=this.fieldNames||_1.getFieldNames(),_9=this.fieldMap={};for(var i=0;i<_8.length;i++){var _11=_8[i],_12=_1.getField(_11),_13=_12.title;if(_12.hidden)continue;_13=_13?_13:_11;_9[_11]=_13}
this.fieldMap=_9;_5[0].valueMap=_9;this.hiliteForm.addItems(_5)}
this.addAutoChildren(["hiliteButtons","hiliteButtonsSpacer"]);this.addAutoChild("saveButton",{title:this.saveButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.addMembers([this.filterBuilder,this.hiliteForm,this.hiliteButtons]);if(this.hilite!=null){this.filterBuilder.setCriteria(this.hilite.criteria);this.hiliteForm.editRecord(this.hilite)}},isc.A.fieldChosen=function isc_AdvancedHiliteEditor_fieldChosen(_1){if(_1&&this.hiliteForm.getValue("fieldName")==null){this.hiliteForm.setValue("fieldName",_1)}},isc.A.saveHilite=function isc_AdvancedHiliteEditor_saveHilite(){this.hiliteForm.setValue("criteria",this.filterBuilder.getCriteria());var _1=this.hiliteForm.getValues();if(_1.criteria.criteria==null||_1.criteria.criteria.length==0||(!_1.textColor&&!_1.backgroundColor&&!_1.icon&&!_1.replacementValue)||_1.fieldName==null)
{isc.say(this.invalidHilitePrompt);return}
var _2="";if(_1.textColor&&_1.textColor!=""){_2+="color:"+_1.textColor+";"}
if(_1.backgroundColor&&_1.backgroundColor!=""){_2+="background-color:"+_1.backgroundColor+";"}
_1.cssText=_2;if(this.hilite&&this.hilite.id)_1.id=this.hilite.id;this.completeEditing(_1)},isc.A.cancelEditing=function isc_AdvancedHiliteEditor_cancelEditing(){this.completeEditing(null)},isc.A.completeEditing=function isc_AdvancedHiliteEditor_completeEditing(_1){if(this.callback)this.fireCallback(this.callback,["hilite"],[_1])});isc.B._maxIndex=isc.C+5;isc.defineClass("MultiGroupPanel","Layout");isc.A=isc.MultiGroupPanel.getPrototype();isc.A.vertical=true;isc.A.overflow="visible";isc.A.addLevelButtonTitle="Add Level";isc.A.deleteLevelButtonTitle="Delete Level";isc.A.copyLevelButtonTitle="Copy Level";isc.A.invalidListPrompt="Columns may only be used once: '${title}' is used multiple times.";isc.A.propertyFieldTitle="Column";isc.A.groupingFieldTitle="Grouping";isc.A.firstGroupLevelTitle="Group by";isc.A.otherGroupLevelTitle="Then by";isc.A.topLayoutDefaults={_constructor:"HLayout",overflow:"visible",height:22,align:"left",membersMargin:5,extraSpace:5};isc.A.addLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/add.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.addLevel()"};isc.A.deleteLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/remove.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.deleteSelectedLevel()"};isc.A.copyLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]RichTextEditor/copy.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.copySelectedLevel()"};isc.A.levelUpButtonTitle="Move Level Up";isc.A.levelUpButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]TransferIcons/up.png",height:22,width:24,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelUp()"};isc.A.levelDownButtonTitle="Move Level Down";isc.A.levelDownButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]TransferIcons/down.png",height:22,width:24,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelDown()"};isc.A.optionsGridDefaults={_constructor:"ListGrid",width:"100%",height:"*",canSort:false,canReorderFields:false,canResizeFields:false,canEdit:true,canEditNew:true,selectionType:"single",selectionProperty:"$36p",canEditCell:function(_1,_2){var _3=this.getRecord(_1);if(_2==2){if(!this.creator.verifyGroupingModeAvailableField(_3,_1))return false}
return this.Super("canEditCell",arguments)},recordDoubleClick:function(_1,_2,_3,_4,_5,_6,_7){this.creator.getGroupingModeAvailableField(_2,_3)},defaultFields:[{name:"groupSequence",title:"&nbsp;",showTitle:false,canEdit:false,width:80,canHide:false,showDefaultContextMenu:false,formatCellValue:function(_1,_2,_3,_4,_5){return _3==0?_5.creator.firstGroupLevelTitle:_5.creator.otherGroupLevelTitle}},{name:"property",title:" ",type:"select",defaultToFirstOption:true,showDefaultContextMenu:false,changed:"item.grid.creator.getGroupingModeAvailableField(null, null)"},{name:"grouping",title:" ",width:100,showDefaultContextMenu:false,defaultToFirstOption:true,type:"text",editorType:"select",displayField:"groupingTitle",changed:function(_1,_2,_3){var _4=_2.valueMap||_2.editorValueMap;_1.setValue("groupingTitle",_4[_3])}},{name:"groupingTitle",showIf:"false",showDefaultContextMenu:false}],recordClick:function(_1,_2,_3){this.creator.setButtonStates()},bodyKeyPress:function(_1){if(_1.keyName=="Delete"&&this.anySelected())this.removeSelectedData();else this.Super("bodyKeyPress",arguments)},extraSpace:5};isc.A.propertyFieldNum=1;isc.A.directionFieldNum=2;isc.A.topAutoChildren=["topLayout","addLevelButton","deleteLevelButton","copyLevelButton"];isc.A=isc.MultiGroupPanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getNumLevels=function isc_MultiGroupPanel_getNumLevels(){return this.optionsGrid.data.length},isc.A.getGroup=function isc_MultiGroupPanel_getGroup(){var _1=this.optionsGrid,_2=_1.data.duplicate(),_3=_1.getEditRow(),_4=isc.isA.Number(_3)?_1.getEditValues(_3):null;if(_4)_2[_3]=isc.addProperties(_2[_3],_4);return this.getGroupSpecifiers(_2)},isc.A.validate=function isc_MultiGroupPanel_validate(){var _1=this.optionsGrid,_2=_1.data,_3=[];for(var i=0;i<_2.length;i++){var _5=_2.get(i);if(_3.contains(_5.property)){var _6=this,_7=this.optionsGrid.getField("property").valueMap[_5.property],_8=this.invalidListPrompt.evalDynamicString(this,{title:_7});isc.warn(_8,function(){_6.recordFailedValidation(_5,i)});return false}
_3.add(_5.property)}
return true},isc.A.recordFailedValidation=function isc_MultiGroupPanel_recordFailedValidation(_1){var _2=this.optionsGrid,_3=(isc.isA.Number(_1)?_1:_2.getRecordIndex(_1)),_1=(!isc.isA.Number(_1)?_1:_2.data.get(_1));_2.selectSingleRecord(_1);_2.startEditing(_3,1)},isc.A.getGroupSpecifiers=function isc_MultiGroupPanel_getGroupSpecifiers(_1){return this.optionsGrid.removeSelectionMarkers(_1)},isc.A.setInitialGrouping=function isc_MultiGroupPanel_setInitialGrouping(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3.grouping||_3.groupingMode){var _4=this.fields.find("name",_3.property),_5=this.$1139(_4)||{};_3.groupingTitle=_5[_3.grouping||_3.groupingMode]}}
this.optionsGrid.setData(_1)},isc.A.initWidget=function isc_MultiGroupPanel_initWidget(){this.Super("initWidget",arguments);this.$36q=this.maxLevels;this.addAutoChildren(this.topAutoChildren);this.addAutoChild("levelUpButton",{prompt:this.levelUpButtonTitle});this.addAutoChild("levelDownButton",{prompt:this.levelDownButtonTitle});this.addAutoChild("optionsGrid");this.setGroupFields();this.setGroupingMode();this.setButtonTitles();this.addMember(this.topLayout);this.addMember(this.optionsGrid);this.setButtonStates();if(this.initialGrouping)this.setInitialGrouping(this.initialGrouping);else this.addLevel()},isc.A.setButtonTitles=function isc_MultiGroupPanel_setButtonTitles(_1){if(this.addLevelButton)this.addLevelButton.setTitle(this.addLevelButtonTitle);if(this.deleteLevelButton)this.deleteLevelButton.setTitle(this.deleteLevelButtonTitle);if(this.copyLevelButton)this.copyLevelButton.setTitle(this.copyLevelButtonTitle)},isc.A.setButtonStates=function isc_MultiGroupPanel_setButtonStates(){var _1=this.getNumLevels(),_2=this.maxLevels,_3=this.optionsGrid,_4=_3.anySelected(),_5=_3.getRecordIndex(_3.getSelectedRecord());if(this.addLevelButton)this.addLevelButton.setDisabled(_1>=_2);if(this.deleteLevelButton)this.deleteLevelButton.setDisabled(!_4);if(this.copyLevelButton)this.copyLevelButton.setDisabled(!_4||_1>=_2);if(this.levelUpButton)this.levelUpButton.setDisabled(!_4||_5==0);if(this.levelDownButton)this.levelDownButton.setDisabled(!_4||_5==_1-1)},isc.A.setFields=function isc_MultiGroupPanel_setFields(_1){if(isc.DataSource&&isc.isA.DataSource(_1))_1=isc.getValues(_1.getFields());this.fields=_1;this.setGroupFields();this.optionsGrid.refreshFields();this.setButtonStates()},isc.A.setGroupFields=function isc_MultiGroupPanel_setGroupFields(){var _1=[];this.optionsGrid.getField("property").title=this.propertyFieldTitle;if(!this.fields)return;for(var i=0;i<this.fields.length;i++){var _3=this.fields[i];if(this.optionsGrid.$107k(_3))_1.add(_3)}
this.fields=_1;var _4=this.optionsGrid,_5=this.fields?this.fields.getValueMap(_4.fieldIdProperty,"title"):{none:"No fields"},_6=isc.getKeys(_5).length;for(var _7 in _5){if(isc.DataSource&&(!_5[_7]||isc.isAn.emptyString(_5[_7])))
_5[_7]=isc.DataSource.getAutoTitle(_7)}
this.optionsGrid.setValueMap("property",_5);if(!this.$36q||this.maxLevels>_6)this.maxLevels=_6},isc.A.setGroupingMode=function isc_MultiGroupPanel_setGroupingMode(){var _1=this.optionsGrid.getField("grouping");_1.title=this.groupingFieldTitle;_1.valueMap=this.getGroupingModeFirstItem()},isc.A.getGroupingModeFirstItem=function isc_MultiGroupPanel_getGroupingModeFirstItem(){var _1=this.optionsGrid.getField("grouping");var _2=this.fields[0],_3=this.$1139(_2);_1.editorValueMap=this.$1139(_2)},isc.A.$1139=function isc_MultiGroupPanel__getFieldGroupingModes(_1){if(!_1)return;if(!this.$114a)this.$114a={};var _2=this.$114a[_1.name];if(!_2){_2=_1.groupingModes?_1.groupingModes:(!_1.getGroupValue?(_1.$31u?(_1.$31u.getGroupingModes?_1.$31u.getGroupingModes():_1.$31u.groupingModes):false):false);this.$114a[_1.name]=_2}
return _2},isc.A.getGroupingModeAvailableField=function isc_MultiGroupPanel_getGroupingModeAvailableField(_1,_2){var _3=this.optionsGrid,_4=_3.getEditRow(),_5=isc.isA.Number(_4)?_3.getEditValues(_4):null;var _6=(_2==null)?_4:_2;var _7=(_1==null)?_5.property:_1.property;for(var i=0;i<this.fields.length;i++){var _9=this.fields[i];if(_7==_9.name){var _10=this.$1139(_9);if(_10!=null){_3.setValueMap("grouping",_10);if(_2==null){if(_9.groupingMode!=null){_3.setEditValue(_6,2,_9.groupingMode)}else if(_9.defaultGroupingMode!=null){_3.setEditValue(_6,2,_9.defaultGroupingMode)}else{_3.setEditValue(_6,2,_10[0])}
_3.refreshCell(_6,2)}}else{_3.setEditorValueMap("grouping",null);_3.setEditValue(_6,2,null);_3.refreshCell(_6,2)}
break}}},isc.A.verifyGroupingModeAvailableField=function isc_MultiGroupPanel_verifyGroupingModeAvailableField(_1,_2){var _3=this.optionsGrid,_4=isc.isA.Number(_2)?_3.getEditValues(_2):null;var _5=(typeof _4.property==='undefined')?_1.property:_4.property;for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(_5==_7.name){var _8=this.$1139(_7);if(_8!=null){var _9=isc.getKeys(_8).length;if(_9==1){return false}else{return true}}else{return false}}}
return true},isc.A.addLevel=function isc_MultiGroupPanel_addLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord()),_3=_1.getField("property"),_4=_2>=0?_2+1:_1.data.length,_5={property:isc.firstKey(_3.valueMap)};_1.data.addAt(_5,_4);this.editRecord(_4);this.setButtonStates();this.fireChangeEvent();this.getGroupingModeAvailableField(_5,null)},isc.A.deleteSelectedLevel=function isc_MultiGroupPanel_deleteSelectedLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0){_1.data.removeAt(_2);this.setButtonStates();this.fireChangeEvent()}},isc.A.copySelectedLevel=function isc_MultiGroupPanel_copySelectedLevel(){var _1=this.optionsGrid,_2=_1.getEditRow(),_3=_1.getRecordIndex(_1.getSelectedRecord()),_4=isc.shallowClone(_1.getRecord(_3));if(_3>=0){_1.data.addAt(_4,_3+1);this.editRecord(_3+1);this.setButtonStates();this.fireChangeEvent();this.getGroupingModeAvailableField(_4,null);_1.setEditValue(_3+1,2,_4.grouping);_1.refreshCell(_3+1,2)}},isc.A.editRecord=function isc_MultiGroupPanel_editRecord(_1){this.optionsGrid.selectSingleRecord(_1);this.optionsGrid.startEditing(_1,this.propertyFieldNum)},isc.A.moveSelectedLevelUp=function isc_MultiGroupPanel_moveSelectedLevelUp(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>0){_1.data.slide(_2,_2-1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2-1)}},isc.A.moveSelectedLevelDown=function isc_MultiGroupPanel_moveSelectedLevelDown(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0&&_2<_1.data.length-1){_1.data.slide(_2,_2+1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2+1)}},isc.A.fireChangeEvent=function isc_MultiGroupPanel_fireChangeEvent(){this.groupChanged(isc.shallowClone(this.getGroup()))},isc.A.groupChanged=function isc_MultiGroupPanel_groupChanged(_1){});isc.B._maxIndex=isc.C+24;isc.defineClass("MultiGroupDialog","Window");isc.A=isc.MultiGroupDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForGrouping=function isc_c_MultiGroupDialog_askForGrouping(_1,_2,_3){var _4=isc.isAn.Array(_1)?_1:isc.DataSource&&isc.isA.DataSource(_1)?isc.getValues(_1.getFields()):isc.isA.DataBoundComponent(_1)?_1.getFields():null;if(!_4)return;var _5=[];if((typeof _2==='undefined')||(_2==null)){_5=_2}else{for(var i=0;i<_2.length;i++){var _7=_2[i];for(var _8=0;_8<_4.length;_8++){var _9=_4[_8];if(_7==_9.name){var _10={property:_9.name,grouping:_9.groupingMode};_5.add(_10)}}}}
var _11={autoDraw:true,fields:_4,initialGrouping:_5,callback:_3};isc.MultiGroupDialog.create(_11)});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiGroupDialog.getPrototype();isc.A.isModal=true;isc.A.width=500;isc.A.height=250;isc.A.vertical=true;isc.A.autoCenter=true;isc.A.showMinimizeButton=false;isc.A.mainLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%",layoutMargin:5};isc.A.multiGroupPanelDefaults={_constructor:"MultiGroupPanel",width:"100%",height:"*",autoParent:"mainLayout"};isc.A.title="Group";isc.A.applyButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.bottomLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.applyButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.apply()"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.cancel()"};isc.A.bottomAutoChildren=["bottomLayout","applyButton","cancelButton"];isc.A=isc.MultiGroupDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$36r=["fields","initialGrouping","maxLevels","invalidListPrompt","addLevelButtonTitle","addLevelButtonDefaults","addLevelButtonProperties","deleteLevelButtonTitle","deleteLevelButtonDefaults","deleteLevelButtonProperties","levelUpButtonTitle","levelDownButtonTitle","copyLevelButtonTitle","copyLevelButtonDefaults","copyLevelButtonProperties","optionsGridDefaults","optionsGridProperties","firstGroupLevelTitle","propertyFieldTitle","groupingFieldTitle","otherGroupLevelTitle"];isc.A.$114b=["addLevelButtonTitle","deleteLevelButtonTitle","levelUpButtonTitle","levelDownButtonTitle","copyLevelButtonTitle","firstGroupLevelTitle","propertyFieldTitle","groupingFieldTitle","otherGroupLevelTitle","invalidListPrompt"];isc.A.$114c=["applyButtonTitle","cancelButtonTitle","title"];isc.B.push(isc.A.initWidget=function isc_MultiGroupDialog_initWidget(){this.Super("initWidget",arguments);this.copyUnsetProperties();this.addAutoChild("mainLayout");this.addAutoChild("multiGroupPanel",this.getPassthroughProperties());this.addAutoChildren(this.bottomAutoChildren);this.addItem(this.mainLayout);this.optionsGrid=this.multiGroupPanel.optionsGrid;this.setButtonStates()},isc.A.getPassthroughProperties=function isc_MultiGroupDialog_getPassthroughProperties(){var _1=this.$36r,_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(this[_4]!=null)_2[_4]=this[_4]}
return _2},isc.A.copyUnsetProperties=function isc_MultiGroupDialog_copyUnsetProperties(){var _1=this.$114b,_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.MultiGroupPanel.getInstanceProperty(_4)==null){_2[_4]=isc.MultiSortPanel.getInstanceProperty(_4)}}
isc.MultiGroupPanel.addProperties(_2);_1=this.$114c;_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.MultiGroupDialog.getInstanceProperty(_4)==null){_2[_4]=isc.MultiSortDialog.getInstanceProperty(_4)}}
isc.MultiGroupDialog.addProperties(_2)},isc.A.setButtonStates=function isc_MultiGroupDialog_setButtonStates(){this.multiGroupPanel.setButtonStates();this.applyButton.setTitle(this.applyButtonTitle);this.cancelButton.setTitle(this.cancelButtonTitle)},isc.A.getNumLevels=function isc_MultiGroupDialog_getNumLevels(){return this.multiGroupPanel.getNumLevels()},isc.A.getGroup=function isc_MultiGroupDialog_getGroup(){return this.multiGroupPanel.getGroup()},isc.A.validate=function isc_MultiGroupDialog_validate(){return this.multiGroupPanel.validate()},isc.A.closeClick=function isc_MultiGroupDialog_closeClick(){this.cancel();return false},isc.A.cancel=function isc_MultiGroupDialog_cancel(){this.hide();this.markForDestroy()},isc.A.apply=function isc_MultiGroupDialog_apply(){if(this.optionsGrid.getEditRow()!=null)this.optionsGrid.endEditing();if(!this.validate())return;if(this.callback){var _1=isc.shallowClone(this.getGroup());this.fireCallback(this.callback,"grouping",[_1])}
this.hide();this.markForDestroy()});isc.B._maxIndex=isc.C+10;isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Grids');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Grids_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Grids module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;if(isc.Page)isc.Page.handleEvent(null,"moduleLoaded",{moduleName:'Grids',loadTime:(isc._moduleEnd-isc._moduleStart)});}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Grids'.");}
